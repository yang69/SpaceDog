<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>We Are Bug</title>
    <url>/story/we-are-bug/</url>
    <content><![CDATA[<p>We are the Bug. Minimize your google and close your IDE. We will add your biological and technological flaws to our own. Your code will adapt to service us. Code review is futile.</p>
]]></content>
      <categories>
        <category>story</category>
      </categories>
      <tags>
        <tag>story</tag>
      </tags>
  </entry>
  <entry>
    <title>slf4j 概述</title>
    <url>/language/java/log/slf4j/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>slf4j 代表 Simple Logging Facade for Java ，是 Java 上的日志门面。slf4j 是多种日志框架的简单门面和抽象，使得用户可以在部署的时候才选择期望的日志框架。</p>
<a id="more"></a>

<p>slf4j 将日志的 API 和日志的实现分离。便于随时替换日志框架，而不用修改现有的日志代码。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>使用 slf4j 作为日志系统时，应用代码仅依赖 slf4j-api 。slf4j 会在启动时查找绑定的具体日志框架，如果未绑定任何具体的日志框架，slf4j 默认没有任何操作（等价于一个无操作的实现）。</p>
<p>如果你的代码已经使用了具体日志框架的 API ，可以通过<a href="http://www.slf4j.org/migrator.html" target="_blank" rel="noopener">迁移工具</a>在几分钟内迁移到 slf4j 。</p>
<h4 id="版本变更"><a href="#版本变更" class="headerlink" title="版本变更"></a>版本变更</h4><p>1.6.0 提供了 class path 中找不到绑定的日志框架时，默认无操作<br>1.7.0 提供了可变参数列表，因此需要 jdk 1.5 及以上<br>2.0.0 要求 Java8 以上，提供了后向兼容的流式 API</p>
<h4 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h4><p>编写测试类 HelloWorld.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = LoggerFactory.getLogger(HelloWorld<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        logger.info(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将 slf4j-api-1.7.28.jar 放入 class path 中，编译运行 HelloWorld.java ，输出为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:&#x2F;&#x2F;www.slf4j.org&#x2F;codes.html#StaticLoggerBinder for further details.</span><br></pre></td></tr></table></figure>

<p>可以看到，slf4j 在没有指定具体的日志框架时，会默认使用一个 NOP（无操作） 的实现。</p>
<p>只要我们指定具体的日志框架，以上警告信息就会消失。试着把 slf4j-simple-1.7.28.jar 也放到 class path 中，再次运行 HelloWorld.java 。屏幕的输出变为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 [main] INFO HelloWorld - Hello World.</span><br></pre></td></tr></table></figure>

<p>“{}” 在 slf4j 中表示占位符，会在打印日志时，替换成传入参数的值。</p>
<p>MDC 是 slf4j 中用来保存键值对，以便在打印日志时使用的机制。当前只有 log4j 和 logback 支持。</p>
<h4 id="支持的日志框架"><a href="#支持的日志框架" class="headerlink" title="支持的日志框架"></a>支持的日志框架</h4><table>
<thead>
<tr>
<th>日志框架</th>
<th>依赖</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>log4j 1.2</td>
<td>slf4j-log4j12</td>
<td>log4j，需要同时依赖 log4j</td>
</tr>
<tr>
<td>java.util.logging</td>
<td>slf4j-jdk14</td>
<td>JDK 1.4 日志，不需要再依赖其他 jar 包</td>
</tr>
<tr>
<td>NOP</td>
<td>slf4j-nop</td>
<td>无绑定时的默认实现，丢弃所有日志</td>
</tr>
<tr>
<td>简单实现</td>
<td>slf4j-simple</td>
<td>将所有日志输出到 System.err ， INFO 级别及以上的日志才会输出</td>
</tr>
<tr>
<td>Jakarta Commons Logging</td>
<td>slf4j-jcl</td>
<td></td>
</tr>
<tr>
<td>logback</td>
<td>logback-classic</td>
<td>是 slf4j 的原生实现，logback 的  ch.qos.logback.classic.Logger 是对 slf4j 的 org.slf4j.Logger接口的直接实现。所以使用 logback 作为 slf4j 的实现时，没有任何多的内存和计算开销。</td>
</tr>
</tbody></table>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>slf4j 有三层设计：</p>
<ol>
<li>应用代码依赖 slf4j-api</li>
<li>slf4j-api 通过绑定找到具体的日志框架（比如 slf4j-log4j12）。</li>
<li>对于已有代码，通过桥接器将对具体日志框架A的调用翻译到 slf4j 上，再由 slf4j 转交给具体日志框架B处理</li>
</ol>
<p>jcl-over-slf4j 将对 Jakarta Commons Logging 的调用桥接到 slf4j 上；<br>log4j-over-slf4j 将对 log4j 的调用桥接到 slf4j 上；<br>jul-to-slf4j 将对 java.util.logging 的调用桥接到 slf4j 上。</p>
<p>桥接器的本意是给已经依赖具体日志框架的代码作临时过渡使用的。通过使用桥接器，将历史代码对具体日志框架的依赖转移到对应桥接器的依赖上。方便替换底层的日志框架。应用应当逐渐将对具体日志框架的调用，迁移到 slf4j-api 上。这可以通过 slf4j 迁移工具实现。<br>需要万分小心的是，不能同时存在桥接器以及配套的绑定器。<br>比如，当同时存在 log4j-over-slf4j 和 slf4j-log4j12 时。应用将拒绝启动。因为 log4j-over-slf4j 会将对 log4j 的调用转到 slf4j，而 slf4j-log4j12 会将对 slf4j 的调用转给 log4j ，形成了死循环。就好比你找甲帮忙，甲让你找乙，乙又让你找甲，从此无限循环，再也别想搞定了。</p>
<p>这里列举下桥接器和对应的绑定器，注意规避。</p>
<table>
<thead>
<tr>
<th>桥接器</th>
<th>对应的绑定器</th>
</tr>
</thead>
<tbody><tr>
<td>log4j-over-slf4j</td>
<td>slf4j-log4j12</td>
</tr>
<tr>
<td>jcl-over-slf4j</td>
<td>slf4j-jck</td>
</tr>
<tr>
<td>jul-over-slf4j</td>
<td>slf4j-jdk14</td>
</tr>
</tbody></table>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>官网：<a href="http://www.slf4j.org/" target="_blank" rel="noopener">http://www.slf4j.org/</a><br>用户手册：<a href="http://www.slf4j.org/manual.html" target="_blank" rel="noopener">http://www.slf4j.org/manual.html</a><br>slf4j 迁移工具：<a href="http://www.slf4j.org/migrator.html" target="_blank" rel="noopener">http://www.slf4j.org/migrator.html</a></p>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
        <category>log</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title>zsh</title>
    <url>/os/terminal/zsh/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>zsh 是一种 shell。</p>
<a id="more"></a>

<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装 zsh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Debian or Ubuntu like</span></span><br><span class="line">sudo apt install zsh</span><br></pre></td></tr></table></figure>

<p>设置 zsh 为默认 shell</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 不要用 sudo 运行，否则改的是 root 用户的默认 shell</span></span><br><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br></pre></td></tr></table></figure>

<p>安装 oh-my-zsh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>"</span>h</span><br></pre></td></tr></table></figure>

<p>安装 zsh-autosuggestions</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 拉取 zsh-autosuggestions</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br><span class="line"><span class="comment"># 2. 在 ~/.zshrc 中增加插件</span></span><br><span class="line"><span class="comment">#    plugins 列表中增加 zsh-autosuggestions</span></span><br><span class="line">plugins=(git zsh-autosuggestions)</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Oh My ZSH：<a href="https://ohmyz.sh/" target="_blank" rel="noopener">https://ohmyz.sh/</a><br>zsh-autosuggestions：<a href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener">https://github.com/zsh-users/zsh-autosuggestions</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>terminal</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Idea 快捷键 | Idea Shortcuts</title>
    <url>/language/java/ide/idea-shortcuts/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>永远不要记忆快捷键。对于常人而言，快捷键很多时候是一堆无意义的符号。人脑不是计算机，记忆无规则符号不是人脑所擅长的。</p>
<a id="more"></a>

<p>编程，是个持续的思维过程。搞清楚你当前的操作是什么，然后找到对应的快捷键。<br>首先，确保能通过菜单或鼠标，完成你需要进行的操作。当这种操作很频繁的时候，再尝试通过快捷键提升效率。</p>
<p>我推荐安装 Key Promoter X ，会提示你当前操作对应的快捷键。不要花费脑力去记忆快捷键，操作足够频繁的时候，自然而然就记住了。</p>
<p>Everything you try to remeber will fade away, everthing you try to forget will stick in mind.</p>
<h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><p>双击 Shift 可以进行快速查找</p>
<h4 id="浏览快捷键"><a href="#浏览快捷键" class="headerlink" title="浏览快捷键"></a>浏览快捷键</h4><table>
<thead>
<tr>
<th>操作</th>
<th>用法</th>
<th>快捷键 in Windows</th>
<th>快捷键 in Mac</th>
</tr>
</thead>
<tbody><tr>
<td>Go To Class</td>
<td>打开类</td>
<td></td>
<td>Command + O</td>
</tr>
<tr>
<td>Go To File</td>
<td>打开文件</td>
<td></td>
<td>Shift + Command + O</td>
</tr>
<tr>
<td>Context Info</td>
<td>当前上下文</td>
<td></td>
<td>Shift + Ctrl + Q</td>
</tr>
</tbody></table>
<h4 id="编辑快捷键"><a href="#编辑快捷键" class="headerlink" title="编辑快捷键"></a>编辑快捷键</h4><table>
<thead>
<tr>
<th>操作</th>
<th>用法</th>
<th>快捷键 in Windows</th>
<th>快捷键 in Mac</th>
</tr>
</thead>
<tbody><tr>
<td>Move Element Right</td>
<td>将当前参数与右方的参数进行交换</td>
<td>Ctrl + Shift + Alt + →</td>
<td></td>
</tr>
<tr>
<td>Surround With</td>
<td>包围代码</td>
<td></td>
<td>Option + Command + T</td>
</tr>
<tr>
<td>Reformat Code</td>
<td>格式化选中代码</td>
<td></td>
<td>Option + Command + L</td>
</tr>
<tr>
<td>Auto-Indent Lines</td>
<td>自动缩进选中行</td>
<td></td>
<td>Option + Command + I</td>
</tr>
<tr>
<td>Optimize Imports</td>
<td>优化 imports 语句</td>
<td></td>
<td>Option + Command + O</td>
</tr>
</tbody></table>
<h4 id="选择快捷键"><a href="#选择快捷键" class="headerlink" title="选择快捷键"></a>选择快捷键</h4><table>
<thead>
<tr>
<th>操作</th>
<th>用法</th>
<th>快捷键 in Windows</th>
<th>快捷键 in Mac</th>
</tr>
</thead>
<tbody><tr>
<td>Extend Selection</td>
<td>扩大选取范围，变量 -&gt; 语句 -&gt; 当前行 -&gt; 当前代码段 -&gt; 当前方法体 -&gt; 当前方法 -&gt; 当前类体 -&gt; 当前类 -&gt; 当前文件</td>
<td></td>
<td>Option + ↑</td>
</tr>
<tr>
<td>Shrink Selection</td>
<td>缩小选取范围</td>
<td></td>
<td>Option + ↑</td>
</tr>
</tbody></table>
<h4 id="调试快捷键"><a href="#调试快捷键" class="headerlink" title="调试快捷键"></a>调试快捷键</h4><h4 id="版本控制快捷键"><a href="#版本控制快捷键" class="headerlink" title="版本控制快捷键"></a>版本控制快捷键</h4><table>
<thead>
<tr>
<th>操作</th>
<th>用法</th>
<th>快捷键 in Windows</th>
<th>快捷键 in Mac</th>
</tr>
</thead>
<tbody><tr>
<td>Update Project</td>
<td>拉取最新变更, git pull</td>
<td></td>
<td>Command + T</td>
</tr>
<tr>
<td>Commit</td>
<td>git commit</td>
<td></td>
<td>Command + K</td>
</tr>
<tr>
<td>Push</td>
<td>git push</td>
<td></td>
<td>Shift + Command + K</td>
</tr>
<tr>
<td>Commit and Push</td>
<td>提交并推送</td>
<td></td>
<td>Option + Command + K</td>
</tr>
</tbody></table>
<h3 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h3><h4 id="查找快捷键对应的操作"><a href="#查找快捷键对应的操作" class="headerlink" title="查找快捷键对应的操作"></a>查找快捷键对应的操作</h4><img src="/language/java/ide/idea-shortcuts/idea-find-shortcut.png" class="">

<h4 id="处理快捷键冲突"><a href="#处理快捷键冲突" class="headerlink" title="处理快捷键冲突"></a>处理快捷键冲突</h4><p>查找冲突快捷键对应的操作，将不需要的快捷键取消绑定。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3>]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
        <category>ide</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ide</tag>
      </tags>
  </entry>
  <entry>
    <title>终端复用器 tmux</title>
    <url>/os/terminal/tmux/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>tmux 意思是 terminal multiplixerd ，是一个终端复用器。tmux将窗口和会话分离。窗口关闭时，会话可以继续运行。</p>
<a id="more"></a>

<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>tmux 包括三个基本概念：</p>
<ul>
<li>会话 Session</li>
<li>窗口 Window</li>
<li>面板 Pane</li>
</ul>
<p>会话是伪终端的集合，每个面板表示一个伪终端。多个伪终端展现在一个屏幕上，这一屏幕就被叫做窗口。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>tmux 通过前缀键唤醒的方式来响应用户指令。当按下前缀键后，表明接下来的输入送往 tmux 处理。当然，也可以通过直接输入 tmux 命令进行交互。</p>
<p>默认的前缀键是 <code>Ctrl + B</code> ，离的比较远，略显难用。可以考虑配置成其他比较顺手的快捷键。不建议配置成 <code>Ctrl + A</code> ，除非你不需要在 bash 中使用这个快捷键。</p>
<h4 id="会话管理"><a href="#会话管理" class="headerlink" title="会话管理"></a>会话管理</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 新建会话，并将之命名为 session_name</span></span><br><span class="line">tmux new -s &lt;session_name&gt;</span><br><span class="line"><span class="comment"># 分离会话</span></span><br><span class="line">tmux detach</span><br><span class="line"><span class="comment"># 查看所有会话</span></span><br><span class="line">tmux ls <span class="comment"># tmux list-session</span></span><br><span class="line"><span class="comment"># 接入会话</span></span><br><span class="line"><span class="comment">## 使用会话编号</span></span><br><span class="line">tmux attach -t 0</span><br><span class="line"><span class="comment">## 使用会话名称</span></span><br><span class="line">tmux attach -t &lt;session-name&gt;</span><br><span class="line"><span class="comment"># 结束会话</span></span><br><span class="line"><span class="comment">## 使用会话编号</span></span><br><span class="line">tmux <span class="built_in">kill</span>-session -t 0</span><br><span class="line"><span class="comment">## 使用会话名称</span></span><br><span class="line">tmux <span class="built_in">kill</span>-session -t &lt;session-name&gt;</span><br><span class="line"><span class="comment"># 切换会话</span></span><br><span class="line"><span class="comment">## 使用会话编号</span></span><br><span class="line">tmux switch -t 0</span><br><span class="line"><span class="comment">## 使用会话名称</span></span><br><span class="line">tmux switch -t &lt;session-name&gt;</span><br><span class="line"><span class="comment"># 重命名会话</span></span><br><span class="line">tmux rename-session -t 0 &lt;new-name&gt; <span class="comment"># 将0号会话重命名为 new-name</span></span><br></pre></td></tr></table></figure>

<h5 id="会话快捷键"><a href="#会话快捷键" class="headerlink" title="会话快捷键"></a>会话快捷键</h5><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前缀键, d</td>
<td>分离当前会话</td>
</tr>
<tr>
<td>前缀键, s</td>
<td>列出所有会话</td>
</tr>
<tr>
<td>前缀键, $</td>
<td>重命名当前会话</td>
</tr>
</tbody></table>
<h5 id="tmux-最简操作流程"><a href="#tmux-最简操作流程" class="headerlink" title="tmux 最简操作流程"></a>tmux 最简操作流程</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Step 1. 新建会话</span></span><br><span class="line">tmux new -s session_name</span><br><span class="line"><span class="comment"># Step 2. doing something</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># Step 3. 分离会话</span></span><br><span class="line">tmux detach <span class="comment"># 快捷键：前缀键 + d</span></span><br><span class="line"><span class="comment"># Step 4. 重新连接到会话</span></span><br><span class="line">tmux attach-session -t session_name</span><br></pre></td></tr></table></figure>

<h4 id="窗口管理"><a href="#窗口管理" class="headerlink" title="窗口管理"></a>窗口管理</h4><h5 id="新建窗口"><a href="#新建窗口" class="headerlink" title="新建窗口"></a>新建窗口</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 新建窗口</span></span><br><span class="line">tmux new-window</span><br><span class="line"><span class="comment"># 新建一个指定名称的窗口</span></span><br><span class="line">$ tmux new-window -n &lt;window-name&gt;</span><br></pre></td></tr></table></figure>

<h5 id="切换窗口"><a href="#切换窗口" class="headerlink" title="切换窗口"></a>切换窗口</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换到指定编号的窗口</span></span><br><span class="line">tmux select-window -t &lt;window-number&gt;</span><br><span class="line"><span class="comment"># 切换到指定名称的窗口</span></span><br><span class="line">tmux select-window -t &lt;window-name&gt;</span><br></pre></td></tr></table></figure>

<h5 id="重命名窗口"><a href="#重命名窗口" class="headerlink" title="重命名窗口"></a>重命名窗口</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重命名当前窗口</span></span><br><span class="line">tmux rename-window &lt;new-name&gt;</span><br></pre></td></tr></table></figure>

<h5 id="窗口快捷键"><a href="#窗口快捷键" class="headerlink" title="窗口快捷键"></a>窗口快捷键</h5><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前缀键, c</td>
<td>新建窗口</td>
</tr>
<tr>
<td>前缀键, p</td>
<td>切换到上一个窗口</td>
</tr>
<tr>
<td>前缀键, n</td>
<td>切换到下一个窗口</td>
</tr>
<tr>
<td>前缀键, &lt;number&gt;</td>
<td>切换到指定编号的窗口</td>
</tr>
<tr>
<td>前缀键, w</td>
<td>从列表中选择窗口</td>
</tr>
<tr>
<td>前缀键, ,</td>
<td>窗口重命名</td>
</tr>
</tbody></table>
<h4 id="面板管理"><a href="#面板管理" class="headerlink" title="面板管理"></a>面板管理</h4><h5 id="分割面板"><a href="#分割面板" class="headerlink" title="分割面板"></a>分割面板</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 分割为上下两个窗口</span></span><br><span class="line">tmux split-window <span class="comment"># tmux split-window -v</span></span><br><span class="line"><span class="comment"># 分割为左右两个窗口</span></span><br><span class="line">tmux split-window -h</span><br></pre></td></tr></table></figure>

<h5 id="移动光标"><a href="#移动光标" class="headerlink" title="移动光标"></a>移动光标</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 光标切换到上方面板</span></span><br><span class="line">tmux select-pane -U</span><br><span class="line"><span class="comment"># 光标切换到下方面板</span></span><br><span class="line">tmux select-pane -D</span><br><span class="line"><span class="comment"># 光标切换到左边面板</span></span><br><span class="line">tmux select-pane -L</span><br><span class="line"><span class="comment"># 光标切换到右边面板</span></span><br><span class="line">tmux select-pane -R</span><br></pre></td></tr></table></figure>

<h5 id="交换面板"><a href="#交换面板" class="headerlink" title="交换面板"></a>交换面板</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 当前面板上移</span></span><br><span class="line">$ tmux swap-pane -U</span><br><span class="line"><span class="comment"># 当前面板下移</span></span><br><span class="line">$ tmux swap-pane -D</span><br></pre></td></tr></table></figure>

<h5 id="面板快捷键"><a href="#面板快捷键" class="headerlink" title="面板快捷键"></a>面板快捷键</h5><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前缀键, %</td>
<td>将当前面板划分为左右两个面板</td>
</tr>
<tr>
<td>前缀键, “</td>
<td>将当前面板划分为上下两个面板</td>
</tr>
<tr>
<td>前缀键, 方向键</td>
<td>将光标移动到其他面板</td>
</tr>
<tr>
<td>前缀键, z</td>
<td>将当前面板最大化显示，再用一次恢复原状</td>
</tr>
<tr>
<td>前缀键, ;</td>
<td>将光标移动到上一个面板</td>
</tr>
<tr>
<td>前缀键, o</td>
<td>将光标移动到下一个面板</td>
</tr>
<tr>
<td>前缀键, {</td>
<td>将当前面板与上一个面板交换位置</td>
</tr>
<tr>
<td>前缀键, }</td>
<td>将当前面板与下一个面板交换位置</td>
</tr>
<tr>
<td>前缀键, Ctrl + o</td>
<td>所有面板向前移动一个位置，第一个面板变成最后一个面板</td>
</tr>
<tr>
<td>前缀键, Alt + o</td>
<td>所有面板向后移动一个位置，最后一个面板变成第一个面板</td>
</tr>
<tr>
<td>前缀键, x</td>
<td>关闭当前面板</td>
</tr>
<tr>
<td>前缀键, !</td>
<td>将当前面板拆分为一个独立窗口</td>
</tr>
<tr>
<td>前缀键, Ctrl + 方向键</td>
<td>按箭头方向调整面板大小</td>
</tr>
<tr>
<td>前缀键, q</td>
<td>显示面板编号</td>
</tr>
</tbody></table>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列出所有快捷键，及其对应的 Tmux 命令</span></span><br><span class="line">tmux list-keys</span><br><span class="line"><span class="comment"># 列出所有 Tmux 命令及其参数</span></span><br><span class="line">tmux list-commands</span><br><span class="line"><span class="comment"># 列出当前所有 Tmux 会话的信息</span></span><br><span class="line">tmux info</span><br><span class="line"><span class="comment"># 重新加载当前的 Tmux 配置</span></span><br><span class="line">tmux <span class="built_in">source</span>-file ~/.tmux.conf</span><br></pre></td></tr></table></figure>

<h4 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h4><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>前缀键, ?</td>
<td>列出所有快捷键</td>
</tr>
</tbody></table>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>tmux 的配置文件是 <code>.tmux.conf</code> 。</p>
<h4 id="更改前缀键"><a href="#更改前缀键" class="headerlink" title="更改前缀键"></a>更改前缀键</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 设置前缀键为 Ctrl + a</span><br><span class="line">set -g prefix C-a</span><br><span class="line"># 解除 Ctrl + b 与前缀的对应关系</span><br><span class="line">unbind C-b</span><br></pre></td></tr></table></figure>

<h4 id="支持鼠标"><a href="#支持鼠标" class="headerlink" title="支持鼠标"></a>支持鼠标</h4><p>编辑 <code>~/.tmux.conf</code> ，增加如下配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ~&#x2F;.tmux.conf</span><br><span class="line"># set -g mouse on</span><br></pre></td></tr></table></figure>

<h4 id="自动保存-恢复会话"><a href="#自动保存-恢复会话" class="headerlink" title="自动保存/恢复会话"></a>自动保存/恢复会话</h4><ol>
<li><p>安装插件管理器<br><a href="https://github.com/tmux-plugins/tpm#installation" target="_blank" rel="noopener">https://github.com/tmux-plugins/tpm#installation</a></p>
</li>
<li><p>安装插件<br><a href="https://github.com/tmux-plugins/tmux-continuum" target="_blank" rel="noopener">https://github.com/tmux-plugins/tmux-continuum</a><br>进入 tmux 时自动恢复会话：在 <code>.tmux.conf</code> 中配置 <code>set -g @continuum-restore &#39;on&#39;</code></p>
</li>
<li><p>保存/恢复会话<br>保存会话： prefix + C-s<br>恢复会话： prefix + C-r</p>
</li>
</ol>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Tmux 使用教程：<a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html" target="_blank" rel="noopener">https://www.ruanyifeng.com/blog/2019/10/tmux.html</a><br>Source Code：<a href="https://github.com/tmux/tmux" target="_blank" rel="noopener">https://github.com/tmux/tmux</a><br>Tmux常用功能总结：<a href="https://segmentfault.com/a/1190000007427965" target="_blank" rel="noopener">https://segmentfault.com/a/1190000007427965</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>terminal</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Android 上的终端模拟器 Termux</title>
    <url>/os/android/termux/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Android 上的终端模拟器，无需 root 。</p>
<a id="more"></a>

<h3 id="安装与设置"><a href="#安装与设置" class="headerlink" title="安装与设置"></a>安装与设置</h3><ol>
<li><p>通过 Google play 或 F-Droid 安装。</p>
</li>
<li><p>初始化存储<br> 打开 termux ，输入如下命令：</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">termux-setup-storage</span><br></pre></td></tr></table></figure>

<p> 主目录下会出现 <code>storage</code> 文件夹，内容如下：</p>
<table>
<thead>
<tr>
<th>文件夹</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>dcim</td>
<td>相机</td>
</tr>
<tr>
<td>downloads</td>
<td>下载</td>
</tr>
<tr>
<td>movies</td>
<td>电影</td>
</tr>
<tr>
<td>music</td>
<td>音乐</td>
</tr>
<tr>
<td>pictures</td>
<td>图片</td>
</tr>
<tr>
<td>shared</td>
<td>文件管理器能看到的存储空间</td>
</tr>
<tr>
<td>external</td>
<td>外置 SD 卡（只有当外置存储存在时才会显示该目录）</td>
</tr>
</tbody></table>
</li>
<li><p>安装必要工具</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 升级包管理器</span></span><br><span class="line">pkp up</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 git</span></span><br><span class="line">pkg install git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 SSH</span></span><br><span class="line">pkg install openssh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 ag</span></span><br><span class="line">pkg install silversearcher-ag</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 man</span></span><br><span class="line">pkg install man</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 SSH</p>
</li>
<li><p>配置 bash</p>
</li>
</ol>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="SSH服务器"><a href="#SSH服务器" class="headerlink" title="SSH服务器"></a>SSH服务器</h4><p>termux 上没有系统服务，开启关闭SSH服务器需要手动操作。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开启</span></span><br><span class="line">sshd</span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭</span></span><br><span class="line">pkill sshd</span><br></pre></td></tr></table></figure>

<p>如需修改 SSHD 的行为，可以编辑 <code>/ssh/sshd_config</code> 文件。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PrintMotd no</span><br><span class="line"><span class="meta">#</span><span class="bash"> 是否允许密码登录，建议配置证书登录后关闭此项</span></span><br><span class="line">PasswordAuthentication yes</span><br><span class="line">PubkeyAcceptedKeyTypes +ssh-dss</span><br><span class="line">Subsystem sftp /data/data/com.termux/files/usr/libexec/sftp-server</span><br></pre></td></tr></table></figure>

<p>默认端口是8022，登录时需要指定端口。</p>
<h4 id="查看手机热点下的所有设备IP"><a href="#查看手机热点下的所有设备IP" class="headerlink" title="查看手机热点下的所有设备IP"></a>查看手机热点下的所有设备IP</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pkg install net-tools</span><br><span class="line">ip neigh</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Termux code to install git on termux in Android mobile：<a href="https://stackoverflow.com/questions/55738534/termux-code-to-install-git-on-termux-in-android-mobile" target="_blank" rel="noopener">https://stackoverflow.com/questions/55738534/termux-code-to-install-git-on-termux-in-android-mobile</a><br>Internal and external storage：<a href="https://wiki.termux.com/wiki/Internal_and_external_storage" target="_blank" rel="noopener">https://wiki.termux.com/wiki/Internal_and_external_storage</a><br>Remote Access：<a href="https://wiki.termux.com/wiki/Remote_Access" target="_blank" rel="noopener">https://wiki.termux.com/wiki/Remote_Access</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux rsync 命令</title>
    <url>/os/linux/commands/rsync/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><code>rsync</code> 命令用于在主机之间同步文件。可以用来代替 <code>cp</code> 命令，也可以用作备份工具。</p>
<a id="more"></a>

<p>作为备份工具， <code>rsync</code> 支持增量同步，故而比传统的全量复制方法更快。</p>
<h3 id="相似命令"><a href="#相似命令" class="headerlink" title="相似命令"></a>相似命令</h3><h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><p><code>cp</code> 命令用于复制文件</p>
<h4 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h4><p><code>scp</code> 命令用于与远程主机交换文件</p>
<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><blockquote>
<p>-a, –archive 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD。<br>-v, –verbose 详细模式输出。<br>-r, –recursive 对子目录以递归模式处理。<br>-q, –quiet 精简输出模式。<br>-t, –times 保持文件时间信息。<br>-c, –checksum 打开校验开关，强制对文件传输进行校验。<br>–exclude PATTERN 指定排除不需要传输的文件模式。</p>
</blockquote>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 src 文件夹复制到 dest 目录下（在 dest 目录下会创建 src 文件夹）</span></span><br><span class="line">rsync -rtv src dest</span><br><span class="line"><span class="comment"># 将 src 文件夹的所有内容复制到 dest 目录下（在dest目录下不会创建 src 文件夹）</span></span><br><span class="line">rsync -rtv src/ dest</span><br><span class="line"><span class="comment"># 不复制 src 文件夹下的 test 文件/文件夹</span></span><br><span class="line">rsync -rtv src/ dest --exclude text</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>官网：<a href="https://rsync.samba.org/" target="_blank" rel="noopener">https://rsync.samba.org/</a><br>Linux命令大全 - rsync：<a href="https://man.linuxde.net/rsync" target="_blank" rel="noopener">https://man.linuxde.net/rsync</a><br>How to use ‘cp’ command to exclude a specific directory?：<a href="https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory" target="_blank" rel="noopener">https://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory</a><br>Archlinux Wiki rsync：<a href="https://wiki.archlinux.org/index.php/Rsync" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Rsync</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
  </entry>
  <entry>
    <title>树莓派加密指南 | Raspberry Pi Encryption</title>
    <url>/raspberrypi/raspberry-encryption/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>本文介绍在树莓派上启用加密的方法。</p>
<a id="more"></a>

<p>讲到加密，就扯到为啥需要启用加密了。在可以物理接触存储介质的情况下，读取你的数据简直太容易了。树莓派的数据都在那一张小小的SD卡上，容易拆卸又易于携带，简直不要太危险啊。</p>
<p>讲到这里，有朋友不服。我的树莓派上又没啥重要东西，让别人看看就看看呗。这你就太 naive 了，这种思路的前提是“树莓派上没有重要文件”。我举几个例子：</p>
<ul>
<li>树莓派上存储的 ssh 密钥</li>
<li>树莓派上存储的 WiFi 密码</li>
</ul>
<p>你看吧，还是有些重要的数据的。</p>
<p>接着你又说这些都不是重要的数据，不 care 。好吧，那也是。但是吧，万一哪天你想要在树莓派上做些不可告人的事情呢，有这么一篇指南教你加密也是不错的。</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><p>这里先说一种简单的方式：创建一个加密的分区。写入该分区的所有数据都是加密的。不用的时候卸载该分区就好了。考虑到在不同设备之间移动的场景，那就把这个分区建在一个文件上吧。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建一个 1G 的文件 encrypt.img</span></span><br><span class="line">dd if=/dev/zero of=encrypt.img bs=1M count=1024</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装并启用加密组件</span></span><br><span class="line">sudo apt install cryptsetup</span><br><span class="line">sudo modprobe dm-crypt sha256 aes</span><br><span class="line"><span class="meta">#</span><span class="bash"> 加密 encrypt.img</span></span><br><span class="line">sudo cryptsetup --verify-passphrase luksFormat encrypt.img -c aes -s 256 -h sha256</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打开加密文件</span></span><br><span class="line">sudo cryptsetup luksOpen encrypt.img private</span><br><span class="line"><span class="meta">#</span><span class="bash"> 格式化 encrypt.img ，文件系统格式为 ext4</span></span><br><span class="line">sudo mkfs.ext4 /dev/mapper/private # 或者 sudo mkfs -t ext4 -m 1 /dev/mapper/private</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载</span></span><br><span class="line">sudo mkdir /media/secure</span><br><span class="line">sudo mount /dev/mapper/private /media/secure</span><br><span class="line">sudo chown pi:pi /media/secure</span><br></pre></td></tr></table></figure>

<p>打开 <code>/etc/crypttab</code> 增加如下一行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private absolute_path_to_encrypt.img none luks</span><br></pre></td></tr></table></figure>

<p>在 <code>/etc/fstab</code> 最后加一行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;dev&#x2F;mapper&#x2F;private &#x2F;media&#x2F;secure ext4 defaults,rw 0 0</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3>]]></content>
      <categories>
        <category>raspberrypi</category>
      </categories>
      <tags>
        <tag>RaspberryPi</tag>
      </tags>
  </entry>
  <entry>
    <title>终端视频下载器 youtube-dl</title>
    <url>/os/terminal/youtube-dl/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>youtube-dl 是一个命令行视频下载器。</p>
<a id="more"></a>

<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>一整套工具包括 youtube-dl ffmpeg aria2 。<br>youtube-dl 负责下载，ffmpeg 负责合并音视频，aria2 是一个命令行的多线程下载器。<br>YouTube 视频不推荐用 aria2 多线程下载，会报错。</p>
<h4 id="Unix-Linux"><a href="#Unix-Linux" class="headerlink" title="Unix / Linux"></a>Unix / Linux</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 youtube-dl</span></span><br><span class="line">sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/<span class="built_in">local</span>/bin/youtube-dl</span><br><span class="line">sudo chmod a+rx /usr/<span class="built_in">local</span>/bin/youtube-dl</span><br><span class="line"><span class="comment"># 安装 ffmpeg （for Debian/Ubuntu like system）</span></span><br><span class="line">sudo apt install ffmpeg</span><br><span class="line"><span class="comment"># 安装 aria2</span></span><br><span class="line">sudo apt/yum imstall aria2</span><br></pre></td></tr></table></figure>

<h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install youtube-dl</span><br></pre></td></tr></table></figure>

<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>直接到网站上下载 exe 文件即可。</p>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>详见 GitHub 页面：<a href="https://github.com/ytdl-org/youtube-dl/" target="_blank" rel="noopener">https://github.com/ytdl-org/youtube-dl/</a></p>
<h4 id="下载视频"><a href="#下载视频" class="headerlink" title="下载视频"></a>下载视频</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有格式</span></span><br><span class="line">youtube-dl --list-formats [url]</span><br><span class="line"><span class="comment"># 下载质量最佳的 mp4 格式</span></span><br><span class="line">youtube-dl -f <span class="string">'bestvideo[ext=mp4]+bestaudio[ext=m4a]/bestvideo+bestaudio'</span> --merge-output-format mp4 [url]</span><br><span class="line"><span class="comment"># 下载所有格式</span></span><br><span class="line">--all-formats</span><br></pre></td></tr></table></figure>

<p>YouTube上的音视频是分开传输的，需要下载后合并。</p>
<h4 id="下载音频"><a href="#下载音频" class="headerlink" title="下载音频"></a>下载音频</h4><h4 id="下载字幕"><a href="#下载字幕" class="headerlink" title="下载字幕"></a>下载字幕</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载所有字幕</span></span><br><span class="line">youtube-dl --all-subs [url]</span><br><span class="line"><span class="comment"># 仅下载字幕</span></span><br><span class="line">youtube-dl --all-subs --skip-download</span><br><span class="line"><span class="comment"># 下载自动生成的字幕（仅YouTube）</span></span><br><span class="line">youtube-dl --all-subs --skip-download --write-auto-sub</span><br></pre></td></tr></table></figure>

<p>注意 <code>--all-subs</code> 和 <code>--write-auto-sub</code> 这两个选项尽量不要一起使用。否则，YouTube上能翻译的语言，都能给你自动生成一个对应的字幕。</p>
<h4 id="下载列表"><a href="#下载列表" class="headerlink" title="下载列表"></a>下载列表</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载播放列表中的第6至第10个视频</span></span><br><span class="line">youtube-dl --playlist-start 6 --playlist-end 10 [url]</span><br></pre></td></tr></table></figure>

<h4 id="从文本文件中读取链接"><a href="#从文本文件中读取链接" class="headerlink" title="从文本文件中读取链接"></a>从文本文件中读取链接</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">youtube-dl -a video_url.txt <span class="comment"># or youtube-dl --batch-file video_url.txt</span></span><br></pre></td></tr></table></figure>

<h4 id="使用外部下载器"><a href="#使用外部下载器" class="headerlink" title="使用外部下载器"></a>使用外部下载器</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">youtube-dl --external-downloader aria2c --external-downloader-args <span class="string">"-x 16 -k 1M"</span> [url]</span><br><span class="line"><span class="comment"># --external-downloader aria2c  # 调用外部下载工具 aria2c</span></span><br><span class="line"><span class="comment"># --external-downloader-args    # 指定外部下载工具的参数</span></span><br><span class="line"><span class="comment"># -x 16                         # 下载进程数，aira 最高只支持16个进程</span></span><br><span class="line"><span class="comment"># -k 1M                         # 块大小</span></span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>官网：<a href="https://ytdl-org.github.io/youtube-dl/" target="_blank" rel="noopener">https://ytdl-org.github.io/youtube-dl/</a><br>源码：<a href="https://github.com/ytdl-org/youtube-dl/" target="_blank" rel="noopener">https://github.com/ytdl-org/youtube-dl/</a><br>Download YouTube Videos in Linux Command Line：<a href="https://itsfoss.com/download-youtube-linux" target="_blank" rel="noopener">https://itsfoss.com/download-youtube-linux</a><br>How to download the best video along with the best compatible audio with youtube-dl?：<a href="https://askubuntu.com/questions/807877/how-to-download-the-best-video-along-with-the-best-compatible-audio-with-youtube" target="_blank" rel="noopener">https://askubuntu.com/questions/807877/how-to-download-the-best-video-along-with-the-best-compatible-audio-with-youtube</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>terminal</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派安装指南 | Raspberry Pi Setup</title>
    <url>/raspberrypi/raspberry-setup/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>本文简要记述树莓派的安装过程。</p>
<a id="more"></a>

<p>在阅读本文前，你需要确保你手上有一块树莓派开发板、SD卡、电源，以及一台可以使用的电脑，不然你看这篇文章干啥呢。其次，你需要满足如下两种要求之一：</p>
<p>一、配套外设</p>
<ul>
<li>显示器及相应连接线</li>
<li>键盘、鼠标（鼠标可选）</li>
</ul>
<p>二、本地网络环境</p>
<ul>
<li>网线、路由器，二者有其一即可</li>
</ul>
<h3 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h3><p>Raspbian 是树莓派官方支持的发行版，本文以安装 Raspbian 为例。</p>
<p>首先，下载 <a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">Raspberry Pi Imager</a> 和 <a href="https://www.raspberrypi.org/downloads/raspberry-pi-os/" target="_blank" rel="noopener">Raspberry Pi OS</a> 镜像。Raspberry Pi OS 根据个人需求下载合适的版本即可。</p>
<p>解压下载的 Raspberry Pi OS 文件，得到 <code>.img</code> 文件。将准备的 SD 卡连入电脑。</p>
<p>安装 Raspberry Pi Imager 。安装完成后打开，选择刚才的 <code>.img</code> 文件，并选择目标 SD 卡，写入镜像。</p>
<p>写入完成后，从电脑上取出 SD 卡。插入树莓派，连接电源，就会正常进入引导了。</p>
<h3 id="常见配置"><a href="#常见配置" class="headerlink" title="常见配置"></a>常见配置</h3><h4 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h4><p>推荐设置清华大学镜像源，可以加快软件下载速度。不在大陆的就没必要麻烦了。<br>设置方法参考：<a href="https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/" target="_blank" rel="noopener">Raspbian 镜像使用帮助</a></p>
<h4 id="远程连接（SSH、VNC）"><a href="#远程连接（SSH、VNC）" class="headerlink" title="远程连接（SSH、VNC）"></a>远程连接（SSH、VNC）</h4><p><a href="https://www.raspberrypi.org/documentation/remote-access/" target="_blank" rel="noopener">Remote Access</a> 叙述了远程连接树莓派的若干种方法。</p>
<p>默认SSH是关闭的，开启方法见：<a href="https://www.raspberrypi.org/documentation/remote-access/ssh/README.md" target="_blank" rel="noopener">SSH (Secure Shell)</a></p>
<p>树莓派默认的用户名是 <code>pi</code> 默认密码是 <code>raspberry</code> 。</p>
<h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><p>设定 WiFi 可以参考 <a href="https://www.raspberrypi.org/documentation/configuration/wireless/README.md" target="_blank" rel="noopener">Wireless connectivity</a></p>
<p>设定 IP 可以参考 <a href="https://www.raspberrypi.org/documentation/configuration/tcpip/README.md" target="_blank" rel="noopener">TCP/IP networking</a></p>
<h4 id="显示器"><a href="#显示器" class="headerlink" title="显示器"></a>显示器</h4><p><a href="https://www.raspberrypi.org/documentation/configuration/hdmi-config.md" target="_blank" rel="noopener">HDMI configuration</a> 这篇文章详述了 HDMI 接口的配置。</p>
<p>如果你只是旋转屏幕，可以参考这篇文章 <a href="https://www.raspberrypi.org/documentation/configuration/display_rotation.md" target="_blank" rel="noopener">How to rotate your display</a> 。</p>
<p>以下方法在 Raspberry Pi 2 Model B / Raspbian 10 上也能起到旋转屏幕的作用：<br>在 /boot/config.txt 文件中增加一行 <code>display_ratote=x</code> x 可以取 1、2、3、4，分别对应4个旋转方向。修改完成后重启生效。</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="密码重置"><a href="#密码重置" class="headerlink" title="密码重置"></a>密码重置</h4><p>如果你不幸忘了 Raspbian 的用户密码，首先，请明确你的情况。</p>
<p>如果只是忘了其中一个用户的密码，可以借助其他具有 sudo 权限 或 root 权限的用户修改密码，具体操作参考 <code>passwd</code> 。</p>
<p>如果不幸只有一个用户，或者所有用户的密码都忘记了。请尝试从使用证书登录 SSH 的电脑上连接你的树莓派，然后可以使用 <code>passwd</code> 修改密码。</p>
<p>如果没有办法进入系统，但是有另一台可以工作的树莓派（或其他相同系统架构的单板机）。将 SD 卡取下，连接到另一台电脑。</p>
<p>打开终端，通过 <code>lsblk</code> 查看需重置密码的树莓派的根分区位置（类似于 <code>/dev/sda2</code>）。挂载这个分区 <code>sudo mount /dev/sda2 /path_to_mount</code>。进入挂载路径，并 chroot 到该目录，<code>sudo chroot /path_to_mount</code>。至此，你已经以 root 身份进入到原树莓派的系统，使用 <code>passwd</code> 修改密码即可。</p>
<h4 id="外置存储"><a href="#外置存储" class="headerlink" title="外置存储"></a>外置存储</h4><p><a href="https://www.raspberrypi.org/documentation/configuration/external-storage.md" target="_blank" rel="noopener">External storage configuration</a> 这篇文章讲述了查看、挂载、自动挂载、卸载等内容。</p>
<p>修改完 <code>fstab</code> 后，通过命令 <code>mount -a</code> 挂载。<br>如果想将所有挂载设备都卸载，可以输入 <code>umount -a</code> 。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Raspberry Pi Setup Guide：<a href="https://www.raspberrypi.org/documentation/setup/" target="_blank" rel="noopener">https://www.raspberrypi.org/documentation/setup/</a></p>
]]></content>
      <categories>
        <category>raspberrypi</category>
      </categories>
      <tags>
        <tag>RaspberryPi</tag>
      </tags>
  </entry>
  <entry>
    <title>找资源</title>
    <url>/finding-resources/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>What makes you different is your ability to find resources.<br>By saying resources, I mean all kinds of information, articles, data etc.</p>
<a id="more"></a>

<h3 id="文献"><a href="#文献" class="headerlink" title="文献"></a>文献</h3><p>SciHub，经常被封，需要的时候搜下最新地址，<a href="http://tool.yovisun.com/scihub/" target="_blank" rel="noopener">http://tool.yovisun.com/scihub/</a></p>
<h3 id="电子书"><a href="#电子书" class="headerlink" title="电子书"></a>电子书</h3><p><a href="https://salttiger.com/" target="_blank" rel="noopener" title="SaltTiger">SaltTiger</a></p>
<h3 id="影视"><a href="#影视" class="headerlink" title="影视"></a>影视</h3><p><a href="http://www.dysf.cc/" target="_blank" rel="noopener" title="dysf">电影首发</a></p>
<h4 id="字幕"><a href="#字幕" class="headerlink" title="字幕"></a>字幕</h4><p><a href="http://www.zimuku.la/" target="_blank" rel="noopener" title="字幕库">字幕库</a></p>
<p><a href="https://assrt.net/" target="_blank" rel="noopener" title="伪射手">伪射手</a></p>
<h3 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h3><h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><p><a href="https://www.macdo.cn/" target="_blank" rel="noopener" title="Mac毒">Mac毒</a></p>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p><a href="http://msdn.itellyou.cn/" target="_blank" rel="noopener" title="MSDN, I tell you">MSDN, I tell you</a></p>
<h3 id="网盘"><a href="#网盘" class="headerlink" title="网盘"></a>网盘</h3><p><a href="https://ypsuperkey.meek.com.cn/" target="_blank" rel="noopener" title="meek">云盘万能钥匙</a></p>
<p><a href="https://www.chaonengso.com/" target="_blank" rel="noopener" title="超能搜">超能搜</a></p>
<h3 id="磁力"><a href="#磁力" class="headerlink" title="磁力"></a>磁力</h3><p><a href="https://www.btmoo.net/" target="_blank" rel="noopener" title="BTMOO">BTMOO</a></p>
<p><a href="http://www.magnet2torrent.com/" target="_blank" rel="noopener" title="magnet2torrent">Magnet &gt;&gt; Torrent</a></p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p><a href="http://ytb.io/" target="_blank" rel="noopener">FindYouTube YouTube视频下载</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3>]]></content>
  </entry>
  <entry>
    <title>scoop</title>
    <url>/os/windows/scoop/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>一个命令行式的软件安装器。用于 Windows 上的软件安装。</p>
<a id="more"></a>

<p>所有软件安装在 <code>%UserProfile%\scoop</code> 目录下。</p>
<p>与 chocolatey 的区别在于：</p>
<ul>
<li>chocolatey 是私有软件，scoop 是开源软件</li>
<li>chocolatey 的安装位置不固定</li>
<li>chocolatey 需要管理员权限</li>
</ul>
<h3 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">scoop install git</span><br><span class="line">scoop install <span class="number">7</span>zip</span><br></pre></td></tr></table></figure>

<p>使用 aria2 下载</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">scoop install aria2</span><br><span class="line">scoop config aria2<span class="literal">-max</span><span class="literal">-connection</span><span class="literal">-per</span><span class="literal">-server</span> <span class="number">16</span></span><br><span class="line">scoop config aria2<span class="operator">-split</span> <span class="number">16</span></span><br><span class="line">scoop config aria2<span class="literal">-min</span><span class="operator">-split</span><span class="literal">-size</span> <span class="number">1</span>M</span><br></pre></td></tr></table></figure>

<p>如果遇到问题，可以关闭 aria2</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">scoop config aria2<span class="literal">-enabled</span> false</span><br></pre></td></tr></table></figure>

<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>scoop 相关的命令在 CMD 和 PowerShell 中均可使用。使用无需管理员权限。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 帮助</span><br><span class="line">scoop help</span><br><span class="line"># 查看当前安装的软件列表</span><br><span class="line">scoop list</span><br><span class="line"># 搜索软件</span><br><span class="line">scoop search xxx</span><br><span class="line"># 安装</span><br><span class="line">scoop install xxx</span><br><span class="line"># 卸载</span><br><span class="line">scoop uninstall xxx</span><br><span class="line"># 查看软件信息</span><br><span class="line">scoop info xxx</span><br><span class="line"># 查看软件状态</span><br><span class="line">scoop status xxx</span><br><span class="line"># 更新 scoop 以及仓库</span><br><span class="line">scoop update</span><br><span class="line"># 更新软件</span><br><span class="line">scoop update xxx</span><br><span class="line"># 移除旧版本</span><br><span class="line">scoop cleanup xxx</span><br><span class="line"># 打开软件的主页</span><br><span class="line">scoop home xxx</span><br><span class="line"># 查看已知的仓库</span><br><span class="line">scoop bucket known</span><br><span class="line"># 查看已添加的仓库</span><br><span class="line">scoop bucket list</span><br><span class="line"># 设置代理(http)</span><br><span class="line">scoop config proxy 127.0.0.1:4412</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>search</td>
<td>搜索</td>
<td>scoop search vscode</td>
</tr>
<tr>
<td>install</td>
<td>安装</td>
<td>scoop install vscode</td>
</tr>
<tr>
<td>uninstall</td>
<td>下载</td>
<td>scoop uninstall vscode</td>
</tr>
</tbody></table>
<h3 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h3><p><a href="https://github.com/lukesampson/scoop-extras" target="_blank" rel="noopener">https://github.com/lukesampson/scoop-extras</a><br><a href="https://github.com/rasa/scoop-directory/blob/master/by-score.md" target="_blank" rel="noopener">https://github.com/rasa/scoop-directory/blob/master/by-score.md</a></p>
<h3 id="常用软件"><a href="#常用软件" class="headerlink" title="常用软件"></a>常用软件</h3><h4 id="比对工具"><a href="#比对工具" class="headerlink" title="比对工具"></a>比对工具</h4><p>scoop install winmerge<br>scoop install beyondcompare</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="未能解析此远程名称-raw-githubusercontent-com"><a href="#未能解析此远程名称-raw-githubusercontent-com" class="headerlink" title="未能解析此远程名称 raw.githubusercontent.com"></a>未能解析此远程名称 raw.githubusercontent.com</h4><p>在 <a href="https://www.ipaddress.com" target="_blank" rel="noopener">https://www.ipaddress.com</a> 上查 raw.githubusercontent.com 的 ip 地址，写入 hosts 文件。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://scoop.sh/" target="_blank" rel="noopener">https://scoop.sh/</a></li>
<li><a href="https://github.com/lukesampson/scoop" target="_blank" rel="noopener">https://github.com/lukesampson/scoop</a></li>
<li>Windows | Scoop软件包管理神器：<a href="https://www.limufang.com/post/569.html" target="_blank" rel="noopener">https://www.limufang.com/post/569.html</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux mkfifo 命令</title>
    <url>/os/linux/commands/mkfifo/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>mkfifo 用于创建一个命名管道。</p>
<a id="more"></a>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkfifo &#x2F;home&#x2F;xxx&#x2F;my_pipe</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>Linux mkfifo Command Tutorial for Beginners (with Examples)：<a href="https://www.howtoforge.com/linux-mkfifo-command/" target="_blank" rel="noopener">https://www.howtoforge.com/linux-mkfifo-command/</a></li>
<li><a href="https://linux.die.net/man/1/mkfifo" target="_blank" rel="noopener">https://linux.die.net/man/1/mkfifo</a></li>
<li><a href="http://man7.org/linux/man-pages/man1/mkfifo.1.html" target="_blank" rel="noopener">http://man7.org/linux/man-pages/man1/mkfifo.1.html</a></li>
<li>介绍 Linux 中的管道和命名管道：<a href="https://linux.cn/article-9992-1.html" target="_blank" rel="noopener">https://linux.cn/article-9992-1.html</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>983. 最低票价 | Minimum Cost For Tickets 【todo】</title>
    <url>/leetcode/Minimum-Cost-For-Tickets/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a country popular for train travel, you have planned some train travelling one year in advance.  The days of the year that you will travel is given as an array days.  Each day is an integer from 1 to 365.<br>Train tickets are sold in 3 different ways:</p>
<ul>
<li>a 1-day pass is sold for costs[0] dollars;</li>
<li>a 7-day pass is sold for costs[1] dollars;</li>
<li>a 30-day pass is sold for costs[2] dollars.<br>The passes allow that many days of consecutive travel.  For example, if we get a 7-day pass on day 2, then we can travel for 7 days: day 2, 3, 4, 5, 6, 7, and 8.<br>Return the minimum number of dollars you need to travel every day in the given list of days.</li>
</ul>
<a id="more"></a>

<p>在一个火车旅行很受欢迎的国度，你提前一年计划了一些火车旅行。在接下来的一年里，你要旅行的日子将以一个名为 days 的数组给出。每一项是一个从 1 到 365 的整数。<br>火车票有三种不同的销售方式：</p>
<ul>
<li>一张为期一天的通行证售价为 costs[0] 美元；</li>
<li>一张为期七天的通行证售价为 costs[1] 美元；</li>
<li>一张为期三十天的通行证售价为 costs[2] 美元。<br>通行证允许数天无限制的旅行。 例如，如果我们在第 2 天获得一张为期 7 天的通行证，那么我们可以连着旅行 7 天：第 2 天、第 3 天、第 4 天、第 5 天、第 6 天、第 7 天和第 8 天。<br>返回你想要完成在给定的列表 days 中列出的每一天的旅行所需要的最低消费。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/minimum-cost-for-tickets/" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-cost-for-tickets/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-cost-for-tickets/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-cost-for-tickets/</a></li>
<li><a href="https://leetcode.com/articles/minimum-cost-for-tickets/" target="_blank" rel="noopener">https://leetcode.com/articles/minimum-cost-for-tickets/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>984. 不含 AAA 或 BBB 的字符串 | String Without AAA or BBB</title>
    <url>/leetcode/String-Without-AAA-or-BBB/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given two integers A and B, return any string S such that:</p>
<ul>
<li>S has length A + B and contains exactly A ‘a’ letters, and exactly B ‘b’ letters;</li>
<li>The substring ‘aaa’ does not occur in S;</li>
<li>The substring ‘bbb’ does not occur in S.</li>
</ul>
<a id="more"></a>

<p>给定两个整数 A 和 B，返回任意字符串 S，要求满足：</p>
<ul>
<li>S 的长度为 A + B，且正好包含 A 个 ‘a’ 字母与 B 个 ‘b’ 字母；</li>
<li>子串 ‘aaa’ 没有出现在 S 中；</li>
<li>子串 ‘bbb’ 没有出现在 S 中。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">strWithout3a3b</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> A &gt; B ? strWithout3a3b(A, B, <span class="string">'a'</span>, <span class="string">'b'</span>) : strWithout3a3b(B, A, <span class="string">'b'</span>, <span class="string">'a'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">strWithout3a3b</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">char</span> char1, <span class="keyword">char</span> char2)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder(a + b);</span><br><span class="line">        <span class="keyword">while</span> (b &gt; <span class="number">0</span> &amp;&amp; a &gt; b) &#123;</span><br><span class="line">            sb.append(char1);</span><br><span class="line">            sb.append(char1);</span><br><span class="line">            sb.append(char2);</span><br><span class="line">            a -= <span class="number">2</span>;</span><br><span class="line">            b--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (b &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            sb.append(char1);</span><br><span class="line">            sb.append(char2);</span><br><span class="line">            a--;</span><br><span class="line">            b--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (a &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            sb.append(char1);</span><br><span class="line">            a--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for String Without AAA or BBB.<br>Memory Usage: 34.1 MB, less than 100.00% of Java online submissions for String Without AAA or BBB.</p>
<h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/string-without-aaa-or-bbb/" target="_blank" rel="noopener">https://leetcode.com/problems/string-without-aaa-or-bbb/</a></li>
<li><a href="https://leetcode-cn.com/problems/string-without-aaa-or-bbb/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/string-without-aaa-or-bbb/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>985. 查询后的偶数和 | Sum of Even Numbers After Queries</title>
    <url>/leetcode/Sum-of-Even-Numbers-After-Queries/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We have an array A of integers, and an array queries of queries.<br>For the i-th query val = queries[i][0], index = queries[i][1], we add val to A[index].  Then, the answer to the i-th query is the sum of the even values of A.<br>(Here, the given index = queries[i][1] is a 0-based index, and each query permanently modifies the array A.)<br>Return the answer to all queries.  Your answer array should have answer[i] as the answer to the i-th query.</p>
<a id="more"></a>

<p>给出一个整数数组 A 和一个查询数组 queries。<br>对于第 i 次查询，有 val = queries[i][0], index = queries[i][1]，我们会把 val 加到 A[index] 上。然后，第 i 次查询的答案是 A 中偶数值的和。<br>（此处给定的 index = queries[i][1] 是从 0 开始的索引，每次查询都会永久修改数组 A。）<br>返回所有查询的答案。你的答案应当以数组 answer 给出，answer[i] 为第 i 次查询的答案。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sumEvenAfterQueries(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[][] queries) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            sum += A[i] % <span class="number">2</span> == <span class="number">0</span> ? A[i] : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[queries.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; queries.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] query = queries[i];</span><br><span class="line">            <span class="keyword">int</span> val = query[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> index = query[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> pre = A[index];</span><br><span class="line">            <span class="keyword">if</span> (pre % <span class="number">2</span> == <span class="number">0</span> &amp;&amp; val % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// pre even, now odd</span></span><br><span class="line">                sum -= pre;</span><br><span class="line">                A[index] = pre + val;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pre % <span class="number">2</span> == <span class="number">0</span> &amp;&amp; val % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// pre even, now even</span></span><br><span class="line">                sum += val;</span><br><span class="line">                A[index] += val;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pre % <span class="number">2</span> != <span class="number">0</span> &amp;&amp; val % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// pre odd, now even</span></span><br><span class="line">                A[index] += val;</span><br><span class="line">                sum += A[index];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pre % <span class="number">2</span> != <span class="number">0</span> &amp;&amp; val % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// pre odd, now odd</span></span><br><span class="line">                A[index] += val;</span><br><span class="line">            &#125;</span><br><span class="line">            res[i] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 5 ms, faster than 51.22% of Java online submissions for Sum of Even Numbers After Queries.<br>Memory Usage: 58.8 MB, less than 86.96% of Java online submissions for Sum of Even Numbers After Queries.</p>
<h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><p>[1,2,3,4]<br>[[1,0],[-3,1],[-4,0],[2,3]]<br>Expected: [8,6,2,4]</p>
<p>[3,2]<br>[[4,0],[3,0]]<br>Expected: [2,12]</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/sum-of-even-numbers-after-queries/" target="_blank" rel="noopener">https://leetcode.com/problems/sum-of-even-numbers-after-queries/</a></li>
<li><a href="https://leetcode-cn.com/problems/sum-of-even-numbers-after-queries/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/sum-of-even-numbers-after-queries/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>986. 区间列表的交集 | Interval List Intersections</title>
    <url>/leetcode/Interval-List-Intersections/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given two lists of closed intervals, each list of intervals is pairwise disjoint and in sorted order.<br>Return the intersection of these two interval lists.<br>(Formally, a closed interval [a, b] (with a &lt;= b) denotes the set of real numbers x with a &lt;= x &lt;= b.  The intersection of two closed intervals is a set of real numbers that is either empty, or can be represented as a closed interval.  For example, the intersection of [1, 3] and [2, 4] is [2, 3].)</p>
<a id="more"></a>

<p>给定两个由一些闭区间组成的列表，每个区间列表都是成对不相交的，并且已经排序。<br>返回这两个区间列表的交集。<br>（形式上，闭区间 [a, b]（其中 a &lt;= b）表示实数 x 的集合，而 a &lt;= x &lt;= b。两个闭区间的交集是一组实数，要么为空集，要么为闭区间。例如，[1, 3] 和 [2, 4] 的交集为 [2, 3]。）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] intervalIntersection(<span class="keyword">int</span>[][] A, <span class="keyword">int</span>[][] B) &#123;</span><br><span class="line">        List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; A.length &amp;&amp; j &lt; B.length) &#123;</span><br><span class="line">            <span class="keyword">int</span> start1 = A[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> end1 = A[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> start2 = B[j][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> end2 = B[j][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (end1 &lt; start2) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (end2 &lt; start1) &#123;</span><br><span class="line">                j++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> intersectionStart = Math.max(start1, start2);</span><br><span class="line">            <span class="keyword">int</span> intersectionEnd = Math.min(end1, end2);</span><br><span class="line">            res.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;intersectionStart, intersectionEnd&#125;);</span><br><span class="line">            <span class="keyword">if</span> (end1 == intersectionEnd) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (end2 == intersectionEnd) &#123;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.toArray(<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 2 ms, faster than 99.89% of Java online submissions for Interval List Intersections.<br>Memory Usage: 45.8 MB, less than 70.27% of Java online submissions for Interval List Intersections.</p>
<h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><p>[[0,2],[5,10],[13,23],[24,25]]<br>[[1,5],[8,12],[15,24],[25,26]]<br>[[5,10]]<br>[[5,6]]</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/interval-list-intersections/" target="_blank" rel="noopener">https://leetcode.com/problems/interval-list-intersections/</a></li>
<li><a href="https://leetcode-cn.com/problems/interval-list-intersections/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/interval-list-intersections/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>987. 二叉树的垂序遍历 | Vertical Order Traversal of a Binary Tree</title>
    <url>/leetcode/Vertical-Order-Traversal-of-a-Binary-Tree/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a binary tree, return the vertical order traversal of its nodes values.<br>For each node at position (X, Y), its left and right children respectively will be at positions (X-1, Y-1) and (X+1, Y-1).<br>Running a vertical line from X = -infinity to X = +infinity, whenever the vertical line touches some nodes, we report the values of the nodes in order from top to bottom (decreasing Y coordinates).<br>If two nodes have the same position, then the value of the node that is reported first is the value that is smaller.<br>Return an list of non-empty reports in order of X coordinate.  Every report will have a list of values of nodes.</p>
<a id="more"></a>

<p>给定二叉树，按垂序遍历返回其结点值。<br>对位于 (X, Y) 的每个结点而言，其左右子结点分别位于 (X-1, Y-1) 和 (X+1, Y-1)。<br>把一条垂线从 X = -infinity 移动到 X = +infinity ，每当该垂线与结点接触时，我们按从上到下的顺序报告结点的值（ Y 坐标递减）。<br>如果两个结点位置相同，则首先报告的结点值较小。<br>按 X 坐标顺序返回非空报告的列表。每个报告都有一个结点值列表。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; verticalTraversal(TreeNode root) &#123;</span><br><span class="line">        Map&lt;Integer, Map&lt;Integer, PriorityQueue&lt;Integer&gt;&gt;&gt; map = <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">        traversal(root, map, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;(map.size());</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, Map&lt;Integer, PriorityQueue&lt;Integer&gt;&gt;&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            Integer key = entry.getKey();</span><br><span class="line">            Map&lt;Integer, PriorityQueue&lt;Integer&gt;&gt; value = entry.getValue();</span><br><span class="line">            List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;Integer, PriorityQueue&lt;Integer&gt;&gt; inner : value.entrySet()) &#123;</span><br><span class="line">                PriorityQueue&lt;Integer&gt; priorityQueue = inner.getValue();</span><br><span class="line">                <span class="keyword">while</span> (!priorityQueue.isEmpty()) &#123;</span><br><span class="line">                    list.add(priorityQueue.poll());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">traversal</span><span class="params">(TreeNode root, Map&lt;Integer, Map&lt;Integer, PriorityQueue&lt;Integer&gt;&gt;&gt; map, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        map.computeIfAbsent(x, (k) -&gt; <span class="keyword">new</span> TreeMap&lt;&gt;((i1, i2) -&gt; i2 - i1))</span><br><span class="line">                .computeIfAbsent(y, (k) -&gt; <span class="keyword">new</span> PriorityQueue&lt;&gt;())</span><br><span class="line">                .offer(root.val);</span><br><span class="line">        traversal(root.left, map, x-<span class="number">1</span>, y-<span class="number">1</span>);</span><br><span class="line">        traversal(root.right, map, x+<span class="number">1</span>, y-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 5 ms, faster than 20.53% of Java online submissions for Vertical Order Traversal of a Binary Tree.<br>Memory Usage: 36.6 MB, less than 100.00% of Java online submissions for Vertical Order Traversal of a Binary Tree.</p>
<h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><p>[3,9,20,null,null,15,7]<br>[1,2,3,4,5,6,7]<br>[0,2,1,3,null,5,22,9,4,12,25,null,null,13,14,8,6,null,null,null,null,null,27,24,26,null,17,7,null,28,null,null,null,null,null,19,null,11,10,null,null,null,23,16,15,20,18,null,null,null,null,null,21,null,null,29]</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/vertical-order-traversal-of-a-binary-tree/" target="_blank" rel="noopener">https://leetcode.com/problems/vertical-order-traversal-of-a-binary-tree/</a></li>
<li><a href="https://leetcode-cn.com/problems/vertical-order-traversal-of-a-binary-tree/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/vertical-order-traversal-of-a-binary-tree/</a></li>
<li><a href="https://leetcode.com/articles/vertical-order-traversal-of-a-binary-tree/" target="_blank" rel="noopener">https://leetcode.com/articles/vertical-order-traversal-of-a-binary-tree/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>988. 从叶结点开始的最小字符串 | Smallest String Starting From Leaf</title>
    <url>/leetcode/Smallest-String-Starting-From-Leaf/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given the root of a binary tree, each node has a value from 0 to 25 representing the letters ‘a’ to ‘z’: a value of 0 represents ‘a’, a value of 1 represents ‘b’, and so on.<br>Find the lexicographically smallest string that starts at a leaf of this tree and ends at the root.<br>(As a reminder, any shorter prefix of a string is lexicographically smaller: for example, “ab” is lexicographically smaller than “aba”.  A leaf of a node is a node that has no children.)</p>
<a id="more"></a>

<p>给定一颗根结点为 root 的二叉树，书中的每个结点都有一个从 0 到 25 的值，分别代表字母 ‘a’ 到 ‘z’：值 0 代表 ‘a’，值 1 代表 ‘b’，依此类推。<br>找出按字典序最小的字符串，该字符串从这棵树的一个叶结点开始，到根结点结束。<br>（小贴士：字符串中任何较短的前缀在字典序上都是较小的：例如，在字典序上 “ab” 比 “aba” 要小。叶结点是指没有子结点的结点。）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">smallestFromLeaf</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> traversal(root, <span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">traversal</span><span class="params">(TreeNode root, String pre)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">char</span>)(root.val + <span class="string">'a'</span>) + pre;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = (<span class="keyword">char</span>)(root.val + <span class="string">'a'</span>) + pre;</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> traversal(root.right, pre);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (root.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> traversal(root.left, pre);</span><br><span class="line">        &#125;</span><br><span class="line">        String left = traversal(root.left, pre);</span><br><span class="line">        String right = traversal(root.right, pre);</span><br><span class="line">        <span class="keyword">return</span> left.compareTo(right) &lt; <span class="number">0</span> ? left : right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 99.92% of Java online submissions for Smallest String Starting From Leaf.<br>Memory Usage: 36.6 MB, less than 100.00% of Java online submissions for Smallest String Starting From Leaf.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><p>[0,1,2,3,4,3,4]<br>[25,1,3,1,3,0,2]<br>[2,2,1,null,1,0,null,0]<br>[4,0,1,1]<br>[25,1,null,0,0,1,null,null,null,0]</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/smallest-string-starting-from-leaf/" target="_blank" rel="noopener">https://leetcode.com/problems/smallest-string-starting-from-leaf/</a></li>
<li><a href="https://leetcode-cn.com/problems/smallest-string-starting-from-leaf/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/smallest-string-starting-from-leaf/</a></li>
<li><a href="https://leetcode.com/articles/smallest-string-starting-from-leaf/" target="_blank" rel="noopener">https://leetcode.com/articles/smallest-string-starting-from-leaf/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>989. 数组形式的整数加法 | Add to Array-Form of Integer</title>
    <url>/leetcode/Add-to-Array-Form-of-Integer/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>For a non-negative integer X, the array-form of X is an array of its digits in left to right order.  For example, if X = 1231, then the array form is [1,2,3,1].<br>Given the array-form A of a non-negative integer X, return the array-form of the integer X+K.</p>
<a id="more"></a>

<p>对于非负整数 X 而言，X 的数组形式是每位数字按从左到右的顺序形成的数组。例如，如果 X = 1231，那么其数组形式为 [1,2,3,1]。<br>给定非负整数 X 的数组形式 A，返回整数 X+K 的数组形式。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">addToArrayForm</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = A.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            carry += A[i] + K % <span class="number">10</span>;</span><br><span class="line">            K /= <span class="number">10</span>;</span><br><span class="line">            A[i] = carry % <span class="number">10</span>;</span><br><span class="line">            carry /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (carry &gt; <span class="number">0</span> || K &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            carry += K;</span><br><span class="line">            <span class="keyword">while</span> (carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                res.add(<span class="number">0</span>, carry % <span class="number">10</span>);</span><br><span class="line">                carry /= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            res.add(A[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 4 ms, faster than 94.78% of Java online submissions for Add to Array-Form of Integer.<br>Memory Usage: 40.9 MB, less than 100.00% of Java online submissions for Add to Array-Form of Integer.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><p>[1,2,0,0]<br>34<br>[2,7,4]<br>181<br>[2,1,5]<br>186<br>[9,9,9,9,9,9,9,9,9,9]<br>1<br>[0]<br>23</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/add-to-array-form-of-integer/" target="_blank" rel="noopener">https://leetcode.com/problems/add-to-array-form-of-integer/</a></li>
<li><a href="https://leetcode-cn.com/problems/add-to-array-form-of-integer/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/add-to-array-form-of-integer/</a></li>
<li><a href="https://leetcode.com/articles/add-to-array-form-of-integer/" target="_blank" rel="noopener">https://leetcode.com/articles/add-to-array-form-of-integer/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>990. 等式方程的可满足性 | Satisfiability of Equality Equations</title>
    <url>/leetcode/Satisfiability-of-Equality-Equations/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array equations of strings that represent relationships between variables, each string equations[i] has length 4 and takes one of two different forms: “a==b” or “a!=b”.  Here, a and b are lowercase letters (not necessarily different) that represent one-letter variable names.<br>Return true if and only if it is possible to assign integers to variable names so as to satisfy all the given equations.</p>
<a id="more"></a>

<p>给定一个由表示变量之间关系的字符串方程组成的数组，每个字符串方程 equations[i] 的长度为 4，并采用两种不同的形式之一：”a==b” 或 “a!=b”。在这里，a 和 b 是小写字母（不一定不同），表示单字母变量名。<br>只有当可以将整数分配给变量名，以便满足所有给定的方程时才返回 true，否则返回 false。 </p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equationsPossible</span><span class="params">(String[] equations)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] colors = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">int</span> color = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (String s : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(<span class="number">1</span>) == <span class="string">'='</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> from = s.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">int</span> to = s.charAt(<span class="number">3</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (colors[from] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (colors[to] == <span class="number">0</span>) &#123;</span><br><span class="line">                        colors[to] = colors[from];</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        repaint(colors, colors[from], colors[to]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (colors[to] != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (colors[from] == <span class="number">0</span>) &#123;</span><br><span class="line">                        colors[from] = colors[to];</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        repaint(colors, colors[from], colors[to]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    colors[from] = colors[to] = color++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (String s : equations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(<span class="number">1</span>) == <span class="string">'!'</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> from = s.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">int</span> to = s.charAt(<span class="number">3</span>) - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (from == to || colors[from] != <span class="number">0</span> &amp;&amp; colors[from] == colors[to]) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">repaint</span><span class="params">(<span class="keyword">int</span>[] colors, <span class="keyword">int</span> original, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; colors.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (colors[i] == original) &#123;</span><br><span class="line">                colors[i] = target;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 100.00% of Java online submissions for Satisfiability of Equality Equations.<br>Memory Usage: 36.1 MB, less than 100.00% of Java online submissions for Satisfiability of Equality Equations.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><p>[“a==b”,”b!=a”]<br>[“b==a”,”a==b”]<br>[“a==b”,”b==c”,”a==c”]<br>[“a==b”,”b!=c”,”c==a”]<br>[“c==c”,”b==d”,”x!=z”]<br>[“a!=a”]<br>[“a==b”,”e==c”,”b==c”,”a!=e”]</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/satisfiability-of-equality-equations/" target="_blank" rel="noopener">https://leetcode.com/problems/satisfiability-of-equality-equations/</a></li>
<li><a href="https://leetcode-cn.com/problems/satisfiability-of-equality-equations/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/satisfiability-of-equality-equations/</a></li>
<li><a href="https://leetcode.com/articles/satisfiability-of-equality-equations/" target="_blank" rel="noopener">https://leetcode.com/articles/satisfiability-of-equality-equations/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>991. 坏了的计算器 | Broken Calculator</title>
    <url>/leetcode/Broken-Calculator/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>On a broken calculator that has a number showing on its display, we can perform two operations:</p>
<ul>
<li>Double: Multiply the number on the display by 2, or;</li>
<li>Decrement: Subtract 1 from the number on the display.<br>Initially, the calculator is displaying the number X.<br>Return the minimum number of operations needed to display the number Y.</li>
</ul>
<a id="more"></a>

<p>在显示着数字的坏计算器上，我们可以执行以下两种操作：</p>
<ul>
<li>双倍（Double）：将显示屏上的数字乘 2；</li>
<li>递减（Decrement）：将显示屏上的数字减 1 。<br>最初，计算器显示数字 X。<br>返回显示数字 Y 所需的最小操作数。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">brokenCalc</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> Y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Y &lt;= X) &#123;</span><br><span class="line">            <span class="keyword">return</span> X - Y;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Y % <span class="number">2</span> == <span class="number">0</span> ? <span class="number">1</span> + brokenCalc(X, Y &gt;&gt; <span class="number">1</span>) : <span class="number">1</span> + brokenCalc(X, Y + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Broken Calculator.<br>Memory Usage: 33.1 MB, less than 14.29% of Java online submissions for Broken Calculator.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/broken-calculator/" target="_blank" rel="noopener">https://leetcode.com/problems/broken-calculator/</a></li>
<li><a href="https://leetcode-cn.com/problems/broken-calculator/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/broken-calculator/</a></li>
<li><a href="https://leetcode.com/articles/broken-calculator/" target="_blank" rel="noopener">https://leetcode.com/articles/broken-calculator/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>992. K 个不同整数的子数组 | Subarrays with K Different Integers</title>
    <url>/leetcode/Subarrays-with-K-Different-Integers/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of positive integers, call a (contiguous, not necessarily distinct) subarray of A good if the number of different integers in that subarray is exactly K.<br>(For example, [1,2,3,1,2] has 3 different integers: 1, 2, and 3.)<br>Return the number of good subarrays of A.</p>
<a id="more"></a>

<p>给定一个正整数数组 A，如果 A 的某个子数组中不同整数的个数恰好为 K，则称 A 的这个连续、不一定独立的子数组为好子数组。<br>（例如，[1,2,3,1,2] 中有 3 个不同的整数：1，2，以及 3。）<br>返回 A 中好子数组的数目。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraysWithKDistinct</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        Window window1 = <span class="keyword">new</span> Window();</span><br><span class="line">        Window window2 = <span class="keyword">new</span> Window();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; A.length; right++) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = A[right];</span><br><span class="line">            window1.add(x);</span><br><span class="line">            window2.add(x);</span><br><span class="line">            <span class="keyword">while</span> (window1.diffs() &gt; K) &#123;</span><br><span class="line">                window1.remove(A[left1++]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (window2.diffs() &gt;= K) &#123;</span><br><span class="line">                window2.remove(A[left2++]);</span><br><span class="line">            &#125;</span><br><span class="line">            res += left2 - left1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Window</span> </span>&#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> nonZeros = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            map.put(num, map.getOrDefault(num, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (map.get(num) == <span class="number">1</span>) &#123;</span><br><span class="line">                nonZeros++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            map.put(num, map.getOrDefault(num, <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (map.get(num) == <span class="number">0</span>) &#123;</span><br><span class="line">                nonZeros--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">diffs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> nonZeros;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 67 ms, faster than 54.86% of Java online submissions for Subarrays with K Different Integers.<br>Memory Usage: 41.8 MB, less than 78.95% of Java online submissions for Subarrays with K Different Integers.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/subarrays-with-k-different-integers/" target="_blank" rel="noopener">https://leetcode.com/problems/subarrays-with-k-different-integers/</a></li>
<li><a href="https://leetcode-cn.com/problems/subarrays-with-k-different-integers/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/subarrays-with-k-different-integers/</a></li>
<li><a href="https://leetcode.com/articles/subarrays-with-k-different-integers/" target="_blank" rel="noopener">https://leetcode.com/articles/subarrays-with-k-different-integers/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>993. 二叉树的堂兄弟节点 | Cousins in Binary Tree</title>
    <url>/leetcode/Cousins-in-Binary-Tree/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a binary tree, the root node is at depth 0, and children of each depth k node are at depth k+1.<br>Two nodes of a binary tree are cousins if they have the same depth, but have different parents.<br>We are given the root of a binary tree with unique values, and the values x and y of two different nodes in the tree.<br>Return true if and only if the nodes corresponding to the values x and y are cousins.</p>
<a id="more"></a>

<p>在二叉树中，根节点位于深度 0 处，每个深度为 k 的节点的子节点位于深度 k+1 处。<br>如果二叉树的两个节点深度相同，但父节点不同，则它们是一对堂兄弟节点。<br>我们给出了具有唯一值的二叉树的根节点 root，以及树中两个不同节点的值 x 和 y。<br>只有与值 x 和 y 对应的节点是堂兄弟节点时，才返回 true。否则，返回 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCousins</span><span class="params">(TreeNode root, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] parent = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">101</span>];</span><br><span class="line">        <span class="keyword">int</span>[] depth = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">101</span>];</span><br><span class="line">        dfs(root, -<span class="number">1</span>, <span class="number">0</span>, parent, depth);</span><br><span class="line">        <span class="keyword">return</span> parent[x] != parent[y] &amp;&amp; depth[x] == depth[y];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode root, <span class="keyword">int</span> preValue, <span class="keyword">int</span> preDepth, <span class="keyword">int</span>[] parent, <span class="keyword">int</span>[] depth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        parent[root.val] = preValue;</span><br><span class="line">        depth[root.val] = preDepth+<span class="number">1</span>;</span><br><span class="line">        dfs(root.left, root.val, preDepth+<span class="number">1</span>, parent, depth);</span><br><span class="line">        dfs(root.right, root.val, preDepth+<span class="number">1</span>, parent, depth);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Cousins in Binary Tree.<br>Memory Usage: 34.7 MB, less than 100.00% of Java online submissions for Cousins in Binary Tree.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/cousins-in-binary-tree/" target="_blank" rel="noopener">https://leetcode.com/problems/cousins-in-binary-tree/</a></li>
<li><a href="https://leetcode-cn.com/problems/cousins-in-binary-tree/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/cousins-in-binary-tree/</a></li>
<li><a href="https://leetcode.com/articles/cousins-in-binary-tree/" target="_blank" rel="noopener">https://leetcode.com/articles/cousins-in-binary-tree/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>994. 腐烂的橘子 | Rotting Oranges</title>
    <url>/leetcode/Rotting-Oranges/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a given grid, each cell can have one of three values:</p>
<ul>
<li>the value 0 representing an empty cell;</li>
<li>the value 1 representing a fresh orange;</li>
<li>the value 2 representing a rotten orange.<br>Every minute, any fresh orange that is adjacent (4-directionally) to a rotten orange becomes rotten.<br>Return the minimum number of minutes that must elapse until no cell has a fresh orange.  If this is impossible, return -1 instead.</li>
</ul>
<a id="more"></a>

<p>在给定的网格中，每个单元格可以有以下三个值之一：</p>
<ul>
<li>值 0 代表空单元格；</li>
<li>值 1 代表新鲜橘子；</li>
<li>值 2 代表腐烂的橘子。<br>每分钟，任何与腐烂的橘子（在 4 个正方向上）相邻的新鲜橘子都会腐烂。<br>返回直到单元格中没有新鲜橘子为止所必须经过的最小分钟数。如果不可能，返回 -1。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line"></span><br><span class="line">    public int orangesRotting(int[][] grid) &#123;</span><br><span class="line">        int m &#x3D; grid.length;</span><br><span class="line">        int n &#x3D; grid[0].length;</span><br><span class="line">        boolean noFresh &#x3D; true;</span><br><span class="line">        Queue&lt;int[]&gt; queue &#x3D; new LinkedList&lt;&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; m; i++) &#123;</span><br><span class="line">            for (int j &#x3D; 0; j &lt; n; j++) &#123;</span><br><span class="line">                if (grid[i][j] &#x3D;&#x3D; 2) &#123;</span><br><span class="line">                    queue.offer(new int[]&#123;i,j&#125;);</span><br><span class="line">                &#125; else if (grid[i][j] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    noFresh &#x3D; false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (noFresh) &#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        int count &#x3D; 0;</span><br><span class="line">        while (!queue.isEmpty()) &#123;</span><br><span class="line">            int size &#x3D; queue.size();</span><br><span class="line">            for (int i &#x3D; 0; i &lt; size; i++) &#123;</span><br><span class="line">                int[] pos &#x3D; queue.poll();</span><br><span class="line">                int r &#x3D; pos[0];</span><br><span class="line">                int c &#x3D; pos[1];</span><br><span class="line">                if (r &gt; 0 &amp;&amp; grid[r-1][c] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    grid[r-1][c] &#x3D; -1;</span><br><span class="line">                    queue.offer(new int[]&#123;r-1,c&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                if (r &lt; m-1 &amp;&amp; grid[r+1][c] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    grid[r+1][c] &#x3D; -1;</span><br><span class="line">                    queue.offer(new int[]&#123;r+1,c&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                if (c &gt; 0 &amp;&amp; grid[r][c-1] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    grid[r][c-1] &#x3D; -1;</span><br><span class="line">                    queue.offer(new int[]&#123;r,c-1&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                if (c &lt; n-1 &amp;&amp; grid[r][c+1] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    grid[r][c+1] &#x3D; -1;</span><br><span class="line">                    queue.offer(new int[]&#123;r,c+1&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; m; i++) &#123;</span><br><span class="line">            for (int j &#x3D; 0; j &lt; n; j++) &#123;</span><br><span class="line">                if (grid[i][j] &#x3D;&#x3D; 1) &#123;</span><br><span class="line">                    return -1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return count-1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 100.00% of Java online submissions for Rotting Oranges.<br>Memory Usage: 39 MB, less than 81.25% of Java online submissions for Rotting Oranges.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/rotting-oranges/" target="_blank" rel="noopener">https://leetcode.com/problems/rotting-oranges/</a></li>
<li><a href="https://leetcode-cn.com/problems/rotting-oranges/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/rotting-oranges/</a></li>
<li><a href="https://leetcode.com/articles/rotting-oranges/" target="_blank" rel="noopener">https://leetcode.com/articles/rotting-oranges/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>995. K 连续位的最小翻转次数 | Minimum Number of K Consecutive Bit Flips</title>
    <url>/leetcode/Minimum-Number-of-K-Consecutive-Bit-Flips/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In an array A containing only 0s and 1s, a K-bit flip consists of choosing a (contiguous) subarray of length K and simultaneously changing every 0 in the subarray to 1, and every 1 in the subarray to 0.<br>Return the minimum number of K-bit flips required so that there is no 0 in the array.  If it is not possible, return -1.</p>
<a id="more"></a>

<p>在仅包含 0 和 1 的数组 A 中，一次 K 位翻转包括选择一个长度为 K 的（连续）子数组，同时将子数组中的每个 0 更改为 1，而每个 1 更改为 0。<br>返回所需的 K 位翻转的次数，以便数组没有值为 0 的元素。如果不可能，返回 -1。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>贪心，从左开始遍历，如果左侧第一个是0的话，一定需要翻转一次。以此类推。<br>同时，在当前位置翻转时，在 K 个位置之后记录一个结束翻转的信号。这样，任何一个位置的翻转次数等于翻转次数 - 结束翻转次数。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minKBitFlips</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> openEvents = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> closeEvents = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] hits = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((A[i] + openEvents - closeEvents) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 需要翻转</span></span><br><span class="line">                <span class="keyword">if</span> (i &gt; A.length - K) &#123;</span><br><span class="line">                    <span class="comment">// 剩余分组不足 K 个，无法翻转</span></span><br><span class="line">                    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                openEvents++;</span><br><span class="line">                hits[i+K-<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (hits[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                closeEvents++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> openEvents;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 6 ms, faster than 73.03% of Java online submissions for Minimum Number of K Consecutive Bit Flips.<br>Memory Usage: 44.1 MB, less than 100.00% of Java online submissions for Minimum Number of K Consecutive Bit Flips.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/minimum-number-of-k-consecutive-bit-flips/" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-number-of-k-consecutive-bit-flips/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-number-of-k-consecutive-bit-flips/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-number-of-k-consecutive-bit-flips/</a></li>
<li><a href="https://leetcode.com/articles/minimum-number-of-k-consecutive-bit-flips/" target="_blank" rel="noopener">https://leetcode.com/articles/minimum-number-of-k-consecutive-bit-flips/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>996. 正方形数组的数目 | Number of Squareful Arrays【todo】</title>
    <url>/leetcode/Number-of-Squareful-Arrays/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="06f1d4a3bf5677ea1342c33f3cb8e09cda64e6f78967beb70353c16af04d6879">bc52a409ec42bdd74538100d12e86d7c3bc9859ac07880cae6644198499196222e3f8b390e845cac3f3628a9c0f58e502803521e64ae1649b8abac34e4c66f14708b0fb5ea0628591a50e67a4a376de4e784295282eef08307dab058782ad72570c2221d3cfec658855b67831d8cc540b41c69b981c0034400ec5c4d0d42cd0b38be6ee5bbab848cb53dbfbe4231265f20f87b827596987ac6c883490c2c9f4182dee2d40f8c7a4d46367d590404fd83b8a43ff1ca33cabceda891ba742b895a7b89bc7621c09fbf01a9e0e4e18e141785bf034e92a8a48fa0ba2e21a3eb30eca5faff193749e237653f85fdae2a7842fefdde6528c260b7e6907acea055ec4651b76d4a1692c0dc6188462f057a7d742f51e10dd50a4ad64f267a20d62ee96006fa6415214e9caae9cdd1a488037f89d2267bf8cc93470baae1cf0ab90f7f86125bf23b3c60d89f84e4f8b5b38dc540c25727827e0047ca6d4d233d50aa6cb688645d826390d6e9ce17259b97954daf5bfbe76bac0cda4441703aaa212127fa20110957fa2b86534ed995cbecfc998286285eec33f162d003d4d9f6f41604ff0bfd9e7e2cb6c597e29840a351f7f6c4dfd5212ede01b1dfb590dea2515817060f0c5d17ad9c833668be51b2aba25aee0c1da5ac90e9f50d887081cf6ed69a9994d94a6f156ced737d6cfa7569057c702aef46a060b5f57088e83f79075e2ccea139452b330086cdbe9d13ea37c9482b342aa229e89f8edd3b156b5e19c7f3fe16399d183079dce295a02d0fb9e470ad0b502645cafc31ede32d7d568791088ff94983edfcbccffb388acf1f25bad047f48a3d4ffcbaa9720a8ba6a280611898297806fc871bd9c4a7c87ff36ff17874255cd8c5f31779c9e631f754eaf5bcc47ba3a1d29d8ec02c4e4e9a4347de4f54ad64fb2844dfce7d5133d126b2e0e083905f504cd0873373a089dfe8c78b1c2e4adf4dcf8e399bbb854d13dfcbadada84a9029858fe79c47d67535e988e9264da478e1a8301423e34c2ad88fac07f52713f585e1cb087ce211457ad1c5758ef5a3285f17923b7e48d9c7b3277868cbd561f992ad1b024faa23e3325fa6aee0950262ec5882a4d9744b3029c046b9269be4aa035ed2b21255a3cde599dd78ecdaefabbd2a91cf76b2651fcb4c78681413f8ab8bf01879a17b255733d97a29bb3a43256e77c3169b68dfaf5a306980841764d97b6588feab94fc9d70c0bca8bc65a8870f32547c5c2150c9ef50783c2142538e9c00f52e618e9a75533e14355f1faf79d2951ada0c5cd7f635ab1e4ed4b11943fff483d2a09b613f85e734c07672f7678d19f1880c4d3d130b983861ae4ffc7d972931c40d4a7ccfe46f08cc8493a1cb08b9f0050387ad01fed5535f1ad42549c57f4e91be0baf2d1bd9390cc3937a037f9e3124e06ac3bf70fe4a906099b6d141ad37d41794c3819a86390e644965fae05a999f9f56ecbc43535f615d2898a62e18fbef0ed3074919452bf47677bc8e7dea916b2808569ddab1c5c06c756b356ad5c3176f3e512fb51512e8ec09e60c97018c1e1532210e09cc0da1eda0f697610c7725bbfbee4098730fb1d165a0e036a1eb6179300f26faaad8635dad55bcbebf5a33e115559c13e5c4c0a67c245e41e86d2487dbf9b01d10a3d04e1a8939f1d60201faa5f32893c922e3128b25c7865e67f5b65085dd1cc895ce5f6154a18a46a4987240ac3b7a682fdb07f0d449474dde500b7586c70fa38006245b3fc7eb6c285cca41bfd1bce8aec02872ebe4bb6439846efaf5c425e670116e8aa88fa862ce85a4cb4b2d9fc8a9b9e6883c5bcfee3d842e39ef29383454c4862ab8a5e1a775e310dbf76b06ae40df4476374e519bc6a9dd34dc57ffb40b971e458e3022d4679d890640efc792a331ae5c384f7f2e0e745845c6185b7d50964564db040b20e1fde0315a874f723958125393672f48474f2792a05b6b7d36dd53296c42f5dd1c3154ac9e93054f66da734ea3854a2cb9d066a0631c09f9180def03ed3f18b4b2d71adb4ef2e1e56c543ed6d2961dbda2c30146a6d7ac2d48fb27412943116b777b744bf5bd7dca1fd6e8a56c30807a944f4aa2f5cd5cab11e7f6ebc3bea6d528aeb1aff19cd2b58c759699aeb4afbdf2687a48f82e32d201da8d76c7dfefe5e1a05097ecad9ecddee8db96284505737d54c80be242aeb7f26d87347f79aa7c98e7f9e9a38d727a71484eb97dda88bb1490e9d8b0da08fac6c7d5b0a18d72b1c935c8efc3449e1c1f01b6256f37f4bb12f03e081fede4dd3fd1cecf29f32be92c37fbba9d90f29a4d31f823e5e2832ed282b49837c61025b3ca65a6010c9fe1c0ce075cdac57f4609b1dbf5af6e82170f7301a05ccc6931f72ed08845231925ee49787d896687c2478bf6194962e422a26b4d12c1de4031c8c80a8032473784f4455ad63ce418b6da84c7936bed2e09779e2404a35a5d19ef0c9f5133d33c540e35d722cfcbd49f7652cd4b0f84fd5db6f825a545d3c2146a776847</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>997. 找到小镇的法官 | Find the Town Judge</title>
    <url>/leetcode/Find-the-Town-Judge/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a town, there are N people labelled from 1 to N.  There is a rumor that one of these people is secretly the town judge.<br>If the town judge exists, then:</p>
<ul>
<li>The town judge trusts nobody.</li>
<li>Everybody (except for the town judge) trusts the town judge.</li>
<li>There is exactly one person that satisfies properties 1 and 2.<br>You are given trust, an array of pairs trust[i] = [a, b] representing that the person labelled a trusts the person labelled b.<br>If the town judge exists and can be identified, return the label of the town judge.  Otherwise, return -1.</li>
</ul>
<a id="more"></a>

<p>在一个小镇里，按从 1 到 N 标记了 N 个人。传言称，这些人中有一个是小镇上的秘密法官。<br>如果小镇的法官真的存在，那么：</p>
<ul>
<li>小镇的法官不相信任何人。</li>
<li>每个人（除了小镇法官外）都信任小镇的法官。</li>
<li>只有一个人同时满足属性 1 和属性 2 。<br>给定数组 trust，该数组由信任对 trust[i] = [a, b] 组成，表示标记为 a 的人信任标记为 b 的人。<br>如果小镇存在秘密法官并且可以确定他的身份，请返回该法官的标记。否则，返回 -1。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findJudge</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span>[][] trust)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] trusted = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">int</span>[] trusts = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] info : trust) &#123;</span><br><span class="line">            trusts[info[<span class="number">0</span>]-<span class="number">1</span>]++;</span><br><span class="line">            trusted[info[<span class="number">1</span>]-<span class="number">1</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (trusted[i] == N-<span class="number">1</span> &amp;&amp; trusts[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 3 ms, faster than 95.44% of Java online submissions for Find the Town Judge.<br>Memory Usage: 57.7 MB, less than 100.00% of Java online submissions for Find the Town Judge.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/find-the-town-judge/" target="_blank" rel="noopener">https://leetcode.com/problems/find-the-town-judge/</a></li>
<li><a href="https://leetcode-cn.com/problems/find-the-town-judge/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/find-the-town-judge/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>998. 最大二叉树 II | Maximum Binary Tree II</title>
    <url>/leetcode/Maximum-Binary-Tree-II/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We are given the root node of a maximum tree: a tree where every node has a value greater than any other value in its subtree.<br>Just as in the previous problem, the given tree was constructed from an list A (root = Construct(A)) recursively with the following Construct(A) routine:</p>
<ul>
<li>If A is empty, return null.</li>
<li>Otherwise, let A[i] be the largest element of A.  Create a root node with value A[i].</li>
<li>The left child of root will be Construct([A[0], A[1], …, A[i-1]])</li>
<li>The right child of root will be Construct([A[i+1], A[i+2], …, A[A.length - 1]])</li>
<li>Return root.<br>Note that we were not given A directly, only a root node root = Construct(A).<br>Suppose B is a copy of A with the value val appended to it.  It is guaranteed that B has unique values.<br>Return Construct(B).</li>
</ul>
<a id="more"></a>

<p>最大树定义：一个树，其中每个节点的值都大于其子树中的任何其他值。<br>给出最大树的根节点 root。<br>就像之前的问题那样，给定的树是从表 A（root = Construct(A)）递归地使用下述 Construct(A) 例程构造的：<br>如果 A 为空，返回 null<br>否则，令 A[i] 作为 A 的最大元素。创建一个值为 A[i] 的根节点 root<br>root 的左子树将被构建为 Construct([A[0], A[1], …, A[i-1]])<br>root 的右子树将被构建为 Construct([A[i+1], A[i+2], …, A[A.length - 1]])<br>返回 root<br>请注意，我们没有直接给定 A，只有一个根节点 root = Construct(A).<br>假设 B 是 A 的副本，并附加值 val。保证 B 中的值是不同的。<br>返回 Construct(B)。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">insertIntoMaxTree</span><span class="params">(TreeNode root, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        TreeNode dummy = <span class="keyword">new</span> TreeNode(<span class="number">0</span>);</span><br><span class="line">        dummy.right = root;</span><br><span class="line">        TreeNode pre = dummy;</span><br><span class="line">        <span class="keyword">while</span> (root != <span class="keyword">null</span> &amp;&amp; root.val &gt; val) &#123;</span><br><span class="line">            pre = root;</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode node = <span class="keyword">new</span> TreeNode(val);</span><br><span class="line">        node.left = root;</span><br><span class="line">        pre.right = node;</span><br><span class="line">        <span class="keyword">return</span> dummy.right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Maximum Binary Tree II.<br>Memory Usage: 35.9 MB, less than 100.00% of Java online submissions for Maximum Binary Tree II.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/maximum-binary-tree-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/maximum-binary-tree-ii/</a></li>
<li><a href="https://leetcode-cn.com/problems/maximum-binary-tree-ii/1" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-binary-tree-ii/1</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>999. 车的可用捕获量 | Available Captures for Rook</title>
    <url>/leetcode/Available-Captures-for-Rook/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>On an 8 x 8 chessboard, there is one white rook.  There also may be empty squares, white bishops, and black pawns.  These are given as characters ‘R’, ‘.’, ‘B’, and ‘p’ respectively. Uppercase characters represent white pieces, and lowercase characters represent black pieces.<br>The rook moves as in the rules of Chess: it chooses one of four cardinal directions (north, east, west, and south), then moves in that direction until it chooses to stop, reaches the edge of the board, or captures an opposite colored pawn by moving to the same square it occupies.  Also, rooks cannot move into the same square as other friendly bishops.<br>Return the number of pawns the rook can capture in one move.</p>
<a id="more"></a>

<p>在一个 8 x 8 的棋盘上，有一个白色车（rook）。也可能有空方块，白色的象（bishop）和黑色的卒（pawn）。它们分别以字符 “R”，“.”，“B” 和 “p” 给出。大写字符表示白棋，小写字符表示黑棋。<br>车按国际象棋中的规则移动：它选择四个基本方向中的一个（北，东，西和南），然后朝那个方向移动，直到它选择停止、到达棋盘的边缘或移动到同一方格来捕获该方格上颜色相反的卒。另外，车不能与其他友方（白色）象进入同一个方格。<br>返回车能够在一次移动中捕获到的卒的数量。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>先找到车的位置<br>然后，从车的位置出发，分别从上下左右四个防线寻找兵</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numRookCaptures</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = board.length;</span><br><span class="line">        <span class="keyword">int</span> n = board[<span class="number">0</span>].length;</span><br><span class="line">        <span class="comment">// find Rook</span></span><br><span class="line">        <span class="keyword">int</span> capatured = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        outer:</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            capatured = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">char</span> c = board[i][j];</span><br><span class="line">                <span class="keyword">if</span> (c == <span class="string">'B'</span>) &#123;</span><br><span class="line">                    capatured = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">'p'</span>) &#123;</span><br><span class="line">                    capatured = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">'R'</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span> outer;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// --&gt;</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> c = j+<span class="number">1</span>; c &lt; n; c++) &#123;</span><br><span class="line">            <span class="keyword">char</span> t = board[i][c];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">'B'</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">'p'</span>) &#123;</span><br><span class="line">                capatured++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ↑</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = i+<span class="number">1</span>; r &lt; n; r++) &#123;</span><br><span class="line">            <span class="keyword">char</span> t = board[r][j];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">'B'</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">'p'</span>) &#123;</span><br><span class="line">                capatured++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ↓</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = i-<span class="number">1</span>; r &gt;= <span class="number">0</span>; r--) &#123;</span><br><span class="line">            <span class="keyword">char</span> t = board[r][j];</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="string">'B'</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">'p'</span>) &#123;</span><br><span class="line">                capatured++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> capatured;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Available Captures for Rook.<br>Memory Usage: 33.9 MB, less than 100.00% of Java online submissions for Available Captures for Rook.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/available-captures-for-rook/" target="_blank" rel="noopener">https://leetcode.com/problems/available-captures-for-rook/</a></li>
<li><a href="https://leetcode-cn.com/problems/available-captures-for-rook/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/available-captures-for-rook/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1044. 最长重复子串 | Longest Duplicate Substring</title>
    <url>/leetcode/Longest-Duplicate-Substring/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a string S, consider all duplicated substrings: (contiguous) substrings of S that occur 2 or more times.  (The occurrences may overlap.)<br>Return any duplicated substring that has the longest possible length.  (If S does not have a duplicated substring, the answer is “”.)</p>
<a id="more"></a>

<p>给出一个字符串 S，考虑其所有重复子串（S 的连续子串，出现两次或多次，可能会有重叠）。<br>返回任何具有最长可能长度的重复子串。（如果 S 不含重复子串，那么答案为 “”。）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>本题两个关键：</p>
<ul>
<li>二分查找</li>
<li>Rabin-Karp 字符串编码</li>
</ul>
<p>可以了解下生日悖论，在计算哈希函数冲突概率上很有用。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line"></span><br><span class="line">    public String longestDupSubstring(String s) &#123;</span><br><span class="line">        &#x2F;&#x2F; transfer string into number array, to increase traversal speed</span><br><span class="line">        int[] nums &#x3D; new int[s.length()];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; nums.length; i++) &#123;</span><br><span class="line">            nums[i] &#x3D; s.charAt(i) - &#39;a&#39;;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; binary search the max length</span><br><span class="line">        int l &#x3D; 0;</span><br><span class="line">        int r &#x3D; nums.length - 1;</span><br><span class="line">        int start &#x3D; -1;</span><br><span class="line">        long modulus &#x3D; (long) Math.pow(2, 32);</span><br><span class="line">        while (l &lt; r) &#123;</span><br><span class="line">            int mid &#x3D; (l + r + 1) &#x2F; 2;</span><br><span class="line">            int i &#x3D; searchDupOfLengthK(nums, mid, modulus);</span><br><span class="line">            if (i !&#x3D; -1) &#123;</span><br><span class="line">                l &#x3D; mid;</span><br><span class="line">                start &#x3D; i;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                r &#x3D; mid - 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return start &#x3D;&#x3D; -1 ? &quot;&quot; : s.substring(start, start + l);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int searchDupOfLengthK(int[] nums, int k, long modulus) &#123;</span><br><span class="line">        Set&lt;Long&gt; seen &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">        &#x2F;&#x2F; 26^k</span><br><span class="line">        long ak &#x3D; 1;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; k; i++) &#123;</span><br><span class="line">            ak &#x3D; (ak * 26) % modulus;</span><br><span class="line">        &#125;</span><br><span class="line">        long coding &#x3D; 0;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; k; i++) &#123;</span><br><span class="line">            coding &#x3D; (coding * 26 + nums[i]) % modulus;</span><br><span class="line">        &#125;</span><br><span class="line">        seen.add(coding);</span><br><span class="line">        for (int i &#x3D; 1; i &lt;&#x3D; nums.length - k; i++) &#123;</span><br><span class="line">            if (i &#x3D;&#x3D; 4080 || i &#x3D;&#x3D; 4860) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            coding &#x3D; (coding * 26 - nums[i-1] * ak % modulus + modulus) % modulus;</span><br><span class="line">            coding &#x3D; (coding + nums[i+k-1]) % modulus;</span><br><span class="line">            if (seen.contains(coding)) &#123;</span><br><span class="line">                return i;</span><br><span class="line">            &#125;</span><br><span class="line">            if (i &#x3D;&#x3D; 4080 || i &#x3D;&#x3D; 4860) &#123;</span><br><span class="line">                System.out.println(coding);</span><br><span class="line">            &#125;</span><br><span class="line">            seen.add(coding);</span><br><span class="line">        &#125;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 332 ms, faster than 32.23% of Java online submissions for Longest Duplicate Substring.<br>Memory Usage: 52.5 MB, less than 100.00% of Java online submissions for Longest Duplicate Substring.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/longest-duplicate-substring/" target="_blank" rel="noopener">https://leetcode.com/problems/longest-duplicate-substring/</a></li>
<li><a href="https://leetcode-cn.com/problems/longest-duplicate-substring/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/longest-duplicate-substring/</a></li>
<li><a href="https://leetcode-cn.com/problems/longest-duplicate-substring/solution/zui-chang-zhong-fu-zi-chuan-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/longest-duplicate-substring/solution/zui-chang-zhong-fu-zi-chuan-by-leetcode/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1043. 分隔数组以得到最大和 | Partition Array for Maximum Sum【todo】</title>
    <url>/leetcode/Partition-Array-for-Maximum-Sum/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="2611d74127ea6983b02ed570e26847ef853e47f242a5e96d1833bd3d9f4aca4e">bc52a409ec42bdd74538100d12e86d7c3bc9859ac07880cae6644198499196222e3f8b390e845cac3f3628a9c0f58e502803521e64ae1649b8abac34e4c66f14708b0fb5ea0628591a50e67a4a376de4e784295282eef08307dab058782ad72570c2221d3cfec658855b67831d8cc540b41c69b981c0034400ec5c4d0d42cd0b38be6ee5bbab848cb53dbfbe4231265f011cf3bb5950562e513b22e3927f55d0b839b51913bd17077bf2840c1808b7931ec0d3b22d1491192228e926f0d7915ff71fa1e86038697f39cb04084e0c66e1fb7f83fd2f119b6697bb79cc59e493f0d68ecc135b8eeee650a1c13f896555e0d5227c5f8ef803bb5ca42c8b538e45ba3dbdc9151fc11a161ea42eb6be30f260259ea7f5b3df05db31bb426fb90fa20cd9ca68080bfb4c8cd41eb4d97fb47434e273a4a65c07406a8d2e2173143cbb5937671995a4fe685ad3ef57a16f637b7c69436bcc133c75716c50dda4e9bece28b3508f2677fc6dc0cd3f473dd36befdce539ea6b92df13533f09bce4a1303bf7d1208d0e018694dfab2a7cdb775a238579bbb6929828d3b7a60db312e933a31521d38b66d36497ce5c45d7a39a8e4ec6b40be0872effc4912d2eebd2326ed5f8a8a7f6666e21ccf5951049ec1e0be345cb12353010ac9982ed2a88ab5cb53cec85c802ee0926af1b1721cc11a3dee39c2c3d1fbd35a664d3b6e1b060544df2112a9c284806518e683364a30f0b4aeb698364fc31120c8416c614b1ec953e48b0fb76b2b23d5b249120ae0b07cb5151fa749c9295af9491fb3213a0325ad4b2623ec7bd49a57e5eed78ef031b1b977dfe8f35efb1fa14a802f1d54b195e85226879b6cb57074db2a50f805c1e96c97696e92c6921d89759e7228dea8ef5351f5c1238298e05498443c8be847871d3c16693744db41ace8b0a2baef8af6ebefdcec8b26c3daeb75c0b798d11b64819073a8365599f9243d33a8993b9f8365556afe79753d2a2032e3d9957d34751058a85b1ad697f37270b43a5fc6f7ce6762a6077551dfd5abf65b1fdd0f7a2c9f7c713e674f2ea5d25277dc83c1a18998e360adc0009e09d95f08af867ffde5c97f77df60bf2f8d318d5541857add9b5de0bc0d07b3f168097a94ef2a17f6871ba996305ec8ff1ea1c7d79f27728bb112685141c82461bb4085cbc56cd268f71add6d275d4ccd17473922d1596fe7866d52ae6968adff52c15d6fdb09d141aae0bb97775c57c90975eca396427f639c4f8ba48f270081ec570a637c544a61775037cdd2e2659910d9967839b48dfc02a732e21b907c0c07184518bb3213b5f64e30c00476257b819e01dae9e4b733c5a32da714506ea5eaad2ccfc3519e6d036d38a08c64d8cac6831389d00d07d32fe7860e5aad22220def215ef6184a1dbc08a293d64cc21eee53282e70824f5ceb35b325562306dbe7c9e611614a74deb58df8f5ce546a067158b10ea16dbfb9c20040421033213a3e7846ce29b1ef3e5bb510d2c3376496d9880bd6c542d9f26acaaed5dcb547290ba4e4db00fe4cd726b07c44ca7ce5a80beb892d5be33b3d05123a7dc85293488eddc6dafd3cda828da88f9a68d5f9a925cebbb776970511058d4c26b8b443cbec6a6942ac6791205a98b3a997c70ad7dfce413d37aa8d93117cea56c688fd54c4879c0d7daaa17708abdf3e03f78d8cd18d661f5d56ed0a85250fbe814f18eecaac4b5fa9d6254ad3edc305b828200ec2b9e334412516c4a049b467c3f5f2b49030809773eb059cf7b169d9b41b0c0a7205c9bfb9518cc2d9ab9e1b80dd4089981f1c23ec8df042465187bb249007cb4ad5394e504d88aa596ab8df53cc88dfebde5c3855bd1ea9884bda389f164ef25efb21ccffd7fa8fdb57f17a7752516f29db6677884d53d716607c60f803f67770b252d03f7e9fea106371a34173feb48273337b259808156d0df5621bf43062960b3594891e1394e71a86eb9fba7fc836c06cf5dcc6ef8b5716c48dd84c5618d7beb74be491e047d89ff606b6f06c55edab09de83b9107406fea3e51f430403fb0a8a173fc2db69839799ebc250984a98ba6563f1a4157b4b54dbf172b382610385f72cf8638d1f3236188f11832a499ade1c6bb48aa9947020c57ef1a0183bbb998e743c6e4eb3523f2f67a5d28e13963adc6a6fd9af345c2449ecd44fe91acd576d74573880c9f57ea6a7d8fa3d0c6e3cf6dbf002f702edb05b1f467ee3343bf38fbb0b8f7d0ce38d543b88e73e5f08d28926bcd51f36805c13a4f843a7d0f7b90e923dbe9ab8f20b170547a238de519313bb1b2c894b6825c3f32af7fc9803a3b104d3db197d950abb546ccf1b38d6d10fb0054f21cf2637212e6</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1042. 不邻接植花 | Flower Planting With No Adjacent</title>
    <url>/leetcode/Flower-Planting-With-No-Adjacent/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>You have N gardens, labelled 1 to N.  In each garden, you want to plant one of 4 types of flowers.<br>paths[i] = [x, y] describes the existence of a bidirectional path from garden x to garden y.<br>Also, there is no garden that has more than 3 paths coming into or leaving it.<br>Your task is to choose a flower type for each garden such that, for any two gardens connected by a path, they have different types of flowers.<br>Return any such a choice as an array answer, where answer[i] is the type of flower planted in the (i+1)-th garden.  The flower types are denoted 1, 2, 3, or 4.  It is guaranteed an answer exists.</p>
<a id="more"></a>

<p>有 N 个花园，按从 1 到 N 标记。在每个花园中，你打算种下四种花之一。<br>paths[i] = [x, y] 描述了花园 x 到花园 y 的双向路径。<br>另外，没有花园有 3 条以上的路径可以进入或者离开。<br>你需要为每个花园选择一种花，使得通过路径相连的任何两个花园中的花的种类互不相同。<br>以数组形式返回选择的方案作为答案 answer，其中 answer[i] 为在第 (i+1) 个花园中种植的花的种类。花的种类用  1, 2, 3, 4 表示。保证存在答案。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>因为有 4 种花，每个花园最多只有 3 个毗邻的花园。所以只要对任意一个花园，选一个和毗邻的花园种类均不同的花即可。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] gardenNoAdj(<span class="keyword">int</span> N, <span class="keyword">int</span>[][] paths) &#123;</span><br><span class="line">        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] path : paths) &#123;</span><br><span class="line">            map.computeIfAbsent(path[<span class="number">0</span>]-<span class="number">1</span>, (k) -&gt; <span class="keyword">new</span> HashSet&lt;&gt;()).add(path[<span class="number">1</span>]-<span class="number">1</span>);</span><br><span class="line">            map.computeIfAbsent(path[<span class="number">1</span>]-<span class="number">1</span>, (k) -&gt; <span class="keyword">new</span> HashSet&lt;&gt;()).add(path[<span class="number">0</span>]-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        Set&lt;Integer&gt; empty = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">boolean</span>[] color = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">5</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j : map.getOrDefault(i, empty)) &#123;</span><br><span class="line">                color[res[j]] = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> c = <span class="number">4</span>; c &gt; <span class="number">0</span>; c--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!color[c]) &#123;</span><br><span class="line">                    res[i] = c;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 37 ms, faster than 45.35% of Java online submissions for Flower Planting With No Adjacent.<br>Memory Usage: 50.4 MB, less than 100.00% of Java online submissions for Flower Planting With No Adjacent.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/flower-planting-with-no-adjacent/" target="_blank" rel="noopener">https://leetcode.com/problems/flower-planting-with-no-adjacent/</a></li>
<li><a href="https://leetcode-cn.com/problems/flower-planting-with-no-adjacent/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/flower-planting-with-no-adjacent/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1041. 困于环中的机器人 | Robot Bounded In Circle</title>
    <url>/leetcode/Robot-Bounded-In-Circle/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>On an infinite plane, a robot initially stands at (0, 0) and faces north.  The robot can receive one of three instructions:</p>
<ul>
<li>“G”: go straight 1 unit;</li>
<li>“L”: turn 90 degrees to the left;</li>
<li>“R”: turn 90 degress to the right.<br>The robot performs the instructions given in order, and repeats them forever.<br>Return true if and only if there exists a circle in the plane such that the robot never leaves the circle.</li>
</ul>
<a id="more"></a>

<p>在无限的平面上，机器人最初位于 (0, 0) 处，面朝北方。机器人可以接受下列三条指令之一：</p>
<ul>
<li>“G”：直走 1 个单位</li>
<li>“L”：左转 90 度</li>
<li>“R”：右转 90 度<br>机器人按顺序执行指令 instructions，并一直重复它们。<br>只有在平面中存在环使得机器人永远无法离开时，返回 true。否则，返回 false。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>完成一圈指令后，如果回到了原点，或者不朝北，那再经过1至3圈指令后，必定会回到原点。<br>对这两种情况，机器人将陷入循环。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] moves = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRobotBounded</span><span class="params">(String instructions)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> direction = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : instructions.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'G'</span>:</span><br><span class="line">                    x += moves[direction][<span class="number">0</span>];</span><br><span class="line">                    y += moves[direction][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'L'</span>:</span><br><span class="line">                    direction = (direction - <span class="number">1</span> + <span class="number">4</span>) % <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'R'</span>:</span><br><span class="line">                    direction = (direction + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x == <span class="number">0</span> &amp;&amp; y == <span class="number">0</span> || direction != <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Robot Bounded In Circle.<br>Memory Usage: 34.1 MB, less than 100.00% of Java online submissions for Robot Bounded In Circle.</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/robot-bounded-in-circle/" target="_blank" rel="noopener">https://leetcode.com/problems/robot-bounded-in-circle/</a></li>
<li><a href="https://leetcode-cn.com/problems/robot-bounded-in-circle/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/robot-bounded-in-circle/</a></li>
<li><a href="https://leetcode.com/problems/robot-bounded-in-circle/discuss/290856/JavaC%2B%2BPython-Let-Chopper-Help-Explain" target="_blank" rel="noopener">https://leetcode.com/problems/robot-bounded-in-circle/discuss/290856/JavaC%2B%2BPython-Let-Chopper-Help-Explain</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1040. 移动石子直到连续 II | Moving Stones Until Consecutive II【todo】</title>
    <url>/leetcode/Moving-Stones-Until-Consecutive-II/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="2c3149c28eace0a34783cb659b301f6aecd615a62a6bdfffb48f27f1be6b321d">bc52a409ec42bdd74538100d12e86d7c3bc9859ac07880cae6644198499196222e3f8b390e845cac3f3628a9c0f58e502803521e64ae1649b8abac34e4c66f14708b0fb5ea0628591a50e67a4a376de4e784295282eef08307dab058782ad72570c2221d3cfec658855b67831d8cc540b41c69b981c0034400ec5c4d0d42cd0bcee593b647a0918658843acd32a2880d9268fdf39cabc504245599f62812827a27061582819750ef60c3af12492888daeaac73b17ede4a8a23f0aca0129fa939b9f65725e7e8434a21810fa83fa30b326860e9460d7d4aab2e3f3b1f8b9a618447468fcb1b1e748fef865ca35f23628ff9725ee62677d0efd74a260ce1078cb502d66b853fb78aaa02021d346a3e57bf90189d2a3429ee2e8257f33d0981ced113e2fb13a4d9de94ae809c703af44f48afb80a4dc92c479a7d757abbc73e10b648f51a26db43f4c7097992be47be872f0eb6652d8ffd6d9ae9214789996b1057fd82388a736e4e82d3a9f35398d0324dbab488f5d0ac769865d1781f54156717fb68daa587ab8cc640348668ce9f5f44b7e87eed260be9075a3ad9c5b90d30d991a80c0e0fc273ec96ceeb888efdceca3b74461d3fa5bfd7541d20ac04367b932cbe6ea44815452fa1288462f33e19a760399f8ec1674db2d8672694d52f2698308429f65bffd68b59c3c466ecf6a9eb92e76728902c236e9d832a877ba364963700cdf67b583ad5f729a8dba2e7327c4c07ad19058eb4e7307992b17ada103f9086bf0effe8aeb0db261462d72dd2be5379c614e6d3d05685e08088cb4bc3ee1d459fccd1b006458c3976ba514ef8700e154b76b352eb0fbe587b49726a44c38a8862e99f8391a9b12600421f559db9b6d051063390f1011c7670e689c49f3602937dc5d09a1931fcc305d70199593c1600270e13bea0c2a814397bb25157c2f1d8c1e3637c77ef9905a00f6cc0652b6c35389dfa9f470d01243145a4f8b792e79a4b61b11dcbae718c36b1e54fd8417f07c8fd2e6fee12aac07fc8045825f1d736c3b65d9bff3225029c15a207d2eee5e9c7601f15fcf9bb945cbf0b5959b98a02d0a7b757fda232e0edbcd54ca2f400db1d2e19bd21144fba55e9b365cf9534cd6b37baff6fa5531594c0b646be38cbb5887e128c2d5a74eca23bf74a78312898e8d059a31b619909e65438e5db4a3236c5e5c1ac973d77efc4b05844785a721692c03472ef6a460166069cd4acd446cdd38bf1cf275c25008933481d2d6dedc6d645d5eb6979800b3c43a25fb0b1b8bef64eef1b9e701c6b50123f0776c2a0ec60318d8a5b8be73beb9d3a883762e1d87e912fd5399a6345c6af93869bbb439bcb70a641fa1111f1a14ff227125a50d4bd7a06d637582907e99e16f5fc1c230382cbe34f1592315ece4a81563e0a303be6374cc9c0cab14abe530983851fab3035a61e79d7d5414ece86dc62bbf0c7662f0b7a7fb0c4d92cb4da25151901e2f5b51be18dc516324f254f755d0bdd4b640c4fa5c23168f5986b651403c9c345563f268c051cbf1cf4e2f6fdaa8f63e16386e5c256a6d6d6df861e04ea8b4ddf73d443d5da885b3ee7093749e94bcb61884beea0138bc71ca67a4e6fcc7e58f610fd94b3977a7803657cc61a0eeef786e97c0152c273350be0362cce409fc5a957aa91a5cc9a8f1f7ee4748faff9ecf3257fdd9fa40f5dd11f529bfbfda8414f2d11863c6404782ca8d77e03e19394854ce9bcc4e5096e53b688a54ceeed59e4911f48434aa035979fcd16509e2adb69068c41f8474e382d274d225b1b23a93f593e4c01405c9f8ea7e1ecadab0e7606d0b331cbca40481f352bda6af09ecee47324c88cc0af750aee12404734a7e82e0c5267bda252b5b2d03993ddaefe788359ca0b99df62b431c31103653c518a7d5a31e9f83e09f606480d0b522c9fae7245b8a066306df12e3a91522d330ea9bf9cb676dc3354ccbb0ab3322c2ab6bbb49895f47de925a569220d6f269aa40d324f325af2f4c9884c51636ee9b48def5cd591a0a837c2f71c2352ce5e39605b252366d9285890e3e616dd6de6b613f396667317af8e5d14a149db7ff0f69f492e82faad294524067a9bb8e4d52061d53d90f139dbf00e25506a1c1a33e4c54e9c79c04a5cc28bf9252636573f73a6e222215341f84ca3dfb2e347cb549b87bade20ead303123eda8b783f990b5bbdf30349fd734e2f44c51624f0f5a26c49797c914d7af57fb44b2cb65b9b3ea96aec9d3d9398cd57f01ce2563cbb48de89abd505ac4bb321ddf5ba345b9c36b01b964e1acef49ed32cf2deb21de251d358e73684787fe32d166636a9886ed71f8f5da776a9dbb600577c459067a8ff3837e43d0f77d133c9bf435e6159c66a4bee53907f7dcf0b2b24fc3e94174cb3d179ded6e0c66576b3efe9e205b2e0ffe538aa6a0864879f4b9332bfcafdc57c929f3ceac50355e72db6b93beb0e9997a4d3df8ff81bac50ce607a88adae5892a02c97e5d899509875f329562c068cd9aa33267923b233d32fadab41894ccc7cbaae810257ce3ef7e46c4885b2aa174a88c72e2620de6ef7ac9ebb245c75513d6cfc0c64a2eda162f61f1f808f216223edd00cbc675e2a465e45b8a80932f03f06c249d3e43fa315b23996f96cb858557d2a4a6ff9dd1073c8b864d6f0f87eaa11a2025a8d432e496fd9b2a76e625c59818bf379424186d73e4f01568266ea8446a7cb337b5dbb8bb55a43a456b2fd9114657f8537caee7d76fcedc145214b0d84fb5764fbed494dbb01f1befaf3252ffcb64a33351caec152eb1297cc44dfa50dc4f0e6a5f4a215ea42119c0580a2cb2145a5d58fdddf2c2888fa3c9fa1ed4dad3c6f24611eb7800746eb876cdf24390f62d2b8aca2d82bf5b51b134ea40b7f4f1457b355fdf4a657b7655996056d2f9322f74fe44aef90a2ad26e57d83ebc4906dc965853a593149f4602d083109cac7e9f1699013e9ad295a881df6f3bdf446173d593c2a0229410243cb4b701181f9a677fac1faf3228059f194ac8b7faa808b453c05180a70127ec62a4705fbcfb81cfd067bed8800db867c7aa346f8f49e6e40e1146dd30b34247376d50af5f446ee58ee690edb65a88ac88b7c37e92cf5dfe0f8cdc3abba028e42b2dd2f2ee8de3f2aa5f4ec9e6b6a77aea90b90d61a04fa9912271437e72c7f665578c75fb37fc828608481b7bb04a30208b42108f4286ab8466778569288e5649b5db99d6e907a1229ceafc8a85b4bf9ee0f5e4d7ffa6f4483adbc21d6c97b61f7e9efefa8e1d5ae562a4b28d498debac1f3207186f612ef2af44372929c72bfb63469d55d6fe42118f38c9065f3d7223baa7d6d0094255aafafbeee4c0ca2f391b477ea1544106666ba9fb9f6a67e466a5f49a6c5e155ce096f66cdec49b29a1523692dd789967bd5abe1afad900de51aed8250ff77a4d16f83b0d1906c3487e9680ae320141c90728bca03de5e7d4936637b82d8da715c3d992529eb6dedb71aac79c05a58e8a9a7a333682b20fd033e3a3cf18a616a976afe38eb7a5de324949289fa8f71c593ba354c8138b553dfafc35e7bd51691d02b8439c3a594166b2b5a23620898136384d51ede2b57a79ad652fb5396761a523bd7e811d929752f2785b934b8546389a5d6991e057056417096f3b310ee7bde8e67df2df1dcdee3b2482df53b00e711d4aa24f79e382a40cdb8791f92c164a12e7e0eb0ca44f159a8e28264d2ce7534d0def81ab55a8367c04edf9bacd6164110a945479c1d2abb492a5c9922b0a49470b92d05988420827727aae7e3d325b7976d598cdff5112c4dc040b1617c55c656c6f54cc67266ce520e4a3fc0f1d1dca38089c434cbb0932084c1efbcf69d37bd09f930de90a1db12d8361925bed61d504051fa090cdd63627ff5fce44fd1cf867081aa9ad4ff86e02968cd0b9584f228c3719a6543efeec0a8af6ead0eef23</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1039. 多边形三角剖分的最低得分 | Minimum Score Triangulation of Polygon</title>
    <url>/leetcode/Minimum-Score-Triangulation-of-Polygon/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given N, consider a convex N-sided polygon with vertices labelled A[0], A[i], …, A[N-1] in clockwise order.<br>Suppose you triangulate the polygon into N-2 triangles.  For each triangle, the value of that triangle is the product of the labels of the vertices, and the total score of the triangulation is the sum of these values over all N-2 triangles in the triangulation.<br>Return the smallest possible total score that you can achieve with some triangulation of the polygon.</p>
<a id="more"></a>

<p>给定 N，想象一个凸 N 边多边形，其顶点按顺时针顺序依次标记为 A[0], A[i], …, A[N-1]。<br>假设您将多边形剖分为 N-2 个三角形。对于每个三角形，该三角形的值是顶点标记的乘积，三角剖分的分数是进行三角剖分后所有 N-2 个三角形的值之和。<br>返回多边形进行三角剖分后可以得到的最低分。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>动态规划<br>dp[i][j] 表示 A[i…j] 组成的多边形进行三角形剖分的最低得分。<br>递推关系式为：<br>dp[i][j] = min(dp[i][k] + dp[k][j] + A[i] * A[k] * A[j]), k=i+1,…,j-1<br>即，以 k 为切分点，将 A[i…j] 剖分为 2 个多边形和 1 个三角形。取其中的最小值。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minScoreTriangulation</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[A.length][A.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">2</span>; d &lt; A.length; d++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length - d; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> j = i+d;</span><br><span class="line">                <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = i+<span class="number">1</span>; k &lt; j; k++) &#123;</span><br><span class="line">                    min = Math.min(min, dp[i][k] + dp[k][j] + A[i] * A[k] * A[j]);</span><br><span class="line">                &#125;</span><br><span class="line">                dp[i][j] = min;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][A.length-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 3 ms, faster than 77.70% of Java online submissions for Minimum Score Triangulation of Polygon.<br>Memory Usage: 34.4 MB, less than 100.00% of Java online submissions for Minimum Score Triangulation of Polygon.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/minimum-score-triangulation-of-polygon/" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-score-triangulation-of-polygon/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-score-triangulation-of-polygon/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-score-triangulation-of-polygon/</a></li>
<li><a href="https://leetcode.com/problems/minimum-score-triangulation-of-polygon/discuss/286705/JavaC%2B%2BPython-DP" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-score-triangulation-of-polygon/discuss/286705/JavaC%2B%2BPython-DP</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1038. 从二叉搜索树到更大和树 | Binary Search Tree to Greater Sum Tree</title>
    <url>/leetcode/Binary-Search-Tree-to-Greater-Sum-Tree/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given the root of a binary search tree with distinct values, modify it so that every node has a new value equal to the sum of the values of the original tree that are greater than or equal to node.val.<br>As a reminder, a binary search tree is a tree that satisfies these constraints:</p>
<ul>
<li>The left subtree of a node contains only nodes with keys less than the node’s key.</li>
<li>The right subtree of a node contains only nodes with keys greater than the node’s key.</li>
<li>Both the left and right subtrees must also be binary search trees.</li>
</ul>
<a id="more"></a>

<p>给出二叉搜索树的根节点，该二叉树的节点值各不相同，修改二叉树，使每个节点 node 的新值等于原树中大于或等于 node.val 的值之和。<br>提醒一下，二叉搜索树满足下列约束条件：</p>
<ul>
<li>节点的左子树仅包含键小于节点键的节点。</li>
<li>节点的右子树仅包含键大于节点键的节点。</li>
<li>左右子树也必须是二叉搜索树。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">bstToGst</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        rightFirstTraversal(root, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>&#125;);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rightFirstTraversal</span><span class="params">(TreeNode root, <span class="keyword">int</span>[] sum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        rightFirstTraversal(root.right, sum);</span><br><span class="line">        sum[<span class="number">0</span>] += root.val;</span><br><span class="line">        root.val = sum[<span class="number">0</span>];</span><br><span class="line">        rightFirstTraversal(root.left, sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Binary Search Tree to Greater Sum Tree.<br>Memory Usage: 34.4 MB, less than 100.00% of Java online submissions for Binary Search Tree to Greater Sum Tree.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/" target="_blank" rel="noopener">https://leetcode.com/problems/binary-search-tree-to-greater-sum-tree/</a></li>
<li><a href="https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1037. 有效的回旋镖 | Valid Boomerang</title>
    <url>/leetcode/Valid-Boomerang/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>A boomerang is a set of 3 points that are all distinct and not in a straight line.<br>Given a list of three points in the plane, return whether these points are a boomerang.</p>
<a id="more"></a>

<p>回旋镖定义为一组三个点，这些点各不相同且不在一条直线上。<br>给出平面上三个点组成的列表，判断这些点是否可以构成回旋镖。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>三点共线问题</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isBoomerang</span><span class="params">(<span class="keyword">int</span>[][] points)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> dx1 = points[<span class="number">0</span>][<span class="number">0</span>] - points[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> dy1 = points[<span class="number">0</span>][<span class="number">1</span>] - points[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> dx2 = points[<span class="number">0</span>][<span class="number">0</span>] - points[<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> dy2 = points[<span class="number">0</span>][<span class="number">1</span>] - points[<span class="number">2</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> dx1 * dy2 != dx2 * dy1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Valid Boomerang.<br>Memory Usage: 34.6 MB, less than 100.00% of Java online submissions for Valid Boomerang.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/valid-boomerang/" target="_blank" rel="noopener">https://leetcode.com/problems/valid-boomerang/</a></li>
<li><a href="https://leetcode-cn.com/problems/valid-boomerang/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/valid-boomerang/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1036. 逃离大迷宫 | Escape a Large Maze</title>
    <url>/leetcode/Escape-a-Large-Maze/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a 1 million by 1 million grid, the coordinates of each grid square are (x, y) with 0 &lt;= x, y &lt; 10^6.<br>We start at the source square and want to reach the target square.  Each move, we can walk to a 4-directionally adjacent square in the grid that isn’t in the given list of blocked squares.<br>Return true if and only if it is possible to reach the target square through a sequence of moves.</p>
<a id="more"></a>

<p>在一个 10^6 x 10^6 的网格中，每个网格块的坐标为 (x, y)，其中 0 &lt;= x, y &lt; 10^6。<br>我们从源方格 source 开始出发，意图赶往目标方格 target。每次移动，我们都可以走到网格中在四个方向上相邻的方格，只要该方格不在给出的封锁列表 blocked 上。<br>只有在可以通过一系列的移动到达目标方格时才返回 true。否则，返回 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>注意到封锁列表 blocked 最多只有200个点，所能封锁的最大区域（呈对角线排列，封锁一个边角）面积为 MAX_BLOCKED_AREA_SIZE = (200 * 200 - 200) / 2 。<br>因此，从 source 和 target 出发，分别遍历。如果在到达目标前，都遍历了超过 MAX_BLOCKED_AREA_SIZE 的区域。那么，这两点之间就一定可达。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line"></span><br><span class="line">    private static final int MAX_BLOCKED_AREA_SIZE &#x3D; (200 * 200 - 200) &#x2F; 2;</span><br><span class="line"></span><br><span class="line">    public boolean isEscapePossible(int[][] blocked, int[] source, int[] target) &#123;</span><br><span class="line">        Set&lt;Long&gt; blockedMark &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; blocked.length; i++) &#123;</span><br><span class="line">            blockedMark.add(encoding(blocked[i][0], blocked[i][1]));</span><br><span class="line">        &#125;</span><br><span class="line">        Set&lt;Long&gt; sourceMaxReachableArea &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">        boolean targetReachable &#x3D; traversal(blockedMark, source[0], source[1], encoding(target[0], target[1]), sourceMaxReachableArea);</span><br><span class="line">        if (targetReachable) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        Set&lt;Long&gt; targetMaxReachableArea &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">        boolean sourceReachable &#x3D; traversal(blockedMark, target[0], target[1], encoding(source[0], source[1]), targetMaxReachableArea);</span><br><span class="line">        if (sourceReachable) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return sourceMaxReachableArea.size() &gt; MAX_BLOCKED_AREA_SIZE &amp;&amp; targetMaxReachableArea.size() &gt; MAX_BLOCKED_AREA_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean traversal(Set&lt;Long&gt; blocked, int r, int c, Long targetCoding, Set&lt;Long&gt; visited) &#123;</span><br><span class="line">        if (r &lt; 0 || r &gt;&#x3D; 1e6 || c &lt; 0 || c &gt;&#x3D; 1e6) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        Long mark &#x3D; encoding(r, c);</span><br><span class="line">        if (mark &#x3D;&#x3D; targetCoding) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        if (blocked.contains(mark) || visited.contains(mark) || visited.size() &gt; MAX_BLOCKED_AREA_SIZE) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        visited.add(mark);</span><br><span class="line">        return traversal(blocked, r-1, c, targetCoding, visited)</span><br><span class="line">                || traversal(blocked, r+1, c, targetCoding, visited)</span><br><span class="line">                || traversal(blocked, r, c-1, targetCoding, visited)</span><br><span class="line">                || traversal(blocked, r, c+1, targetCoding, visited);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Long encoding(int r, int c) &#123;</span><br><span class="line">        return ((((long)r) &lt;&lt; 32) + c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 212 ms, faster than 55.17% of Java online submissions for Escape a Large Maze.<br>Memory Usage: 73.7 MB, less than 15.00% of Java online submissions for Escape a Large Maze.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/escape-a-large-maze/" target="_blank" rel="noopener">https://leetcode.com/problems/escape-a-large-maze/</a></li>
<li><a href="https://leetcode-cn.com/problems/escape-a-large-maze/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/escape-a-large-maze/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1035. 不相交的线 | Uncrossed Lines</title>
    <url>/leetcode/Uncrossed-Lines/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We write the integers of A and B (in the order they are given) on two separate horizontal lines.<br>Now, we may draw connecting lines: a straight line connecting two numbers A[i] and B[j] such that:</p>
<ul>
<li>A[i] == B[j];</li>
<li>The line we draw does not intersect any other connecting (non-horizontal) line.<br>Note that a connecting lines cannot intersect even at the endpoints: each number can only belong to one connecting line.<br>Return the maximum number of connecting lines we can draw in this way.</li>
</ul>
<a id="more"></a>

<p>我们在两条独立的水平线上按给定的顺序写下 A 和 B 中的整数。<br>现在，我们可以绘制一些连接两个数字 A[i] 和 B[j] 的直线，只要 A[i] == B[j]，且我们绘制的直线不与任何其他连线（非水平线）相交。<br>以这种方法绘制线条，并返回我们可以绘制的最大连线数。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>动态规划，设 dp[i+1][j+1] 表示，A[0…i] 和 B[0…j] 之间的最大连线数。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxUncrossedLines</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[A.length+<span class="number">1</span>][B.length+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= B.length; j++) &#123;</span><br><span class="line">                dp[i][j] = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> topDown(A, B, dp, A.length, B.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">topDown</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B, <span class="keyword">int</span>[][] dp, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[i][j] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (A[i-<span class="number">1</span>] == B[j-<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[i][j] = <span class="number">1</span> + topDown(A, B, dp, i-<span class="number">1</span>, j-<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[i][j] = Math.max(topDown(A, B, dp, i-<span class="number">1</span>, j), topDown(A, B, dp, i, j-<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 5 ms, faster than 46.35% of Java online submissions for Uncrossed Lines.<br>Memory Usage: 35.7 MB, less than 100.00% of Java online submissions for Uncrossed Lines.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/uncrossed-lines/" target="_blank" rel="noopener">https://leetcode.com/problems/uncrossed-lines/</a></li>
<li><a href="https://leetcode-cn.com/problems/uncrossed-lines/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/uncrossed-lines/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1034. 边框着色 | Coloring A Border</title>
    <url>/leetcode/Coloring-A-Border/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a 2-dimensional grid of integers, each value in the grid represents the color of the grid square at that location.<br>Two squares belong to the same connected component if and only if they have the same color and are next to each other in any of the 4 directions.<br>The border of a connected component is all the squares in the connected component that are either 4-directionally adjacent to a square not in the component, or on the boundary of the grid (the first or last row or column).<br>Given a square at location (r0, c0) in the grid and a color, color the border of the connected component of that square with the given color, and return the final grid.</p>
<a id="more"></a>

<p>给出一个二维整数网格 grid，网格中的每个值表示该位置处的网格块的颜色。<br>只有当两个网格块的颜色相同，而且在四个方向中任意一个方向上相邻时，它们属于同一连通分量。<br>连通分量的边界是指连通分量中的所有与不在分量中的正方形相邻（四个方向上）的所有正方形，或者在网格的边界上（第一行/列或最后一行/列）的所有正方形。<br>给出位于 (r0, c0) 的网格块和颜色 color，使用指定颜色 color 为所给网格块的连通分量的边界进行着色，并返回最终的网格 grid 。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] colorBorder(<span class="keyword">int</span>[][] grid, <span class="keyword">int</span> r0, <span class="keyword">int</span> c0, <span class="keyword">int</span> color) &#123;</span><br><span class="line">        colorBorderCore(grid, r0, c0, grid[r0][c0], color);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    grid[i][j] = -grid[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> grid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">colorBorderCore</span><span class="params">(<span class="keyword">int</span>[][] grid, <span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> originalColor, <span class="keyword">int</span> newColor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n = grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">if</span> (r &lt; <span class="number">0</span> || r &gt;= m || c &lt; <span class="number">0</span> || c &gt;= n || (grid[r][c] != originalColor &amp;&amp; grid[r][c] &gt; <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (grid[r][c] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        grid[r][c] = -grid[r][c];</span><br><span class="line">        <span class="keyword">boolean</span> res1 = colorBorderCore(grid, r-<span class="number">1</span>, c, originalColor, newColor);</span><br><span class="line">        <span class="keyword">boolean</span> res2 = colorBorderCore(grid, r+<span class="number">1</span>, c, originalColor, newColor);</span><br><span class="line">        <span class="keyword">boolean</span> res3 = colorBorderCore(grid, r, c-<span class="number">1</span>, originalColor, newColor);</span><br><span class="line">        <span class="keyword">boolean</span> res4 = colorBorderCore(grid, r, c+<span class="number">1</span>, originalColor, newColor);</span><br><span class="line">        <span class="keyword">if</span> (res1 || res2 || res3 || res4) &#123;</span><br><span class="line">            grid[r][c] = -newColor;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 99.73% of Java online submissions for Coloring A Border.<br>Memory Usage: 47.2 MB, less than 44.26% of Java online submissions for Coloring A Border.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/coloring-a-border/" target="_blank" rel="noopener">https://leetcode.com/problems/coloring-a-border/</a></li>
<li><a href="https://leetcode-cn.com/problems/coloring-a-border/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/coloring-a-border/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1033. 移动石子直到连续 | Moving Stones Until Consecutive</title>
    <url>/leetcode/Moving-Stones-Until-Consecutive/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Three stones are on a number line at positions a, b, and c.<br>Each turn, you pick up a stone at an endpoint (ie., either the lowest or highest position stone), and move it to an unoccupied position between those endpoints.  Formally, let’s say the stones are currently at positions x, y, z with x &lt; y &lt; z.  You pick up the stone at either position x or position z, and move that stone to an integer position k, with x &lt; k &lt; z and k != y.<br>The game ends when you cannot make any more moves, ie. the stones are in consecutive positions.<br>When the game ends, what is the minimum and maximum number of moves that you could have made?  Return the answer as an length 2 array: answer = [minimum_moves, maximum_moves]</p>
<a id="more"></a>

<p>三枚石子放置在数轴上，位置分别为 a，b，c。<br>每一回合，我们假设这三枚石子当前分别位于位置 x, y, z 且 x &lt; y &lt; z。从位置 x 或者是位置 z 拿起一枚石子，并将该石子移动到某一整数位置 k 处，其中 x &lt; k &lt; z 且 k != y。<br>当你无法进行任何移动时，即，这些石子的位置连续时，游戏结束。<br>要使游戏结束，你可以执行的最小和最大移动次数分别是多少？ 以长度为 2 的数组形式返回答案：answer = [minimum_moves, maximum_moves]</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] numMovesStones(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] t = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;a,b,c&#125;;</span><br><span class="line">        Arrays.sort(t);</span><br><span class="line">        <span class="keyword">int</span> diff1 = t[<span class="number">1</span>] - t[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> diff2 = t[<span class="number">2</span>] - t[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (diff1 == <span class="number">1</span> &amp;&amp; diff2 == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Math.min(diff1, diff2) &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, diff1 + diff2 - <span class="number">2</span>&#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>, diff1 + diff2 - <span class="number">2</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 86.68% of Java online submissions for Moving Stones Until Consecutive.<br>Memory Usage: 34.3 MB, less than 6.06% of Java online submissions for Moving Stones Until Consecutive.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/moving-stones-until-consecutive/" target="_blank" rel="noopener">https://leetcode.com/problems/moving-stones-until-consecutive/</a></li>
<li><a href="https://leetcode-cn.com/problems/moving-stones-until-consecutive/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/moving-stones-until-consecutive/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1032. 字符流 | Stream of Characters</title>
    <url>/leetcode/Stream-of-Characters/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Implement the StreamChecker class as follows:</p>
<ul>
<li>StreamChecker(words): Constructor, init the data structure with the given words.</li>
<li>query(letter): returns true if and only if for some k &gt;= 1, the last k characters queried (in order from oldest to newest, including this letter just queried) spell one of the words in the given list.</li>
</ul>
<a id="more"></a>

<p>按下述要求实现 StreamChecker 类：</p>
<ul>
<li>StreamChecker(words)：构造函数，用给定的字词初始化数据结构。</li>
<li>query(letter)：如果存在某些 k &gt;= 1，可以用查询的最后 k个字符（按从旧到新顺序，包括刚刚查询的字母）拼写出给定字词表中的某一字词时，返回 true。否则，返回 false。</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>单词查找树，逆序插入</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamChecker</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Node reversedTrie = <span class="keyword">new</span> Node();</span><br><span class="line">    <span class="keyword">char</span>[] queries = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">2000</span>];</span><br><span class="line">    <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StreamChecker</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            Node node = reversedTrie;</span><br><span class="line">            <span class="keyword">char</span>[] chars = word.toCharArray();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = chars.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">char</span> c = chars[i];</span><br><span class="line">                <span class="keyword">int</span> index = c - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (node.childs[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    node.childs[index] = <span class="keyword">new</span> Node();</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.childs[index];</span><br><span class="line">            &#125;</span><br><span class="line">            node.isLeaf = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">query</span><span class="params">(<span class="keyword">char</span> letter)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> res = <span class="keyword">false</span>;</span><br><span class="line">        queries[pos] = letter;</span><br><span class="line">        count++;</span><br><span class="line">        Node node = reversedTrie;</span><br><span class="line">        <span class="keyword">int</span> t = pos;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span> &amp;&amp; i &lt; count) &#123;</span><br><span class="line">            Node child = node.childs[letter - <span class="string">'a'</span>];</span><br><span class="line">            <span class="keyword">if</span> (child == <span class="keyword">null</span>) &#123;</span><br><span class="line">                res = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (child.isLeaf) &#123;</span><br><span class="line">                res = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            node = child;</span><br><span class="line">            t = (t - <span class="number">1</span> + <span class="number">2000</span>) % <span class="number">2000</span>;</span><br><span class="line">            letter = queries[t];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        pos = (pos + <span class="number">1</span>) % <span class="number">2000</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> isLeaf;</span><br><span class="line">        Node[] childs = <span class="keyword">new</span> Node[<span class="number">26</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 100 ms, faster than 99.95% of Java online submissions for Stream of Characters.<br>Memory Usage: 86.3 MB, less than 100.00% of Java online submissions for Stream of Characters.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/stream-of-characters/" target="_blank" rel="noopener">https://leetcode.com/problems/stream-of-characters/</a></li>
<li><a href="https://leetcode-cn.com/problems/stream-of-characters/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/stream-of-characters/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1031. 两个非重叠子数组的最大和 | Maximum Sum of Two Non-Overlapping Subarrays</title>
    <url>/leetcode/Maximum-Sum-of-Two-Non-Overlapping-Subarrays/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of non-negative integers, return the maximum sum of elements in two non-overlapping (contiguous) subarrays, which have lengths L and M.  (For clarification, the L-length subarray could occur before or after the M-length subarray.)<br>Formally, return the largest V for which V = (A[i] + A[i+1] + … + A[i+L-1]) + (A[j] + A[j+1] + … + A[j+M-1]) and either:</p>
<ul>
<li>0 &lt;= i &lt; i + L - 1 &lt; j &lt; j + M - 1 &lt; A.length, or</li>
<li>0 &lt;= j &lt; j + M - 1 &lt; i &lt; i + L - 1 &lt; A.length.</li>
</ul>
<a id="more"></a>

<p>给出非负整数数组 A ，返回两个非重叠（连续）子数组中元素的最大和，子数组的长度分别为 L 和 M。（这里需要澄清的是，长为 L 的子数组可以出现在长为 M 的子数组之前或之后。）<br>从形式上看，返回最大的 V，而 V = (A[i] + A[i+1] + … + A[i+L-1]) + (A[j] + A[j+1] + … + A[j+M-1]) 并满足下列条件之一：</p>
<ul>
<li>0 &lt;= i &lt; i + L - 1 &lt; j &lt; j + M - 1 &lt; A.length, 或</li>
<li>0 &lt;= j &lt; j + M - 1 &lt; i &lt; i + L - 1 &lt; A.length.</li>
</ul>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>两种情况，要么 L 数组在 M 数组的左侧，要么 M 数组在 L 数组的左侧。<br>每次遍历的过程中以 L + M 的长度考虑。<br>用左侧的 L 长度数组的和更新 L 数组的最大和；同时用左侧的 M 长度数组的和更新 M 数组的最大和。<br>然后用右侧的 L 长度数组，加上目前已知的 M 数组的最大和更新结果；再用右侧 M 长度数组，加上目前已知的 L 数组的最大和更新结果。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSumTwoNoOverlap</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> L, <span class="keyword">int</span> M)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] cumulativeSumArray = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line">        cumulativeSumArray[<span class="number">0</span>] = A[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            cumulativeSumArray[i] = cumulativeSumArray[i-<span class="number">1</span>] + A[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 在M左侧的L数组，所能取得的最大和</span></span><br><span class="line">        <span class="keyword">int</span> LMax = cumulativeSumArray[L-<span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 在L左侧的M数组，所能取得的最大和</span></span><br><span class="line">        <span class="keyword">int</span> MMax = cumulativeSumArray[M-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> res = cumulativeSumArray[L + M - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L + M; i &lt; A.length; i++) &#123;</span><br><span class="line">            LMax = Math.max(LMax, cumulativeSumArray[i - M] - cumulativeSumArray[i - L - M]);</span><br><span class="line">            MMax = Math.max(MMax, cumulativeSumArray[i - L] - cumulativeSumArray[i - L - M]);</span><br><span class="line">            res = Math.max(res, LMax + cumulativeSumArray[i] - cumulativeSumArray[i - M]);</span><br><span class="line">            res = Math.max(res, MMax + cumulativeSumArray[i] - cumulativeSumArray[i - L]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 89.25% of Java online submissions for Maximum Sum of Two Non-Overlapping Subarrays.<br>Memory Usage: 38.6 MB, less than 8.70% of Java online submissions for Maximum Sum of Two Non-Overlapping Subarrays.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/maximum-sum-of-two-non-overlapping-subarrays/" target="_blank" rel="noopener">https://leetcode.com/problems/maximum-sum-of-two-non-overlapping-subarrays/</a></li>
<li><a href="https://leetcode-cn.com/problems/maximum-sum-of-two-non-overlapping-subarrays/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-sum-of-two-non-overlapping-subarrays/</a></li>
<li><a href="https://leetcode.com/problems/maximum-sum-of-two-non-overlapping-subarrays/discuss/278251/JavaC%2B%2BPython-O(N)Time-O(1)-Space" target="_blank" rel="noopener">https://leetcode.com/problems/maximum-sum-of-two-non-overlapping-subarrays/discuss/278251/JavaC%2B%2BPython-O(N)Time-O(1)-Space</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1030. 距离顺序排列矩阵单元格 | Matrix Cells in Distance Order</title>
    <url>/leetcode/Matrix-Cells-in-Distance-Order/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We are given a matrix with R rows and C columns has cells with integer coordinates (r, c), where 0 &lt;= r &lt; R and 0 &lt;= c &lt; C.<br>Additionally, we are given a cell in that matrix with coordinates (r0, c0).<br>Return the coordinates of all cells in the matrix, sorted by their distance from (r0, c0) from smallest distance to largest distance.  Here, the distance between two cells (r1, c1) and (r2, c2) is the Manhattan distance, |r1 - r2| + |c1 - c2|.  (You may return the answer in any order that satisfies this condition.)</p>
<a id="more"></a>

<p>给出 R 行 C 列的矩阵，其中的单元格的整数坐标为 (r, c)，满足 0 &lt;= r &lt; R 且 0 &lt;= c &lt; C。<br>另外，我们在该矩阵中给出了一个坐标为 (r0, c0) 的单元格。<br>返回矩阵中的所有单元格的坐标，并按到 (r0, c0) 的距离从最小到最大的顺序排，其中，两单元格(r1, c1) 和 (r2, c2) 之间的距离是曼哈顿距离，|r1 - r2| + |c1 - c2|。（你可以按任何满足此条件的顺序返回答案。）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>广度优先遍历</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] allCellsDistOrder(<span class="keyword">int</span> R, <span class="keyword">int</span> C, <span class="keyword">int</span> r0, <span class="keyword">int</span> c0) &#123;</span><br><span class="line">        <span class="keyword">int</span>[][] res = <span class="keyword">new</span> <span class="keyword">int</span>[R*C][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[R][C];</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;r0, c0&#125;);</span><br><span class="line">        visited[r0][c0] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> size = queue.size();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span>[] coordinate = queue.poll();</span><br><span class="line">                res[count++] = coordinate;</span><br><span class="line">                <span class="keyword">if</span> (coordinate[<span class="number">0</span>] &gt; <span class="number">0</span> &amp;&amp; !visited[coordinate[<span class="number">0</span>]-<span class="number">1</span>][coordinate[<span class="number">1</span>]]) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;coordinate[<span class="number">0</span>]-<span class="number">1</span>, coordinate[<span class="number">1</span>]&#125;);</span><br><span class="line">                    visited[coordinate[<span class="number">0</span>]-<span class="number">1</span>][coordinate[<span class="number">1</span>]] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (coordinate[<span class="number">0</span>] &lt; R - <span class="number">1</span> &amp;&amp; !visited[coordinate[<span class="number">0</span>]+<span class="number">1</span>][coordinate[<span class="number">1</span>]]) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;coordinate[<span class="number">0</span>]+<span class="number">1</span>, coordinate[<span class="number">1</span>]&#125;);</span><br><span class="line">                    visited[coordinate[<span class="number">0</span>]+<span class="number">1</span>][coordinate[<span class="number">1</span>]] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (coordinate[<span class="number">1</span>] &gt; <span class="number">0</span> &amp;&amp; !visited[coordinate[<span class="number">0</span>]][coordinate[<span class="number">1</span>]-<span class="number">1</span>]) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;coordinate[<span class="number">0</span>], coordinate[<span class="number">1</span>]-<span class="number">1</span>&#125;);</span><br><span class="line">                    visited[coordinate[<span class="number">0</span>]][coordinate[<span class="number">1</span>]-<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (coordinate[<span class="number">1</span>] &lt; C - <span class="number">1</span> &amp;&amp; !visited[coordinate[<span class="number">0</span>]][coordinate[<span class="number">1</span>]+<span class="number">1</span>]) &#123;</span><br><span class="line">                    queue.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;coordinate[<span class="number">0</span>], coordinate[<span class="number">1</span>]+<span class="number">1</span>&#125;);</span><br><span class="line">                    visited[coordinate[<span class="number">0</span>]][coordinate[<span class="number">1</span>]+<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 13 ms, faster than 58.23% of Java online submissions for Matrix Cells in Distance Order.<br>Memory Usage: 41.2 MB, less than 24.24% of Java online submissions for Matrix Cells in Distance Order.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/matrix-cells-in-distance-order/" target="_blank" rel="noopener">https://leetcode.com/problems/matrix-cells-in-distance-order/</a></li>
<li><a href="https://leetcode-cn.com/problems/matrix-cells-in-distance-order/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/matrix-cells-in-distance-order/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1029. 两地调度 | Two City Scheduling</title>
    <url>/leetcode/Two-City-Scheduling/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>There are 2N people a company is planning to interview. The cost of flying the i-th person to city A is costs[i][0], and the cost of flying the i-th person to city B is costs[i][1].<br>Return the minimum cost to fly every person to a city such that exactly N people arrive in each city.</p>
<a id="more"></a>

<p>公司计划面试 2N 人。第 i 人飞往 A 市的费用为 costs[i][0]，飞往 B 市的费用为 costs[i][1]。<br>返回将每个人都飞到某座城市的最低费用，要求每个城市都有 N 人抵达。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>首先，算出都去往 A 市的总开销 totalCost 。<br>然后，计算每个人因为去 A 市，而非 B 市，浪费的钱。<br>将这些额外花销排序，取其中最大的 N 个，从先前的 totalCost 中减去，得到的就是最优花费。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">twoCitySchedCost</span><span class="params">(<span class="keyword">int</span>[][] costs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] wastedMoney = <span class="keyword">new</span> <span class="keyword">int</span>[costs.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; costs.length; i++) &#123;</span><br><span class="line">            wastedMoney[i] = costs[i][<span class="number">0</span>] - costs[i][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> totalCost = <span class="number">0</span>;</span><br><span class="line">        Arrays.sort(wastedMoney);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = costs.length / <span class="number">2</span>; i &lt; costs.length; i++) &#123;</span><br><span class="line">            totalCost -= wastedMoney[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; costs.length; i++) &#123;</span><br><span class="line">            totalCost += costs[i][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> totalCost;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 98.60% of Java online submissions for Two City Scheduling.<br>Memory Usage: 39.7 MB, less than 44.44% of Java online submissions for Two City Scheduling.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/two-city-scheduling/" target="_blank" rel="noopener">https://leetcode.com/problems/two-city-scheduling/</a></li>
<li><a href="https://leetcode-cn.com/problems/two-city-scheduling/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/two-city-scheduling/</a></li>
<li><a href="https://leetcode-cn.com/problems/two-city-scheduling/solution/er-cha-shu-de-chui-xu-bian-li-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/two-city-scheduling/solution/er-cha-shu-de-chui-xu-bian-li-by-leetcode/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1028. 从先序遍历还原二叉树 | Recover a Tree From Preorder Traversal</title>
    <url>/leetcode/Recover-a-Tree-From-Preorder-Traversal/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We run a preorder depth first search on the root of a binary tree.<br>At each node in this traversal, we output D dashes (where D is the depth of this node), then we output the value of this node.  (If the depth of a node is D, the depth of its immediate child is D+1.  The depth of the root node is 0.)<br>If a node has only one child, that child is guaranteed to be the left child.<br>Given the output S of this traversal, recover the tree and return its root.</p>
<a id="more"></a>

<p>我们从二叉树的根节点 root 开始进行深度优先搜索。<br>在遍历中的每个节点处，我们输出 D 条短划线（其中 D 是该节点的深度），然后输出该节点的值。（如果节点的深度为 D，则其直接子节点的深度为 D + 1。根节点的深度为 0）。<br>如果节点只有一个子节点，那么保证该子节点为左子节点。<br>给出遍历输出 S，还原树并返回其根节点 root。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">recoverFromPreorder</span><span class="params">(String S)</span> </span>&#123;</span><br><span class="line">        List&lt;TreeNode&gt; nodes = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> depth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : S.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'-'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (nodes.isEmpty()) &#123;</span><br><span class="line">                        nodes.add(<span class="keyword">new</span> TreeNode(num));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        TreeNode node = <span class="keyword">new</span> TreeNode(num);</span><br><span class="line">                        appendToRoot(nodes, node, depth);</span><br><span class="line">                        <span class="keyword">if</span> (depth == nodes.size()) &#123;</span><br><span class="line">                            nodes.add(node);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            nodes.set(depth, node);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    num = <span class="number">0</span>;</span><br><span class="line">                    depth = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                depth++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                num = num * <span class="number">10</span> + Character.getNumericValue(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            TreeNode node = <span class="keyword">new</span> TreeNode(num);</span><br><span class="line">            appendToRoot(nodes, node, depth);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nodes.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">appendToRoot</span><span class="params">(List&lt;TreeNode&gt; nodes, TreeNode node, <span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (depth == <span class="number">0</span>) &#123;</span><br><span class="line">            nodes.add(node);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode root = nodes.get(depth - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">            root.left = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            root.right = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 5 ms, faster than 81.49% of Java online submissions for Recover a Tree From Preorder Traversal.<br>Memory Usage: 37.5 MB, less than 100.00% of Java online submissions for Recover a Tree From Preorder Traversal.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/recover-a-tree-from-preorder-traversal/" target="_blank" rel="noopener">https://leetcode.com/problems/recover-a-tree-from-preorder-traversal/</a></li>
<li><a href="https://leetcode-cn.com/problems/recover-a-tree-from-preorder-traversal/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/recover-a-tree-from-preorder-traversal/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1027. 最长等差数列 | Longest Arithmetic Sequence</title>
    <url>/leetcode/Longest-Arithmetic-Sequence/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of integers, return the length of the longest arithmetic subsequence in A.<br>Recall that a subsequence of A is a list A[i_1], A[i_2], …, A[i_k] with 0 &lt;= i_1 &lt; i_2 &lt; … &lt; i_k &lt;= A.length - 1, and that a sequence B is arithmetic if B[i+1] - B[i] are all the same value (for 0 &lt;= i &lt; B.length - 1).</p>
<a id="more"></a>

<p>给定一个整数数组 A，返回 A 中最长等差子序列的长度。<br>回想一下，A 的子序列是列表 A[i_1], A[i_2], …, A[i_k] 其中 0 &lt;= i_1 &lt; i_2 &lt; … &lt; i_k &lt;= A.length - 1。并且如果 B[i+1] - B[i]( 0 &lt;= i &lt; B.length - 1) 的值都相同，那么序列 B 是等差的。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>动态规划。<br>用 dp[i][d] 表示，以索引 i 结尾、公差为 d 的等差数列的最大长度。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestArithSeqLength</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A.length &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> A.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// dp[i] 表示，以索引 i 结尾的不同公差的等差数列的最大长度</span></span><br><span class="line">        HashMap&lt;Integer, Integer&gt;[] dp = <span class="keyword">new</span> HashMap[A.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            dp[i] = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = A[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="comment">// A[i]、A[j]</span></span><br><span class="line">                <span class="keyword">int</span> len = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">int</span> y = A[j];</span><br><span class="line">                <span class="keyword">int</span> d = x - y;</span><br><span class="line">                HashMap&lt;Integer, Integer&gt; pre = dp[j];</span><br><span class="line">                <span class="keyword">if</span> (pre.containsKey(d)) &#123;</span><br><span class="line">                    <span class="comment">// 已存在以 A[j] 结尾，d 为公差的等差数列</span></span><br><span class="line">                    len = pre.get(d) + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                HashMap&lt;Integer, Integer&gt; cur = dp[i];</span><br><span class="line">                cur.put(d, len);</span><br><span class="line">                res = Math.max(res, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 253 ms, faster than 82.42% of Java online submissions for Longest Arithmetic Sequence.<br>Memory Usage: 145.2 MB, less than 66.67% of Java online submissions for Longest Arithmetic Sequence.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/longest-arithmetic-sequence/" target="_blank" rel="noopener">https://leetcode.com/problems/longest-arithmetic-sequence/</a></li>
<li><a href="https://leetcode-cn.com/problems/longest-arithmetic-sequence/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/longest-arithmetic-sequence/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1026. 节点与其祖先之间的最大差值 | Maximum Difference Between Node and Ancestor</title>
    <url>/leetcode/Maximum-Difference-Between-Node-and-Ancestor/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given the root of a binary tree, find the maximum value V for which there exists different nodes A and B where V = |A.val - B.val| and A is an ancestor of B.<br>(A node A is an ancestor of B if either: any child of A is equal to B, or any child of A is an ancestor of B.)</p>
<a id="more"></a>

<p>给定二叉树的根节点 root，找出存在于不同节点 A 和 B 之间的最大值 V，其中 V = |A.val - B.val|，且 A 是 B 的祖先。<br>（如果 A 的任何子节点之一为 B，或者 A 的任何子节点是 B 的祖先，那么我们认为 A 是 B 的祖先）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxAncestorDiff</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> maxDistanceOfLeft = maxAncestorDiff(root, root.val, root.val, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> maxDistanceOfRight = maxAncestorDiff(root, root.val, root.val, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> Math.max(maxDistanceOfLeft, maxDistanceOfRight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">maxAncestorDiff</span><span class="params">(TreeNode root, <span class="keyword">int</span> max, <span class="keyword">int</span> min, <span class="keyword">int</span> maxDistance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> maxDistance;</span><br><span class="line">        &#125;</span><br><span class="line">        maxDistance = Math.max(maxDistance, Math.max(Math.abs(root.val - max), Math.abs(root.val - min)));</span><br><span class="line">        max = Math.max(max, root.val);</span><br><span class="line">        min = Math.min(min, root.val);</span><br><span class="line">        <span class="keyword">int</span> maxDistanceOfLeft = maxAncestorDiff(root.left, max, min, maxDistance);</span><br><span class="line">        <span class="keyword">int</span> maxDistanceOfRight = maxAncestorDiff(root.right, max, min, maxDistance);</span><br><span class="line">        <span class="keyword">return</span> Math.max(maxDistance, Math.max(maxDistanceOfLeft, maxDistanceOfRight));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Maximum Difference Between Node and Ancestor.<br>Memory Usage: 35.8 MB, less than 100.00% of Java online submissions for Maximum Difference Between Node and Ancestor.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/" target="_blank" rel="noopener">https://leetcode.com/problems/maximum-difference-between-node-and-ancestor/</a></li>
<li><a href="https://leetcode-cn.com/problems/maximum-difference-between-node-and-ancestor/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/maximum-difference-between-node-and-ancestor/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1025. 除数博弈 | Divisor Game</title>
    <url>/leetcode/Divisor-Game/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Alice and Bob take turns playing a game, with Alice starting first.<br>Initially, there is a number N on the chalkboard.  On each player’s turn, that player makes a move consisting of:<br>    Choosing any x with 0 &lt; x &lt; N and N % x == 0.<br>    Replacing the number N on the chalkboard with N - x.<br>Also, if a player cannot make a move, they lose the game.<br>Return True if and only if Alice wins the game, assuming both players play optimally.</p>
<a id="more"></a>

<p>爱丽丝和鲍勃一起玩游戏，他们轮流行动。爱丽丝先手开局。<br>最初，黑板上有一个数字 N 。在每个玩家的回合，玩家需要执行以下操作：<br>选出任一 x，满足 0 &lt; x &lt; N 且 N % x == 0 。<br>用 N - x 替换黑板上的数字 N 。<br>如果玩家无法执行这些操作，就会输掉游戏。<br>只有在爱丽丝在游戏中取得胜利时才返回 True，否则返回 false。假设两个玩家都以最佳状态参与游戏。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>如果手上是偶数，至少有2个选择，减去1或2，然后丢给对手一个奇数或偶数。<br>如果手上是奇数，只能选择减去一个奇数，最后丢给对手一个偶数。<br>现在，已知拿到2的人可以获胜。<br>因此，拿到偶数的人只要每次减去1，丢给对手一个奇数，就可以保证自己手上永远是偶数。最终手上的数一定会变成2，因此拿到偶数的人能赢。<br>如果拿到手的是奇数，那丢给对手的只能是偶数，根据上一条，对手将获胜。<br>因此， Alice 获胜的充要条件是： N 是一个偶数。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">divisorGame</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (N &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Divisor Game.<br>Memory Usage: 33 MB, less than 13.33% of Java online submissions for Divisor Game.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/divisor-game/" target="_blank" rel="noopener">https://leetcode.com/problems/divisor-game/</a></li>
<li><a href="https://leetcode-cn.com/problems/divisor-game/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/divisor-game/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1024. 视频拼接 | Video Stitching</title>
    <url>/leetcode/Video-Stitching/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>You are given a series of video clips from a sporting event that lasted T seconds.  These video clips can be overlapping with each other and have varied lengths.<br>Each video clip clips[i] is an interval: it starts at time clips[i][0] and ends at time clips[i][1].  We can cut these clips into segments freely: for example, a clip [0, 7] can be cut into segments [0, 1] + [1, 3] + [3, 7].<br>Return the minimum number of clips needed so that we can cut the clips into segments that cover the entire sporting event ([0, T]).  If the task is impossible, return -1.</p>
<a id="more"></a>

<p>你将会获得一系列视频片段，这些片段来自于一项持续时长为 T 秒的体育赛事。这些片段可能有所重叠，也可能长度不一。<br>视频片段 clips[i] 都用区间进行表示：开始于 clips[i][0] 并于 clips[i][1] 结束。我们甚至可以对这些片段自由地再剪辑，例如片段 [0, 7] 可以剪切成 [0, 1] + [1, 3] + [3, 7] 三部分。<br>我们需要将这些片段进行再剪辑，并将剪辑后的内容拼接成覆盖整个运动过程的片段（[0, T]）。返回所需片段的最小数目，如果无法完成该任务，则返回 -1 。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>贪心。每次从符合开始条件的片段中剪一段最长的视频。<br>当找不到符合开始条件的片段式时，返回 -1。<br>当已到达时刻 T 时，返回目前的片段数。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">videoStitching</span><span class="params">(<span class="keyword">int</span>[][] clips, <span class="keyword">int</span> T)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(clips, Comparator.comparingInt(o -&gt; o[<span class="number">0</span>]));</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; clips.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (clips[i][<span class="number">0</span>] &lt;= start) &#123;</span><br><span class="line">                end = Math.max(end, clips[i][<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">if</span> (end &gt;= T) &#123;</span><br><span class="line">                    <span class="keyword">return</span> count + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (start == end) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                count++;</span><br><span class="line">                start = end;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 3 ms, faster than 38.31% of Java online submissions for Video Stitching.<br>Memory Usage: 34.7 MB, less than 50.00% of Java online submissions for Video Stitching.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/video-stitching/" target="_blank" rel="noopener">https://leetcode.com/problems/video-stitching/</a></li>
<li><a href="https://leetcode-cn.com/problems/video-stitching/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/video-stitching/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1023. 驼峰式匹配 | Camelcase Matching</title>
    <url>/leetcode/Camelcase-Matching/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>A query word matches a given pattern if we can insert lowercase letters to the pattern word so that it equals the query. (We may insert each character at any position, and may insert 0 characters.)<br>Given a list of queries, and a pattern, return an answer list of booleans, where answer[i] is true if and only if queries[i] matches the pattern.</p>
<a id="more"></a>

<p>如果我们可以将小写字母插入模式串 pattern 得到待查询项 query，那么待查询项与给定模式串匹配。（我们可以在任何位置插入每个字符，也可以插入 0 个字符。）<br>给定待查询列表 queries，和模式串 pattern，返回由布尔值组成的答案列表 answer。只有在待查项 queries[i] 与模式串 pattern 匹配时， answer[i] 才为 true，否则为 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Boolean&gt; <span class="title">camelMatch</span><span class="params">(String[] queries, String pattern)</span> </span>&#123;</span><br><span class="line">        List&lt;Boolean&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;(queries.length);</span><br><span class="line">        <span class="keyword">char</span>[] patternLetters = pattern.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (String query : queries) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            Boolean t = Boolean.TRUE;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : query.toCharArray()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &gt;= patternLetters.length) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (Character.isUpperCase(c)) &#123;</span><br><span class="line">                        t = Boolean.FALSE;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">char</span> patternLetter = patternLetters[i];</span><br><span class="line">                <span class="keyword">if</span> (Character.isUpperCase(patternLetter)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (Character.isUpperCase(c)) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (patternLetter != c) &#123;</span><br><span class="line">                            t = Boolean.FALSE;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            i++;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (patternLetter == c) &#123;</span><br><span class="line">                        i++;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Character.isUpperCase(c)) &#123;</span><br><span class="line">                        t = Boolean.FALSE;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; patternLetters.length) &#123;</span><br><span class="line">                t = Boolean.FALSE;</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 43.36% of Java online submissions for Camelcase Matching.<br>Memory Usage: 34.8 MB, less than 100.00% of Java online submissions for Camelcase Matching.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/camelcase-matching/" target="_blank" rel="noopener">https://leetcode.com/problems/camelcase-matching/</a></li>
<li><a href="https://leetcode-cn.com/problems/camelcase-matching/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/camelcase-matching/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1022. 从根到叶的二进制数之和 | Sum of Root To Leaf Binary Numbers</title>
    <url>/leetcode/Sum-of-Root-To-Leaf-Binary-Numbers/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a binary tree, each node has value 0 or 1.  Each root-to-leaf path represents a binary number starting with the most significant bit.  For example, if the path is 0 -&gt; 1 -&gt; 1 -&gt; 0 -&gt; 1, then this could represent 01101 in binary, which is 13.<br>For all leaves in the tree, consider the numbers represented by the path from the root to that leaf.<br>Return the sum of these numbers.</p>
<a id="more"></a>

<p>给出一棵二叉树，其上每个结点的值都是 0 或 1 。每一条从根到叶的路径都代表一个从最高有效位开始的二进制数。例如，如果路径为 0 -&gt; 1 -&gt; 1 -&gt; 0 -&gt; 1，那么它表示二进制数 01101，也就是 13 。<br>对树上的每一片叶子，我们都要找出从根到该叶子的路径所表示的数字。<br>以 10^9 + 7 为模，返回这些数字之和。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sumRootToLeaf</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sumRootToLeaf(root, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">sumRootToLeaf</span><span class="params">(TreeNode root, <span class="keyword">int</span> currentSum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> sum = (currentSum &lt;&lt; <span class="number">1</span>) + root.val;</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sumRootToLeaf(root.left, sum) + sumRootToLeaf(root.right, sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Sum of Root To Leaf Binary Numbers.<br>Memory Usage: 37 MB, less than 100.00% of Java online submissions for Sum of Root To Leaf Binary Numbers.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/sum-of-root-to-leaf-binary-numbers/" target="_blank" rel="noopener">https://leetcode.com/problems/sum-of-root-to-leaf-binary-numbers/</a></li>
<li><a href="https://leetcode-cn.com/problems/sum-of-root-to-leaf-binary-numbers/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/sum-of-root-to-leaf-binary-numbers/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1021. 删除最外层的括号 | Remove Outermost Parentheses</title>
    <url>/leetcode/Remove-Outermost-Parentheses/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>A valid parentheses string is either empty (“”), “(“ + A + “)”, or A + B, where A and B are valid parentheses strings, and + represents string concatenation.  For example, “”, “()”, “(())()”, and “(()(()))” are all valid parentheses strings.<br>A valid parentheses string S is primitive if it is nonempty, and there does not exist a way to split it into S = A+B, with A and B nonempty valid parentheses strings.<br>Given a valid parentheses string S, consider its primitive decomposition: S = P_1 + P_2 + … + P_k, where P_i are primitive valid parentheses strings.<br>Return S after removing the outermost parentheses of every primitive string in the primitive decomposition of S.</p>
<a id="more"></a>

<p>有效括号字符串为空 (“”)、”(“ + A + “)” 或 A + B，其中 A 和 B 都是有效的括号字符串，+ 代表字符串的连接。例如，””，”()”，”(())()” 和 “(()(()))” 都是有效的括号字符串。<br>如果有效字符串 S 非空，且不存在将其拆分为 S = A+B 的方法，我们称其为原语（primitive），其中 A 和 B 都是非空有效括号字符串。<br>给出一个非空有效字符串 S，考虑将其进行原语化分解，使得：S = P_1 + P_2 + … + P_k，其中 P_i 是有效括号字符串原语。<br>对 S 进行原语化分解，删除分解中每个原语字符串的最外层括号，返回 S 。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>每一个原语，都是一个最小的有效的括号字符串。<br>因此，可以从左到右扫描有效的括号字符串，将找到的字符串去掉首尾后，拼接到结果字符串中。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">removeOuterParentheses</span><span class="params">(String S)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> open = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> close = <span class="number">0</span>;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : S.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'('</span>) &#123;</span><br><span class="line">                open++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">')'</span>) &#123;</span><br><span class="line">                close++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (open == close) &#123;</span><br><span class="line">                sb.append(S, start + <span class="number">1</span>, end);</span><br><span class="line">                start = end + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 2 ms, faster than 98.00% of Java online submissions for Remove Outermost Parentheses.<br>Memory Usage: 36.5 MB, less than 100.00% of Java online submissions for Remove Outermost Parentheses.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/remove-outermost-parentheses/" target="_blank" rel="noopener">https://leetcode.com/problems/remove-outermost-parentheses/</a></li>
<li><a href="https://leetcode-cn.com/problems/remove-outermost-parentheses/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/remove-outermost-parentheses/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1020. 飞地的数量 | Number of Enclaves</title>
    <url>/leetcode/Number-of-Enclaves/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a 2D array A, each cell is 0 (representing sea) or 1 (representing land)<br>A move consists of walking from one land square 4-directionally to another land square, or off the boundary of the grid.<br>Return the number of land squares in the grid for which we cannot walk off the boundary of the grid in any number of moves.</p>
<a id="more"></a>

<p>给出一个二维数组 A，每个单元格为 0（代表海）或 1（代表陆地）。<br>移动是指在陆地上从一个地方走到另一个地方（朝四个方向之一）或离开网格的边界。<br>返回网格中无法在任意次数的移动中离开网格边界的陆地单元格的数量。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>从边界开始遍历，将所有能触达的1改成0。最后统计剩下的1的数量就行。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numEnclaves</span><span class="params">(<span class="keyword">int</span>[][] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = A.length;</span><br><span class="line">        <span class="keyword">int</span> n = A[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            dfsChange1To0(A, i, <span class="number">0</span>);</span><br><span class="line">            dfsChange1To0(A, i, n-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n-<span class="number">1</span>; j++) &#123;</span><br><span class="line">            dfsChange1To0(A, <span class="number">0</span>, j);</span><br><span class="line">            dfsChange1To0(A, m-<span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                res += A[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfsChange1To0</span><span class="params">(<span class="keyword">int</span>[][] A, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (A[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        A[i][j] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dfsChange1To0(A, i-<span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dfsChange1To0(A, i, j-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; A.length - <span class="number">1</span>) &#123;</span><br><span class="line">            dfsChange1To0(A, i+<span class="number">1</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &lt; A[<span class="number">0</span>].length - <span class="number">1</span>) &#123;</span><br><span class="line">            dfsChange1To0(A, i, j+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 2 ms, faster than 100.00% of Java online submissions for Number of Enclaves.<br>Memory Usage: 52.1 MB, less than 71.43% of Java online submissions for Number of Enclaves.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/number-of-enclaves/" target="_blank" rel="noopener">https://leetcode.com/problems/number-of-enclaves/</a></li>
<li><a href="https://leetcode-cn.com/problems/number-of-enclaves/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/number-of-enclaves/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1019. 链表中的下一个更大节点 | Next Greater Node In Linked List</title>
    <url>/leetcode/Next-Greater-Node-In-Linked-List/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We are given a linked list with head as the first node.  Let’s number the nodes in the list: node_1, node_2, node_3, … etc.<br>Each node may have a next larger value: for node_i, next_larger(node_i) is the node_j.val such that j &gt; i, node_j.val &gt; node_i.val, and j is the smallest possible choice.  If such a j does not exist, the next larger value is 0.<br>Return an array of integers answer, where answer[i] = next_larger(node_{i+1}).<br>Note that in the example inputs (not outputs) below, arrays such as [2,1,5] represent the serialization of a linked list with a head node value of 2, second node value of 1, and third node value of 5.</p>
<a id="more"></a>

<p>给出一个以头节点 head 作为第一个节点的链表。链表中的节点分别编号为：node_1, node_2, node_3, … 。<br>每个节点都可能有下一个更大值（next larger value）：对于 node_i，如果其 next_larger(node_i) 是 node_j.val，那么就有 j &gt; i 且  node_j.val &gt; node_i.val，而 j 是可能的选项中最小的那个。如果不存在这样的 j，那么下一个更大值为 0 。<br>返回整数答案数组 answer，其中 answer[i] = next_larger(node_{i+1}) 。<br>注意：在下面的示例中，诸如 [2,1,5] 这样的输入（不是输出）是链表的序列化表示，其头节点的值为 2，第二个节点值为 1，第三个节点值为 5 。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>单调栈</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] nextLargerNodes(ListNode head) &#123;</span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">        ListNode node = head;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">            node = node.next;</span><br><span class="line">            length++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[length];</span><br><span class="line">        <span class="comment">// 单调递减栈</span></span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        node = head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                res[i] = node.val;</span><br><span class="line">                stack.push(i);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; node.val &gt; res[stack.peek()]) &#123;</span><br><span class="line">                    <span class="keyword">int</span> index = stack.pop();</span><br><span class="line">                    res[index] = node.val;</span><br><span class="line">                &#125;</span><br><span class="line">                res[i] = node.val;</span><br><span class="line">                stack.push(i);</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            res[stack.pop()] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 43 ms, faster than 52.96% of Java online submissions for Next Greater Node In Linked List.<br>Memory Usage: 40.4 MB, less than 97.30% of Java online submissions for Next Greater Node In Linked List.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/next-greater-node-in-linked-list/" target="_blank" rel="noopener">https://leetcode.com/problems/next-greater-node-in-linked-list/</a></li>
<li><a href="https://leetcode-cn.com/problems/next-greater-node-in-linked-list/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/next-greater-node-in-linked-list/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1018. 可被 5 整除的二进制前缀 | Binary Prefix Divisible By 5</title>
    <url>/leetcode/Binary-Prefix-Divisible-By-5/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of 0s and 1s, consider N_i: the i-th subarray from A[0] to A[i] interpreted as a binary number (from most-significant-bit to least-significant-bit.)<br>Return a list of booleans answer, where answer[i] is true if and only if N_i is divisible by 5.</p>
<a id="more"></a>

<p>给定由若干 0 和 1 组成的数组 A。我们定义 N_i：从 A[0] 到 A[i] 的第 i 个子数组被解释为一个二进制数（从最高有效位到最低有效位）。<br>返回布尔值列表 answer，只有当 N_i 可以被 5 整除时，答案 answer[i] 为 true，否则为 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>被 5 整除意味着余数为 0。<br>从左向右遍历，遍历过程中记录当前的余数。每当遍历到下个位置时，余数乘以2加上当前位置的值，对5取模，得到新的余数。</p>
<p>x * 2 + y ≡ (x mod k) * 2 + y (mod k)</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Boolean&gt; <span class="title">prefixesDivBy5</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        List&lt;Boolean&gt; res = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> mod = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            mod = ((mod &lt;&lt; <span class="number">1</span>) + A[i]) % <span class="number">5</span>;</span><br><span class="line">            <span class="keyword">if</span> (mod == <span class="number">0</span>) &#123;</span><br><span class="line">                res.add(Boolean.TRUE);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res.add(Boolean.FALSE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 2 ms, faster than 100.00% of Java online submissions for Binary Prefix Divisible By 5.<br>Memory Usage: 39.8 MB, less than 90.91% of Java online submissions for Binary Prefix Divisible By 5.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/binary-prefix-divisible-by-5/" target="_blank" rel="noopener">https://leetcode.com/problems/binary-prefix-divisible-by-5/</a></li>
<li><a href="https://leetcode-cn.com/problems/binary-prefix-divisible-by-5/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-prefix-divisible-by-5/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1017. 负二进制转换 | Convert to Base -2</title>
    <url>/leetcode/Convert-to-Base-2/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a number N, return a string consisting of “0”s and “1”s that represents its value in base -2 (negative two).<br>The returned string must have no leading zeroes, unless the string is “0”.</p>
<a id="more"></a>

<p>给定一个二进制字符串 S（一个仅由若干 ‘0’ 和 ‘1’ 构成的字符串）和一个正整数 N，如果对于从 1 到 N 的每个整数 X，其二进制表示都是 S 的子串，就返回 true，否则返回 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>十进制整数转化为 K 进制整数的通用做法：除以 K 逆序取余</p>
<p>十进制小数转化为 K 进制小数的通用做法：乘以 K 顺序取整</p>
<p>如果 K 为负数，需要确保余数为正。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">baseNeg2</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseK(N, -<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">baseK</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (N == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">while</span> (N != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> mod = ((N % K) + Math.abs(K)) % Math.abs(K);</span><br><span class="line">            sb.append(mod);</span><br><span class="line">            N = (N - mod) / K;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 98.87% of Java online submissions for Convert to Base -2.<br>Memory Usage: 34.2 MB, less than 100.00% of Java online submissions for Convert to Base -2.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/convert-to-base-2/" target="_blank" rel="noopener">https://leetcode.com/problems/convert-to-base-2/</a></li>
<li><a href="https://leetcode-cn.com/problems/convert-to-base-2/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/convert-to-base-2/</a></li>
<li><a href="https://leetcode.com/problems/convert-to-base-2/discuss/265507/JavaC%2B%2BPython-2-lines-Exactly-Same-as-Base-2" target="_blank" rel="noopener">https://leetcode.com/problems/convert-to-base-2/discuss/265507/JavaC%2B%2BPython-2-lines-Exactly-Same-as-Base-2</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1016. 子串能表示从 1 到 N 数字的二进制串 | Binary String With Substrings Representing 1 To N</title>
    <url>/leetcode/Binary-String-With-Substrings-Representing-1-To-N/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a binary string S (a string consisting only of ‘0’ and ‘1’s) and a positive integer N, return true if and only if for every integer X from 1 to N, the binary representation of X is a substring of S.</p>
<a id="more"></a>

<p>给定一个二进制字符串 S（一个仅由若干 ‘0’ 和 ‘1’ 构成的字符串）和一个正整数 N，如果对于从 1 到 N 的每个整数 X，其二进制表示都是 S 的子串，就返回 true，否则返回 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><p>N = (abcde)<br>N =&gt; (abcd) = N &gt;&gt; 2 = N /2</p>
<p>所以，只需要检查 N ~ N/2 这些值就行。</p>
<h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">queryString</span><span class="params">(String S, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> half = N / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = N; i &gt; half; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!S.contains(Integer.toBinaryString(i))) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Binary String With Substrings Representing 1 To N.<br>Memory Usage: 34 MB, less than 100.00% of Java online submissions for Binary String With Substrings Representing 1 To N.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/binary-string-with-substrings-representing-1-to-n/" target="_blank" rel="noopener">https://leetcode.com/problems/binary-string-with-substrings-representing-1-to-n/</a></li>
<li><a href="https://leetcode-cn.com/problems/binary-string-with-substrings-representing-1-to-n/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-string-with-substrings-representing-1-to-n/</a></li>
<li><a href="https://leetcode.com/problems/binary-string-with-substrings-representing-1-to-n/discuss/260847/JavaC%2B%2BPython-O(S)" target="_blank" rel="noopener">https://leetcode.com/problems/binary-string-with-substrings-representing-1-to-n/discuss/260847/JavaC%2B%2BPython-O(S)</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1015. 可被 K 整除的最小整数 | Smallest Integer Divisible by K</title>
    <url>/leetcode/Smallest-Integer-Divisible-by-K/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a positive integer K, you need find the smallest positive integer N such that N is divisible by K, and N only contains the digit 1.<br>Return the length of N.  If there is no such N, return -1.</p>
<a id="more"></a>

<p>给定正整数 K，你需要找出可以被 K 整除的、仅包含数字 1 的最小正整数 N。<br>返回 N 的长度。如果不存在这样的 N，就返回 -1。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>首先，K 不断的增加 K ，个数的可能取值将循环出现，如果这些值中没有 1 的话，就肯定无解。<br>至于个位能出现 1 是否意味着一定有解我还不确定。</p>
<p>target = 1 * 10 ^ k , k = 1,2,3,…,N</p>
<p>target % K == 0<br>( 1 + 1 * 10 + 1 * 10^2 + … + 1 * 10 ^ N ) % K = 0<br>{ 1 % K + 10 % K + … + 10^N % K } % K = 0<br>{ 1 % K + 10 % K + … + [ 10^(N-1) * 10 ] % K } % K = 0<br>{ 1 % K + 10 % K + … + [ 10^(N-1) % K * 10 ] % K } % K = 0</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">smallestRepunitDivByK</span><span class="params">(<span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span>[] table = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">int</span> t = K % <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">while</span> (!table[t]) &#123;</span><br><span class="line">            table[t] = <span class="keyword">true</span>;</span><br><span class="line">            t = (t + K) % <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!table[<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mod = <span class="number">1</span> % K;</span><br><span class="line">        <span class="keyword">int</span> pre = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (mod != <span class="number">0</span>) &#123;</span><br><span class="line">            pre = pre * <span class="number">10</span> % K;</span><br><span class="line">            mod = ( mod + pre ) % K;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 2 ms, faster than 49.35% of Java online submissions for Smallest Integer Divisible by K.<br>Memory Usage: 32.9 MB, less than 16.67% of Java online submissions for Smallest Integer Divisible by K.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/smallest-integer-divisible-by-k/" target="_blank" rel="noopener">https://leetcode.com/problems/smallest-integer-divisible-by-k/</a></li>
<li><a href="https://leetcode-cn.com/problems/smallest-integer-divisible-by-k/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/smallest-integer-divisible-by-k/</a></li>
<li><a href="https://leetcode.com/problems/smallest-integer-divisible-by-k/discuss/260875/Python-O(K)-with-Detailed-Explanations" target="_blank" rel="noopener">https://leetcode.com/problems/smallest-integer-divisible-by-k/discuss/260875/Python-O(K)-with-Detailed-Explanations</a></li>
<li><a href="https://leetcode-cn.com/problems/smallest-integer-divisible-by-k/solution/javajie-fa-yi-ji-zheng-ming-de-si-lu-by-jiangzk/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/smallest-integer-divisible-by-k/solution/javajie-fa-yi-ji-zheng-ming-de-si-lu-by-jiangzk/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1014. 最佳观光组合 | Best Sightseeing Pair</title>
    <url>/leetcode/Best-Sightseeing-Pair/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of positive integers, A[i] represents the value of the i-th sightseeing spot, and two sightseeing spots i and j have distance j - i between them.<br>The score of a pair (i &lt; j) of sightseeing spots is (A[i] + A[j] + i - j) : the sum of the values of the sightseeing spots, minus the distance between them.<br>Return the maximum score of a pair of sightseeing spots.</p>
<a id="more"></a>

<p>给定正整数数组 A，A[i] 表示第 i 个观光景点的评分，并且两个景点 i 和 j 之间的距离为 j - i。<br>一对景点（i &lt; j）组成的观光组合的得分为（A[i] + A[j] + i - j）：景点的评分之和减去它们两者之间的距离。<br>返回一对观光景点能取得的最高分。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>从左向右遍历，在遍历的过程中，记录左侧的所有值在当前位置上的最大价值。观光组合的价值即为当前景点的价值加上左侧值在当前位置上的最大价值（已考虑距离衰减）。<br>通过在遍历过程中减去距离衰减，来维护左侧的所有值在当前位置上的最大价值。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxScoreSightseeingPair</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> currentMax = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            res = Math.max(res, currentMax + A[i]);</span><br><span class="line">            currentMax = Math.max(currentMax, A[i]) - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 4 ms, faster than 54.23% of Java online submissions for Best Sightseeing Pair.<br>Memory Usage: 50 MB, less than 92.31% of Java online submissions for Best Sightseeing Pair.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/best-sightseeing-pair/" target="_blank" rel="noopener">https://leetcode.com/problems/best-sightseeing-pair/</a></li>
<li><a href="https://leetcode-cn.com/problems/best-sightseeing-pair/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/best-sightseeing-pair/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1013. 将数组分成和相等的三个部分 | Partition Array Into Three Parts With Equal Sum</title>
    <url>/leetcode/Partition-Array-Into-Three-Parts-With-Equal-Sum/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of integers, return true if and only if we can partition the array into three non-empty parts with equal sums.<br>Formally, we can partition the array if we can find indexes i+1 &lt; j with (A[0] + A[1] + … + A[i] == A[i+1] + A[i+2] + … + A[j-1] == A[j] + A[j-1] + … + A[A.length - 1])</p>
<a id="more"></a>

<p>给定一个整数数组 A，只有我们可以将其划分为三个和相等的非空部分时才返回 true，否则返回 false。<br>形式上，如果我们可以找出索引 i+1 &lt; j 且满足 (A[0] + A[1] + … + A[i] == A[i+1] + A[i+2] + … + A[j-1] == A[j] + A[j-1] + … + A[A.length - 1]) 就可以将数组三等分。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>先判断下数组的和 sum 是否是 3 的倍数，如果不是，则不存在这样的划分。<br>然后从最左侧向右找一段和为 sum / 3 的区间，从最右侧向左找一段和为 sum / 3 的子区间。<br>如果这两个区间中间至少间隔一个元素，则存在这样的划分，否则不存在这样的划分。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canThreePartsEqualSum</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            sum += A[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum % <span class="number">3</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> target = sum / <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = A.length - <span class="number">1</span>;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; A.length) &#123;</span><br><span class="line">            sum += A[i];</span><br><span class="line">            <span class="keyword">if</span> (sum == target) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; A.length - <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            sum += A[j];</span><br><span class="line">            <span class="keyword">if</span> (sum == target) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span> &lt; j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 100.00% of Java online submissions for Partition Array Into Three Parts With Equal Sum.<br>Memory Usage: 49.9 MB, less than 100.00% of Java online submissions for Partition Array Into Three Parts With Equal Sum.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/partition-array-into-three-parts-with-equal-sum/" target="_blank" rel="noopener">https://leetcode.com/problems/partition-array-into-three-parts-with-equal-sum/</a></li>
<li><a href="https://leetcode-cn.com/problems/partition-array-into-three-parts-with-equal-sum/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/partition-array-into-three-parts-with-equal-sum/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1012. 至少有 1 位重复的数字 | Numbers With Repeated Digits</title>
    <url>/leetcode/Numbers-With-Repeated-Digits/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given a positive integer N, return the number of positive integers less than or equal to N that have at least 1 repeated digit.</p>
<a id="more"></a>

<p>给定正整数 N，返回小于等于 N 且具有至少 1 位重复数字的正整数。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line"></span><br><span class="line">    private static int[][] permutationNumbers &#x3D; &#123;&#123;1,0,0,0,0,0,0,0,0,0&#125;,&#123;1,1,0,0,0,0,0,0,0,0&#125;,&#123;1,2,2,0,0,0,0,0,0,0&#125;,&#123;1,3,6,6,0,0,0,0,0,0&#125;,&#123;1,4,12,24,24,0,0,0,0,0&#125;,&#123;1,5,20,60,120,120,0,0,0,0&#125;,&#123;1,6,30,120,360,720,720,0,0,0&#125;,&#123;1,7,42,210,840,2520,5040,5040,0,0&#125;,&#123;1,8,56,336,1680,6720,20160,40320,40320,0&#125;,&#123;1,9,72,504,3024,15120,60480,181440,362880,362880&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    public int numDupDigitsAtMostN(int N) &#123;</span><br><span class="line">        return N - numWithoutDupDigitsLessThanN(toDigits(N+1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int numWithoutDupDigitsLessThanN(List&lt;Integer&gt; digits) &#123;</span><br><span class="line">        int res &#x3D; 0;</span><br><span class="line">        int numDigits &#x3D; digits.size();</span><br><span class="line">        for (int i &#x3D; 1; i &lt; numDigits; i++) &#123;</span><br><span class="line">            res +&#x3D; 9 * permutationNumber(9, i - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        boolean[] table &#x3D; new boolean[10];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; numDigits; i++) &#123;</span><br><span class="line">            int digit &#x3D; digits.get(i);</span><br><span class="line">            for (int j &#x3D; i &gt; 0 ? 0 : 1; j &lt; digit; j++) &#123;</span><br><span class="line">                if (!table[j]) &#123;</span><br><span class="line">                    res +&#x3D; permutationNumber(9-i, numDigits - 1 - i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (table[digit]) &#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            table[digit] &#x3D; true;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private List&lt;Integer&gt; toDigits(int n) &#123;</span><br><span class="line">        List&lt;Integer&gt; res &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        while (n !&#x3D; 0) &#123;</span><br><span class="line">            res.add(0, n%10);</span><br><span class="line">            n &#x2F;&#x3D; 10;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int permutationNumber(int m, int n) &#123;</span><br><span class="line">        return permutationNumbers[m][n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void help() &#123;</span><br><span class="line">        int size &#x3D; 10;</span><br><span class="line">        int[] f &#x3D; new int[size];</span><br><span class="line">        f[0] &#x3D; 1;</span><br><span class="line">        for (int i &#x3D; 1; i &lt; size; i++) &#123;</span><br><span class="line">            f[i] &#x3D; f[i-1] * i;</span><br><span class="line">        &#125;</span><br><span class="line">&#x2F;&#x2F;        System.out.println(JSON.toJSONString(f).replaceAll(&quot;\\[&quot;, &quot;\\&#123;&quot;).replaceAll(&quot;\\]&quot;, &quot;\\&#125;&quot;));</span><br><span class="line">        int[][] a &#x3D; new int[size][size];</span><br><span class="line">        for (int i &#x3D; 0; i &lt; size; i++) &#123;</span><br><span class="line">            for (int j &#x3D; 0; j &lt;&#x3D; i; j++) &#123;</span><br><span class="line">                a[i][j] &#x3D; f[i] &#x2F; f[i-j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#x2F;&#x2F;        System.out.println(JSON.toJSONString(a).replaceAll(&quot;\\[&quot;, &quot;\\&#123;&quot;).replaceAll(&quot;\\]&quot;, &quot;\\&#125;&quot;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Solution solution &#x3D; new Solution();</span><br><span class="line">        System.out.println(solution.numDupDigitsAtMostN(20) + &quot; &lt;---&gt; 1&quot;);</span><br><span class="line">        System.out.println(solution.numDupDigitsAtMostN(100) + &quot; &lt;---&gt; 10&quot;);</span><br><span class="line">        System.out.println(solution.numDupDigitsAtMostN(1000) + &quot; &lt;---&gt; 262&quot;);</span><br><span class="line">        System.out.println(solution.numDupDigitsAtMostN(134) + &quot; &lt;---&gt; 25&quot;);</span><br><span class="line">        System.out.println(solution.numDupDigitsAtMostN(883) + &quot; &lt;---&gt; 225&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 96.02% of Java online submissions for Numbers With Repeated Digits.<br>Memory Usage: 33.2 MB, less than 11.11% of Java online submissions for Numbers With Repeated Digits.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/numbers-with-repeated-digits/" target="_blank" rel="noopener">https://leetcode.com/problems/numbers-with-repeated-digits/</a></li>
<li><a href="https://leetcode-cn.com/problems/numbers-with-repeated-digits/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/numbers-with-repeated-digits/</a></li>
<li><a href="https://leetcode.com/problems/numbers-with-repeated-digits/discuss/256725/JavaPython-Count-the-Number-Without-Repeated-Digit" target="_blank" rel="noopener">https://leetcode.com/problems/numbers-with-repeated-digits/discuss/256725/JavaPython-Count-the-Number-Without-Repeated-Digit</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1011. 在 D 天内送达包裹的能力 | Capacity To Ship Packages Within D Days</title>
    <url>/leetcode/Capacity-To-Ship-Packages-Within-D-Days/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>A conveyor belt has packages that must be shipped from one port to another within D days.<br>The i-th package on the conveyor belt has a weight of weights[i].  Each day, we load the ship with packages on the conveyor belt (in the order given by weights). We may not load more weight than the maximum weight capacity of the ship.<br>Return the least weight capacity of the ship that will result in all the packages on the conveyor belt being shipped within D days.</p>
<a id="more"></a>

<p>传送带上的包裹必须在 D 天内从一个港口运送到另一个港口。<br>传送带上的第 i 个包裹的重量为 weights[i]。每一天，我们都会按给出重量的顺序往传送带上装载包裹。我们装载的重量不会超过船的最大运载重量。<br>返回能在 D 天内将传送带上的所有包裹送达的船的最低运载能力。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>转化成二分查找，寻找一个可以在 D 天内送达的最小运载量。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">shipWithinDays</span><span class="params">(<span class="keyword">int</span>[] weights, <span class="keyword">int</span> D)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = weights[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">long</span> sum = weights[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; weights.length; i++) &#123;</span><br><span class="line">            max = Math.max(max, weights[i]);</span><br><span class="line">            sum += weights[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> l = max;</span><br><span class="line">        <span class="keyword">int</span> r = sum &gt; Integer.MAX_VALUE ? Integer.MAX_VALUE : (<span class="keyword">int</span>) sum;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (canShip(weights, D, mid)) &#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">canShip</span><span class="params">(<span class="keyword">int</span>[] weights, <span class="keyword">int</span> D, <span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; weights.length; i++) &#123;</span><br><span class="line">            temp += weights[i];</span><br><span class="line">            <span class="keyword">if</span> (temp &gt; capacity) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                temp = weights[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count &gt; D) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count &lt;= D;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        System.out.println(solution.shipWithinDays(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;, <span class="number">5</span>) + <span class="string">" &lt;---&gt; 15"</span>);</span><br><span class="line">        System.out.println(solution.shipWithinDays(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">4</span>&#125;, <span class="number">3</span>) + <span class="string">" &lt;---&gt; 6"</span>);</span><br><span class="line">        System.out.println(solution.shipWithinDays(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="number">4</span>) + <span class="string">" &lt;---&gt; 3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 8 ms, faster than 74.19% of Java online submissions for Capacity To Ship Packages Within D Days.<br>Memory Usage: 43.5 MB, less than 53.85% of Java online submissions for Capacity To Ship Packages Within D Days.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/capacity-to-ship-packages-within-d-days/" target="_blank" rel="noopener">https://leetcode.com/problems/capacity-to-ship-packages-within-d-days/</a></li>
<li><a href="https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1010. 总持续时间可被 60 整除的歌曲 | Pairs of Songs With Total Durations Divisible by 60</title>
    <url>/leetcode/Pairs-of-Songs-With-Total-Durations-Divisible-by-60/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a list of songs, the i-th song has a duration of time[i] seconds.<br>Return the number of pairs of songs for which their total duration in seconds is divisible by 60.  Formally, we want the number of indices i &lt; j with (time[i] + time[j]) % 60 == 0.</p>
<a id="more"></a>

<p>在歌曲列表中，第 i 首歌曲的持续时间为 time[i] 秒。<br>返回其总持续时间（以秒为单位）可被 60 整除的歌曲对的数量。形式上，我们希望索引的数字  i &lt; j 且有 (time[i] + time[j]) % 60 == 0。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>哈希表</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numPairsDivisibleBy60</span><span class="params">(<span class="keyword">int</span>[] time)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] table = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">60</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t : time) &#123;</span><br><span class="line">            t %= <span class="number">60</span>;</span><br><span class="line">            res += table[(<span class="number">60</span> - t) % <span class="number">60</span>];</span><br><span class="line">            table[t]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        System.out.println(solution.numPairsDivisibleBy60(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">30</span>,<span class="number">20</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="number">40</span>&#125;) + <span class="string">" &lt;---&gt; 3"</span>);</span><br><span class="line">        System.out.println(solution.numPairsDivisibleBy60(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">60</span>,<span class="number">60</span>,<span class="number">60</span>&#125;) + <span class="string">" &lt;---&gt; 3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 3 ms, faster than 81.05% of Java online submissions for Pairs of Songs With Total Durations Divisible by 60.<br>Memory Usage: 42.6 MB, less than 35.71% of Java online submissions for Pairs of Songs With Total Durations Divisible by 60.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/pairs-of-songs-with-total-durations-divisible-by-60/" target="_blank" rel="noopener">https://leetcode.com/problems/pairs-of-songs-with-total-durations-divisible-by-60/</a></li>
<li><a href="https://leetcode-cn.com/problems/pairs-of-songs-with-total-durations-divisible-by-60/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/pairs-of-songs-with-total-durations-divisible-by-60/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1009. 十进制整数的反码 | Complement of Base 10 Integer</title>
    <url>/leetcode/Complement-of-Base-10-Integer/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Every non-negative integer N has a binary representation.  For example, 5 can be represented as “101” in binary, 11 as “1011” in binary, and so on.  Note that except for N = 0, there are no leading zeroes in any binary representation.<br>The complement of a binary representation is the number in binary you get when changing every 1 to a 0 and 0 to a 1.  For example, the complement of “101” in binary is “010” in binary.<br>For a given number N in base-10, return the complement of it’s binary representation as a base-10 integer.</p>
<a id="more"></a>

<p>每个非负整数 N 都有其二进制表示。例如， 5 可以被表示为二进制 “101”，11 可以用二进制 “1011” 表示，依此类推。注意，除 N = 0 外，任何二进制表示中都不含前导零。<br>二进制的反码表示是将每个 1 改为 0 且每个 0 变为 1。例如，二进制数 “101” 的二进制反码为 “010”。<br>给定十进制数 N，返回其二进制表示的反码所对应的十进制整数。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>设 m = bitwiseComplement(n)<br>容易看出， m + n = 0b11…11 = 2^k - 1;<br>其中， 2^k - 1 是一个刚好不小于 n 的数。<br>因此，这道题可以转化为二分查找。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] a = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">15</span>,<span class="number">31</span>,<span class="number">63</span>,<span class="number">127</span>,<span class="number">255</span>,<span class="number">511</span>,<span class="number">1023</span>,<span class="number">2047</span>,<span class="number">4095</span>,<span class="number">8191</span>,<span class="number">16383</span>,<span class="number">32767</span>,<span class="number">65535</span>,<span class="number">131071</span>,<span class="number">262143</span>,<span class="number">524287</span>,<span class="number">1048575</span>,<span class="number">2097151</span>,<span class="number">4194303</span>,<span class="number">8388607</span>,<span class="number">16777215</span>,<span class="number">33554431</span>,<span class="number">67108863</span>,<span class="number">134217727</span>,<span class="number">268435455</span>,<span class="number">536870911</span>,<span class="number">1073741823</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitwiseComplement</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = binarySearch(N);</span><br><span class="line">        <span class="keyword">return</span> a[i] - N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从 a 中找不小于 target 的最小的数字</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> r = a.length;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (a[mid] == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a[mid] &gt; target) &#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">31</span>; i++) &#123;</span><br><span class="line">            sb.append((<span class="number">1</span> &lt;&lt; i) - <span class="number">1</span>).append(<span class="string">','</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sb.deleteCharAt(sb.length() - <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        System.out.println(solution.bitwiseComplement(<span class="number">5</span>) + <span class="string">" &lt;---&gt; 2"</span>);</span><br><span class="line">        System.out.println(solution.bitwiseComplement(<span class="number">7</span>) + <span class="string">" &lt;---&gt; 0"</span>);</span><br><span class="line">        System.out.println(solution.bitwiseComplement(<span class="number">10</span>) + <span class="string">" &lt;---&gt; 5"</span>);</span><br><span class="line">        System.out.println(solution.bitwiseComplement(<span class="number">1024</span>) + <span class="string">" &lt;---&gt; 1023"</span>);</span><br><span class="line">        System.out.println(solution.bitwiseComplement(<span class="number">0</span>) + <span class="string">" &lt;---&gt; 1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Complement of Base 10 Integer.<br>Memory Usage: 33.2 MB, less than 11.11% of Java online submissions for Complement of Base 10 Integer.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/complement-of-base-10-integer/" target="_blank" rel="noopener">https://leetcode.com/problems/complement-of-base-10-integer/</a></li>
<li><a href="https://leetcode-cn.com/problems/complement-of-base-10-integer/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/complement-of-base-10-integer/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1008. 先序遍历构造二叉树 | Construct Binary Search Tree from Preorder Traversal</title>
    <url>/leetcode/Construct-Binary-Search-Tree-from-Preorder-Traversal/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Return the root node of a binary search tree that matches the given preorder traversal.<br>(Recall that a binary search tree is a binary tree where for every node, any descendant of node.left has a value &lt; node.val, and any descendant of node.right has a value &gt; node.val.  Also recall that a preorder traversal displays the value of the node first, then traverses node.left, then traverses node.right.)</p>
<a id="more"></a>

<p>返回与给定先序遍历 preorder 相匹配的二叉搜索树（binary search tree）的根结点。<br>(回想一下，二叉搜索树是二叉树的一种，其每个节点都满足以下规则，对于 node.left 的任何后代，值总 &lt; node.val，而 node.right 的任何后代，值总 &gt; node.val。此外，先序遍历首先显示节点的值，然后遍历 node.left，接着遍历 node.right。）</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>第一个值为根节点。剩下的部分可以按照与根节点的大小关系划分为2部分：左侧的值都比根节点小，将之构建为左子树；右侧的值都比根节点大，将之构建为右子树。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line"></span><br><span class="line">    public TreeNode bstFromPreorder(int[] preorder) &#123;</span><br><span class="line">        return bstFromPreorder(preorder, 0, preorder.length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private TreeNode bstFromPreorder(int[] preorder, int start, int end) &#123;</span><br><span class="line">        if (start &gt;&#x3D; end) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode node &#x3D; new TreeNode(preorder[start]);</span><br><span class="line">        int mid &#x3D; start + 1;</span><br><span class="line">        while (mid &lt; end &amp;&amp; preorder[mid] &lt; preorder[start]) &#123;</span><br><span class="line">            mid++;</span><br><span class="line">        &#125;</span><br><span class="line">        node.left &#x3D; bstFromPreorder(preorder, start + 1, mid);</span><br><span class="line">        node.right &#x3D; bstFromPreorder(preorder, mid, end);</span><br><span class="line">        return node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Construct Binary Search Tree from Preorder Traversal.<br>Memory Usage: 35.5 MB, less than 100.00% of Java online submissions for Construct Binary Search Tree from Preorder Traversal.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/construct-binary-search-tree-from-preorder-traversal/" target="_blank" rel="noopener">https://leetcode.com/problems/construct-binary-search-tree-from-preorder-traversal/</a></li>
<li><a href="https://leetcode-cn.com/problems/construct-binary-search-tree-from-preorder-traversal/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/construct-binary-search-tree-from-preorder-traversal/</a></li>
<li><a href="https://leetcode-cn.com/problems/construct-binary-search-tree-from-preorder-traversal/solution/jian-kong-er-cha-shu-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/construct-binary-search-tree-from-preorder-traversal/solution/jian-kong-er-cha-shu-by-leetcode/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1007. 行相等的最少多米诺旋转 | Minimum Domino Rotations For Equal Row</title>
    <url>/leetcode/Minimum-Domino-Rotations-For-Equal-Row/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>In a row of dominoes, A[i] and B[i] represent the top and bottom halves of the i-th domino.  (A domino is a tile with two numbers from 1 to 6 - one on each half of the tile.)<br>We may rotate the i-th domino, so that A[i] and B[i] swap values.<br>Return the minimum number of rotations so that all the values in A are the same, or all the values in B are the same.<br>If it cannot be done, return -1.</p>
<a id="more"></a>

<p>在一排多米诺骨牌中，A[i] 和 B[i] 分别代表第 i 个多米诺骨牌的上半部分和下半部分。（一个多米诺是两个从 1 到 6 的数字同列平铺形成的 —— 该平铺的每一半上都有一个数字。）<br>我们可以旋转第 i 张多米诺，使得 A[i] 和 B[i] 的值交换。<br>返回能使 A 中所有值或者 B 中所有值都相同的最小旋转次数。<br>如果无法做到，返回 -1.</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p><a href="https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/solution/lian-xu-chai-xiang-tong-de-shu-zi-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/solution/lian-xu-chai-xiang-tong-de-shu-zi-by-leetcode/</a></p>
<p>四种可能</p>
<ul>
<li>A 中所有值均等于 A[0]</li>
<li>B 中所有值均等于 A[0]</li>
<li>A 中所有值均等于 B[0]</li>
<li>B 中所有值均等于 B[0]</li>
</ul>
<p>算法步骤：</p>
<ul>
<li>选择第一块多米诺骨牌，它包含两个数字 A[0] 和 B[0]；</li>
<li>检查其余的多米诺骨牌中是否出现过 A[0]。如果都出现过，则求出最少的翻转次数，其为将 A[0] 全部翻到 A 和全部翻到 B 中的较少的次数。</li>
<li>检查其余的多米诺骨牌中是否出现过 B[0]。如果都出现过，则求出最少的翻转次数，其为将 B[0] 全部翻到 A 和全部翻到 B 中的较少的次数。</li>
<li>如果上述两次检查都失败，则返回 -1。</li>
</ul>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line"></span><br><span class="line">    public int minDominoRotations(int[] A, int[] B) &#123;</span><br><span class="line">        int res &#x3D; check(A, B, A[0]);</span><br><span class="line">        if (res !&#x3D; -1) &#123;</span><br><span class="line">            return res;</span><br><span class="line">        &#125;</span><br><span class="line">        return check(A, B, B[0]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int check(int[] A, int[] B, int target) &#123;</span><br><span class="line">        int rotationA &#x3D; 0;</span><br><span class="line">        int rotationB &#x3D; 0;</span><br><span class="line">        for (int i &#x3D; 0; i &lt; A.length; i++) &#123;</span><br><span class="line">            if (A[i] !&#x3D; target &amp;&amp; B[i] !&#x3D; target) &#123;</span><br><span class="line">                return -1;</span><br><span class="line">            &#125;</span><br><span class="line">            rotationA +&#x3D; A[i] !&#x3D; target &amp;&amp; B[i] &#x3D;&#x3D; target ? 1 : 0;</span><br><span class="line">            rotationB +&#x3D; B[i] !&#x3D; target &amp;&amp; A[i] &#x3D;&#x3D; target ? 1 : 0;</span><br><span class="line">        &#125;</span><br><span class="line">        return Math.min(rotationA, rotationB);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Solution solution &#x3D; new Solution();</span><br><span class="line">        System.out.println(solution.minDominoRotations(</span><br><span class="line">                new int[]&#123;2, 1, 2, 4, 2, 2&#125;, new int[]&#123;5, 2, 6, 2, 3, 2&#125;) + &quot; &lt;---&gt; 2&quot;);</span><br><span class="line">        System.out.println(solution.minDominoRotations(</span><br><span class="line">                new int[]&#123;3,5,1,2,3&#125;, new int[]&#123;3,6,3,3,4&#125;) + &quot; &lt;---&gt; -1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 5 ms, faster than 65.03% of Java online submissions for Minimum Domino Rotations For Equal Row.<br>Memory Usage: 42.6 MB, less than 100.00% of Java online submissions for Minimum Domino Rotations For Equal Row.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/minimum-domino-rotations-for-equal-row/" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-domino-rotations-for-equal-row/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/solution/lian-xu-chai-xiang-tong-de-shu-zi-by-leetcode/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-domino-rotations-for-equal-row/solution/lian-xu-chai-xiang-tong-de-shu-zi-by-leetcode/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1006. 笨阶乘 | Clumsy Factorial</title>
    <url>/leetcode/Clumsy-Factorial/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Normally, the factorial of a positive integer n is the product of all positive integers less than or equal to n.  For example, factorial(10) = 10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1.<br>We instead make a clumsy factorial: using the integers in decreasing order, we swap out the multiply operations for a fixed rotation of operations: multiply (*), divide (/), add (+) and subtract (-) in this order.<br>For example, clumsy(10) = 10 * 9 / 8 + 7 - 6 * 5 / 4 + 3 - 2 * 1.  However, these operations are still applied using the usual order of operations of arithmetic: we do all multiplication and division steps before any addition or subtraction steps, and multiplication and division steps are processed left to right.<br>Additionally, the division that we use is floor division such that 10 * 9 / 8 equals 11.  This guarantees the result is an integer.<br>Implement the clumsy function as defined above: given an integer N, it returns the clumsy factorial of N.</p>
<a id="more"></a>

<p>通常，正整数 n 的阶乘是所有小于或等于 n 的正整数的乘积。例如，factorial(10) = 10 ✖️ 9 ✖️ 8 ✖️ 7 ✖️ 6 ✖️ 5 ✖️ 4 ✖️ 3 ✖️ 2 ✖️ 1。<br>相反，我们设计了一个笨阶乘 clumsy：在整数的递减序列中，我们以一个固定顺序的操作符序列来依次替换原有的乘法操作符：乘法(✖️)，除法(➗)，加法(+)和减法(-)。<br>例如，clumsy(10) = 10 ✖️ 9 ➗ 8 ＋ 7 - 6 ✖️ 5 ➗ 4 + 3 - 2 ✖️ 1。然而，这些运算仍然使用通常的算术运算顺序：我们在任何加、减步骤之前执行所有的乘法和除法步骤，并且按从左到右处理乘法和除法步骤。<br>另外，我们使用的除法是地板除法（floor division），所以 10 * 9 / 8 等于 11。这保证结果是一个整数。<br>实现上面定义的笨函数：给定一个整数 N，它返回 N 的笨阶乘。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>这个比较简单，推导一下递推关系就行。</p>
<p>f(n) = n * (n-1) / (n-2) + (n-3) - (n-4) * (n-5) / (n-6) + …<br>f(n) = n * (n-1) / (n-2) + { n * (n-1) / (n-2) - n * (n-1) / (n-2) } + (n-3) - (n-4) * (n-5) / (n-6) + …<br>f(n) = n * (n-1) / (n-2) * 2 - n * (n-1) / (n-2) + (n-3) - (n-4) * (n-5) / (n-6) + …<br>f(n) = n * (n-1) / (n-2) * 2 - (n+1) + (n+1) - n * (n-1) / (n-2) + (n-3) - (n-4) * (n-5) / (n-6) + …<br>f(n) = { n * (n-1) / (n-2) * 2 - (n+1) } + [ (n+1) - n * (n-1) / (n-2) ] + [ (n-3) - (n-4) * (n-5) / (n-6) ] + …<br>f(n) = { [ (n-2)(n+1) + 2 ] / (n-2) * 2 - (n+1) } + [ (n+1) - n * (n-1) / (n-2) ] + [ (n-3) - (n-4) * (n-5) / (n-6) ] + …<br>注意到这里除法是整数除法，因此，当 n &gt; 4 时，上式可化简为：<br>f(n) = { (n+1) * 2 - (n+1) } + [ (n+1) - n * (n-1) / (n-2) ] + [ (n-3) - (n-4) * (n-5) / (n-6) ] + …<br>f(n) = (n+1) + [ (n+1) - n * (n-1) / (n-2) ] + [ (n-3) - (n-4) * (n-5) / (n-6) ] + …<br>定义 c(n) = + n - (n-1) * (n-2) / (n-3) + (n-4) - (n-5) * (n-6) / (n-7) + …<br>则， f(n) 可以进一步化简为：<br>f(n) = (n+1) + c(n+1), n &gt; 4<br>对于 n = 1,2,3,4 时， f(n) 的值可以查表得到。</p>
<p>现在推导 c(n) 的递推关系：<br>c(n) = + n - (n-1) * (n-2) / (n-3) + (n-4) - (n-5) * (n-6) / (n-7) + …<br>c(n) = + [ n - (n-1) * (n-2) / (n-3) ] + [ (n-4) - (n-5) * (n-6) / (n-7) ] + …<br>c(n) = + [ n - { (n-3)n -2 } / (n-3) ] + [ (n-4) - (n-5) * (n-6) / (n-7) ] + …<br>当 n &gt; 5 时， c(n) 可以进一步化简为：<br>c(n) = + [ n - n ] + [ (n-4) - (n-5) * (n-6) / (n-7) ] + …<br>c(n) = + [ (n-4) - (n-5) * (n-6) / (n-7) ] + …<br>c(n) = c(n-4)<br>对于 n = 1,2,3,4,5 时， c(n) 的值可以查表获得</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] SOLUTIONS = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] CS = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">clumsy</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (N &lt;= <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> SOLUTIONS[N];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> N + <span class="number">1</span> + c(N + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">c</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> CS[(n &amp; <span class="number">0b11</span>) + <span class="number">4</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">10</span>) + <span class="string">" &lt;---&gt; 12"</span>);</span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">4</span>) + <span class="string">" &lt;---&gt; 7"</span>);</span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">23</span>) + <span class="string">" &lt;---&gt; 22"</span>);</span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">102</span>) + <span class="string">" &lt;---&gt; 104"</span>);</span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">9999</span>) + <span class="string">" &lt;---&gt; 9998"</span>);</span><br><span class="line">        System.out.println(solution.clumsy(<span class="number">10000</span>) + <span class="string">" &lt;---&gt; 10001"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 0 ms, faster than 100.00% of Java online submissions for Clumsy Factorial.<br>Memory Usage: 32.9 MB, less than 36.36% of Java online submissions for Clumsy Factorial.<br>Next challenges:</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/clumsy-factorial/" target="_blank" rel="noopener">https://leetcode.com/problems/clumsy-factorial/</a></li>
<li><a href="https://leetcode-cn.com/problems/clumsy-factorial/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/clumsy-factorial/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1005. K 次取反后最大化的数组和 | Maximize Sum Of Array After K Negations</title>
    <url>/leetcode/Maximize-Sum-Of-Array-After-K-Negations/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of integers, we must modify the array in the following way: we choose an i and replace A[i] with -A[i], and we repeat this process K times in total.  (We may choose the same index i multiple times.)<br>Return the largest possible sum of the array after modifying it in this way.</p>
<a id="more"></a>

<p>给定一个整数数组 A，我们只能用以下方法修改该数组：我们选择某个个索引 i 并将 A[i] 替换为 -A[i]，然后总共重复这个过程 K 次。（我们可以多次选择同一个索引 i。）<br>以这种方式修改数组后，返回数组可能的最大和。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>对一个数字取反偶数次还是这个数字本身。</p>
<p>先排序，从最小的负数开始，将尽可能多的负数变成正数。<br>然后，如果取反次数没达到 K，说明负数的数量 &lt; K 。<br>此时，所有的数字都是正数了。此时的所有操作只可能将总和变小。<br>如果 K 是偶数，则对任意一个数操作偶数次。<br>如果 K 是奇数，则找一个最小的正数操作奇数次。很显然，此时最小的奇数一定在之前遍历的最后一个位置或其左侧。<br>最后求和即可。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestSumAfterKNegations</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(A);</span><br><span class="line">        <span class="keyword">int</span> l = Math.min(K, A.length);</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[i] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                A[i] = -A[i];</span><br><span class="line">                K--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (K &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            K = K &amp; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (K == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; A[i-<span class="number">1</span>] &lt; A[i]) &#123;</span><br><span class="line">                A[i-<span class="number">1</span>] = -A[i-<span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                A[i] = -A[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; A.length; j++) &#123;</span><br><span class="line">            sum += A[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        System.out.println(solution.largestSumAfterKNegations(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>&#125;, <span class="number">1</span>) + <span class="string">" &lt;---&gt; 5"</span>);</span><br><span class="line">        System.out.println(solution.largestSumAfterKNegations(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>&#125;, <span class="number">3</span>) + <span class="string">" &lt;---&gt; 6"</span>);</span><br><span class="line">        System.out.println(solution.largestSumAfterKNegations(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>,-<span class="number">3</span>,-<span class="number">1</span>,<span class="number">5</span>,-<span class="number">4</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 13"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 1 ms, faster than 100.00% of Java online submissions for Maximize Sum Of Array After K Negations.<br>Memory Usage: 37.3 MB, less than 94.12% of Java online submissions for Maximize Sum Of Array After K Negations.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><p>-</p>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1004. 最大连续1的个数 III | Max Consecutive Ones III</title>
    <url>/leetcode/Max-Consecutive-Ones-III/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of 0s and 1s, we may change up to K values from 0 to 1.<br>Return the length of the longest (contiguous) subarray that contains only 1s.</p>
<a id="more"></a>

<p>给定一个由若干 0 和 1 组成的数组 A，我们最多可以将 K 个值从 0 变成 1 。<br>返回仅包含 1 的最长（连续）子数组的长度。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>用滑动窗口统计 0 的个数，保持滑动窗口内 0 的个数始终不超过 K 。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestOnes</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[i] == <span class="number">1</span>) &#123;</span><br><span class="line">                res = Math.max(res, i - start + <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                queue.offer(i);</span><br><span class="line">                <span class="keyword">if</span> (queue.size() &gt; K) &#123;</span><br><span class="line">                    <span class="keyword">int</span> left = queue.poll();</span><br><span class="line">                    start = left + <span class="number">1</span>;</span><br><span class="line">                    res = Math.max(res, i - start + <span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    res = Math.max(res, i - start + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        System.out.println(solution.longestOnes(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 6"</span>);</span><br><span class="line">        System.out.println(solution.longestOnes(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="number">3</span>) + <span class="string">" &lt;---&gt; 10"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 10 ms, faster than 10.09% of Java online submissions for Max Consecutive Ones III.<br>Memory Usage: 40.1 MB, less than 100.00% of Java online submissions for Max Consecutive Ones III.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/max-consecutive-ones-iii/" target="_blank" rel="noopener">https://leetcode.com/problems/max-consecutive-ones-iii/</a></li>
<li><a href="https://leetcode-cn.com/problems/max-consecutive-ones-iii/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/max-consecutive-ones-iii/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1003. 检查替换后的词是否有效 | Check If Word Is Valid After Substitutions</title>
    <url>/leetcode/Check-If-Word-Is-Valid-After-Substitutions/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>We are given that the string “abc” is valid.<br>From any valid string V, we may split V into two pieces X and Y such that X + Y (X concatenated with Y) is equal to V.  (X or Y may be empty.)  Then, X + “abc” + Y is also valid.<br>If for example S = “abc”, then examples of valid strings are: “abc”, “aabcbc”, “abcabc”, “abcabcababcc”.  Examples of invalid strings are: “abccba”, “ab”, “cababc”, “bac”.<br>Return true if and only if the given string S is valid.</p>
<a id="more"></a>

<p>给定有效字符串 “abc”。<br>对于任何有效的字符串 V，我们可以将 V 分成两个部分 X 和 Y，使得 X + Y（X 与 Y 连接）等于 V。（X 或 Y 可以为空。）那么，X + “abc” + Y 也同样是有效的。<br>例如，如果 S = “abc”，则有效字符串的示例是：”abc”，”aabcbc”，”abcabc”，”abcabcababcc”。无效字符串的示例是：”abccba”，”ab”，”cababc”，”bac”。<br>如果给定字符串 S 有效，则返回 true；否则，返回 false。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>反推可以得到，对于有效的字符串 S ，从 S 中不断去除 “abc” ，最后一定会变成空字符串。<br>直接去掉子字符串生成新字符串的方式性能不好，因为会生成大量的字符串。<br>用栈模拟这种过程，将 S 的字符依次添加到栈中。当栈顶部的字符依次是 ‘c’ -&gt; ‘b’ -&gt; ‘a’ 时，将相应的元素弹出。遍历完 S 后，如果栈是空的，则是有效字符串，否则是无效字符串。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] stack = <span class="keyword">new</span> <span class="keyword">char</span>[s.length()];</span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> validLength = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">                stack[size++] = c;</span><br><span class="line">                <span class="keyword">if</span> (c == <span class="string">'a'</span>) &#123;</span><br><span class="line">                    validLength = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c - stack[size-<span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">                validLength++;</span><br><span class="line">                <span class="keyword">if</span> (validLength == <span class="number">3</span>) &#123;</span><br><span class="line">                    size = size - <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">                        validLength = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (stack[size-<span class="number">1</span>] == <span class="string">'a'</span>) &#123;</span><br><span class="line">                        validLength = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stack[size-<span class="number">1</span>] == <span class="string">'b'</span> &amp;&amp; size &gt; <span class="number">1</span> &amp;&amp; stack[size-<span class="number">2</span>] == <span class="string">'a'</span>) &#123;</span><br><span class="line">                        validLength = <span class="number">2</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        validLength = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    stack[size++] = c;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stack[size++] = c;</span><br><span class="line">                <span class="keyword">if</span> (c == <span class="string">'a'</span>) &#123;</span><br><span class="line">                    validLength = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    validLength = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line"></span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"abc"</span>) + <span class="string">" &lt;---&gt; true"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"aabcbc"</span>) + <span class="string">" &lt;---&gt; true"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"abcabc"</span>) + <span class="string">" &lt;---&gt; true"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"abcabcababcc"</span>) + <span class="string">" &lt;---&gt; true"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"abccba"</span>) + <span class="string">" &lt;---&gt; false"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"ab"</span>) + <span class="string">" &lt;---&gt; false"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"cababc"</span>) + <span class="string">" &lt;---&gt; false"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"bac"</span>) + <span class="string">" &lt;---&gt; false"</span>);</span><br><span class="line">        System.out.println(solution.isValid(<span class="string">"aabbcc"</span>) + <span class="string">" &lt;---&gt; false"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 4 ms, faster than 98.66% of Java online submissions for Check If Word Is Valid After Substitutions.<br>Memory Usage: 38 MB, less than 100.00% of Java online submissions for Check If Word Is Valid After Substitutions.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/check-if-word-is-valid-after-substitutions/" target="_blank" rel="noopener">https://leetcode.com/problems/check-if-word-is-valid-after-substitutions/</a></li>
<li><a href="https://leetcode-cn.com/problems/check-if-word-is-valid-after-substitutions/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/check-if-word-is-valid-after-substitutions/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1002. 查找常用字符 | Find Common Characters</title>
    <url>/leetcode/Find-Common-Characters/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>Given an array A of strings made only from lowercase letters, return a list of all characters that show up in all strings within the list (including duplicates).  For example, if a character occurs 3 times in all strings but not 4 times, you need to include that character three times in the final answer.<br>You may return the answer in any order.</p>
<a id="more"></a>

<p>给定仅有小写字母组成的字符串数组 A，返回列表中的每个字符串中都显示的全部字符（包括重复字符）组成的列表。例如，如果一个字符在每个字符串中出现 3 次，但不是 4 次，则需要在最终答案中包含该字符 3 次。<br>你可以按任意顺序返回答案。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>用哈希表记录字符串中每个字母出现的次数。对每个字母，取所有字符串中出现次数的最小值为最终统计结果。<br>最后根据统计结果输出即可。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] LETTERS =</span><br><span class="line">            &#123;<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>,<span class="string">"e"</span>,<span class="string">"f"</span>,<span class="string">"g"</span>,<span class="string">"h"</span>,<span class="string">"i"</span>,<span class="string">"j"</span>,<span class="string">"k"</span>,<span class="string">"l"</span>,<span class="string">"m"</span>,<span class="string">"n"</span>,<span class="string">"o"</span>,<span class="string">"p"</span>,<span class="string">"q"</span>,<span class="string">"r"</span>,<span class="string">"s"</span>,<span class="string">"t"</span>,<span class="string">"u"</span>,<span class="string">"v"</span>,<span class="string">"w"</span>,<span class="string">"x"</span>,<span class="string">"y"</span>,<span class="string">"z"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">commonChars</span><span class="params">(String[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] letters = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">int</span> l = A[<span class="number">0</span>].length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = A[<span class="number">0</span>].charAt(i);</span><br><span class="line">            letters[c - <span class="string">'a'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">            String s = A[i];</span><br><span class="line">            <span class="keyword">int</span>[] table = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">            l = s.length();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; l; j++) &#123;</span><br><span class="line">                <span class="keyword">char</span> c = s.charAt(j);</span><br><span class="line">                table[c - <span class="string">'a'</span>]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j++) &#123;</span><br><span class="line">                letters[j] = Math.min(letters[j], table[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">32</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> count = letters[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; count; j++) &#123;</span><br><span class="line">                res.add(LETTERS[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        System.out.println(solution.commonChars(<span class="keyword">new</span> String[]&#123;<span class="string">"bella"</span>, <span class="string">"label"</span>, <span class="string">"roller"</span>&#125;));</span><br><span class="line">        System.out.println(solution.commonChars(<span class="keyword">new</span> String[]&#123;<span class="string">"cool"</span>, <span class="string">"lock"</span>, <span class="string">"cook"</span>&#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 6 ms, faster than 58.39% of Java online submissions for Find Common Characters.<br>Memory Usage: 37 MB, less than 100.00% of Java online submissions for Find Common Characters.</p>
<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/find-common-characters/" target="_blank" rel="noopener">https://leetcode.com/problems/find-common-characters/</a></li>
<li><a href="https://leetcode-cn.com/problems/find-common-characters/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/find-common-characters/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1001. 网格照明 | Grid Illumination</title>
    <url>/leetcode/Grid-Illumination/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>On a N x N grid of cells, each cell (x, y) with 0 &lt;= x &lt; N and 0 &lt;= y &lt; N has a lamp.<br>Initially, some number of lamps are on.  lamps[i] tells us the location of the i-th lamp that is on.  Each lamp that is on illuminates every square on its x-axis, y-axis, and both diagonals (similar to a Queen in chess).<br>For the i-th query queries[i] = (x, y), the answer to the query is 1 if the cell (x, y) is illuminated, else 0.<br>After each query (x, y) [in the order given by queries], we turn off any lamps that are at cell (x, y) or are adjacent 8-directionally (ie., share a corner or edge with cell (x, y).)<br>Return an array of answers.  Each value answer[i] should be equal to the answer of the i-th query queries[i].</p>
<a id="more"></a>

<p>在 N x N 的网格上，每个单元格 (x, y) 上都有一盏灯，其中 0 &lt;= x &lt; N 且 0 &lt;= y &lt; N 。<br>最初，一定数量的灯是亮着的。lamps[i] 告诉我们亮着的第 i 盏灯的位置。每盏灯都照亮其所在 x 轴、y 轴和两条对角线上的每个正方形（类似于国际象棋中的皇后）。<br>对于第 i 次查询 queries[i] = (x, y)，如果单元格 (x, y) 是被照亮的，则查询结果为 1，否则为 0 。<br>在每个查询 (x, y) 之后 [按照查询的顺序]，我们关闭位于单元格 (x, y) 上或其相邻 8 个方向上（与单元格 (x, y) 共享一个角或边）的任何灯。<br>返回答案数组 answer。每个值 answer[i] 应等于第 i 次查询 queries[i] 的结果。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>建立4张亮灯哈希表，记录每一个行，每一列，每一个对角线，每一个反对角线的亮灯的数量。<br>再建立1张灯泡位置哈希表，记录每个灯泡位置到这个灯泡的索引。</p>
<p>首先遍历 lamps 数组，初始化以上的哈希表。<br>然后遍历 querys 数组。遍历的过程为：当前位置上亮灯数 &gt; 0 ，则当前位置是照亮的。接着在当前位置周边查找灯泡，将该灯泡从亮灯哈希表和灯泡位置哈希表中去除。</p>
<h3 id="代码实现-Implement"><a href="#代码实现-Implement" class="headerlink" title="代码实现 | Implement"></a>代码实现 | Implement</h3><h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SEPERATOR = <span class="string">","</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> K = <span class="number">30000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[][] SHIFTS = &#123;&#123;<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] gridIllumination(<span class="keyword">int</span> N, <span class="keyword">int</span>[][] lamps, <span class="keyword">int</span>[][] queries) &#123;</span><br><span class="line">        <span class="keyword">int</span> m = lamps.length;</span><br><span class="line">        Map&lt;Integer, Integer&gt; rowMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Integer&gt; colMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Integer&gt; diagonalMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Integer&gt; antiDiagonalMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Integer&gt; lampMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] lamp = lamps[i];</span><br><span class="line">            <span class="keyword">int</span> row = lamp[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> col = lamp[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">            rowMap.put(row, rowMap.getOrDefault(row, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            colMap.put(col, colMap.getOrDefault(col, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            diagonalMap.put(row + col, diagonalMap.getOrDefault(row + col, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            antiDiagonalMap.put(row - col, antiDiagonalMap.getOrDefault(row - col, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            lampMap.put(row * K + col, i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> n = queries.length;</span><br><span class="line">        <span class="keyword">int</span>[] ans = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] query = queries[i];</span><br><span class="line">            <span class="keyword">int</span> row = query[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> col = query[<span class="number">1</span>];</span><br><span class="line">            Integer rowInteger = rowMap.getOrDefault(row, <span class="number">0</span>);</span><br><span class="line">            Integer colInteger = colMap.getOrDefault(col, <span class="number">0</span>);</span><br><span class="line">            Integer diagonalInteger = diagonalMap.getOrDefault(row + col, <span class="number">0</span>);</span><br><span class="line">            Integer antiDiagonalInteger = antiDiagonalMap.getOrDefault(row - col, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">boolean</span> illuminated = rowInteger &gt; <span class="number">0</span> || colInteger &gt; <span class="number">0</span> || diagonalInteger &gt; <span class="number">0</span> || antiDiagonalInteger &gt; <span class="number">0</span>;</span><br><span class="line">            ans[i] = illuminated ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span>[] shift : SHIFTS) &#123;</span><br><span class="line">                <span class="keyword">int</span> x = shift[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">int</span> y = shift[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">int</span> rowLamp = row + x;</span><br><span class="line">                <span class="keyword">int</span> colLamp = col + y;</span><br><span class="line">                Integer index = lampMap.get(rowLamp * K + colLamp);</span><br><span class="line">                <span class="keyword">if</span> (index != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span>[] lamp = lamps[index];</span><br><span class="line">                    <span class="keyword">int</span> i1 = lamp[<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">int</span> i2 = lamp[<span class="number">1</span>];</span><br><span class="line">                    rowMap.put(i1, rowMap.getOrDefault(i1, <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">                    colMap.put(i2, colMap.getOrDefault(i2, <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">                    diagonalMap.put(i1 + i2, diagonalMap.getOrDefault(i1 + i2, <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">                    antiDiagonalMap.put(i1 - i2, antiDiagonalMap.getOrDefault(i1 - i2, <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">                    lampMap.remove(rowLamp * K + colLamp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s = <span class="string">"[[24,84],[95,68],[80,35],[31,53],[69,45],[85,29],[87,25],[42,47],[7,59],[99,3],[31,70],[64,62],[44,91],[55,25],[15,52],[95,33],[21,29],[61,34],[93,34],[79,27],[30,86],[52,0],[18,10],[5,1],[40,21],[11,48],[55,94],[22,42],[81,0],[39,43],[5,25],[43,29],[45,47],[83,93],[77,70],[22,63],[30,73],[18,48],[39,88],[91,47]]"</span>;</span><br><span class="line">        s = s.replaceAll(<span class="string">"\\["</span>, <span class="string">"\\&#123;"</span>);</span><br><span class="line">        s = s.replaceAll(<span class="string">"\\]"</span>, <span class="string">"\\&#125;"</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        <span class="keyword">int</span>[] ans = solution.gridIllumination(<span class="number">100</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">7</span>,<span class="number">55</span>&#125;,&#123;<span class="number">53</span>,<span class="number">61</span>&#125;,&#123;<span class="number">2</span>,<span class="number">82</span>&#125;,&#123;<span class="number">67</span>,<span class="number">85</span>&#125;,&#123;<span class="number">81</span>,<span class="number">75</span>&#125;,&#123;<span class="number">38</span>,<span class="number">91</span>&#125;,&#123;<span class="number">68</span>,<span class="number">0</span>&#125;,&#123;<span class="number">60</span>,<span class="number">43</span>&#125;,&#123;<span class="number">40</span>,<span class="number">19</span>&#125;,&#123;<span class="number">12</span>,<span class="number">75</span>&#125;,&#123;<span class="number">26</span>,<span class="number">2</span>&#125;,&#123;<span class="number">24</span>,<span class="number">89</span>&#125;,&#123;<span class="number">42</span>,<span class="number">81</span>&#125;,&#123;<span class="number">60</span>,<span class="number">58</span>&#125;,&#123;<span class="number">77</span>,<span class="number">72</span>&#125;,&#123;<span class="number">33</span>,<span class="number">24</span>&#125;,&#123;<span class="number">19</span>,<span class="number">93</span>&#125;,&#123;<span class="number">7</span>,<span class="number">16</span>&#125;,&#123;<span class="number">58</span>,<span class="number">54</span>&#125;,&#123;<span class="number">78</span>,<span class="number">57</span>&#125;,&#123;<span class="number">97</span>,<span class="number">49</span>&#125;,&#123;<span class="number">65</span>,<span class="number">16</span>&#125;,&#123;<span class="number">42</span>,<span class="number">75</span>&#125;,&#123;<span class="number">90</span>,<span class="number">50</span>&#125;,&#123;<span class="number">89</span>,<span class="number">34</span>&#125;,&#123;<span class="number">76</span>,<span class="number">97</span>&#125;,&#123;<span class="number">58</span>,<span class="number">23</span>&#125;,&#123;<span class="number">62</span>,<span class="number">47</span>&#125;,&#123;<span class="number">94</span>,<span class="number">28</span>&#125;,&#123;<span class="number">88</span>,<span class="number">65</span>&#125;,&#123;<span class="number">3</span>,<span class="number">87</span>&#125;,&#123;<span class="number">81</span>,<span class="number">10</span>&#125;,&#123;<span class="number">12</span>,<span class="number">81</span>&#125;,&#123;<span class="number">44</span>,<span class="number">81</span>&#125;,&#123;<span class="number">54</span>,<span class="number">92</span>&#125;,&#123;<span class="number">90</span>,<span class="number">54</span>&#125;,&#123;<span class="number">17</span>,<span class="number">54</span>&#125;,&#123;<span class="number">27</span>,<span class="number">82</span>&#125;,&#123;<span class="number">48</span>,<span class="number">15</span>&#125;,&#123;<span class="number">8</span>,<span class="number">46</span>&#125;,&#123;<span class="number">4</span>,<span class="number">99</span>&#125;,&#123;<span class="number">15</span>,<span class="number">13</span>&#125;,&#123;<span class="number">90</span>,<span class="number">77</span>&#125;,&#123;<span class="number">2</span>,<span class="number">87</span>&#125;,&#123;<span class="number">18</span>,<span class="number">33</span>&#125;,&#123;<span class="number">52</span>,<span class="number">90</span>&#125;,&#123;<span class="number">4</span>,<span class="number">95</span>&#125;,&#123;<span class="number">57</span>,<span class="number">61</span>&#125;,&#123;<span class="number">31</span>,<span class="number">22</span>&#125;,&#123;<span class="number">32</span>,<span class="number">8</span>&#125;,&#123;<span class="number">49</span>,<span class="number">26</span>&#125;,&#123;<span class="number">24</span>,<span class="number">65</span>&#125;,&#123;<span class="number">88</span>,<span class="number">55</span>&#125;,&#123;<span class="number">88</span>,<span class="number">38</span>&#125;,&#123;<span class="number">64</span>,<span class="number">76</span>&#125;,&#123;<span class="number">94</span>,<span class="number">76</span>&#125;,&#123;<span class="number">59</span>,<span class="number">12</span>&#125;,&#123;<span class="number">41</span>,<span class="number">46</span>&#125;,&#123;<span class="number">80</span>,<span class="number">28</span>&#125;,&#123;<span class="number">38</span>,<span class="number">36</span>&#125;,&#123;<span class="number">65</span>,<span class="number">67</span>&#125;,&#123;<span class="number">75</span>,<span class="number">37</span>&#125;,&#123;<span class="number">56</span>,<span class="number">97</span>&#125;,&#123;<span class="number">83</span>,<span class="number">57</span>&#125;,&#123;<span class="number">2</span>,<span class="number">4</span>&#125;,&#123;<span class="number">44</span>,<span class="number">43</span>&#125;,&#123;<span class="number">71</span>,<span class="number">90</span>&#125;,&#123;<span class="number">62</span>,<span class="number">40</span>&#125;,&#123;<span class="number">79</span>,<span class="number">94</span>&#125;,&#123;<span class="number">81</span>,<span class="number">11</span>&#125;,&#123;<span class="number">96</span>,<span class="number">34</span>&#125;,&#123;<span class="number">38</span>,<span class="number">11</span>&#125;,&#123;<span class="number">22</span>,<span class="number">3</span>&#125;,&#123;<span class="number">54</span>,<span class="number">96</span>&#125;,&#123;<span class="number">78</span>,<span class="number">33</span>&#125;,&#123;<span class="number">54</span>,<span class="number">54</span>&#125;,&#123;<span class="number">79</span>,<span class="number">98</span>&#125;,&#123;<span class="number">1</span>,<span class="number">28</span>&#125;,&#123;<span class="number">0</span>,<span class="number">32</span>&#125;,&#123;<span class="number">37</span>,<span class="number">11</span>&#125;&#125;,</span><br><span class="line">                <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">24</span>,<span class="number">84</span>&#125;,&#123;<span class="number">95</span>,<span class="number">68</span>&#125;,&#123;<span class="number">80</span>,<span class="number">35</span>&#125;,&#123;<span class="number">31</span>,<span class="number">53</span>&#125;,&#123;<span class="number">69</span>,<span class="number">45</span>&#125;,&#123;<span class="number">85</span>,<span class="number">29</span>&#125;,&#123;<span class="number">87</span>,<span class="number">25</span>&#125;,&#123;<span class="number">42</span>,<span class="number">47</span>&#125;,&#123;<span class="number">7</span>,<span class="number">59</span>&#125;,&#123;<span class="number">99</span>,<span class="number">3</span>&#125;,&#123;<span class="number">31</span>,<span class="number">70</span>&#125;,&#123;<span class="number">64</span>,<span class="number">62</span>&#125;,&#123;<span class="number">44</span>,<span class="number">91</span>&#125;,&#123;<span class="number">55</span>,<span class="number">25</span>&#125;,&#123;<span class="number">15</span>,<span class="number">52</span>&#125;,&#123;<span class="number">95</span>,<span class="number">33</span>&#125;,&#123;<span class="number">21</span>,<span class="number">29</span>&#125;,&#123;<span class="number">61</span>,<span class="number">34</span>&#125;,&#123;<span class="number">93</span>,<span class="number">34</span>&#125;,&#123;<span class="number">79</span>,<span class="number">27</span>&#125;,&#123;<span class="number">30</span>,<span class="number">86</span>&#125;,&#123;<span class="number">52</span>,<span class="number">0</span>&#125;,&#123;<span class="number">18</span>,<span class="number">10</span>&#125;,&#123;<span class="number">5</span>,<span class="number">1</span>&#125;,&#123;<span class="number">40</span>,<span class="number">21</span>&#125;,&#123;<span class="number">11</span>,<span class="number">48</span>&#125;,&#123;<span class="number">55</span>,<span class="number">94</span>&#125;,&#123;<span class="number">22</span>,<span class="number">42</span>&#125;,&#123;<span class="number">81</span>,<span class="number">0</span>&#125;,&#123;<span class="number">39</span>,<span class="number">43</span>&#125;,&#123;<span class="number">5</span>,<span class="number">25</span>&#125;,&#123;<span class="number">43</span>,<span class="number">29</span>&#125;,&#123;<span class="number">45</span>,<span class="number">47</span>&#125;,&#123;<span class="number">83</span>,<span class="number">93</span>&#125;,&#123;<span class="number">77</span>,<span class="number">70</span>&#125;,&#123;<span class="number">22</span>,<span class="number">63</span>&#125;,&#123;<span class="number">30</span>,<span class="number">73</span>&#125;,&#123;<span class="number">18</span>,<span class="number">48</span>&#125;,&#123;<span class="number">39</span>,<span class="number">88</span>&#125;,&#123;<span class="number">91</span>,<span class="number">47</span>&#125;&#125;);</span><br><span class="line"><span class="comment">//        System.out.println(JSON.toJSONString(ans));</span></span><br><span class="line"><span class="comment">//        ans = solution.gridIllumination(100, new int[][]&#123;&#123;0, 0&#125;, &#123;4, 4&#125;&#125;, new int[][]&#123;&#123;1,1&#125;,&#123;1,0&#125;&#125;);</span></span><br><span class="line"><span class="comment">//        System.out.println(JSON.toJSONString(ans));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Runtime: 101 ms, faster than 76.77% of Java online submissions for Grid Illumination.<br>Memory Usage: 64.1 MB, less than 100.00% of Java online submissions for Grid Illumination.</p>
<h3 id="测试用例-Test-Case"><a href="#测试用例-Test-Case" class="headerlink" title="测试用例 | Test Case"></a>测试用例 | Test Case</h3><h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/grid-illumination/" target="_blank" rel="noopener">https://leetcode.com/problems/grid-illumination/</a></li>
<li><a href="https://leetcode-cn.com/problems/grid-illumination/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/grid-illumination/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>1000. 合并石头的最低成本 | Minimum Cost to Merge Stones</title>
    <url>/leetcode/Minimum-Cost-to-Merge-Stones/</url>
    <content><![CDATA[<h3 id="描述-Description"><a href="#描述-Description" class="headerlink" title="描述 | Description"></a>描述 | Description</h3><p>There are N piles of stones arranged in a row.  The i-th pile has stones[i] stones.<br>A move consists of merging exactly K consecutive piles into one pile, and the cost of this move is equal to the total number of stones in these K piles.<br>Find the minimum cost to merge all piles of stones into one pile.  If it is impossible, return -1.</p>
<a id="more"></a>

<p>有 N 堆石头排成一排，第 i 堆中有 stones[i] 块石头。<br>每次移动（move）需要将连续的 K 堆石头合并为一堆，而这个移动的成本为这 K 堆石头的总数。<br>找出把所有石头合并成一堆的最低成本。如果不可能，返回 -1 。</p>
<h3 id="题解-Solution"><a href="#题解-Solution" class="headerlink" title="题解 | Solution"></a>题解 | Solution</h3><p>定义问题模型为：<br>    f(start,end,k) 表示将 start 到 end 位置处的石头合并为 k 堆，所需的最低成本</p>
<p>对于给定的大小的 stones ，最后一步必然是将 K 堆合并为 1 堆<br>因此我们首先将 N 堆转化为 K 堆。表示为<br>    N堆 =&gt; K堆 =&gt; 1堆<br>设将 N 堆转化为 1 堆共 a 步，则有：<br>    N - a*(K-1) = 1<br>推导得到能够转化的充要条件：<br>    (N-1)%(K-1) = 0</p>
<p>K 堆转化为 1 堆的成本：<br>    K 堆能直接合并为 1 堆，其成本为： stones 的和，即 sum(stones)</p>
<p>N 堆转化为 K 堆的成本：<br>    N &lt; K 时，N 堆无法转化为 K 堆<br>    N = K 时，N 堆转化为 K 堆的成本为0<br>    N &gt; K 时，转化为子问题求解</p>
<p>N &gt; K 时， N 堆转化为 K 堆的成本：<br>选定位置 m ，将 N 堆分成两个部分，<br>第一个部分：[start,m]，将这些石头转化为 K-1 堆<br>第二个部分：[m+1,end]，将这些石头转化为 1 堆</p>
<p>至此，可以得到子问题的递推关系为：<br>k = 1 时，f(start,end,1) = f(start,end,K) + sum(start,end)<br>k &gt; 1 时，f(start,end,k) = min{f(start,m,k-1) + f(m+1,end,1)}, m = start+k-2, … , end</p>
<h4 id="Java-实现"><a href="#Java-实现" class="headerlink" title="Java 实现"></a>Java 实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> EMPTY = Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INFINITE = Integer.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] stones;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> K;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] sum;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[][][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mergeStones</span><span class="params">(<span class="keyword">int</span>[] stones, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length = stones.length;</span><br><span class="line">        <span class="keyword">if</span> ((length - <span class="number">1</span>) % (K - <span class="number">1</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (length == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.stones = stones;</span><br><span class="line">        <span class="keyword">this</span>.K = K;</span><br><span class="line">        sum = <span class="keyword">new</span> <span class="keyword">int</span>[length];</span><br><span class="line">        sum[<span class="number">0</span>] = stones[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++) &#123;</span><br><span class="line">            sum[i] = sum[i - <span class="number">1</span>] + stones[i];</span><br><span class="line">        &#125;</span><br><span class="line">        dp = <span class="keyword">new</span> <span class="keyword">int</span>[length][length][K + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= K; k++) &#123;</span><br><span class="line">                    dp[i][j][k] = EMPTY;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            dp[i][i][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = f(<span class="number">0</span>, length - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> res == INFINITE ? -<span class="number">1</span> : res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (start == <span class="number">4</span> &amp;&amp; end == <span class="number">8</span> &amp;&amp; k == <span class="number">4</span>) &#123;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dp[start][end][k] != EMPTY) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[start][end][k];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">1</span> || end - start + <span class="number">1</span> &lt; k) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[start][end][k] = INFINITE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (start == end) &#123;</span><br><span class="line">                <span class="comment">// 只有一堆石头，不需要合并</span></span><br><span class="line">                <span class="keyword">return</span> dp[start][end][k] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (end - start + <span class="number">1</span> == K) &#123;</span><br><span class="line">                <span class="comment">// 正好是 K 堆石头，直接合并为1堆</span></span><br><span class="line">                <span class="keyword">return</span> sum[end] - sum[start] + stones[start];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 先转化为 K 堆，再合并为 1 堆</span></span><br><span class="line">            <span class="keyword">int</span> part1 = f(start, end, K);</span><br><span class="line">            <span class="keyword">if</span> (part1 == INFINITE) &#123;</span><br><span class="line">                <span class="keyword">return</span> INFINITE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> part1 + sum[end] - sum[start] + stones[start];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (end - start + <span class="number">1</span> == k) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[start][end][k] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (end - start + <span class="number">1</span> &lt; K) &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[start][end][k] = INFINITE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = INFINITE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> m = start + k - <span class="number">2</span>; m &lt; end; m++) &#123;</span><br><span class="line">            <span class="keyword">int</span> part1 = f(start, m, k - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> part2 = f(m + <span class="number">1</span>, end, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (part1 == INFINITE || part2 == INFINITE) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res = Math.min(res, part1 + part2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[start][end][k] = res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Solution solution = <span class="keyword">new</span> Solution();</span><br><span class="line">        System.out.println(solution.mergeStones(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>, <span class="number">7</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 10"</span>);</span><br><span class="line">        System.out.println(solution.mergeStones(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 14"</span>);</span><br><span class="line">        System.out.println(solution.mergeStones(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 30"</span>);</span><br><span class="line">        System.out.println(solution.mergeStones(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>&#125;, <span class="number">2</span>) + <span class="string">" &lt;---&gt; 40"</span>);</span><br><span class="line">        System.out.println(solution.mergeStones(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">36</span>,<span class="number">2</span>,<span class="number">61</span>,<span class="number">30</span>,<span class="number">74</span>,<span class="number">35</span>,<span class="number">65</span>,<span class="number">31</span>,<span class="number">43</span>,<span class="number">92</span>,<span class="number">15</span>,<span class="number">11</span>,<span class="number">22</span>&#125;, <span class="number">5</span>) + <span class="string">" &lt;---&gt; 902"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考链接-Links"><a href="#参考链接-Links" class="headerlink" title="参考链接 | Links"></a>参考链接 | Links</h3><ul>
<li><a href="https://leetcode.com/problems/minimum-cost-to-merge-stones/" target="_blank" rel="noopener">https://leetcode.com/problems/minimum-cost-to-merge-stones/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-cost-to-merge-stones/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-cost-to-merge-stones/</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-cost-to-merge-stones/solution/di-tui-gong-shi-javascriptdi-gui-bei-wang-lu-jie-f/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/minimum-cost-to-merge-stones/solution/di-tui-gong-shi-javascriptdi-gui-bei-wang-lu-jie-f/</a></li>
</ul>
]]></content>
      <categories>
        <category>leetcode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>Java SPI 扩展机制</title>
    <url>/language/java/java-spi/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Java SPI 是 jdk 中所带的扩展机制，用于为特定接口寻找实现类。自 Java 6 引入。</p>
<a id="more"></a>

<p>Java SPI 在 META-INF/services/ 目录下放置以 接口全限定名 命名的文本文件。文本文件中记录该接口的实现类，一行一个实现类，可以配置多行。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>获取实现类：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ServiceLoader&lt;Xxx&gt; loadedXxxs &#x3D; ServiceLoader.load(Xxx.class)</span><br></pre></td></tr></table></figure>

<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>mysql-connector-java</p>
<img src="/language/java/java-spi/mysql-connector-java.jpg" class="">

<p>其中，java.sql.Driver 文件内容为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">com.mysql.jdbc.Driver</span><br><span class="line">com.mysql.fabric.jdbc.FabricMySQLDriver</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>Java SPI思想梳理：<a href="https://zhuanlan.zhihu.com/p/28909673" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/28909673</a></li>
<li>Java Service Provider Interface：<a href="https://www.baeldung.com/java-spi" target="_blank" rel="noopener">https://www.baeldung.com/java-spi</a></li>
<li>Java SPI (Service Provider Interface) and ServiceLoader：<a href="https://www.journaldev.com/31602/java-spi-service-provider-interface-and-serviceloader" target="_blank" rel="noopener">https://www.journaldev.com/31602/java-spi-service-provider-interface-and-serviceloader</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux cronolog 命令</title>
    <url>/os/linux/commands/cronolog/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>cronolog 将标准输入中接收到的日志消息输出到一组文件中。文件的路径由模板和当前时间决定。<br>常用于 tomcat 访问日志（catalina.out）的切割。</p>
<p>cronolog 通过重定向的方法来处理日志切割，灵活性很好</p>
<a id="more"></a>

<p>实际使用的时候，配合重定向和命名管道，可以实现很复杂的日志分流和滚动切割功能。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>CentOS</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install cronolog</span><br></pre></td></tr></table></figure>

<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><p><code>--version</code> 版本<br><code>--help</code> 获取帮助</p>
<p>基本用法为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">usage: cronolog [OPTIONS] logfile-spec</span><br></pre></td></tr></table></figure>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><h4 id="程序的标准输出定向到滚动日志"><a href="#程序的标准输出定向到滚动日志" class="headerlink" title="程序的标准输出定向到滚动日志"></a>程序的标准输出定向到滚动日志</h4><p>写一个测试程序，每十秒将当前的毫秒时间戳写入标准输出流</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cronolog</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.println(System.currentTimeMillis());</span><br><span class="line">            Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译；运行java程序，并用 cronolog 将标准输出切割为按分钟分隔的日志文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">javac Cronolog.java</span><br><span class="line">java Cronolog | cronolog ttt.log.%Y%m%d%H%M</span><br></pre></td></tr></table></figure>

<p>可以看到，标准输出的内容都导入到了以日期分隔的日志文件中。如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@ThomasNB ~]# ls ttt.log*</span><br><span class="line">ttt.log.202001151135  ttt.log.202001151141  ttt.log.202001151147  ttt.log.202001151153  ttt.log.202001151159  ttt.log.202001151205</span><br><span class="line">ttt.log.202001151136  ttt.log.202001151142  ttt.log.202001151148  ttt.log.202001151154  ttt.log.202001151200  ttt.log.202001151206</span><br><span class="line">ttt.log.202001151137  ttt.log.202001151143  ttt.log.202001151149  ttt.log.202001151155  ttt.log.202001151201  ttt.log.202001151207</span><br><span class="line">ttt.log.202001151138  ttt.log.202001151144  ttt.log.202001151150  ttt.log.202001151156  ttt.log.202001151202  ttt.log.202001151208</span><br><span class="line">ttt.log.202001151139  ttt.log.202001151145  ttt.log.202001151151  ttt.log.202001151157  ttt.log.202001151203  ttt.log.202001151209</span><br><span class="line">ttt.log.202001151140  ttt.log.202001151146  ttt.log.202001151152  ttt.log.202001151158  ttt.log.202001151204</span><br></pre></td></tr></table></figure>

<h4 id="将程序的标准输出和标准错误分别定向到不同的滚动日志"><a href="#将程序的标准输出和标准错误分别定向到不同的滚动日志" class="headerlink" title="将程序的标准输出和标准错误分别定向到不同的滚动日志"></a>将程序的标准输出和标准错误分别定向到不同的滚动日志</h4><p>思路</p>
<ul>
<li>应用程序的标准输出和标准错误分别定向到不同的命名管道</li>
<li>从命名管道中读取内容输入到 cronolog</li>
<li>cronolog 将读取的内容输出到滚动日志</li>
</ul>
<p>实际使用的时候，需要先创建命名管道，再读取命名管道的内容配置 cronolog ，最后启动应用程序。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 创建 2 个命名管道</span><br><span class="line">mkfifo std_pipe</span><br><span class="line">mkfifo err_pipe</span><br><span class="line"># 将命名管道的输出导入 cronolog 作切割</span><br><span class="line">cronolog std.log.%Y%m%d &lt; std_pipe</span><br><span class="line">cronolog err.log.%Y%m%d &lt; err_pipe</span><br><span class="line"># 启动 java 程序</span><br><span class="line">java Cronolog 1&gt; std_pipe 2&gt; err_pipe</span><br></pre></td></tr></table></figure>

<p>更进一步的，可以结合 grep 选取特定的内容导入日志文件。</p>
<h3 id="相关内容"><a href="#相关内容" class="headerlink" title="相关内容"></a>相关内容</h3><p>logrotate</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://linux.die.net/man/1/cronolog" target="_blank" rel="noopener">https://linux.die.net/man/1/cronolog</a></li>
<li>日志分隔工具Cronolog的使用：<a href="https://www.jianshu.com/p/9d55b6923494" target="_blank" rel="noopener">https://www.jianshu.com/p/9d55b6923494</a></li>
<li>cronolog切割tomcat的catalina.out日志：<a href="https://blog.csdn.net/fly910905/article/details/78528652" target="_blank" rel="noopener">https://blog.csdn.net/fly910905/article/details/78528652</a></li>
<li>Linux 日志切割工具cronolog详解：<a href="https://blog.51cto.com/freeloda/1346076" target="_blank" rel="noopener">https://blog.51cto.com/freeloda/1346076</a></li>
<li><a href="https://github.com/fordmason/cronolog" target="_blank" rel="noopener">https://github.com/fordmason/cronolog</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac 常用解决方案 | Mac Solutions</title>
    <url>/os/Mac/mac-solutions/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Mac 用于开发、设计、音视频剪辑等工作，是不错的选择。其拥有和 Linux 相当的终端体验，同时桌面体验和 Windows 相当。</p>
<a id="more"></a>

<p>当然，Mac 有个很严重的问题，贵。另外一个问题，Mac 基本没有任何维修价值，也没有任何扩展的可能性。</p>
<p>既然买了，就要物尽其用。本文介绍一些 Mac 上的骚操作。</p>
<h3 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h3><h4 id="neofetch"><a href="#neofetch" class="headerlink" title="neofetch"></a>neofetch</h4><p>查看系统基本信息的命令行工具</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew install neofetch</span><br><span class="line">neofetch</span><br></pre></td></tr></table></figure>

<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 CPU 型号</span></span><br><span class="line">sysctl machdep.cpu.brand_string</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 CPU 核心数</span></span><br><span class="line">sysctl -n machdep.cpu.core_count</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 CPU 线程数</span></span><br><span class="line">sysctl -n machdep.cpu.thread_count</span><br></pre></td></tr></table></figure>

<h4 id="S-M-A-R-T-信息"><a href="#S-M-A-R-T-信息" class="headerlink" title="S.M.A.R.T. 信息"></a>S.M.A.R.T. 信息</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line">brew install smartmontools</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 S.M.A.R.T. 信息</span></span><br><span class="line">smartctl -a 设备路径 # eg. smartctl -a disk0</span><br></pre></td></tr></table></figure>

<h3 id="常用软件"><a href="#常用软件" class="headerlink" title="常用软件"></a>常用软件</h3><h4 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h4><h5 id="OmniDiskSweeper"><a href="#OmniDiskSweeper" class="headerlink" title="OmniDiskSweeper"></a><a href="https://www.omnigroup.com/more" target="_blank" rel="noopener">OmniDiskSweeper</a></h5><p>磁盘空间占用扫描软件，快速找到占用空间的文件。<br>Quickly find large, unwanted files and sweep them into the trash.</p>
<h5 id="Tickeys"><a href="#Tickeys" class="headerlink" title="Tickeys"></a>Tickeys</h5><p>键盘音效软件</p>
<h5 id="KeyCastr"><a href="#KeyCastr" class="headerlink" title="KeyCastr"></a>KeyCastr</h5><p>在屏幕上显示按键，可以在分享屏幕的时候显示按键操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask install keycastr</span><br></pre></td></tr></table></figure>

<h5 id="Turbo-Boost-Switcher"><a href="#Turbo-Boost-Switcher" class="headerlink" title="Turbo Boost Switcher"></a>Turbo Boost Switcher</h5><p>关闭 Turbo Boost ，以增加续航。<br>Source Code：<a href="https://github.com/rugarciap/Turbo-Boost-Switcher" target="_blank" rel="noopener">https://github.com/rugarciap/Turbo-Boost-Switcher</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask install turbo-boost-switcher</span><br></pre></td></tr></table></figure>

<p>以 root 权限打开，以避免输入密码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo su</span><br><span class="line">nohup <span class="string">"/Applications/Turbo Boost Switcher.app/Contents/MacOS/Turbo Boost Switcher"</span> &gt;dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>

<h5 id="gfxCardStatus"><a href="#gfxCardStatus" class="headerlink" title="gfxCardStatus"></a>gfxCardStatus</h5><p>显示当前使用的是哪张显卡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask install gfxcardstatus</span><br></pre></td></tr></table></figure>

<h5 id="eul-Status-Monitor-for-Mac"><a href="#eul-Status-Monitor-for-Mac" class="headerlink" title="eul Status Monitor for Mac"></a>eul Status Monitor for Mac</h5><p><a href="https://github.com/gao-sun/eul" target="_blank" rel="noopener">https://github.com/gao-sun/eul</a></p>
<h4 id="Touch-Bar-实用程序"><a href="#Touch-Bar-实用程序" class="headerlink" title="Touch Bar 实用程序"></a>Touch Bar 实用程序</h4><h5 id="Pock"><a href="#Pock" class="headerlink" title="Pock"></a>Pock</h5><p><a href="https://pock.dev/" target="_blank" rel="noopener">https://pock.dev/</a><br><a href="https://github.com/pigigaldi/Pock" target="_blank" rel="noopener">https://github.com/pigigaldi/Pock</a></p>
<p>在 Touch Bar 上显示 Dock</p>
<h5 id="Thief-Book"><a href="#Thief-Book" class="headerlink" title="Thief-Book"></a>Thief-Book</h5><p><a href="https://github.com/cteamx/Thief-Book" target="_blank" rel="noopener">https://github.com/cteamx/Thief-Book</a></p>
<p>一款可以在任务栏、桌面、TouchBar上进行摸鱼的最强的跨平台摸鱼神器</p>
<h3 id="终端技巧"><a href="#终端技巧" class="headerlink" title="终端技巧"></a>终端技巧</h3><h4 id="在终端中打开链接"><a href="#在终端中打开链接" class="headerlink" title="在终端中打开链接"></a>在终端中打开链接</h4><p>通过命令行开启默认浏览器，打开指定链接</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">open <span class="string">"https://www.baidu.com"</span></span><br></pre></td></tr></table></figure>

<h4 id="在终端中打开指定程序"><a href="#在终端中打开指定程序" class="headerlink" title="在终端中打开指定程序"></a>在终端中打开指定程序</h4><p>在终端中打开 Idea 社区版</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 方法一：找到对应的路径并打开</span></span><br><span class="line">open <span class="string">"<span class="variable">$(mdfind 'IntelliJ IDEA CE.app' | grep Applications | grep -e '.app$')</span>"</span></span><br><span class="line"><span class="comment"># 方法二：加 -a 参数</span></span><br><span class="line">open -a <span class="string">'IntelliJ IDEA CE.app'</span></span><br><span class="line"><span class="comment"># .app 也可以省略</span></span><br><span class="line">open -a <span class="string">'IntelliJ IDEA CE'</span></span><br></pre></td></tr></table></figure>

<h4 id="终端中复制粘贴"><a href="#终端中复制粘贴" class="headerlink" title="终端中复制粘贴"></a>终端中复制粘贴</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pbcopy 把内容复制到剪切板，从而在外部使用</span></span><br><span class="line">cat ~/.ssh/id_rsa.pub| pbcopy</span><br><span class="line"><span class="comment"># pbpaste 读取剪切板中的内容</span></span><br><span class="line">pbpaste | cat</span><br><span class="line"><span class="comment"># 将剪切板中的 tab 转成 space</span></span><br><span class="line">pbpaste | expand | pbcopy</span><br><span class="line"><span class="comment"># 将剪切板中的文本倒序</span></span><br><span class="line">pbpaste | rev | pbcopy</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>OpenConnect：<a href="http://www.infradead.org/openconnect/" target="_blank" rel="noopener">http://www.infradead.org/openconnect/</a></li>
<li>OmniDiskSweeper：<a href="https://www.omnigroup.com/more" target="_blank" rel="noopener">https://www.omnigroup.com/more</a></li>
<li>到底有没有用？Touch Bar的正确打开方式：<a href="https://zhuanlan.zhihu.com/p/87850153" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/87850153</a></li>
<li>Windows To Go ： 在 Mac 上打游戏的最佳方案：<a href="https://zhuanlan.zhihu.com/p/35167221" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/35167221</a></li>
<li>iMac 5K 硬件升级：加内存、外接 SSD：<a href="https://zhuanlan.zhihu.com/p/38263732" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/38263732</a></li>
<li>Mac上有哪些冷门但却逆天的软件？：<a href="https://zhuanlan.zhihu.com/p/22165209" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/22165209</a></li>
<li>还用Mac装win？你就out了：<a href="https://zhuanlan.zhihu.com/p/22247580" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/22247580</a></li>
<li>如何高效的使用Mac：<a href="https://zhuanlan.zhihu.com/p/22311997" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/22311997</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>PlantUML</title>
    <url>/language/plantuml/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>PlantUML 是一个开源项目，它用简单和直观的语言来定义图标，可用于快速构建各种图形，例如：</p>
<ul>
<li>时序图</li>
<li>用例图</li>
<li>类图</li>
<li>活动图</li>
<li>组件图</li>
<li>状态图</li>
<li>对象图</li>
<li>部署图</li>
<li>定时图</li>
</ul>
<a id="more"></a>

<p>了解更多，可参考：<br><a href="http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_zh.pdf" target="_blank" rel="noopener">http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_zh.pdf</a><br><a href="http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_en.pdf" target="_blank" rel="noopener">http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_en.pdf</a></p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>本节更类似于笔记，如果你想入门 PlantUML ，推荐阅读 PlantUML_Language_Reference_Guide</p>
<h4 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h4><p>UML图必须以 <code>@startuml</code> 开头，以 <code>@enduml</code> 结尾</p>
<p><code>&#39;</code> 开头的行是注释</p>
<p><code>title</code> 用于设置标题</p>
<p><code>header</code> 和 <code>footer</code> 用于定义页眉和页脚</p>
<p><code>newpage</code> 关键字用于将图片分拆为多张图片，这对在 word 中打印长图是非常有用的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@startuml</span><br><span class="line">header Page Header</span><br><span class="line">footer Page %page% of %lastpage%</span><br><span class="line">title Example Title</span><br><span class="line">Alice -&gt; Bob : message 1</span><br><span class="line">Alice -&gt; Bob : message 2</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<img src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iMjI0cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDoxNjJweDtoZWlnaHQ6MjI0cHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNjIgMjI0IiB3aWR0aD0iMTYycHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZmwwcGQybWZlaDEwYyIgd2lkdGg9IjMwMCUiIHg9Ii0xIiB5PSItMSI+PGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iYmx1ck91dCIgc3RkRGV2aWF0aW9uPSIyLjAiLz48ZmVDb2xvck1hdHJpeCBpbj0iYmx1ck91dCIgcmVzdWx0PSJibHVyT3V0MiIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIC40IDAiLz48ZmVPZmZzZXQgZHg9IjQuMCIgZHk9IjQuMCIgaW49ImJsdXJPdXQyIiByZXN1bHQ9ImJsdXJPdXQzIi8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iYmx1ck91dDMiIG1vZGU9Im5vcm1hbCIvPjwvZmlsdGVyPjwvZGVmcz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxMjYiIHg9IjE0LjUiIHk9IjQzLjM0ODYiPkV4YW1wbGUgVGl0bGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7IHN0cm9rZS1kYXNoYXJyYXk6IDUuMCw1LjA7IiB4MT0iMzEiIHgyPSIzMSIgeTE9Ijg5Ljg5MDYiIHkyPSIxNjguMTU2MyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyBzdHJva2UtZGFzaGFycmF5OiA1LjAsNS4wOyIgeDE9IjEyNiIgeDI9IjEyNiIgeTE9Ijg5Ljg5MDYiIHkyPSIxNjguMTU2MyIvPjxyZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmbDBwZDJtZmVoMTBjKSIgaGVpZ2h0PSIzMC4yOTY5IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI0OSIgeD0iNSIgeT0iNTQuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjM1IiB4PSIxMiIgeT0iNzQuNTg4OSI+QWxpY2U8L3RleHQ+PHJlY3QgZmlsbD0iI0ZFRkVDRSIgZmlsdGVyPSJ1cmwoI2ZsMHBkMm1mZWgxMGMpIiBoZWlnaHQ9IjMwLjI5NjkiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjQ5IiB4PSI1IiB5PSIxNjcuMTU2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjM1IiB4PSIxMiIgeT0iMTg3LjE1MTQiPkFsaWNlPC90ZXh0PjxyZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmbDBwZDJtZmVoMTBjKSIgaGVpZ2h0PSIzMC4yOTY5IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI0MyIgeD0iMTAzIiB5PSI1NC41OTM4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMjkiIHg9IjExMCIgeT0iNzQuNTg4OSI+Qm9iPC90ZXh0PjxyZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmbDBwZDJtZmVoMTBjKSIgaGVpZ2h0PSIzMC4yOTY5IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI0MyIgeD0iMTAzIiB5PSIxNjcuMTU2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjI5IiB4PSIxMTAiIHk9IjE4Ny4xNTE0Ij5Cb2I8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0E4MDAzNiIgcG9pbnRzPSIxMTQuNSwxMTcuMDIzNCwxMjQuNSwxMjEuMDIzNCwxMTQuNSwxMjUuMDIzNCwxMTguNSwxMjEuMDIzNCIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7IiB4MT0iMzEuNSIgeDI9IjEyMC41IiB5MT0iMTIxLjAyMzQiIHkyPSIxMjEuMDIzNCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjcxIiB4PSIzOC41IiB5PSIxMTUuOTU3NSI+bWVzc2FnZSAxPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMTE0LjUsMTQ2LjE1NjMsMTI0LjUsMTUwLjE1NjMsMTE0LjUsMTU0LjE1NjMsMTE4LjUsMTUwLjE1NjMiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjMxLjUiIHgyPSIxMjAuNSIgeTE9IjE1MC4xNTYzIiB5Mj0iMTUwLjE1NjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI3MSIgeD0iMzguNSIgeT0iMTQ1LjA5MDMiPm1lc3NhZ2UgMjwvdGV4dD48dGV4dCBmaWxsPSIjODg4ODg4IiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI3MCIgeD0iODUiIHk9IjE0LjI4MjIiPlBhZ2UgSGVhZGVyPC90ZXh0Pjx0ZXh0IGZpbGw9IiM4ODg4ODgiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjYxIiB4PSI0NyIgeT0iMjE1LjczNTQiPlBhZ2UgMSBvZiAxPC90ZXh0PjwhLS1NRDU9W2FiNjE3YzBkZTRkOTIyNDBmZmM4NWM0YjNlYjJhYmVhXQpAc3RhcnR1bWwNCmhlYWRlciBQYWdlIEhlYWRlcg0KZm9vdGVyIFBhZ2UgJXBhZ2UlIG9mICVsYXN0cGFnZSUNCnRpdGxlIEV4YW1wbGUgVGl0bGUNCkFsaWNlIC0+IEJvYiA6IG1lc3NhZ2UgMQ0KQWxpY2UgLT4gQm9iIDogbWVzc2FnZSAyDQpAZW5kdW1sDQoKUGxhbnRVTUwgdmVyc2lvbiAxLjIwMjAuMjBiZXRhNChVbmtub3duIGNvbXBpbGUgdGltZSkKKEdQTCBzb3VyY2UgZGlzdHJpYnV0aW9uKQpKYXZhIFJ1bnRpbWU6IEphdmEoVE0pIFNFIFJ1bnRpbWUgRW52aXJvbm1lbnQKSlZNOiBKYXZhIEhvdFNwb3QoVE0pIDY0LUJpdCBTZXJ2ZXIgVk0KRGVmYXVsdCBFbmNvZGluZzogVVRGLTgKTGFuZ3VhZ2U6IGVuCkNvdW50cnk6IFVTCi0tPjwvZz48L3N2Zz4='>

<h4 id="表示消息的语法"><a href="#表示消息的语法" class="headerlink" title="表示消息的语法"></a>表示消息的语法</h4><h5 id="箭头"><a href="#箭头" class="headerlink" title="箭头"></a>箭头</h5><p><code>-&gt;</code> 或 <code>&lt;-</code> 用于表示两个参与者之间的消息<br><code>--&gt;</code> 或 <code>&lt;--</code> 用于绘制虚线箭头<br><code>--</code> 代替 <code>-</code> 代表虚线<br><code>-&gt;&gt;</code> 或 <code>&lt;&lt;-</code> 表示异步消息<br>在箭头前附加的 <code>x</code> 代表一条消失的消息<br>用 <code>\</code> 代替 <code>&gt;</code> ，或用 <code>/</code> 代替 <code>&lt;</code> 表示只显示箭头的上半部分<br>可以在箭头前附加一个 <code>o</code><br>可以在两侧都附加箭头<br>可以改变箭头的颜色，示例：<code>-[#red]&gt;</code> 或 <code>-[#0000FF]-&gt;</code><br><code>autonumber</code> 关键字用于给消息编号，可以指定编号的起始值和每次的增量 <code>autonumber [start] [increment]</code>，可以指定编号的格式，示例：<code>autonumber 40 10 &quot;&lt;font color=red&gt;&lt;b&gt;Message 0 &quot;</code>，可以用 <code>stop</code> 和 <code>resume</code> 来暂停和恢复自动编号</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@startuml</span><br><span class="line">autonumber 10 10 &quot;&lt;b&gt;[000]&quot;</span><br><span class="line">Bob -&gt; Alice : Authentication Request</span><br><span class="line">Bob &lt;&lt;- Alice : Authentication Response</span><br><span class="line">autonumber stop</span><br><span class="line">Bob -\ Alice : dummy</span><br><span class="line">autonumber resume &quot;&lt;font color&#x3D;red&gt;&lt;b&gt;Message 0 &quot;</span><br><span class="line">Bob -&gt;x Alice : Yet another authentication Request</span><br><span class="line">Bob \- Alice : Yet another authentication Response</span><br><span class="line">autonumber stop</span><br><span class="line">Bob -&gt;o Alice : dummy</span><br><span class="line">autonumber resume 1 &quot;&lt;font color&#x3D;blue&gt;&lt;b&gt;Message 0 &quot;</span><br><span class="line">Bob &lt;-&gt; Alice : Yet another authentication Request</span><br><span class="line">Bob --\ Alice : Yet another authentication Response</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<img src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iMzM2cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDo0MjVweDtoZWlnaHQ6MzM2cHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0MjUgMzM2IiB3aWR0aD0iNDI1cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZjFvZHo3amhleDZka3AiIHdpZHRoPSIzMDAlIiB4PSItMSIgeT0iLTEiPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJsdXJPdXQiIHN0ZERldmlhdGlvbj0iMi4wIi8+PGZlQ29sb3JNYXRyaXggaW49ImJsdXJPdXQiIHJlc3VsdD0iYmx1ck91dDIiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAuNCAwIi8+PGZlT2Zmc2V0IGR4PSI0LjAiIGR5PSI0LjAiIGluPSJibHVyT3V0MiIgcmVzdWx0PSJibHVyT3V0MyIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImJsdXJPdXQzIiBtb2RlPSJub3JtYWwiLz48L2ZpbHRlcj48L2RlZnM+PGc+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7IHN0cm9rZS1kYXNoYXJyYXk6IDUuMCw1LjA7IiB4MT0iMjgiIHgyPSIyOCIgeTE9IjQwLjI5NjkiIHkyPSIyOTMuMzU5NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyBzdHJva2UtZGFzaGFycmF5OiA1LjAsNS4wOyIgeDE9IjM4OCIgeDI9IjM4OCIgeTE9IjQwLjI5NjkiIHkyPSIyOTMuMzU5NCIvPjxyZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmMW9kejdqaGV4NmRrcCkiIGhlaWdodD0iMzAuMjk2OSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iNDMiIHg9IjUiIHk9IjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyOSIgeD0iMTIiIHk9IjI0Ljk5NTEiPkJvYjwvdGV4dD48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFvZHo3amhleDZka3ApIiBoZWlnaHQ9IjMwLjI5NjkiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjQzIiB4PSI1IiB5PSIyOTIuMzU5NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjI5IiB4PSIxMiIgeT0iMzEyLjM1NDUiPkJvYjwvdGV4dD48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFvZHo3amhleDZka3ApIiBoZWlnaHQ9IjMwLjI5NjkiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjQ5IiB4PSIzNjIiIHk9IjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIzNSIgeD0iMzY5IiB5PSIyNC45OTUxIj5BbGljZTwvdGV4dD48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFvZHo3amhleDZka3ApIiBoZWlnaHQ9IjMwLjI5NjkiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIgd2lkdGg9IjQ5IiB4PSIzNjIiIHk9IjI5Mi4zNTk0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMzUiIHg9IjM2OSIgeT0iMzEyLjM1NDUiPkFsaWNlPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMzc2LjUsNjcuNDI5NywzODYuNSw3MS40Mjk3LDM3Ni41LDc1LjQyOTcsMzgwLjUsNzEuNDI5NyIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7IiB4MT0iMjguNSIgeDI9IjM4Mi41IiB5MT0iNzEuNDI5NyIgeTI9IjcxLjQyOTciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNDEiIHg9IjM1LjUiIHk9IjY2LjM2MzgiPlswMTBdPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjE1MCIgeD0iODAuNSIgeT0iNjYuMzYzOCI+QXV0aGVudGljYXRpb24gUmVxdWVzdDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiIHgxPSIyOC41IiB4Mj0iMzguNSIgeTE9IjEwMC41NjI1IiB5Mj0iOTYuNTYyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjI4LjUiIHgyPSIzOC41IiB5MT0iMTAwLjU2MjUiIHkyPSIxMDQuNTYyNSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjI4LjUiIHgyPSIzODcuNSIgeTE9IjEwMC41NjI1IiB5Mj0iMTAwLjU2MjUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNDEiIHg9IjQ1LjUiIHk9Ijk1LjQ5NjYiPlswMjBdPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjE2MCIgeD0iOTAuNSIgeT0iOTUuNDk2NiI+QXV0aGVudGljYXRpb24gUmVzcG9uc2U8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0E4MDAzNiIgcG9pbnRzPSIzNzYuNSwxMjUuNjk1MywzODYuNSwxMjkuNjk1MywzNzYuNSwxMjkuNjk1MyIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7IiB4MT0iMjguNSIgeDI9IjM4Ny41IiB5MT0iMTI5LjY5NTMiIHkyPSIxMjkuNjk1MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjUwIiB4PSIzNS41IiB5PSIxMjQuNjI5NCI+ZHVtbXk8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAyLjA7IiB4MT0iMzcwLjUiIHgyPSIzODAuNSIgeTE9IjE1My44MjgxIiB5Mj0iMTYzLjgyODEiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDIuMDsiIHgxPSIzNzAuNSIgeDI9IjM4MC41IiB5MT0iMTYzLjgyODEiIHkyPSIxNTMuODI4MSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjI4LjUiIHgyPSIzNzUuNSIgeTE9IjE1OC44MjgxIiB5Mj0iMTU4LjgyODEiLz48dGV4dCBmaWxsPSIjRkYwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iODgiIHg9IjM1LjUiIHk9IjE1My43NjIyIj5NZXNzYWdlIDMwPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjIyOCIgeD0iMTMyLjUiIHk9IjE1My43NjIyIj5ZZXQgYW5vdGhlciBhdXRoZW50aWNhdGlvbiBSZXF1ZXN0PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMzkuNSwxODguOTYwOSwyOS41LDE4OC45NjA5LDM5LjUsMTkyLjk2MDkiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjI4LjUiIHgyPSIzODcuNSIgeTE9IjE4Ny45NjA5IiB5Mj0iMTg3Ljk2MDkiLz48dGV4dCBmaWxsPSIjRkYwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iODkiIHg9IjQ1LjUiIHk9IjE4Mi44OTUiPk1lc3NhZ2UgNDA8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMjM4IiB4PSIxNDMuNSIgeT0iMTgyLjg5NSI+WWV0IGFub3RoZXIgYXV0aGVudGljYXRpb24gUmVzcG9uc2U8L3RleHQ+PGVsbGlwc2UgY3g9IjM4OCIgY3k9IjIxNi4zNDM4IiBmaWxsPSJub25lIiByeD0iNCIgcnk9IjQiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIvPjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMzcxLDIxMy4wOTM4LDM4MSwyMTcuMDkzOCwzNzEsMjIxLjA5MzgsMzc1LDIxNy4wOTM4IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiIHgxPSIyOC41IiB4Mj0iMzc3IiB5MT0iMjE3LjA5MzgiIHkyPSIyMTcuMDkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjUwIiB4PSIzNS41IiB5PSIyMTIuMDI3OCI+ZHVtbXk8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0E4MDAzNiIgcG9pbnRzPSIzOS41LDI0Mi4yMjY2LDI5LjUsMjQ2LjIyNjYsMzkuNSwyNTAuMjI2NiwzNS41LDI0Ni4yMjY2IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cG9seWdvbiBmaWxsPSIjQTgwMDM2IiBwb2ludHM9IjM3Ni41LDI0Mi4yMjY2LDM4Ni41LDI0Ni4yMjY2LDM3Ni41LDI1MC4yMjY2LDM4MC41LDI0Ni4yMjY2IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiIHgxPSIzMy41IiB4Mj0iMzgyLjUiIHkxPSIyNDYuMjI2NiIgeTI9IjI0Ni4yMjY2Ii8+PHRleHQgZmlsbD0iIzAwMDBGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9Ijg5IiB4PSI0NS41IiB5PSIyNDEuMTYwNiI+TWVzc2FnZSA1MDwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyMjgiIHg9IjE0My41IiB5PSIyNDEuMTYwNiI+WWV0IGFub3RoZXIgYXV0aGVudGljYXRpb24gUmVxdWVzdDwvdGV4dD48cG9seWdvbiBmaWxsPSIjQTgwMDM2IiBwb2ludHM9IjM3Ni41LDI3MS4zNTk0LDM4Ni41LDI3NS4zNTk0LDM3Ni41LDI3NS4zNTk0IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsgc3Ryb2tlLWRhc2hhcnJheTogMi4wLDIuMDsiIHgxPSIyOC41IiB4Mj0iMzg3LjUiIHkxPSIyNzUuMzU5NCIgeTI9IjI3NS4zNTk0Ii8+PHRleHQgZmlsbD0iIzAwMDBGRiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTMiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9Ijg4IiB4PSIzNS41IiB5PSIyNzAuMjkzNSI+TWVzc2FnZSA1MTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIyMzgiIHg9IjEzMi41IiB5PSIyNzAuMjkzNSI+WWV0IGFub3RoZXIgYXV0aGVudGljYXRpb24gUmVzcG9uc2U8L3RleHQ+PCEtLU1ENT1bZDlkNWEyZDRmNjhlZTU4Y2Q3NTc1NjJmODhhZWI5YzldCkBzdGFydHVtbA0KYXV0b251bWJlciAxMCAxMCAiPGI+WzAwMF0iDQpCb2IgLT4gQWxpY2UgOiBBdXRoZW50aWNhdGlvbiBSZXF1ZXN0DQpCb2IgPDwtIEFsaWNlIDogQXV0aGVudGljYXRpb24gUmVzcG9uc2UNCmF1dG9udW1iZXIgc3RvcA0KQm9iIC1cIEFsaWNlIDogZHVtbXkNCmF1dG9udW1iZXIgcmVzdW1lICI8Zm9udCBjb2xvcj1yZWQ+PGI+TWVzc2FnZSAwICINCkJvYiAtPnggQWxpY2UgOiBZZXQgYW5vdGhlciBhdXRoZW50aWNhdGlvbiBSZXF1ZXN0DQpCb2IgXC0gQWxpY2UgOiBZZXQgYW5vdGhlciBhdXRoZW50aWNhdGlvbiBSZXNwb25zZQ0KYXV0b251bWJlciBzdG9wDQpCb2IgLT5vIEFsaWNlIDogZHVtbXkNCmF1dG9udW1iZXIgcmVzdW1lIDEgIjxmb250IGNvbG9yPWJsdWU+PGI+TWVzc2FnZSAwICINCkJvYiA8LT4gQWxpY2UgOiBZZXQgYW5vdGhlciBhdXRoZW50aWNhdGlvbiBSZXF1ZXN0DQpCb2IgLSAtXCBBbGljZSA6IFlldCBhbm90aGVyIGF1dGhlbnRpY2F0aW9uIFJlc3BvbnNlDQpAZW5kdW1sDQoKUGxhbnRVTUwgdmVyc2lvbiAxLjIwMjAuMjBiZXRhNChVbmtub3duIGNvbXBpbGUgdGltZSkKKEdQTCBzb3VyY2UgZGlzdHJpYnV0aW9uKQpKYXZhIFJ1bnRpbWU6IEphdmEoVE0pIFNFIFJ1bnRpbWUgRW52aXJvbm1lbnQKSlZNOiBKYXZhIEhvdFNwb3QoVE0pIDY0LUJpdCBTZXJ2ZXIgVk0KRGVmYXVsdCBFbmNvZGluZzogVVRGLTgKTGFuZ3VhZ2U6IGVuCkNvdW50cnk6IFVTCi0tPjwvZz48L3N2Zz4='>

<h5 id="消息"><a href="#消息" class="headerlink" title="消息"></a>消息</h5><p>可以用 <code>\n</code> 来换行</p>
<p><code>note left</code> 和 <code>note right</code> 用于在左侧或右侧添加备注</p>
<p><code>note left of</code> ， <code>note right of</code> ， <code>note over</code> 用于给参与者添加备注</p>
<p><code>hnote</code> 和 <code>rnote</code> 用于添加六角形和矩形的备注</p>
<h4 id="表示角色的语法"><a href="#表示角色的语法" class="headerlink" title="表示角色的语法"></a>表示角色的语法</h4><p>可以通过 <code>participant</code> 显示定义参与者。参与者的定义顺序即为默认的展示顺序。<br>也可以用如下关键词定义参与者，如果使用这些关键词，会改变参与者的形状。</p>
<ul>
<li>actor</li>
<li>boundary</li>
<li>control</li>
<li>entity</li>
<li>database</li>
<li>collections</li>
</ul>
<p>可以用 <code>as</code> 关键词重命名参与者，可以用 # + 颜色/RGB值 来指定参与者的颜色，可以用 <code>order</code> 关键词定义参与者的展示顺序。<br>order [number] 用于定义展示顺序，数字小的先展示。<br>如果名字中含有符号的话，需要用双引号包围</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@startuml</span><br><span class="line">title test diagram</span><br><span class="line">&#39; The only difference between actor and participant is the drawing</span><br><span class="line">actor user as u order 1 #red</span><br><span class="line">participant computer order 2 #33FF99</span><br><span class="line">u -&gt; computer: request</span><br><span class="line">u &lt;- computer: response</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<img src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iMjg1cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDoxNjBweDtoZWlnaHQ6Mjg1cHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNjAgMjg1IiB3aWR0aD0iMTYwcHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZmhoOHU1Mzl4ZWw3MyIgd2lkdGg9IjMwMCUiIHg9Ii0xIiB5PSItMSI+PGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iYmx1ck91dCIgc3RkRGV2aWF0aW9uPSIyLjAiLz48ZmVDb2xvck1hdHJpeCBpbj0iYmx1ck91dCIgcmVzdWx0PSJibHVyT3V0MiIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIC40IDAiLz48ZmVPZmZzZXQgZHg9IjQuMCIgZHk9IjQuMCIgaW49ImJsdXJPdXQyIiByZXN1bHQ9ImJsdXJPdXQzIi8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iYmx1ck91dDMiIG1vZGU9Im5vcm1hbCIvPjwvZmlsdGVyPjwvZGVmcz48Zz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxMTkiIHg9IjE4LjI1IiB5PSIyOC43MDgiPnRlc3QgZGlhZ3JhbTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsgc3Ryb2tlLWRhc2hhcnJheTogNS4wLDUuMDsiIHgxPSIyMyIgeDI9IjIzIiB5MT0iMTIzLjI1IiB5Mj0iMjAxLjUxNTYiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsgc3Ryb2tlLWRhc2hhcnJheTogNS4wLDUuMDsiIHgxPSIxMDUuNSIgeDI9IjEwNS41IiB5MT0iMTIzLjI1IiB5Mj0iMjAxLjUxNTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIzMCIgeD0iNSIgeT0iMTE5Ljk0ODIiPnVzZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjIzIiBjeT0iNDkuOTUzMSIgZmlsbD0iI0ZGMDAwMCIgZmlsdGVyPSJ1cmwoI2ZoaDh1NTM5eGVsNzMpIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMi4wOyIvPjxwYXRoIGQ9Ik0yMyw1Ny45NTMxIEwyMyw4NC45NTMxIE0xMCw2NS45NTMxIEwzNiw2NS45NTMxIE0yMyw4NC45NTMxIEwxMCw5OS45NTMxIE0yMyw4NC45NTMxIEwzNiw5OS45NTMxICIgZmlsbD0ibm9uZSIgZmlsdGVyPSJ1cmwoI2ZoaDh1NTM5eGVsNzMpIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDIuMDsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSIzMCIgeD0iNSIgeT0iMjEzLjUxMDciPnVzZXI8L3RleHQ+PGVsbGlwc2UgY3g9IjIzIiBjeT0iMjI2LjgxMjUiIGZpbGw9IiNGRjAwMDAiIGZpbHRlcj0idXJsKCNmaGg4dTUzOXhlbDczKSIgcng9IjgiIHJ5PSI4IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDIuMDsiLz48cGF0aCBkPSJNMjMsMjM0LjgxMjUgTDIzLDI2MS44MTI1IE0xMCwyNDIuODEyNSBMMzYsMjQyLjgxMjUgTTIzLDI2MS44MTI1IEwxMCwyNzYuODEyNSBNMjMsMjYxLjgxMjUgTDM2LDI3Ni44MTI1ICIgZmlsbD0ibm9uZSIgZmlsdGVyPSJ1cmwoI2ZoaDh1NTM5eGVsNzMpIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDIuMDsiLz48cmVjdCBmaWxsPSIjMzNGRjk5IiBmaWx0ZXI9InVybCgjZmhoOHU1Mzl4ZWw3MykiIGhlaWdodD0iMzAuMjk2OSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iODUiIHg9IjYxLjUiIHk9Ijg3Ljk1MzEiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI3MSIgeD0iNjguNSIgeT0iMTA3Ljk0ODIiPmNvbXB1dGVyPC90ZXh0PjxyZWN0IGZpbGw9IiMzM0ZGOTkiIGZpbHRlcj0idXJsKCNmaGg4dTUzOXhlbDczKSIgaGVpZ2h0PSIzMC4yOTY5IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSI4NSIgeD0iNjEuNSIgeT0iMjAwLjUxNTYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI3MSIgeD0iNjguNSIgeT0iMjIwLjUxMDciPmNvbXB1dGVyPC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iOTQsMTUwLjM4MjgsMTA0LDE1NC4zODI4LDk0LDE1OC4zODI4LDk4LDE1NC4zODI4IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiIHgxPSIyMyIgeDI9IjEwMCIgeTE9IjE1NC4zODI4IiB5Mj0iMTU0LjM4MjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI0OSIgeD0iMzAiIHk9IjE0OS4zMTY5Ij5yZXF1ZXN0PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNBODAwMzYiIHBvaW50cz0iMzQsMTc5LjUxNTYsMjQsMTgzLjUxNTYsMzQsMTg3LjUxNTYsMzAsMTgzLjUxNTYiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIgeDE9IjI4IiB4Mj0iMTA1IiB5MT0iMTgzLjUxNTYiIHkyPSIxODMuNTE1NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmdBbmRHbHlwaHMiIHRleHRMZW5ndGg9IjU5IiB4PSI0MCIgeT0iMTc4LjQ0OTciPnJlc3BvbnNlPC90ZXh0PjwhLS1NRDU9W2JjYmI0MTZhNjQwODBlY2U5NDg5MGVhNjU5ZjNlOTY0XQpAc3RhcnR1bWwNCnRpdGxlIHRlc3QgZGlhZ3JhbQ0KJyBUaGUgb25seSBkaWZmZXJlbmNlIGJldHdlZW4gYWN0b3IgYW5kIHBhcnRpY2lwYW50IGlzIHRoZSBkcmF3aW5nDQphY3RvciB1c2VyIGFzIHUgb3JkZXIgMSAjcmVkDQpwYXJ0aWNpcGFudCBjb21wdXRlciBvcmRlciAyICMzM0ZGOTkNCnUgLT4gY29tcHV0ZXI6IHJlcXVlc3QNCnUgPC0gY29tcHV0ZXI6IHJlc3BvbnNlDQpAZW5kdW1sDQoKQHN0YXJ0dW1sDQp0aXRsZSB0ZXN0IGRpYWdyYW0NCmFjdG9yIHVzZXIgYXMgdSBvcmRlciAxICNyZWQNCnBhcnRpY2lwYW50IGNvbXB1dGVyIG9yZGVyIDIgIzMzRkY5OQ0KdSAtPiBjb21wdXRlcjogcmVxdWVzdA0KdSA8LSBjb21wdXRlcjogcmVzcG9uc2UNCkBlbmR1bWwNCgpQbGFudFVNTCB2ZXJzaW9uIDEuMjAyMC4yMGJldGE0KFVua25vd24gY29tcGlsZSB0aW1lKQooR1BMIHNvdXJjZSBkaXN0cmlidXRpb24pCkphdmEgUnVudGltZTogSmF2YShUTSkgU0UgUnVudGltZSBFbnZpcm9ubWVudApKVk06IEphdmEgSG90U3BvdChUTSkgNjQtQml0IFNlcnZlciBWTQpEZWZhdWx0IEVuY29kaW5nOiBVVEYtOApMYW5ndWFnZTogZW4KQ291bnRyeTogVVMKLS0+PC9nPjwvc3ZnPg=='>

<h3 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h3><h4 id="IntelliJ-IDEA"><a href="#IntelliJ-IDEA" class="headerlink" title="IntelliJ IDEA"></a>IntelliJ IDEA</h4><p>安装插件：</p>
<ul>
<li>PlantUML integration</li>
</ul>
<p>安装依赖：</p>
<ul>
<li>graphviz <code>brew install graphviz</code></li>
</ul>
<p>使用：<br>File -&gt; New -&gt; PlantUML File</p>
<h4 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h4><p>安装如下任意一个插件：</p>
<ul>
<li>hexo-tag-plantuml</li>
<li>hexo-filter-plantuml</li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="http://plantuml.com/zh/guide" target="_blank" rel="noopener">http://plantuml.com/zh/guide</a></li>
<li><a href="https://plugins.jetbrains.com/plugin/7017-plantuml-integration/versions" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/7017-plantuml-integration/versions</a></li>
<li><a href="http://wiki.4intra.net/images/c/c4/PlantUML_Language_Reference_Guide.pdf" target="_blank" rel="noopener">http://wiki.4intra.net/images/c/c4/PlantUML_Language_Reference_Guide.pdf</a></li>
<li><a href="https://deepu.js.org/svg-seq-diagram/Reference_Guide.pdf" target="_blank" rel="noopener">https://deepu.js.org/svg-seq-diagram/Reference_Guide.pdf</a></li>
<li><a href="https://github.com/wafer-li/hexo-filter-plantuml" target="_blank" rel="noopener">https://github.com/wafer-li/hexo-filter-plantuml</a></li>
<li><a href="https://github.com/two/hexo-tag-plantuml" target="_blank" rel="noopener">https://github.com/two/hexo-tag-plantuml</a></li>
<li><a href="https://ogom.github.io/draw_uml/plantuml/" target="_blank" rel="noopener">https://ogom.github.io/draw_uml/plantuml/</a></li>
<li><a href="https://real-world-plantuml.com/" target="_blank" rel="noopener">https://real-world-plantuml.com/</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 线程池 | Java Thread Pool</title>
    <url>/language/java/java-thread-pool/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>线程的创建和销毁是有开销的，为了减少这些开销，需要尽可能的复用线程。线程池就是为了复用线程，减少系统开销而创建的。同时，线程池可以有效的管理线程资源，防止创建大量线程导致应用崩溃。</p>
<a id="more"></a>

<p>来一个请求创建一个线程的处理方式浪费系统资源且有拖垮系统的风险，一是因为线程的创建和销毁都是有开销的，二是系统能创建的线程是有限的。<br>如果不用线程池这种方案，应对上述情况需要创建一个工作队列，然后建立一个对应的后台线程依次处理工作队列中的任务。（该方案其实也可以看成是简化版的单线程的线程池）</p>
<h3 id="线程池相关的类"><a href="#线程池相关的类" class="headerlink" title="线程池相关的类"></a>线程池相关的类</h3><img src="/language/java/java-thread-pool/ExecutorService.jpg" class="">

<ul>
<li>ExecutorService 接口</li>
<li>ScheduledExecutorService 接口</li>
<li>ForkJoinPool 类，继承自 AbstractExecutorService</li>
<li>ScheduledThreadPoolExecutor 类，继承自 ThreadPoolExecutor ，实现了 ScheduledExecutorService 接口</li>
<li>ThreadPoolExecutor 类，继承自 AbstractExecutorService</li>
</ul>
<p>ScheduledExecutorService 继承了 ExecutorService。<br>ForkJoinPool 是 AbstractExecutorService 的子类，AbstractExecutorService 实现了 ExecutorService，ForkJoinPool 与 ExecutorService 的不同在于实现了 “任务窃取算法”。</p>
<h3 id="线程池的工作队列"><a href="#线程池的工作队列" class="headerlink" title="线程池的工作队列"></a>线程池的工作队列</h3><p>线程池的工作队列是一个 BlockingQueue ，所有实现类如下图如下：</p>
<img src="/language/java/java-thread-pool/BlockingQueue.jpg" class="">

<h4 id="ArrayBlockingQueue"><a href="#ArrayBlockingQueue" class="headerlink" title="ArrayBlockingQueue"></a>ArrayBlockingQueue</h4><p>一个由数组结构组成的有界阻塞队列</p>
<h4 id="LinkedBlockingQueue"><a href="#LinkedBlockingQueue" class="headerlink" title="LinkedBlockingQueue"></a>LinkedBlockingQueue</h4><p>一个由链表结构组成的有界阻塞队列，默认的容量为 Integer.MAX_VALUE</p>
<h4 id="SynchronousQueue"><a href="#SynchronousQueue" class="headerlink" title="SynchronousQueue"></a>SynchronousQueue</h4><p>不存储元素，只负责传递。每一个put()和take()操作都需要等待另一个匹配的操作才能成功，否则将一直阻塞。</p>
<h4 id="PriorityBlockingQueue"><a href="#PriorityBlockingQueue" class="headerlink" title="PriorityBlockingQueue"></a>PriorityBlockingQueue</h4><p>一个支持优先级排序的无界阻塞队列</p>
<h4 id="DelayQueue"><a href="#DelayQueue" class="headerlink" title="DelayQueue"></a>DelayQueue</h4><p>一个使用优先级队列实现的无界阻塞队列。延迟队列。</p>
<h4 id="LinkedTransferQueue"><a href="#LinkedTransferQueue" class="headerlink" title="LinkedTransferQueue"></a>LinkedTransferQueue</h4><p>一个由链表结构组成的无界阻塞队列</p>
<h4 id="LinkedBlockingDeque"><a href="#LinkedBlockingDeque" class="headerlink" title="LinkedBlockingDeque"></a>LinkedBlockingDeque</h4><p>一个由链表结构组成的双向阻塞队列</p>
<h3 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h3><p>jdk1.8.0_191</p>
<p>线程池的参数</p>
<ul>
<li>corePoolSize<br>  核心线程数大小，空闲状态下维持的最小线程数，除非设置了 allowCoreThreadTimeOut，否则核心线程不会销毁</li>
<li>maximumPoolSize<br>  线程池允许的最大线程数</li>
<li>keepAliveTime<br>  当线程数大于 corePoolSize 时，空闲线程销毁前等待的最大时长</li>
<li>workQueue<br>  工作队列</li>
<li>threadFactory<br>  线程工厂</li>
<li>handler<br>  RejectedExecutionHandler 当执行受阻且工作队列满时，将调用 handler</li>
</ul>
<p>线程池的拒绝策略</p>
<ul>
<li>CallerRunsPolicy<br>  由调用者运行</li>
<li>AbortPolicy<br>  抛出 RejectedExecutionException 异常</li>
<li>DiscardPolicy<br>  默默丢弃，不抛异常</li>
<li>DiscardOldestPolicy<br>  丢弃最老的一个任务，并执行当前任务</li>
</ul>
<p>线程池的状态</p>
<ul>
<li>运行 RUNNING<br>  正常运行，会接受新任务，并处理现有任务。Accept new tasks and process queued tasks</li>
<li>关闭 SHUTDOWN<br>  不会接受新任务，但会处理现有任务。Don’t accept new tasks, but process queued tasks</li>
<li>停止 STOP<br>  不会接受新任务，不会处理现有任务，并且会中断进行中的任务。Don’t accept new tasks, don’t process queued tasks, and interrupt in-progress tasks</li>
<li>清理 TIDYING<br>  所有的任务都停止了，线程池的工作线程数为0，将运行 terminated() 钩子方法。All tasks have terminated, workerCount is zero, the thread transitioning to state TIDYING will run the terminated() hook method</li>
<li>终止 TERMINATED<br>  terminated() 方法已经运行完了，就会变为终止状态。terminated() has completed</li>
</ul>
<p>线程池的状态流转</p>
<ul>
<li>RUNNING —&gt; SHUTDOWN<br>  调用了 shutdown() 方法，有可能是在线程池的 finalize() 方法中隐式调用的</li>
<li>RUNNING / SHUTDOWN —&gt; STOP<br>  调用了 shutdownNow() 方法</li>
<li>SHUTDOWN —&gt; TIDYING<br>  当线程池中的工作队列和线程池都变成空的时候</li>
<li>STOP —&gt; TIDYING<br>  当线程池变成空的时候</li>
<li>TIDYING —&gt; TERMINATED<br>  当 terminated() 这个钩子方法完成后。当线程池进入 TERMINATED 状态后，在 awaitTermination() 处等待的所有线程会返回。</li>
</ul>
<p>线程池的主要控制状态在 ctl 这个原子变量中。 ctl 是一个 AtomicInteger ，共32个比特，首3比特表示线程池的状态，后29比特表示线程池中的工作线程数。因此，线程池的最大工作线程数 CAPACITY 是 2^29 - 1，这个数字约为 5 亿。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> AtomicInteger ctl = <span class="keyword">new</span> AtomicInteger(ctlOf(RUNNING, <span class="number">0</span>));</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CAPACITY   = (<span class="number">1</span> &lt;&lt; COUNT_BITS) - <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>线程池的工作队列是 workQueue 。线程池会通过 isEmpty() 方法来判断工作队列是否为空，这是因为，延迟队列的 poll() 方法是可以返回 null 的，即便可能有一个在之后时间点出队的元素。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue&lt;Runnable&gt; workQueue;</span><br></pre></td></tr></table></figure>

<p>线程池中有一个 mainLock ，这个锁在更新 completedTaskCount 之类的任务时会用到</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock mainLock = <span class="keyword">new</span> ReentrantLock();</span><br></pre></td></tr></table></figure>

<p>threadFactory 是线程池用来创建线程的工厂。访问 不需要依赖 mainLock。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> ThreadFactory threadFactory;</span><br></pre></td></tr></table></figure>

<p>当线程池满或关闭时，将调用 handler。如果没有设置 handler ，会调用默认的 defaultHandler，AbortPolicy 会拒绝任务，并抛出 RejectedExecutionException</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> RejectedExecutionHandler handler;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> RejectedExecutionHandler defaultHandler =</span><br><span class="line">        <span class="keyword">new</span> AbortPolicy();</span><br></pre></td></tr></table></figure>

<p>当线程数超过 corePoolSize 的大小后， keepAliveTime 限制了线程空闲的最长时间，如果设置了 allowCoreThreadTimeOut ，则核心线程也会受 keepAliveTime 限制。如果未设置 allowCoreThreadTimeOut ，或者线程数小于 corePoolSize ，空闲线程将一直等待新的任务。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">long</span> keepAliveTime;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> allowCoreThreadTimeOut;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> corePoolSize;</span><br></pre></td></tr></table></figure>

<p>onShutdown() 方法会在线程池关闭的时候做一些清理工作，在 ThreadPoolExecutor 中什么也不做，但是在 ScheduledThreadPoolExecutor 中会用来取消延迟任务。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onShutdown</span><span class="params">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>prestartCoreThread() 开启一个核心线程；prestartAllCoreThreads() 开启全部的核心线程。 allowCoreThreadTimeOut() 设置是否允许核心线程超时销毁。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">prestartCoreThread</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">prestartAllCoreThreads</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">allowCoreThreadTimeOut</span><span class="params">(<span class="keyword">boolean</span> value)</span></span>;</span><br></pre></td></tr></table></figure>

<p>purge() 方法从工作队列中清除所有被取消的任务 <code>((Future&lt;?&gt;)r).isCancelled()</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">purge</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 线程池中的当前线程数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPoolSize</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 活跃线程数的大概数量</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getActiveCount</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">// 线程池中存在过的最大线程数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLargestPoolSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// 线程池中执行任务数的大概值</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getTaskCount</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// 完成任务数</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getCompletedTaskCount</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>

<p>线程池中给子类扩展用的几个钩子</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 任务执行前执行，可用于设置ThreadLocal</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">beforeExecute</span><span class="params">(Thread t, Runnable r)</span></span>;</span><br><span class="line"><span class="comment">// 任务执行后执行</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterExecute</span><span class="params">(Runnable r, Throwable t)</span></span>;</span><br><span class="line"><span class="comment">// 线程池终止后执行</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">terminated</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="ScheduledThreadPoolExecutor"><a href="#ScheduledThreadPoolExecutor" class="headerlink" title="ScheduledThreadPoolExecutor"></a>ScheduledThreadPoolExecutor</h3><p>提交到 ScheduledThreadPoolExecutor 中的任务都会封装成 ScheduledFutureTask 。</p>
<h3 id="ForkJoinPool"><a href="#ForkJoinPool" class="headerlink" title="ForkJoinPool"></a>ForkJoinPool</h3><p>主要用于处理分治算法，在 stream 的并行处理中会用到。</p>
<h3 id="ThreadFactory"><a href="#ThreadFactory" class="headerlink" title="ThreadFactory"></a>ThreadFactory</h3><p>可以使用 Guava 的工具类来创建 ThreadFactory</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> ThreadFactoryBuilder().setNameFormat(<span class="string">"thread-name-%d"</span>).build()</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>ForkJoinPool源码分析1：<a href="https://www.jianshu.com/p/32a15ef2f1bf" target="_blank" rel="noopener">https://www.jianshu.com/p/32a15ef2f1bf</a></li>
<li>ForkJoinPool源码分析2：<a href="https://www.jianshu.com/p/6a14d0b54b8d" target="_blank" rel="noopener">https://www.jianshu.com/p/6a14d0b54b8d</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>并发</tag>
      </tags>
  </entry>
  <entry>
    <title>分布式系统先写数据库还是先写缓存</title>
    <url>/distributed-system/distributed-system-db-or-cache/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h4 id="先数据库再缓存"><a href="#先数据库再缓存" class="headerlink" title="先数据库再缓存"></a>先数据库再缓存</h4><p>方案一：先写数据库，如果成功，写缓存；否则，不写缓存。</p>
<p>存在的问题：有可能出现写数据库成功，但写缓存失败的情况。<br>解决方式：将写缓存这一步，包装在数据库事务中。</p>
<p>方案二：先写数据库，再写缓存，缓存写成功则提交事务，否则回滚事务。</p>
<p>存在的问题：引入事务增加数据库的压力，并且有可能事务回滚失败。<br>解决方式：回滚失败的话，删除缓存。</p>
<p>方案三：先写数据库，再写缓存，缓存写成功则提交事务，否则回滚事务。如果事务回滚失败，则删除缓存。</p>
<p>存在的问题：如果数据库有做高可用的话，有主从数据库的同步问题。有可能写入主库成功了，缓存删除了。但是正好有个请求读了从库，拿到旧值写入了缓存。<br>解决方案：缓存订阅数据库 binlog，主动设置或删除缓存。</p>
<h4 id="先缓存再数据库"><a href="#先缓存再数据库" class="headerlink" title="先缓存再数据库"></a>先缓存再数据库</h4><p>通常不采用该方案，理由是：</p>
<ul>
<li>缓存是基于内存的，内存是易失的。</li>
<li>系统的核心通常是数据库，缓存是为了缓解数据库压力搭建的从系统，一般是都是缓存滞后于数据库。如果先写缓存，会造成读到未提交的更改的问题。</li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="http://www.sohu.com/a/313816366_411876" target="_blank" rel="noopener">http://www.sohu.com/a/313816366_411876</a><br><a href="http://www.zhuanzhi.ai/document/6f5923cb4b0730d791124f1f37c4e455" target="_blank" rel="noopener">http://www.zhuanzhi.ai/document/6f5923cb4b0730d791124f1f37c4e455</a></p>
]]></content>
      <categories>
        <category>distributed-system</category>
      </categories>
      <tags>
        <tag>database</tag>
        <tag>分布式系统</tag>
        <tag>cache</tag>
      </tags>
  </entry>
  <entry>
    <title>软件工程之路</title>
    <url>/the-road-to-software-engineering/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h3 id="实用站点"><a href="#实用站点" class="headerlink" title="实用站点"></a>实用站点</h3><h4 id="查找解决方案"><a href="#查找解决方案" class="headerlink" title="查找解决方案"></a>查找解决方案</h4><ul>
<li>StackOverflow：<a href="https://stackoverflow.com/" target="_blank" rel="noopener">https://stackoverflow.com/</a></li>
</ul>
<h4 id="学习类"><a href="#学习类" class="headerlink" title="学习类"></a>学习类</h4><ul>
<li>LeetCode（刷题，外企面试比较有用）：<a href="https://leetcode.com/" target="_blank" rel="noopener">https://leetcode.com/</a></li>
<li>HackerRank（刷题，很难）：<a href="https://www.hackerrank.com/" target="_blank" rel="noopener">https://www.hackerrank.com/</a></li>
<li>Programming by Doing：<a href="http://www.programmingbydoing.com/" target="_blank" rel="noopener">http://www.programmingbydoing.com/</a></li>
<li>Hacker News（被墙了，看不了）</li>
</ul>
<h4 id="资讯类"><a href="#资讯类" class="headerlink" title="资讯类"></a>资讯类</h4><ul>
<li>InfoQ：<a href="https://www.infoq.cn/" target="_blank" rel="noopener">https://www.infoq.cn/</a></li>
<li>思否：<a href="https://segmentfault.com/" target="_blank" rel="noopener">https://segmentfault.com/</a></li>
<li>开源中国：<a href="https://www.oschina.net/" target="_blank" rel="noopener">https://www.oschina.net/</a></li>
<li>ITeye：<a href="https://www.iteye.com/" target="_blank" rel="noopener">https://www.iteye.com/</a></li>
<li>掘金：<a href="https://juejin.im" target="_blank" rel="noopener">https://juejin.im</a></li>
<li><a href="https://toutiao.io/" target="_blank" rel="noopener">https://toutiao.io/</a></li>
</ul>
<h4 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h4><ul>
<li>JSON：<a href="http://www.bejson.com/jsonviewernew/" target="_blank" rel="noopener">http://www.bejson.com/jsonviewernew/</a></li>
<li>JSON：<a href="https://www.json.cn/" target="_blank" rel="noopener">https://www.json.cn/</a></li>
<li>时间戳：<a href="http://tool.chinaz.com/Tools/unixtime.aspx" target="_blank" rel="noopener">http://tool.chinaz.com/Tools/unixtime.aspx</a></li>
<li>创建流图等图形：<a href="http://plantuml.com/zh/" target="_blank" rel="noopener">http://plantuml.com/zh/</a></li>
<li><a href="https://www.draw.io/" target="_blank" rel="noopener">https://www.draw.io/</a></li>
<li><a href="https://www.proxy-list.download/HTTPS" target="_blank" rel="noopener">https://www.proxy-list.download/HTTPS</a></li>
</ul>
<h3 id="不可描述"><a href="#不可描述" class="headerlink" title="不可描述"></a>不可描述</h3><p>lanyu</p>
<h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><h4 id="算法类"><a href="#算法类" class="headerlink" title="算法类"></a>算法类</h4><ul>
<li>分治算法、动态规划、贪心算法的区别</li>
<li>zookeeper如何实现选主（zookeeper的选主算法）</li>
</ul>
<h4 id="数据类"><a href="#数据类" class="headerlink" title="数据类"></a>数据类</h4><h4 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h4><p>分布式系统中，应该先写数据库还是先写缓存</p>
<h4 id="网络-IO"><a href="#网络-IO" class="headerlink" title="网络/IO"></a>网络/IO</h4><ul>
<li>select poll epoll的区别</li>
</ul>
<h4 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h4><ul>
<li>推模式和拉模式的区别</li>
</ul>
<h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><ul>
<li>Hashtable, Hashmap, concurrentHashMap 的区别</li>
</ul>
<h4 id="并发与线程"><a href="#并发与线程" class="headerlink" title="并发与线程"></a>并发与线程</h4><ul>
<li>一个进程能创建的进程数量有什么限制</li>
<li>如何得出最恰当的线程数（不要说n+1或2n，假设资源不足以创建n+1个线程）</li>
</ul>
<h4 id="你有什么要问的"><a href="#你有什么要问的" class="headerlink" title="你有什么要问的"></a>你有什么要问的</h4><p><a href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/essential-content-for-interview/PreparingForInterview/%E5%A6%82%E6%9E%9C%E9%9D%A2%E8%AF%95%E5%AE%98%E9%97%AE%E4%BD%A0%E2%80%9C%E4%BD%A0%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%E9%97%AE%E6%88%91%E5%90%97%EF%BC%9F%E2%80%9D%E6%97%B6%EF%BC%8C%E4%BD%A0%E8%AF%A5%E5%A6%82%E4%BD%95%E5%9B%9E%E7%AD%94.md" target="_blank" rel="noopener">https://github.com/Snailclimb/JavaGuide/blob/master/docs/essential-content-for-interview/PreparingForInterview/%E5%A6%82%E6%9E%9C%E9%9D%A2%E8%AF%95%E5%AE%98%E9%97%AE%E4%BD%A0%E2%80%9C%E4%BD%A0%E6%9C%89%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%E9%97%AE%E6%88%91%E5%90%97%EF%BC%9F%E2%80%9D%E6%97%B6%EF%BC%8C%E4%BD%A0%E8%AF%A5%E5%A6%82%E4%BD%95%E5%9B%9E%E7%AD%94.md</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>各大互联网公司职级：<a href="http://www.sohu.com/a/322346396_99970452" target="_blank" rel="noopener">http://www.sohu.com/a/322346396_99970452</a></li>
<li><a href="https://www.zhihu.com/question/293502437?sort=created" target="_blank" rel="noopener">https://www.zhihu.com/question/293502437?sort=created</a></li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>高可用解决方案 | High Availability Solution</title>
    <url>/distributed-system/high-availability-solution/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="a595ca778891981af39d1289b3b39eb32d2aa02188a272172bacf6fdd7eab3a9">43bb87d26d40f1e13c5dbb8dfa6aa503d7861cbc7dfda7658acd292c301154ce321f94350ce697fafa4b2767bfefd6f57ac1fe97b0cf6785a487592cd4c89d6b9036437950fc75d75879ad1e7245af77d946abee9112b58a794118a05bc4d86f8e3785624030c6ddf29429078f192480534d3885b56df43b113be1c8ee7dc8424c05ce49c84157726d7483fd69589c9687adead5d8d746a719b12b66cd014bf9dbbf54cbea5d152f77480aec426df1c38c0f66cf778a972a2c8800f7406943ac6195dd4d66c150e792127ee8543159118aea2c1f0c8dca01482e20aa1218ab4ba248df9cc95694309db45d49dc5188ba6600c9131707aac78fdc5499991e8ef6fcb9cb5edd2596f85131f8fda1c8678cef39cbfdbbaa294efbbf9f08de194d48ecdfc3df9acc10252ee483e0a71d338cef5788277449d8f1118cbb0984364947475112d847ea87119ff2848a1a0cab51705f065df2517e47dc811792d41ee8922f63fbbf9a5bc668fb03ea6b3b36e2498e89e27fbc4f273fbb0f49bf9e5cb377b248608c45392d14c5b317abd5c5a055848cc871640aaa79c2b9f5a6652a780c5e5cc5723e1d3e5e25de9b3116f5589d4a23595de9e6266dabe78f9ef1df27e820b8b08a6565a6cbe5fedba69c417f5b3cf2bf01cd315a04832a60f2001aa95b7142c60846792065fadbfe33ce09eb3e318ef1dc44f1fd7edf7a628c262ad17869ffff7003877029329e3be184b883623683786c83b9adbadb4f6b189e117478e4cb9825548a67c31d25df84c62feb20c997d7242c459e79d6c48e7a53914e4f253c2bb94c34534a9159aa4d396bcd7082267972918ae7b1ef572a8e036b71f9dded77b28b15f40c3ba7698fc3e66759ee84fc200a3301541e0ab2d7ab58d0c3564134bfb75a9c8b50af3f895e3c0790b0109e6126be09925f18be84158c8722b1f15b3e427f03e3aa48ac34d3b49c56b0887f1eb61cedd8518d18004dc8817600b31081e3afb37c2361e974128d18be0e3380da24fa2b78ebdb3eb09e69efd42a92aa30e77c3bd64c43d92a4b955dfbe744c610ab900ef613d852c7728b64093871d0dee6976696617873443800f5c327410a4376fd0261a23acad0180f4c917200a1aebf30401684c4590127eb943b28dafc80d72246ef33ccd9321407917d660e5a01ef443fa93b33072aee96636f35e761504c7bee87e0de988cd3eeb28ff6d97e14e4ce13459cd7b42cd086f8c1edccdce00e46fd293743834b1c7e6ce960d7882364e000565c013da3b12c7ffda436d5a6cc8ffaedf6debd90c1e8076caa971b29140cd44dd29761b8a41767aaea7f0a8e4cae8f5b08949b348dc3c7890ffc4526060e649ca6b3e825b14ca7eded8e363ef55704bac2ec08f71e1dc711408115ad611bbbd6e7aca909ff508a5ae52e4a80c819fe93c2bbc6e6a0d9491e033e3415245b8b8ff0ae1b4642394222058c42fed32b7dca46cc84d78fa8bc82f03710dac69b6c9e4f5822cfa286bfe1e286f0434d3e9d693d816c4be3ac6962093d0710a39c5dfdfeb9a9a0ee8adf5ac7a87e144638ba822056534672b1862a43419fc28cdacde88ad828df41673f3cdfb5e75b64f156d625ac8beee97f1b4b4903e29f9e63f1bc2d7e35ef126a1f75bead563c090164afd6c31795ced7a096cff043993b60ad0c36f3b6f40cca10005476f62a5f7b904eb8f47f85229667acfb041dc6ec92242e70d43e8a1705fb733886e22d22407bfc9755307bfcdbe506bcf6a89f0b5d5dabe134bf1a0d403570b6849a97e3a4292090f893c332cc3a0929a5825cd25b25118a8dc633df04cef2956dd191577bde89f4bd2bbf829921a4699e014efcc0ba26f97a6dad890d655c705e3cc945e9745d4993d4eae77c4ca9a73ce7676916cf5e683a20519e029f03ce43f7840a4d1e532c99c8892a0a15e705128a76a59d41f423c74f1bd30692c8350cc5cbc3cbef5ffb560402a23877b34e83d71e007e3b14bf071fc8e3ea172baef65b930a1c71552db21818f2ac7c0d9e78e3f7af6b425dab7e3dc144cce86e91c764a4422dfb96493efb398ee258e0f602b71066d2c6665de08babedd57f0b6785b466c8233fceda3b9d0e435a446f9b14fc51affe68a5f3b5c0b1fbb38472ae4570b8c02aced8ff95e9cd9769330b998078e7377fe92fe3a2edf17cc21e58c551261a7bf2c05cc31d0ba5520315ac0e050d1d2ce40ccf21dd28625d2027d14805739613104498542a1288e0686a87b950f450b476c5feebcb51c4fb1626d402896596a81e36cd97b20353992758664feeb4caa5e05b87b4c8de6382dd9db65486fb15f25ed6ffe0766b49598e0f28bdf2b0578180fff3ea4b475da675030253cd0abb5f8a35361c31c5c665d3cd215f191d6f6c880adc50af9407f1652978ca32c652aad426e21c3b5af654602afc933638a7d75f73574f4aa3d01f59c3fa0f83b74dd6e8c6c394f328c08d20f370f87285a787da5e96d99c831836d8a83053ce5b6d5859f5ecb884e18ebde4a6f7b079b2357f645cc4a0630e81b07c5e815d49d55a66819a5f65bdc09006310ccbb3711895a5eaec9facda4533d0172c674326b7828ccca9b47f398ceae5deae38ae3d0fbf1357428c1645be6ad902d892653bf999139c8db1e54c76702ca9fbe3365777820c8de36266d36e9d60c748a3d185531f57bde046ca22f2025298ceaaa5e3c86489e0f18bd7f0187345e474271b8732bad2227bd04dcd3a6d04fc394127560f4ee547f80a295193f3ba8e8ae376f58a1c039ec2a8232078815307c7f9841003d04f39faf8dc9ef27bea7ef4bba6aac6b4bcc5a2afdf5cd482d11acffb29b3c789668d6b2eef81d04c1157568c1084874edbfd3bdf52eef2d6752dc13631fe8278539345b5316de8012787a2efb7cb04c662519b1a393494260bc5a52a7b2a3e2d658abedd02d7dd61c5669b56c3bad8deb34c6661b1e3782ef2be0bebfbd5371bdf5d82b5ff31f53eba26136d9ddd9ea7a7df0d6a0f6fbae67029f4745299a3a159495a688cff4538d26048651d8697fb6ca793ae28ad652c9cebcded7c7b46592685b490bd6ed670c369cc13e4f63c3eff5189d79fb07552c5cf5884660d37f24357ab14e22958c9bb04a130c4dcbcd0d62947596c828e92f6978c305b3e1a3073f3dc9b3e13281cd52bc3a545f7ace64c17848dc6c7434dff5b6147e0fe2de8277c04922cff5f6a45b9bf124368b47e1cfafc0547ea58a75293ca60c093c1031c947e4cfbc37b432fb4d2a77feea3102fa1754c436aa2c899f1c9e8f5cb0313cae0cd2bf6d69373538bae753f03a82f318bae45d6d10bc5e97153dd9de7c031134aac511d1f5af62d2d9ba1f96e5c2633107a9f70fe64c683fec563cc5394afb0a0943f8f1d8d8a741f891c31052aef4abc2ad363d4519b62c2bd8af5a3c57053103e5b55dfdb6e7bf12f655788cfbeee25298d1ff65ebb84c2b88c0071c71c051d5856583f8faf790da3b263aa7828b97c630d9f6cf6b494c78465ea304dfefb45f6c61417a804b68a94f3003cc0a7d745daf0fb60d518814defc54ee1d55327102ec04927511ea19ba2ce652b305aa87b61ec5dfff64d98d573edcb2b09a3f5488bf1b480c0449a70547bb1a57aaf5a66a0f263d37f83b539b3167a2e47544309abf406682af10867f254fbfb6a51b894cd6cba7f0f89fa018148666cabd110bfdeffabda8ca5b1ef8bc4fed92728b546f3937614eccbda2cf509bf2ee55e38ae1351b6f96d2565e9c3e5e59873597f99c9c0019cf9b1738e8221845f3243ed335ef8e575e943f4de28a79f0670e441098d64b3bf01028193abef2068702b9584975dd2f3e8321aa3216af56a59cfa44a15ffbdd90a3b83e2a539595b8525ae4716246b16335fb01c64b89332fed3e62ac08d87fb343a236c3f6f8b4d5f969181c1bed781773b31824fcccd5f181c8a443ffb47a54a06b904c28ebe9e4aa3151fe41399b7bb182f657fd167bb6cd22b209d68dc4aa4e6649a09a15dd0805237631ffe4eb54a0482a599d8c3b82a9e9adec039277cccf9b33568d800a18ac7b24b234be479af3643790072d28a81ab8863f26733449dd170dbff9ef27ea0c3e649a9fb0def0d1a299ea0f9f34f423b5f09a2e4135f2c60511063f54e0ae2f1c92eb9598dd93d8d9cc207675865289f4107edde1c842b393eb67b18cb549816fb81cc4bb7764e9fa76201e0166285cfe8a3fc5724e102e1c7c8a867b0fd56eccfccbbb60419ab362935e7dc8a5b0523043da66bad167933d72af2412ecfdc290585562a2b21ecc581ecd4e947c40fcfd068275f3bf5217a689d89fd8f457fb81b269790249f1ab223079993023711d566cc73aaf43c5409f7781df3de9daef4307b0e4d8e553b8cd8fb63072a4b9342b54794aba8879994440a886cd0f6f0a3f349ec25202c38c9ff418772759a318cf1946685f13b9e1f35250da3f2c65e5a624d36c7528800796d0010dfd4acfac03cfbfd925900ed7cdb14668b3567f6101da8957e5a2c7bae5b57d08e438a955ec045b22005d2208437d2089d0d38f7b67a7c6b3f0b8e395b94ae960d7f79e321191ee98e092189ec07b96b2444da58d7412533115ec301fb0279270cf6421992b0c0795fcbb58a419c3e0cca9eaa5232383becd1f90a6f61078a956102e116ce442fb85094ff8eb87499a7af0c6e99cf9119a4afb1496af04ba672a5e8612a5184614b6397e18538b0834638e1592843c49fd5d91d0e86330ac7d5982896607282ebf688fb0fac020dff9123f1780a32168b4e3ce4fa20f4993c1f2800e4636fdb4d9295f285d46cd290ee778439532e8f6332232b633018690aa4bc098e4e8d3d9d1b6b2d4ec1f2e982d2cacf1095586e160b5b6c6f6dbbb9b6f4381ceeb2cf52de646b08ab38cca36e2dd63ae890d7ff90f5709ef8f7371155ca0dea7bb249f8491d0947a5d8fb10e101a3716b31dc3c68f1bab8e217f1c2f7058b721a387d33585e25c1eacbbc9718fe606b36c2eee47d7444ae472a0a9000b39957592de430d873f476bcffb22c3cce98026b9ae46137efe00225a70ace985fa63c0e8e960a1886d8c5c09302a49bbecc03d42ac289907a48b88f6bca01c68dfb5e623ac4218068f4284d59da5f8812a901912ab9218a205011c97abb3178561a9b143a09e7c3a94a372cf52bdd2f8d3c0c10ba750de3f4cbe432fd5f2ceb798877daf6b0b1addf80a56d9347e774e85f33d74eb28ac44348bf28a12d6deb6248b38992a3ca7a14993d109743c9f30f70532b70f55115a29e8a27ed8651d6914962c08c281effa0f9db59a8cb2a4c9a25ec53d695e6f5dbde04bfec49c353851a48495e86769b2b8ed61f4f9272e5f741affed5522c66c71aa0841bec3741024c98142c8721cb33f52b15483a8c4c8c90010a75046314bc2eaab8f4bc7280ab927b6bb0635a7658a1acb40c14cf0a9ef5ae5d93163025736886b0da657969f12faf5a8855ebdd9dc0c4a7ff06dc80d250a4565e55609476cd66d91ec1b860d7a0bf7c20aa8e7ecf00959ad6bc58037db1a302ce76ffea6933b6429153f29b3ed1956a3ade660bf16d6a355cd2fc9894c0f7f05a229a0a8d7c4313e7e402a647facc6c46d982b855410a56855c422b58f6bf60ca5d950ec0e16c140ab4940b79791ead18d88602716005245c9c376c422f3b1ec9ea53e994284c6223e4f0b0518901e666caf9c337aa64c1635946db664bd073fe9e7efe2cef1b63abd92d52d2f051c6f274a5eb1e5eca03d8be33d24722b5782e232a5825551c60faabba9e259b0002d920d08d4dfd709da7512badeb5ce801bfa4aa5db36cd7e1c66b9998d433fe20b773300eff14c6741894660684206d61d2a2bc48b12afe4cc6f457cc8f320a2add7856780be8ed5457e23d40f2f13c01aaa8e7a61724973b080faa5e149114c7beda625e678233f89969384e3484a7e779231cba126099f3af81b7021a88b78356dd2b3f358a6af04d2831af67ae06b9c2e75ce565b497444b48cfe658fd0c95cbb1d5f0fd5f708c027496400b80ea2f5f5e06dd5f0522eccc31a079663667dd353835ad9690b75e1d364202cc7a9751ff120ca66157d770d24059ba921fcb5b21ec9bc4862f2e6c369aa6fcf2927e35f4e531de28f683a45f7342640e3d85e2215dbf77768cce39060ef4baa6641081ccffb1ffda3950ce9948c845c70c8beee0dc79cc95d72b321a5b9e5379f96fbe6eee194ffe3acc55e957e7c7aa0898fd2659e1b305e1b9c74f55e6e40b67affdaff6c0670be1eda6b186b93ed083f4987c826c495bfb220f559d9ce731e2757c8960afa0265b95f5b2e89f98ef770ef2449feedbc535dafba7bc25dbdc4930c5810d3c98ca9709bdf5f29c307508bcea16561fda7732f51035164d80421b7bb9518fd4a5d13678452aab501c474dc0da20c1edb07bb6c030fb496161821a00c7d8a183bd15c270e050a1707a156d923dfa50347450277dddb1656246eb73e1db2e5063074823bbf7257cf45ed847dedc782045c80d195da0b222925d442881548076a416d888828457cf1960f76dc1966e72a5a2807170b84a0b0509a8aa7c095943a2484b3333728aa9fdeb2e010ccc7769e2daeb91eb66204a2204ed23c1df7707b03560f1808d3876dc2b57c5ce86d92ab6524c0ef9379d5b86ab25adacc6d632dd104656fc770236bf14b65ffece12a76f5df8519fa3d3d2755a74ef8740d451e824c02da5bb2e80418061ff845d7d595d59e2abd26cad58efb23e4aef81e41cab650ca180eff351b6ca142b701facf8454c60a405d21438649cffb42ba949311fa4943c3442b7337ea1b0d2b21d7e382476e80c4d71ceb36d0edaa58716a7f8c4cd397d8d7cbe436c54c5defbbd9b44f9888c749462d72727a53a4582c84b16efbecf148a099415ff0fabf443348c94e1ee7c4554260dd0a070c3428e046853ed1f191a825845f3ca6efcd3c0e61e612959168fefdd724413d1e9ffc6bdec33e8bbd7352ad494fa9116b121ed6e6bf0c2968d24a8ba7dd7f34d6b6453644707b18e7322f40f82c70f413c7c50952155caf51f596c31842cf41373feed911762c624cbbad58dc21e6031ef33883e51e1d1f3affb98f57ae944adcd963e084d1ecb2f26c1c7eb00848f5932553333e3076b54adec4cc88460372b2229cabe7093fbd0f9385299835df69e12804b25f1a1552892506606e206724f457056bf592ed771e935f56b79d0386d2bca13c348c74a2f160a0818461118fe625ebccb4a1ab590d4be4ea23910fbb9b77af9f63694ed2fad3393f9cb7d9a3567dec10bde27979c1a271801a7521ebaa686e29ae6c1711971f7fad6b65fd4351264f5607b835e91f83a16074a0a9476045d47ca125bc8f7cadb3531de1c676431b4df2471aa16f0bd10b27e0cb2c82eb5d6899d34c51616b6a162bb99708223f0e6f1a46623354284ce5a92d035f9335ab6b4db6c35cd42e77706fe3d9597bdc212cca8f94d4ce54b46cc78b5e1ee3fe9d9c64bd95137097fe805a2a8f90b7bcb567610edd645d2ce3a24ca192ec5f74c3b64992da268dc929f35a2657c0b53f8a165eaa318f526b47e1994ea1580c1ec1e42a7a71e7812138ab8015cd076919ea4ec276ab916808bde03542deaccc678bf6840fc075730defd97f3f425806accd9960a5b3a96c0e244732a5e2a69732e607284a03cf3b4d6c2461d81995de7d907ccd3fc07632b924ef4dec2451d50479928e4fed5bc3161b24ea3b34963f144d174ef081e4a972593fc63779d0beb0f8d499cdaa3e0beb708c65be7366a0612e5d4821abc3272621dba3e07c141a34a28120c80a83ba64c9a54f8ae0fbbb8c9cf0424b4df431464b1799a73006f0ca37b8f360141d4aa50965b8f9f8df5fc950ff6977c2a2afd4329c019521e0d738685de802815d5b64aa91be1569721e08a66ad65000747690cd44e77adf24251cb983e81d54dc28791e1ef3f777745c37a0e93e165c16a0f842aae1b6b64a8a9847ea8f0ff9561f4db3c85495374c0df761c1c3cfa79311400205160af4f92fce0fc334bc07d59751bb27b14795209fb430184b0bf8a07362b1868029283e09c1de7aa78b320ed7daf6c46a934397bb258ced63c7200a0e73bfaf1e9f58b34853f752b4a5a8bc19bef52af0cb7fa4f920086fa11fc7e6d91df2fd86d5e6b211192e53df189313eb6c9f5833150161aee7325b7f0fc38f8371cfd583523273cf2ed46bf8d20ed516b8d6c094d5b129583edd2193de21cd7e13eb0dbb78509477fe62ce5321251a744394f8c0a446e1fe0c05bb93333c338db817fadfb9afd7c5ea55a060245695cea64696d14d1b0bff5f3eaa2657b154344fe55d1ec8d987e1bbb48e14055a99104efb560985a142bf6dcdf6aa4fb14bfd48e99ea298e87ddf75958c6d985a25ed51b068aa66f030135b280a83ddd5615bddcb49a65b3ca8ff1fe187826f49753be3dc9307fa46d9efdac92dacf2b89bba1643452a058be92d04990052886c12033ab3ae7a8ae2a1aeb421e698b0a3aeac53579dbfd3bc376adaa9252b22c231865fe772dcbce633c8ad607ffbcd7af2caedb4e08ed3544526c2cf44e45f00c32a4c1342f070781b5f00617c22758c887599713ee0d3d1dd1f725623e488a6ae2e80a4f82bdcffc8783dacf621866223a8c4e5311c2198ef42cb8072f0e14c0b3fb35582c7b7d6f4b835a346d46618c51ffe42700313fc5cdcbba4e681bcdaa58e5d449d10f9fd5d9d6255e0dba4b5edee1489a1c6bc349dad58cafafaa84dd1095d3223c9e1740cd06f785f588ee0fbebf55b43ef6e8b790ad9f04a5551502e6339920beccbd3a6a7b870509e10c519ba0d2c10305f11e6789643ab28861fc3dffadb27a8a8536903d7256f999f86541a4f0bf7abad2f4aec43d4571d749dfbf5d326e38a66a4c72a938efe381cecb69bedfa65c7bf3826302844733124f4d8b71b2c7dcde858e1c883522a4b5e087e10567e6465e8956966b71202f73459ed19785f067bcf72a256171b3249fcf0ce5d1235244c4bcdb9f941e3fff6b4d20350039960f9508a3b88bf8717b15013b0945745c524f76cc290af5e487504b82ca1eb6aa3601eaa1d952b355a57a99a4bfde23f18be70404a151dc138a57ebdad62a365d1d76127f4fa8818e084c3c153e1ac940139a65f48d71feaa7494750ecc602fbfedc92289b33e65a816075b0b1b1d17c9d6e93f98407ca17b0f49dfc9bc81885408d2bc9e5261099c96fc882e5bf4f1a665dd2e5ebc746ce242f91b11ed952938de81d8f9cd233438769de304ef8ea52694f6fcb5815059fa3ab81afa997f117cef7a70385d38b60d5bed8170916af85152be77e97879dc733ddd64207a063a7f77141dd088a72769cc1c89647462c4891c5573b911b5aab01527b735e964033926a58ddb4c4208e87498a2341e451e64539e9e416d22fd1d544153fa1f08f3924ea7b6ae12e71943621c84395b92fd37700912bc6fa131ca75d3d3f43bad569c512f6fa02686439d079aab869d60be73123272d126a229261e6aa72b79c35961f824e27fdfa33c1aeababb261e114c48c9b5fe2fbe20e492a4531d526365e19bf084146de99cdd2bb7141a3a6f1a4c7a463d3fd9c095d3c5d973a26036e5339ed52e5ef70f5e7cde1b0cdb267430da53762a37ca320ee98112e729080597e527b261294d875804ebc0d1860247111db9e4606902664a012eadaf2e49942a30ad2326839da5ae96fe2fa5f6b64df0169875be3a5574ad7575a96f9123c836b3069520633bf3966a7a90260a0c1b936139ff8e2aa44fd9533383e14aaa0d017aa42b2c3113c0ab0043fd4d76b72c101f4503a10f841cbbe6de1010f22f5b847995357e47badfec4b073ddfb29de1f9c7c03aea633168438fbd47819fb6b7d2c3f89279a6459242bf17241a3d83fc27e9bfbe989918316d6797d1cfe54dac1fc5f46371e6f93a0ee5622895e7dd908541f050025ea2011bc49c6c083636015e1536cb2f5b49f71b5c05f31891249ad30353c357ca8fa7f77ebb9d1e1d63258e58272b6bd7e8901704f455d17fbe2e551a7468c0e8a1216ec67964a9803c37af51826be5e3e5880e5c2ebb70df41b825537e3c34aef684be37595460d78218e81db752e027c899b8ef1610e951df7775a2de4b95593aabffa434899a4cc6a4715005815986a0275c81d58711ba95e54c45717ddb4494baf1951d77cd060009b2b3a0f1abae0f773b6cbc3e9964a3d10b7e9389fe5e967c9fb5ac98f7f5bc00014e4959b265134d14baf39f78eb8dc39eb0b22e4c5803c4e36c0b7f18c012d8f37d7e79f5339f7faee706a3700180fde7817965b4cc5722276f6b83658b1a7be35d5476bc51d68834d4ae57f4e39820363fde7b9dfb6229021cf67dd430dcfa41ca35a987034e8cf3768e5434bdf9c965da2cfbbc239f71e955afe85e334f5fd2a5079008c5171f65e0efc7ff31e9db4963d6d05d43880245f379cd49ae14aa2be38be81e9ca44d42688a84da8baa2a9a0226e1b570d3900a16ce6424ac12bcf5fc8b4a315f895e8bce0d3ab0206ad956c29fcc8c486b1b5521fe347a912971d88af6e3bc28711a211b7340e3f9b21af979aab3f46377cc754000ab370a22aeadeaefa90f8d67e256810698f5b4282da5f5dfcf1d625a5231275aa854d062f64c02b662680e5e4ac43b89ee05f704804c51baf7fbf1491aedd6f5bf6bda2063ce71cf36c72df960dc8675d0d2b31a069bf52623ee55b91ac178484f77025d17913130ed74bc492178ebf25f997b06f0b3d441e3d3509bb38983240ec7dee91c78b10027adbac53ffcf8779025b79803dd06ee5e21153c7281d71ee54da374c00e55bb5e0dba11a048cd47e1dc5b22da3cb7755516a0addca6a0fc316c23ab2fc9e0541e426dc8f17b2522f7559c34c689d65c95561edec99c4610112722c54c9f2973d994c7d970c562d1c0eb5872ee2ec478efddf6130175eb31cbb93dcb7d263c98e0e10ad8d425c10113badf03a4c2b7405ca057b1470f5d96e579fcee7e1d1385f9d2eaa8ad35031019c2a4c09183f0711e6262a299593f4912471202c2173b98e600a959935fb51b82b2bb4339f0d2e529225bfdf7f0d6cfecbe7454e5bf5f0ad667d254bb66e0b5d5cd9d0afc01396116c4dfef014a5de322b8691fbb29e93fcd01b795a9f7f9d1778a88d73eb748918dce21e847b5a543525c8de6a40c4cc25fc015a9661a6a57a065ea091d2d2cdb5a0a0d3f60f37ed884121d4198e4ceaadec9a468744f029faec2c34182852609f3f32548013843136d20765d78eab7ffc0fff38fce87b8c2d24a2108b5bb5f8dbc3787ba47cb075fd71e27c4d8eed044458c0190f6a0ea09920d0514ff8693f3fa468fdea9bdcaff9526ed4d7187076b13c87051a8737ad695c88cc446a6658a5592b7a7a7b48c9a77c3c14bdf58ebead77043fadaba19e258d8af9b83599b829e19f7ce51f2bea831850894d18ba23ba569e0b3f16a8583b23c4f6fdcabfb77b1db7ab738c69c0404d3bce78ca92b760afc4921e3c42c35c0c78e6fe9e1e2106532910383de3f9700426381dec815cb4c26f9955d9ed140707994278f6957e84dc6877a9d8b1b622968c69a5fb9aaee64223b1bbc064b28357b86cf5c8e86d69f3854e5a143436ab0525c228e2cc7bc87fe6612de41b7f30c17338ef14d92cf4d53e4a7e74bf2f7acf04cf29c8a9d2a950f9583237292eeed455f57affbf080d85507921f9ff50431b381e68ca0a1352b8c15eb59959a1e1722b95655d66397c17b2151e9eb282624a8aa22193f0e84efd631df62ca92b21a2a1d21fd7a43f164aa4d021d79a4851f748497e14ab42052776db6655eb480701ddeff2e9de4392e1aadef6227550c96b7233b14572bc5cf0106276caf1b033c77e53dbdece872df39a95fc1738a9011fdce4e311b2ca3f7d7345fbb6c3b197fea3ea355e0140d4f78fb38273dec450cbdfc00c4d92f2a8e768d10a1fad85e0ba7dc5555f042776101f321e6ecbd601f70fb23c7e33fae57e2204cf258f719b1487ad1019d98805af9cde5843ff9eb5bd180c6ac5f6af75a707c1a06b5c4b764d50e2b582a70fb462fabb1bd89a789978a98469d6aface416711825901b59a7514f009e69440723abc9dc2bfa999bad077b6abfb135dae040575994670c9f4fc69c402c60dbe474d33a99d969a3acfefb9fc59bf03d31239a920206cbab731a20b135aabd0d34eb5b205c0f2535cab2401364caa375ff782265a1df9fc342c5c510e3bc289ac7075974f135891489ccbea776a263ae69f9a882ba6a08ec53773756d0fdbeaf02a27b6ccfb508cdad6a1160bc2bac6982347db07b59114130938e2fe12eeed8654c08d473f95691b73203928e41beb454435cca33761dbf571b4dc93ef64a7efcaa5d91ca0edbac5dda3f98066180775f4b6dd5a95bd4b699fb56fe45a76846e5f3c0f7f35a901d944bfe353b475edc1a0a32fe3fae1645848791930c3a5b116f8fcbe45c0c94e4e68d59e2630210142bf175b97a664216979034fe1180b6581e61762facf22f4b97a7a015e51de8e04f9290ce6acdcf827acf41e915a8f78fdc148b05d44e2deb79122cf00a5a3167fd16167cec5b4420fd813b0a756067934954c2388552dd96e41a2a4133048f9faa1d243f9132e8ad57ff9ed10cb7a106e74a8d587169c7f3af4d9a6c0984205a73c3fb532c507d3488037e378c81f764afb35e051cf34456c694cfb442ca1ce1cffbeac5413e4714f75a4a2207510a746d64d94d01fe565927c95756ee89d47eb0cce00fb20e5c26b47cbd6e8d8497e066298c539868097c7d3f3f0a03e02d31c44f310851a2358ff8480b8490642ce15028946b6c3d8f4b4bda72eb2d8dff22461fbdf0af7f802ed9031548b6a86eab7da44d1a05e871843a1d6e1cf99c5767315c58fd38e64c78eb8c69b66872199a82888617a9b51b77535fea073e9c25d193277206c72c89b07a9066a159c3937f9baff86b3dcdcb8c2d610d51daa2b4989e594b2de6161b628fe9bf0398846c371d1673d63159f915e250cc80de835da64aedcb3b8297fdbf541c01f6620fe53ac6896fd1418a7d7d7863994b9ee329a6da3bcf8cc115fd6e040ea748651e3083675ccf661f29d820363384906697e25e028f8d64fa2b21e49f782104b7e866d1fac9d75558d9006145d1e9ebdaecd4f79d6f0805fdaf29e855ac73cdfc7478aeac6b9f856801061e44202bdce266bf1236afadebdcb79cb4aa8424132389cd320887d6a968f8d3d15aae073721b773131df66885e0b35d50e05e6a7f221b819dfe71ff053f1b94ec63a8b96c8d460d2b045840582dce99ea93a65366eb54df55b8ac16c463f06067f8cc064f58258601d083029027a4c0f8bf08221a7ca22bc39715391a71a6edbf0b82a48a9d3ae07ecd1600f5d708ceb9a824beabc8701c69f096e412a0a5fbb198bb92b1d02f84eed90aaf260060d3842ce90b3b100b49b064623557a7181e566dd640d7fa4e57c29520d9689c7538c0f03781251d27f034d1ffda968919e8420741b999df6f622686d6b85c204e63f4031141ec0d59f17477b80ec5e2c52b91663f5b0567329605ce0b3e886942f75df0a41e4b35efda1bb65e61f79615be2f131b2788af9dbf618e8067f87f6e213ef523560ba5ae6d07efaab67878cc0f092331833bdfb53f1dd7cc99d9bc401509a458727677c6a0273b41d62a70f12903f8b58798e6521fc6a5cf9141d11b0a947a726f6856d41a3ad1cfe7dc74c137bf588cb4c01ed5ce2c8eb304e2ab0b9958784f3372fe032ef2c89a87b323a756fc61ce818072cb26a2546572637f7d675ffcd5794811558fac7dac6cefb6bf7c078760c1153adb5136342da72116dc47364f77a91b419a1204af3c016d663508278d4fae5a701d802f5b8daa845d660cb157337ceeef0536c2989fbd7eea8845953dd1672feb7c8c4c7ce6756a7bf62309e4921d745ba4f07c4384368e48194a10fbb344ed4615fd6e0805ad1f8d6ee14efa87487d36ec5817d63b7de004a688466d585db3825d758ba14b26398c529241a05930e4752575c0a8f522440f377cb8f630c140977a00d0b9ea4ed4abff79830f0437fa0e7d1950b9d9c103476aacf70046de3017a148d8361e030ad5e34c465a21690a5b759bbf7e8a43ed63fcf88fb4f2c1e61fd24cc6e71a22f107ce7349f0f81f3e49c10ae313a4095ef3177e58b1a30394af03da3a2608a8eb4caa5c451f1017cbd564f08bce9796e9c6056c4d5ad87f43e76e63b6bd830f49b897c840496bd41c96d1c8fb04745a116817824bfb5fce89d61e027d86f9df834c7f09d066400e3933d149f59774dbf21b94406bba1b5decb67d50ffac5a36e4800dd6d08008363c2310ee2dc951c06aa1bc78f1159ffe52eaa16b111b7bb9ef8caaa1cfd82abb0b511b236d9631c8ebb59a73342574030318ceb2df968ca79f1e099793de84650e3992f198c5c1c9af54382ff9be30a11f1ca8f0cec208d034b47a72c7e92587a14ee2cde590ec5f7079341f5f54dce9df476a72d297a5b01bead5a73608778701972d47e25c93e0cf7d5035d930475b2b85746150a00bf7d898df982cac356fb73155af031a2c369ff633ed517abe4ef80a7704edefe707449f6e28ff45fe73da5b8c20261b64da43a93179e6572c0739e1ca24dafcb5d0867970ab20950cfe2fb113de8635f0d5f137e7ce7af32fe285ad1d1ea6ad04ca5b0bfac1ac35997f0fd95520f925f590ae002b1f72d4175acb1242e42ecc23d8db89edc6a92e4ee7a480f535c1ff4fc2c17c28ea0b81eb3c7c20294c2163eb3a20802ec64177468c42ab12412473e8060b26e2469246621c49bb13095b65a8f33ff786327fa62b4389ad25ba2eb57a210387f7575512015ee4d61dfb346b3db8181f58650637b3bf918028956fbf51ff9b2c9a88899f7d39105a01d73b7935303a3118bdcf1db8ccd7456f69dc2d5ead329800f62350131d496e8fccfa735fbfecb5d648c23bc707562fbcff28c0def1bce5ffc065d2a14c9ed2aeeaaef909941315d3bee6202161aac78e45326b2f6a3d8c353c78339890c088227f74a1d736be5e14585f7f0d55f11812e25bd0e646f5bda1ffe5379bf07c9c6254e08c992cf89555369e4f0a6f46f583c4fc3c107c87aded98ac182eaefaf90eed6cd24801a349210eb3e05fdcac8f77367699bc06c246246dd3218a365a21c12f64f61ade4634ac8c505613e63aa463d0e43da8eacf0d8c434a7ff347fe26ba000ac8cf0c11cf8bb59aa774585ba2846c422ea62639af7f634f74ade655c82046b9d3c3e08d7a401466ac7446000632ed8156f5d75b7f30c58662f90110a99dac06482da95a1f2741f087217a9b73e87aef4b44ad4bf87d3dd8bb76a9efa64e313815511617cefd84d786d8f618e574614a59cf41e99609e64187d578397d02c6ee0559962f528d1a8f8a15cd5a13a48ea24e8a6e814a071dc44ee70422241c8cbb10fc4cb81ea401013fceef2beff66d10f36e52578798ccad8a3d6e34e2e2d44d241093ee79770d047c2b7e792f9dad667f506e56caa947368f9df470cbf63faf2551a73a257faa67776e72cd4c7169050b8b682074bef2cab018756394638338e2d60da81a518b48f6d0c329e7067b2f7e2772b398d16350fca26991ebd422b66ad9d401eb0fc9c05d407172c79829b24c80b7b75a2f0c346ccb98e258fbc75fae58c03fc44809922bcc0d0423afc3443f0a318faf31f4104ab2c475efeeaf10335c7be8bea736ce3be0d6b266e5f5670d1a4bcb334162d1eb13d5f7eb4a874bb6216f251098c15ec3f548fc36d96961804aba1f82038ac7c5e6859d8ccbe3ec33bc9889b8e755a7f4329c4ccc3e04e51ba134c84e7f8fc74e6cf97b8afc98e45f1b875f345c350e7ed</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>distributed-system</category>
      </categories>
      <tags>
        <tag>分布式系统</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 命令行工具 | Java Terminal</title>
    <url>/language/java/java-terminal/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>生产环境中排查问题，没办法打断点，可能也没办法加日志（加日志重发就太傻了，而且会破坏现场）、没法用可视化工具。此时，就需要借助一些java自带的命令行工具了。</p>
<a id="more"></a>

<h3 id="java"><a href="#java" class="headerlink" title="java"></a>java</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前虚拟机的默认jvm参数</span></span><br><span class="line">java -XX:+PrintFlagsFinal -version</span><br></pre></td></tr></table></figure>

<h3 id="javac"><a href="#javac" class="headerlink" title="javac"></a>javac</h3><p>编译器</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">javac ClassA.java</span><br></pre></td></tr></table></figure>

<h3 id="javap"><a href="#javap" class="headerlink" title="javap"></a>javap</h3><p>反编译</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">javap -c -l Person.class</span><br></pre></td></tr></table></figure>

<h3 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h3><p>Java Virtual Machine Process Status Tool</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看所有正在运行的java程序</span></span><br><span class="line">jps</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有正在运行的java程序，同时显示启动类的全类名</span></span><br><span class="line">jps -l</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看传递给 main() 函数的参数</span></span><br><span class="line">jps -m</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看启动时的 JVM 参数</span></span><br><span class="line">jps -v</span><br></pre></td></tr></table></figure>

<h3 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h3><h3 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h3><p>Java Virtual Machine statistics monitoring tool</p>
<p>查看 GC 信息，命令为：<br>jstat -gcutil [pid] [interval(ms)] [count]<br>或者<br>jstat -gc [pid] [interval(ms)] [count]<br>第二个命令比第一个命令的输出更详细</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 每秒查看一次GC信息，共查看十次</span><br><span class="line">jstat -gcutil [pid] 1000 10</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user:~$ jstat -gcutil 73314 1000 1</span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   </span><br><span class="line"> 37.52   0.00  23.96  42.01  96.85  93.16    907   45.004    16    5.981   50.985</span><br></pre></td></tr></table></figure>

<p>输出中，各项的意义为：</p>
<ul>
<li>S0，年轻代的 Survivor Space 0 （其中一个S区）的已使用空间，</li>
<li>S1，年轻代的 Survivor Space 1 （另一个S区）的已使用空间，</li>
<li>E，年轻代的 Eden 区的已使用空间</li>
<li>O，老年代已使用空间</li>
<li>M，元数据空间（JDK8中对方法区的实现，以前叫永久代）的已使用空间</li>
<li>YGC，启动以来 YoungGC 的总次数</li>
<li>YGCT，启动以来 YoungGC 的总耗时，单位为秒</li>
<li>FGC，启动以来 FullGC 的总次数</li>
<li>FGCT，启动以来 FullGC 的总耗时，单位为秒</li>
<li>GCT，启动以来用于垃圾回收的总时间，单位为秒</li>
</ul>
<p>查看类加载情况，命令为：<br>jstat -class [pid]</p>
<h3 id="jinfo"><a href="#jinfo" class="headerlink" title="jinfo"></a>jinfo</h3><p>configuration info</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示运行的进程参数与jvm参数</span></span><br><span class="line">jinfo -flags [pid]</span><br></pre></td></tr></table></figure>

<p>jinfo 可以在不重启虚拟机的情况下，动态修改 JVM 的参数，语法为：<br>jinfo -flag [+|-]name [pid]</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jinfo  -flag  +PrintGC 17340</span><br></pre></td></tr></table></figure>

<h3 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h3><p>memory map</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 触发一次full gc，并输出存活的实例个数及大小</span></span><br><span class="line">jmap -histo:live [pid]</span><br><span class="line"><span class="meta">#</span><span class="bash"> dump内存堆栈</span></span><br><span class="line">jmap -dump:format=b,file=/tmp/heap.bin [pid]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前的堆配置和占用情况</span></span><br><span class="line">jmap -heap [pid]</span><br></pre></td></tr></table></figure>

<h3 id="jhat"><a href="#jhat" class="headerlink" title="jhat"></a>jhat</h3><p>Java Heap Analysis Tool<br>用于分析堆转储文件（dump文件），jhat 会开启一个 HTTP 服务器，让用户可以在浏览器上查看分析结果。</p>
<h3 id="图形化工具"><a href="#图形化工具" class="headerlink" title="图形化工具"></a>图形化工具</h3><ul>
<li>JConsole</li>
<li>Visual VM</li>
</ul>
<h3 id="线上问题排查实例"><a href="#线上问题排查实例" class="headerlink" title="线上问题排查实例"></a>线上问题排查实例</h3><h4 id="服务运行缓慢"><a href="#服务运行缓慢" class="headerlink" title="服务运行缓慢"></a>服务运行缓慢</h4><p>用top命令查看CPU占用情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure>

<p>找到最占CPU的进程，查看这个进程内的各个线程的CPU占用情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">top -Hp [pid]</span><br></pre></td></tr></table></figure>

<p>如果是混布的服务，用<code>ps</code>查找相应的进程：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ps -ef | grep [application_name]</span><br></pre></td></tr></table></figure>

<p>如果服务没有打印GC日志，用如下命令查看GC情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jstat -gcutils [pid] [interval_mills] [count]</span><br></pre></td></tr></table></figure>

<p>如果是频繁FullGC，dump堆栈：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jmap -dump:format&#x3D;b,file&#x3D;&#x2F;tmp&#x2F;heap.bin [pid]</span><br></pre></td></tr></table></figure>

<p>dump下来的文件拉取到本地，用MAT进行分析，选择 Leak Suspect ，可以分析内存泄漏。</p>
<p>如果GC正常，进一步查看线程情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jstack [pid]</span><br></pre></td></tr></table></figure>

<p>也可以dump线程堆栈：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jstack [pid] file_path</span><br></pre></td></tr></table></figure>
<p>dump下来的线程堆栈，可以用 IBM Thread and Monitor Dump Analyzer for Java 分析。</p>
<p>如果到目前都一切正常，查看相应接口中是否有调用外部接口，查看外部接口的耗时。<br>如果外部接口耗时非常高，可以进一步到提供方机器上查看提供方的耗时。如果提供方耗时很低，消费方耗时很高，需要考虑网络情况：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ping -n [count] 提供方IP</span><br></pre></td></tr></table></figure>

<p>如果网络延迟正常，需要查看是否该接口传输的数据量过大。</p>
<p>其他原因包括：<br>堆外内存泄露（DirectByteBuffer、数据库连接泄露）<br>CodeCache溢出（JVM将热点代码编译为本地机器码放入CodeCache，如果CodeCache溢出，则热点代码无法编译为机器码）</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://tech.meituan.com/2016/09/30/mt-trip-springmvc-service-annotation-problem-research.html" target="_blank" rel="noopener">https://tech.meituan.com/2016/09/30/mt-trip-springmvc-service-annotation-problem-research.html</a><br>Java生产环境下问题排查 ：<a href="https://www.wangtianyi.top/blog/2018/07/20/javasheng-chan-huan-jing-xia-wen-ti-pai-cha/?utm_source=github&amp;utm_medium=github" target="_blank" rel="noopener">https://www.wangtianyi.top/blog/2018/07/20/javasheng-chan-huan-jing-xia-wen-ti-pai-cha/?utm_source=github&amp;utm_medium=github</a><br>Memory Analyzer (MAT)：<a href="http://www.eclipse.org/mat/" target="_blank" rel="noopener">http://www.eclipse.org/mat/</a><br>IBM Thread and Monitor Dump Analyzer for Java（可用于分析线程的dump文件）：<a href="https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=2245aa39-fa5c-4475-b891-14c205f7333c" target="_blank" rel="noopener">https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=2245aa39-fa5c-4475-b891-14c205f7333c</a><br>JVM自带内存分析工具详解：<a href="https://blog.csdn.net/wangxiaotongfan/article/details/82560739" target="_blank" rel="noopener">https://blog.csdn.net/wangxiaotongfan/article/details/82560739</a><br>jstat命令查看jvm的GC情况：<a href="https://www.cnblogs.com/yjd_hycf_space/p/7755633.html" target="_blank" rel="noopener">https://www.cnblogs.com/yjd_hycf_space/p/7755633.html</a><br>JVM调优命令-jstat：<a href="https://www.cnblogs.com/myna/p/7567769.html" target="_blank" rel="noopener">https://www.cnblogs.com/myna/p/7567769.html</a></p>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>GC 日志 | JVM GC Log</title>
    <url>/jvm/jvm-gc-log/</url>
    <content><![CDATA[<h3 id="相关参数"><a href="#相关参数" class="headerlink" title="相关参数"></a>相关参数</h3><p>JDK8 中，GC 相关的参数主要有：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-XX:+PrintGC 输出简要GC日志</span><br><span class="line">-XX:+PrintGCDetails 输出详细GC日志</span><br><span class="line">-Xloggc:gc.log  输出GC日志到文件</span><br><span class="line">-XX:+PrintGCTimeStamps 输出GC的时间戳（以JVM启动到当期的总时长的时间戳形式）</span><br><span class="line">-XX:+PrintGCDateStamps 输出GC的时间戳（以日期的形式，如 2013-05-04T21:53:59.234+0800）</span><br><span class="line">-XX:+PrintGCApplicationStoppedTime</span><br><span class="line">-XX:+PrintGCApplicationConcurrentTime 输出应用在JVM停止应用线程的操作之间运行的时间</span><br><span class="line">-XX:+PrintHeapAtGC 在进行GC的前后打印出堆的信息</span><br><span class="line">-verbose:gc</span><br><span class="line">-XX:+PrintReferenceGC 打印年轻代各个引用的数量以及时长</span><br></pre></td></tr></table></figure>

<h4 id="打印简要的GC信息"><a href="#打印简要的GC信息" class="headerlink" title="打印简要的GC信息"></a>打印简要的GC信息</h4><p>使用参数 <code>-XX:+PrintGC</code> 或 <code>-verbose:gc</code>。效果等同，但是JDK9中， <code>-XX:+PrintGC</code> 被标记为 <code>deprecated</code>，建议使用 <code>-verbose:gc</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[GC (Allocation Failure)  4492302K-&gt;1526694K(4582400K), 0.4023632 secs]</span><br></pre></td></tr></table></figure>

<p><code>GC</code> 标识是一次 YGC<br><code>Allocation Failure</code> 是导致GC的原因<br><code>4492302K-&gt;1526694K(4582400K)</code> 第一个数字是GC之前的堆大小，第二个数字是GC之后的堆大小，第三个数字是堆的总大小<br><code>0.0041139 secs</code> 表示本次GC的总耗时</p>
<h4 id="打印详细的GC信息"><a href="#打印详细的GC信息" class="headerlink" title="打印详细的GC信息"></a>打印详细的GC信息</h4><p>使用 <code>-XX:+PrintGCDetails</code> 参数。</p>
<h4 id="打印GC的时间"><a href="#打印GC的时间" class="headerlink" title="打印GC的时间"></a>打印GC的时间</h4><p>使用参数 <code>-XX:+PrintGCTimeStamps</code> 或 <code>-XX:+PrintGCDateStamps</code>。</p>
<p>两者的区别是：<br><code>-XX:+PrintGCTimeStamps</code> 打印的时间是从JVM启动开始的时间戳<br><code>-XX:+PrintGCDateStamps</code> 打印的时间是日期形式。</p>
<h3 id="GC-的触发类型"><a href="#GC-的触发类型" class="headerlink" title="GC 的触发类型"></a>GC 的触发类型</h3><p>Allocation Failure<br>没有足够空间分配对象，触发 YoungGC</p>
<p>GCLocker Initiated GC</p>
<p>Promotion Failure<br>担保失败，老年代没有足够的连续空间来容纳晋升对象，触发 FullGC</p>
<p>Concurrent Mode Failure<br>CMS运行过程中，老年代空间不足以分配新的对象，触发 FullGC</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://juejin.im/post/5c80b0f451882532cd57b541" target="_blank" rel="noopener">https://juejin.im/post/5c80b0f451882532cd57b541</a><br><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/felog001.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/felog001.html</a></p>
]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>单例模式 | Singleton Pattern</title>
    <url>/design-pattern/singleton-pattern/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="bd3ca2c66f882e3ce4397f196bde053f0f763bd452b0655b0580455e66c1373a">43bb87d26d40f1e13c5dbb8dfa6aa503d7861cbc7dfda7658acd292c301154ce321f94350ce697fafa4b2767bfefd6f57ac1fe97b0cf6785a487592cd4c89d6b9036437950fc75d75879ad1e7245af77626e466bfd44594e003b0cfbce8703d9511ab3bf80d625fac91d2f46ecb1c408f64ad72723d9b97f7b7c6eea346020b32fecb147547bcb3e8df05c6fbb7f1fcf51891cc0797cdbe5f57ffcf6c4b83beb551ae7ea98013848c0d2d02e5086a11675141ebd2685a12951c5f6b516b99c91e42ad563a553ef6fc59d63ee72a86e9a7bc99bccc5de136374fb36388e0080e9cb6fd044e3c252fe715935fd50a1a16c97516f008f2070e1f95a0d31f4f547d8cbc40dffc2593a2dd7356c96268972560f62b12e1fc27d4b79c4e5c449ef85f4941a0dd1eeb7a8ba1c1049163bb92ba8d893d9047865e0ed99f3eb892f37542dda26654dacd1328d04396587993239722068a8543d655a27720f3388f03e0e3a488dce551a33188727d99d097be16be1e8d2e5b7583bc827843cf0a176297e01393b1d57ebd404a62ec22c3eb79d75a9811312bdfa946041fccd2fb0c23ef003e6908f4cc9b3f70093aeec21b88fc3d37d7d958a26a45532fd73d7675622b2724f1c3f3697b2bf2ee19a7d83f3ba12aa1b82089ed25ccf8cb1fff1492268faa36a18adcfa6de1d47dfac715556f43e54734a30c6d0aea4574f59761fdebd1bd14ddfd9f8a37bc8414a04bcb9caa135ca09e323e86e22933151e744cbf1a5381a128861ccc79e3b8d075dd9be3b39f4ee2453194d10bb24e26f865fe73fff0b979406232ddf6240999dffdd170e5ccf6f40d7b50fababe1580e26fd92b28cbd4690392973f06f422186f92cbd5442f0bb3ed519b0a41e3a42d77a0911e38bc74323320432cae66494505dc5074549638170b8d4ca2ec9ce3fa04ea5ae80a4f036cc53425dec2e6a38f9ebcc8265b2afb2128193834d5962adb7deb6f63e88a4a65a8fa291ef4de646cb00795df3c94d06a0f912a473de3a9afed3d4db1567e0333df8a0908ee7cb4519074f3c8f52c712add487550b237bd3b6e4babab75e5413846af95db4979f1897e5809c2302427ec72c709839fad2a8cf50515e38cc568e4dcb09b411eb1990660f69503b9e91c8d335d0948d4153af7944cdda3fd1b0a4d8030762cf6ee3ec9133cd0b63f8b5483d317f921aca028595eec7c5a180aefbc3773686df1199a70bd5c1c27d6716541d846500b249b9f7e824996a7b8e9845daaeaf4402b654f616457a0e2474249655ce8a6b740c528a444860c6f69ba4e22b3724656ae33060ca184e87ca7587099df004bd4232c4b4e659f4b9beb53bd165142124b3c2727287ff6a436c15c934e11c5b853b9cc043959ad01ae67ff5af4760404bd465d1740f1f443c44b8b52482328757fddce8b1fe9812cef01d919f2b0ce3a80f9760e29fd12e2d398f31924dd333a83fe8b6d875a0d8da9609bed694e1efd5091a0b9f5a91dd84e6ee04876d89bafd0e28b883977baba86aa4c8e39045c8d887eb9d3929921a90b301e5a5e9da69f965b6ee3fc088adcc241dcdd9de1243c378f4b51693864d040d37af6462f412d7a1c74ec315f37339b44d185281193fce07164c94a7a248f1e3b2f3b71c1691e902909859a6471d08a85f08a8b53f1faa0243877d93716062708eaef6cddf55d7ca690f3bfd0e094d76c332d8c51b63af366665f94fc6605866eca786950401d92cca7b6521b563573387cd1bde944c19b78a765c7aa5a5a73f6c5eb3dda08f0f6bc3158db1b1d4729e4ec554345ab63e07194baca91acb58a29226591e66b21c993994d356f192d4ad64fdd6704569a5720aeed77d9883c45a876472d06af81f36865b471117f4acfb657b696850693f4f004a044363b0bfa59ba26e516a7b976a867b70debbc6f41dac88befcc7615668d9abf3592e07e6f15b0cbfdc0c051a90e211bfe774c60868928a020dd0e2563ead0d235af6e93c3cfb9ba37b8670f5b19c6b7bf8b83ba0e87f14ae32a1abef5df72646e843e173a446873d1695054e758dcc3b21739c699a240dcc3421accaff7b9283df0a909df96d24555e59f384bba5f9fc3586005f65361a8330fdc272d96fd61f7197c5c95afcf796480bbfb493d3083b25ac9b948464e8d53f9df46e130e43bfc88b94a8bd0a6554775aefb9a40bdc8605380018f0a7132fa7be21bbdc83ccbde44aeae0aff5c4e3e7035f9253a3c6adc7621827ba48e2a2b00f612fd025f1ccb8c265b4d06381b1de1a7639f6c684a46e15622f93b485d71a391dd7c5f50dd0c5dd5095da3f8d6bfc79049d669e9cd0586ff0cca30d8dde24c1084e65ee03938924fe97a37afc9c56538e9548faa7b48da81fc40f5fad8abb35cc757fb2e565ffd80a838dd27340eb5d3d13370d761d5a828fa78c4e850d105fcf6ed37dc4d56435f5fbb081d937c337eb99ff5b2080a5ad0e6539de60e2007e380320a9933331e083a5e3c1b9147cc46e3049e0db6f042e0c23b7f72f52b714b50e0f28dc27705657684b7a8cb25960cba38eb90d0ebe3486b32056de0fda9850824fb48b7b812510c17478ef765691f4258f647912f696732c78d7e95a5477c6a78f9945325c68e7c91968479def42d73860788d3bb190e1460850389bf0ca92ebd91314c05cb0ad9bee6570cc4cc1bd2970a58705b0329bdb2607e9d99c470722c198ab12760783508c77ccc818c327bfcedf907e33267a53b1a6a41b81222f7832c8d8b75dafe02d82357069ddd99b18b98a7e7ed016ebe2d9ea94e9067b5a84629efebaf586b8c7643836d975c9989f22d7e2b7fa86ec5443bd93caac8556d2663d8113b98068a372864e271e197a78b396f9b42686dfb2d1bc176fc6720e4ab752d84a5e89b815a8b2ab43f9e3360f88a621293c8561569290c4380bae62b7df6b67218885244c5feb056688fe7f24b82b7b07bfba5f6252d9695c6b9e2da9f6f6e1cdc1e68dd6ef17fa0e9112c642dbecb4de26b5d638f6ff825e2aec34dcd8cc57ea854478adc4763d56e1f551ddd66714bc702da5ad4c3cda67b406dd5042f50f517285982d2cd9974e58dee27e28f227fffda3cfa58db120d86f2f28b073990682913dec79c284dc2c157c3d499d15933a56bbc0ce4ea0c05c76c7c9be82fa140c3a9d4f0e0cc8fb752bcd7c8a80cff2858ab5ea12990fd536338e7204fe4b24df9e08ef42e88036b15628d2118726f8e28f92df223b2406ee66b5d7cb07a9ead31b7f5ebcfb02e90cfafd559f032a1469d7f60421e84a65c56d730c7dbd5f36a37132aef43eb3db187d03a22cd2a5f84b92be908089b75b415cc6e0f96e0ab9a882fe02ad1e0cb0f9c52090be5caaf665ce854a234b544b99398f9fd42dce4f47243a2c5776de44a85d2a4f68b1dd52fec68b6d415bac9792fb9d340caf0cb866d5e606c2fad498c9ddc2d96faf6d52fa8d4af328ba00fbc312b6f82971e6048ac7ae317c8d6db9d0644b6f2aa810c4684fb757b9b4da2d0b75b9492ab4d7a292163e12cf69533c4172931385a2b3b7925a2f5f974a36d1544ad663576ea71cc0631075f2afe6f068f5bb0da1abde247a4b8da4edecd89fb921fc9c7a176736fd354b352c30970460d849bb8a29953a21e2cb6541560586b751325331710bfa7736145e22186b5ab8cb49793cdf89883c96d84c68c190202af7a258bf65132f8bdebacd97a1bd485a610fc01a2f89cdd23e03df380253904d5344c5173d9197d2c94bc8beb7a9bb81411f3b67d8b7f6d4921c1266b7498d76398dda1acbfbc7203f38594586fc2c73d33297d23d4805f8a6cf288db25c4eef7c89234f76124cffc9e846f7cd48de499fdc5f074f1aac7e7b7e682dfa736d0d3e8a20b79e37d5b4c261ab19ce057a32baee0e072fbadbd231348325d12f212fcd754504038ee167c4541464b01ea1fa10507b3bae212915c46280b52c7349527ecbdf6a52665f71235d35f10b3ad32095b366eda7a79fba2d20d11a930fccd5ac60b02df22426d7c3b1c034de8ddf1b4270446ba46842d15d09bdc4430a559a7bcc6f4e678f69f35fab5b8e6da6c034380179de783c9665f85e193a502a15883d35a6b805dbf0479eac37e7cfbe888b253b82843e59fb8abd671733b116d394c16ac2054d52d9707298188cac1d42c9aee710e6639999b24a31184b15bf30789de140b7aa453958398c175377ce84c75419279793fd10c54f3e40d9d6d83b22e74f9cf04d19d7196ed0c7f1752ca1fe0e58255b2d5697bc423eea9dcd6705ea8a4a4d8771e9c654e43f26b37b0cff39684fe1f64bbf50ffe28909426042ab2e9fcf67697632fa2cf288e8ea094898a0cb45ed50611acd09c36bf0e28c712ddcd70e8b3d516d6f38a6860c52d96126700e918564798a80ae3e888ab79537cacb55a1199e76dcc610bbf0104030b1352a6255f162db146cd05a9e7e3290de1b284031f24ef74105cd6071bc2cc5d0f7c9a2fe7c6bee6b39f133dce4ab6f35cca6e531b4dfd73f433af35b4f426aba8e0442213ae23cab17ddf48e9537a1c066e6481885b0b91a935bcbfdee661e70b8ecfd0eb0dea65d79413984d83cf447dd583bffd7f0aa479b275457a7790a5d54286f71f4dbb85e434fec3633a7697ec52b68a87946e2157906b611e8a5c963229ac08ab8f077b28c226481239ffc1c6fd232d35d853202684dbf19ad47aa8b402018e690d295daefca64e7f9716597d29cd7b1dd35ba9403f234ce1f38ab0b10e4cac4bda883062e743d84104a599a61840ffe98bb15170800864d2ed1d55391bf73aad0a76b70dc39b8d839a399ad34656a137cb02aa386e90ae35b00af3df427553060028b754b3def81c6db860686e8945646726ef40c3c66bd44fc6c596afe8fa9887587b3750e563b77f79eb049d05ed32e9f2f0a8137415581e9b0a6da618080f093b8c7b0ff3f5f67de669ad1da7a4cc22b2a30281dfc6e567a62a49050218e3855cb244901e32413cc64638e045e95aadbdb26dd2119471cb7651a31bf006d8abc7eb608d8975fb60d420e41356eb28aadd642f6e17449e16f7d6c4058d87d18472d3a6c7f3cd3f96e6b3c0d73b979b6d20640dce3f8089506701aca4a12f42eb03f81bc3bf3e2ac997177a72c39e3ac1b31567f636a3cf3954a50326790c5219600b579d3dc350c189682d17c40c35421707b26e4b5768977ab0a1c9c58700c3bef3834dd80b9742433d0d779c45f12f8b6c90ef34fc56341055d4950e0f89562c92fe0be973017bdbc566e9ea5f0475ffe84b199e868401f231a7acfe79346405a725407fbb7af5cff22921cec3783b03fbfc0bca8604c7ea6f121e969467a06c9ad974ccef1d599adb482e513e0d7698fe64860e63e4bd9addf54ef8015fc24234043c79a9540918e6566f51d1f8da701fdf9e9f3b65b755c3ecdf462ccc786d14d095a94b5368ce559b22ebac359852b256fcf98d716c8b38da55ad89c0b4b194f5a07ab03f0d521bd7f4aa9d52d237ec7fe25b0da7b29c8416a324449101880a5faa1510573b439ab311453512cd668e3ac1fc169cb0fd21fe8885cccb59745fcaa1e7d83b0aed4f8fe77221f98bb792333fa2910c2c5ef73e19d92968471457e308dc5f0b161cf000e17e4759b351e552e508193d2f4746f12b0296fffeddcd7d45792679b13aa2750255d90f9a9efb6fa081bdd1571a948e011e14e817ec9341b3c1b7c654374c34be53c647bda8a34290c2c17426f11472afb2bc7e31bd26132a74cf23da821703f5675b700247a3d0c03507c71e7f5f992b64ee7ecbc5dc6d948670edb97107d73b286233de81c1556531c15bfc58c5f970a3f5a9d2fdbbb851228b0ca491abafb19ea34b04418b2e3eb202792b68073e7ea495be4339bc904b43b3df47555c74e6f9cfe0eb6c9780b22a45f93d0eade8d72b3b0d0889a539323a7209558fda3d6fc26de3f5a35d3458d80c198f1723e8c5d450c01b783fa5bc74aaf252dc0063ec232e522d2c3b6ca2bb9c454c5cad537f14d567684a47a17d4d917c16969dbabfa42880c878b9083b7f4a82d8a0c6039dcfa7759d42b81cdbdbe639abe9667056044f35939dae28c1e2ef3d6726859ada2b325a6ee078869a743dbd99dc71ee7f81ff6b6a66c96a822df28fedde8fd2702c6317797619deb99d1c6c29a5c99ed6c7412862594014df2fadc55b43de67932e257f5ad5f60f477003add7623d7f2d5338c9e050b68e5c5b8a0c3bf6442632c211fdcfb05419ca0f3a7546628153f8f18b35a4d10644f12533ce86adf5cc6ea9809edb8bb70c42972db9d56d683798dd0c534b40dffdeb710c981d8c258ca2aee5ade368cb2624e4c2ae6a24449e32abef4644f7f079ee0d8900a718c640fccee7485311b2e5883d5d28f766406ea8eebc0f72fc18d702b807507753478cb70609466265db33be7eace156491ecd8d116808c45d8200e5071a3b3d2398ecb412c9cd6dde3a3b0dba9369d65026e9b9f72f6b2bddcd1b545225337e29a291463d63283e14d77db2c1703de63e95cd6aaf7b3b2cd4400c2ed66ae7b535bed97dc921fdcf012109d7616c3423a44fd646490490c8db25595f4dc835e438dd5236d2e5c490ae506978798972ead66f61c2ef9a5148ac3f550b417737ca0a8e895253ec9539ff9d61b6c1a07c98235e1b7ba70bfcbfde6d5d774d7f45d736086a1e3d9c7d8d535f6084fc3680e6716aab0790c4ff778a8a80800c51ee8a505db255e0fdedaf26eab323a42261334be22a9b2b045d33395a94f85c40ec404ab28503fd148bb49c4333abdcaadcd1861ec61615b8e40b859c957ee5f003a01e3a8f4914763191a3f0a3e59e1beaaad228e64c5182a875d55c43fd4c8a1216d8b09b0a2b8300f4a1c96604519992625c2caafb5b529c5010cdfbfc2f1374e7d74daa593e86429cd334a5991c301e032de88ece905d3647a250d41ebbc45d1ccf8fb9da3f7ff54a7f99e1293666d95c7f97388385eeca3d27b513e66605fccce5704c8d076e2e2382c0ea48504ac6974d5b24f18f5afb60608e20aeff56f0b3ece8bb54acfb34e44917fd410cba07dff148e6dd970a4906e31aa1bbdb6bc5c44eae20996714ed52af3b3fc55025105648623ee21c53312a8db10e763e79f43478fd2de9d864ae6d32882649284e270ba10c18e807a48efc4299e4127f4810bcbe008e59b5a2baf0e30a035d1e0dadd97ef4b58ad8906fdd66aaf8148d02eb5e5f312cd82ac14ba3971e1090336c1f4744a929259abe173dc87671404f5c0a89312d8a0dd09bede80f91f84ebed6d035e371a43d1561497c9dbd06b795395a766a2745a6bd55fa2143f3d74b958574b6b578e6f62606dde0e9df911d14d8147d39a55d676c94babce881df390113a8ee6e360f204bb7cd16f2ff1958072db6209926156bdf132cbebc3021eb2fac37f9c416c0a6297794c025f2c7cfc837da1660cfb4dd751f016176f661541c12d83f7889f7349e9f0135e86ff8dae2d4a3b1f8e074e52c4fd8657b376f1600bf5e22326342b8a806d9db341c33b2142c2fb65a7fcfc800f70a1faa91e38afed06859817132d07e634577e5130d382ce8a4611b2c939ef228247dccc6e410a986a54f0f921cd6747cb8f9338ac06655adcc83c6e6ffe558a82ffdcdb515981cd2cf6a25147bd2195540505b9df7a721ca9aeeff6ea3082248ad9bab11b107d2870cf4ffa3c149f46785ca0ef2d5769e240e51f7db0b0e60f1410d621726ee2008511408c5a042ce2a1e0c831e496738700c6e262d5a307e9b97946654812abeb7b7a00290c390aa349be04188dba534280176e805a2baec9215d534b904c5796b56aa1bfa236e5efd54a7f3bfd4ba51e1fbabe19f5f203f6fe52bd4256c7501accb514c8f761f5cb7049ea48ec69f4378ce1996f049e5defd1c5718b8cc06d6bad68d73e9e1967928f600dc2d1228dfef331c1c70dfdbc7e182abf4ca9a92e3a2bdb9b51de8761d6a6ec620398f0aaa9e66c5a6c31be09b8c53b1ca51e4a1eeb691a83bb97b864dfab135bdc3360b3782c9b0c96704a543d61e17674bd46c9e5f51d37baade8ded7d371005d600bdbe42c03749bc2b2c16e8bd7122d3ca6af0783bab6c2f83b79998d8b316425c845249298a0ac7d4be88c3fdbdc798d04b461f4d9106cd9c0d12023cdac37c874aa426838532fabcba9fd129b8748c4345b62245344c8b01b9eee50fec201c1726d4ad17ed5a19c35210bf3afbe9b5a28c4058ca4b2aec6e36dee69f5867ea65e51d3d7fd00959d6869fd91db5a33ad8a3290f901092c411e74a98c38bb322bb4f67545c443484a946a82b52199d10b89275f53790c752b7ac6bc2ff18a8c068743885bb48018044f8b2da8e5b6d506affff627370aadeaa9d8cc56e88b168740de506d7c740db2148ed476ca56455da2d1e309afdc070591e9d519b07b74f7b9f457232ff532940007fc7ed40da6f7a42561a34353cd3aa39195b7288a46ec9adbd22ac09b2429ec711a69245c955bac526a58117c4a991ff1246934cef54880f636211ebec1d88f34d4a8f19dab681e8a9d3580e45984f63293dae2381208959e62b9e4cbbd996fd732cb7e708848c328616db307b46c6f1481c5070e65bcacd69e3356b1fc757e31379cc18a9c3513d85f9473f6d8a36c01328b7e007f407b65e8caab9de646a4e1b6e15650355fc5442bf9824154b15c17896b1a1346a9d893e58f5231dbf5207364bab2ea76cc7c89364fc0f36c1e258bc55e3f886a26cef435a2680d8afc487f7a581e6cc5e40d1f71fe4c0bd37f8606749785d23fc8da7ce9de044148facb9e45c6c8b5ca2a794cbdeb9c70e40ad851d53a061d955591808f6d506cc1318d2efa18691b9beeff7353009c455234b939a0d14001e7c2a0c0a6c2435ea2cff11674332d08f87c5eaeb8d3f244a3fc2f734e2a3250206806a09cc86ccabb89323c13c711bc4e159d4c4a0d8875ff5857b627b53b114b780db8e6ca8802b5b1c5fe505b413dada8d6d316e520fb14bf63720648d0fcf4c354d6ab44a35b71b85f8bbc2bdb679df3ff1a0496b08273234e6a191bdf268f5770353835afc56e6753d9c6a2c28530d535082b542da76241d13060d4216a898c9e8cbd984515f2ecbea4217560ab2b70d31627e58b942f5d2edbe388c90ecf69eef0709cbd80b0bed55c250a2e692d08e2ef7c32dd9174261221e83b09018c74bd4044cb605a1017e6145c88e37517c2ae485ee25f1b33207ab3255ba0beaf01df091c6b986b36e23d932e5025c39a5933517a5f4b2b39e41c12955a466d106a3eeeb1bcf30833bef4a2004907a54a1344793e4b84e3fa52ead6d1159599252149df914686aeeb50069e89a576e8726dd09505dc7559381a0159bdd8a8f610f93826e59128f426d05416ebb682804f22d360de1d5cdc2430f1c3a673145fafce8d468eca1472c95741cbed6a6285fbfeca7a264b984cb8cf1d9abf6078cfc0d77053b2c94a92e7a84b5626a8aac7e1cddd3338071a785d370d8b940ba0d29444c729ecf6dbff677fd4f891c0bddd2ad02a3f7dfe37bb49dd8d68102932354daf11ec5563d2bf07eef7dfbcac9d1d3aa41026482e240fe485fd331a334604b9989a0a553b7ae81b9d683697c608be02fde5210f84153b736ebf8b9aa91839891677c52d73f31c966f725f78cf51696aababa190215999cd220659116f1c663ac9d0657642b242acf5e9cca40f0b76033d8bd6859aa1420a1ca9d1a925134f8b9eb5caac3a41837cb42eac912190d246e6f226bf70ed730d43a967b438f7327b3819951c27affbf869b489912f6b1c5d8b18f81c992a94ef031c7da8597f289dc95766986fa1d4774337441b67a21fa36bd7f5b4f2ea1e06e6594b176bddabe927c83b59639e810b2249bc615c89f15eabf9812163bb63ad612c7c506b5ee72b13e3fa39f85858912aec41d9f064d3d88b4dde9a874d8827d0e1a2f42dd8c4ca9b71b63065bf3497043b42932ef4c6e390db8b157c296a96567b4310b4f1b89b516d47ea5348f963f254602c60a14c2f93c35aff85df98f81a19b456da6b0ce4db8bab1658a6f25327bc0a54ecbaf8067ae7264d1174e7ff5a3cea5261eb5ad5969ef696dc858243d59fcebf72b1f2ca7faf9f30d3198e8a4c66ceb19f9558560e8048d1421775659bb6967a2bf3ad6a0dc79eb14162d92012b95771cd335ea7560185cfb6abab228d7460e99e143feadee68a292b897976c2cb342e4a302def8020452f1cd825eb2f2587bc0eb1faf4a1ae93763718dde62c412a6c7b2c66525a585a6ab8c1220202288a88bd8cfab074c7a094e342b203ff1cde588cda0daa692c01541697ecf7b461edbd3c311f099826dfa502ae4503283ff4d59aebecc15a76a05fabc90b946811e3d33955c3cc5d77992f863e01a9051c535a595a8b84e7ad69572d044bf057270d7cd9331c776497f093859f12f2a920bc5a3119de88064a232a32867e17c2c73b125499336f0456048c804a63b30008fcb4582abedf78250eaf0793a5d7edaf6af342f8bf842d45ed6064d1e9c1bf26213e6b1001b19e724ea242aa4d027467664914b1ff8af3c790d88bdfc758a6e7c57fc885ba56ecdac3609b9622b5a2451f0ce869a06021b392a5f82fae4ec7053ea58543826e9456a421c000c6bc8742abd7c26f8bb07fb32405d1782dc3113909fbeb6c3916202211b18563c1db4f0b42cbe4ffdd2b3aa20eb735b0a2c0d2480835ca34feccabd63f4a7ef74bccbe55686ae3f5645c5015cfe85e157f564f58824ad46635c8d0942d229518b872d8a2e221b8d3167265623850b5921ea7fe20c1fba6c218168c882e41dcb586d1cbc5abd20a19454786f222fb71b4153f1d6a68120e54e7c4d00c1095b5431304e0a23ab825265a1ac81272a1c9eebf582cb0aa39c2e41fb2cc6c5cdbc07fb03ba75399b00a15df87b528d444b974cbfe2abee5018def534c03fb45c94a814f7e2840c9a090537b7f04f17c6d95d5eb72ae8718dcc7cddc6fd2436ae999ee8b855fbad8bfa22b85df69d04bb94f2653a3fd26ff9b07019083f89f7664739bc8f6c73b351ddba354e59a87d4556e6a38411a755883eace303f800d40fceed13a575aa906d4d8c4956da3a67d7e7d4e3d5d1be9caac9a80846b15b0a3519cec3d4d72729ab969b3807acea29a6e4e147cff3742ac7686b68ee5ae2a8624b7727c6ce2b72322b57d47e7bdafa44d3dcf74af12c3e00c6d61f2e85f286889b0dc20795ecba73f7d0f1a7139829151ad7d578137914b3c52327d93755b9d3c5e22920141a0e9e1697469c9fc17ed95ac9f9a38c823d45908d2c459a3cfe1189db04e2d3fa4b0aebc0aaec2291dfae106d2ea3d1a5de394d4010c69d9e6fe47ace699d1c03e55984ddda15ee587e9ba44a0aeb9b704d49801b6bd0607844aa412e0b2d7aaf4849b525d3779dbabbb5fb6cc91e51c06c88287e8f784d8b433553f27a60ed66a9bb2d8d81167b9c388490f777ee1b9e33960961d76380c983567075ae5087573f635fc36b2baca485a8dcd01a92eaefc0a18069ef8ec7b2aaebff88076722c8440736a90b6438a7bda53ff84918da877f50607cc89f67e115cbd7b548f04fbff628c6038fe3892697887eacadcb149f6e08f8686ee60cb4070a55ea78231aebf8e69222842ad6db396f40a76d62cb730584a161fefea15c92d9877c236222ca3db2ab1bd18163031c47072fd603903fb0963d3967e355b6a685f63ab6127c07f2b7066930ac1ab627d05767210ada416b8bd937b919479eb2efd21378ab95186e266bb808fcafbb5317a0298c07b929216e0b63d87d6be23d53337d466ab09b029dc3314a54dd41175aae9213900108d6b9473fca7aac7cc5a4a88ba0d6c60d88cf30594c29eec44a599e3728dfe9d55beb02c3e0dcadf8c8ecc4950fa5bbb6e8abf4e5cf8ab7064e98eee233ac99f14fc9b6e8943ccbeac00cc01b447238d508a46dcc6b517ac11e91b929e3553fd0cebc0ba3f44c424ed65949359cb2186454810053e281e0e26642ad5f9244fc9622f160fc04bafea77e105d35d76397d397c88f43ab35de2f75052ea00900f4b8752275b860991e7d09c0bb872a962c3850e6ac980459770e0a8e393df5d7319b0e7f16f60b401cbd7f0fa45bac7792cbf71402b3ab2b0367a1ca10dc7ecfdc4c8cb4857c9d16401c29436c78f8e4185fbb5b8dff7656c8cb142996c2a135063afdc7d1c966a864b249b0b9d17b2ab847db72017cfa6a7b9d11dc4b6a06058949c363ff648d16682e3861aecb55f1c2507c613076ea6b32523ccadb10039de77a734672f60c9d846588352eb376d7296d89f262cf8c74f83c88f173390e082f01931a877c5dd96c9e9e136273d6f2af4d071f1e779c62ec7819f0dd4cb56372193f86755fb2b533023479b8f5326f16ce1d36fd8fa2e8ded1416447b1dc3799d2fb4a1c53f383e6b095be2ea44610d19c79c78cb25ef3bdb1576f2a0652255ec6cfaadd5c39cd777bab134f2935a59c259cc7d7faffe0b43d914095f28c5b3898dd9a6fb394f4c9b621461ddbb418f89a32df762ab97750da9bee94a19ceb13aebf65cf369d9cbb3d65c3adf89e6521afbdfd1ee8146fce684751defb111e23ea2ace23d99aa4fc5485f3cadf6678a1a3501d3bcbfa43dee0333a59f6e29d63566063bf7c67ba08d78afdba11d45db9369f9e49cec97a8c5816b41fa5924eb23800e7ebdf09bd790581c1f130948af5b6c69e37f45d83c3d7a4fa88702d9ebf35f7a0db3ea6509a816e2ee205b91ae42a7fa20231295315c7cd70eff2cfc5a1de4dac7a0c389b00f80703c5e51190bda8edf96ef5d99be96852824410bde8b930de9d9c8a362ce89868bf50d3a30c15057358000be6264005affc163976cdc4b6cec7a1651d9188e1a2575ee064462121083459b524f0926ad1cb14856ba2a33b954495b26df2739557d0035399f6e457996fbea89864fa406ed93e351ae6f29e7f01a3748745a197bf75d3bbfd149758fcd346999e330a4d1f8f01b2de407c1038c1d57eae48dae7f76a904bcd1bc382e07126642df59a77109ea2c4ba55d62061ce76881172182ce997e6637ae04187f9bcf78600669a89e40be0072a8f05e34dce7e7ebfb119eacdd34803094f7d03536ae8f7c418ddcb32eecb21ac0daed477d7dbc3c477e6620ee1381026176528f936c120c19d1e1d40b5045ecd9b8239eee66852441ab8b89d977596613303e95b99eedd198b49f5074c00d389a9ef6fd0f6f36d8b337d9ac89043211a4891a1794a9bc99e92d5443bb9fba249991575260271e63825363a2079187cf0453b52667bed6c7b42ba96e2f30b1a350033e33147055ae56fe146586325e8ccaf0afdcf396ac5e44581f1c323769d2c9841f813205d75626abde8086f2d9355fd9beaf6efa64375987ada5d0233ac7e9a02e2718a15c3b7009e54473ab281bf14bda7db574c0c6ef0bdeaab869a1826e1dafdc5bf5907573e87c2cff093163a3da3c21f0bf53b6caa9d41551fed4672317ab19f7083195404599fa168e91fa4e68a209f6a29301ec2aa11901eaf5ed3149babad857813e2f60e0a7dae458de723723efda442c0c4a8ab5d507e72456af2d7344a5dc066db2f8bf12723373633c75d8e5553172a90b71f6074b0e8aa93778edfc55b293e392f5f868a650ef2c3fd9bef9f9d107c9575b6500d7229e72176af0deb1b654ae731e0757bed3b3f68d4ca21bf9baecdc99ed3d773350d4f17c5a43f78237896613dd6bc76ea5e8c663cd6495d9c51986bf7ecc0b68b97228b4c2647cd2d7c3a929136015bb6c1a7ab2bc5970b0e6b95bb7b76f685ce47d52239d87e5aec295be6f173744558f045732916cb05d4e6363fcc1df7fefc3eeffd3617c47fa639b6c61cea6be32bb34b49671cd78b71d1e57ab36d74592b04b5ee24b8d231b8a126a6d0a01cc71ce9345e06d2d3edf95d83f2aee482a87af08ca759bbc895030b5ae9f018844fbbdfb5f0bfbac9a9abc67e684de3e77c7bdd6f9257666dec432f339ee653dad515037495fbb2f1ddd5d6a615b4ca73bcd2e45d04d09f8302fa238fc330274a99fb60c08c55d72bc030dc37b0cc4cab87f16fc38e3f4fed24bd05441f5bd98946321da76def48f53485838d44f8b79ca14553edc6f9a3fbbfac9cbe3281483a1990830a66d758523d6f45c6acca00fb5bc1ad1d4f7481d8b250e4158f6d2d049a9f089726eeaf8e55087eaba8974c325a7a78a54945e66660824461c56d957f487122e88372fe4c1aa2e7c209e87dbedab6903eed5c18a9d955ee6e832731cead0dfd95553743b21a88add8a71c01c1aacb1f001c6d10fdbf8829d38b90eada46b65226f94e11897ad7cd4111b5bbd3bad4e0e1ddb622f10f8c29fb243fb2ab7768f15e7155973bbb34ef25ca770b24431015d288c2bdafc8cb9bad0e2e6464b1df68ee65c74026aad569e7aeab1c14ce7b2cf160f657280245ae4c1bbcd635bcba11731a6d5d93fbc1a339b72dd1343de61bc7611377515e660852695e4f6b0caecf933b774b6a135a472308a10b1b3f10fc53ca245aa2c8732fb0df692a9c89a4096d725a32fb1d6f025f761e13ae9deefc639a6bc61fe2f50f1b501d920db050c268626f5d28abf04fe71750d01026bd88436257109276e737221c7c6344614056a80e44807bce0ab74e0eaac90665c8b62a19bee1652e0e05fcea167668fdfe0f9c3702c846184c974c6b27ccb9f0f4a0b71d44a811cf8ac71f206275801862c6464fe01619143fa71c3f2e0cadfa0db1cd1bda1d52e36aa06950abc0a213cc4dea2c4407149d2ab23fe07974997225bb808f30a62cd3143cde97b832df984bb1aebbf09a25219e6d50a8f7ee42dd1738576ce61bef195510b6c1eced569819f82078c5594a7d1c5319610e37ddbe4eabf313917d01eaf0d5b39018181bb03fd616d4a12e2204b6d08e8f4aab8ac71299dbcaa6ddd3e12ba0bcc42fd41935a53c16c67d306dcfddcd1aad114ab171f665e2c286d7ff734a6734931f10a81b06fd22a4f2b66cc4df77c39c46a47e18165dec68e49e12d2c2add35cf895439247e1806e5948c0e0f84925327f3a575aa39804317e8c45274e48e1b5bed508fd5f6ea0bf55bba0a358ea6d1e4683b559a5ca5238268dfed04f800704c9193014125493bc6e67b1bdce11a29f9eb5c5db52bbd5ac631fbe07e35ae68f964d8762cb5bf1daf9adedf4eef6a4f3832412d8d0b7bc4f9c8bdeaa753dc60786d5d93372062fde1a20cc6a1d954262bb8408a0f2b3bb4c23586b34394db3f55c13f014dc727a90124871eca574ccf22f27aabce3264246635660ac1511fd0482c138fc1d417c915c914da91645438a50c2965743930cd9ba9b3d4b1171fe632a6774b62050ba2b54b4b045657472cc52d904e8c278e6938c1f5469b190c2909eb976286626562507043a0f026c36a59d305beaa58231373d82997c298ee5ce4897e35053d272fd8fdf10136d018db2f2673eb4e1cb516bfcdc654bc7e3598b5d426b337638c78adf6d91799d966edc610cf0028cb1dcae5d95105522b3b714b8aaba46f4d2f5b9001040f27ce4d689abfdfb4059d81e30ca9deb523f853e2d12b2bf50ad82f5549f58fc2510bf0810702922433f4da304ceec0a303fa1c472773af7851a128294f11235cca7ba760c8a9472e2c903b762cab493e6f52962146a30b8e3016848d2099a3b7c615cc687501d5cd7f42ebc021b0aa9b7ccc863243b5d127db078596b8b26e75659040890c8ec7eea1e1503170c31f256dd2c25a334782f0d691ff9a848d4e7cc7dd94897cebe9fcaeb900f53bdd8d275f7cd125eacf89a1cf36fce7a742ca64710398d4aa7054c252f147efaf5526b3b24956bb53aefa65a31c472fd394dcfa5f470b078fbd8768555124e52fca5c88c6ec869e88920d9db0b3a9f8520889865875d414b9ab6a3ac2fd169ba7dcc0836657091f97c3fbcc45bcb0b410faad1072f5b000279fc9c467662018d4e3f1a4641147413796d5fe3db78080dd2f008c9cd8278a936016d948b556972f0d4cd4c1184f9621e0586037084c48799bb5e5d334c2edce5a859813a985344543de31e835a7144690dc9bf8595de6a5ed3476595793e30e35346afbdd4c128a5725ccb87f85f1f60bc58fb766e2d615e4d242254e9a2dd27bd3a28b77b6d083873f6c8ad01914990b802730238aeab8804e18f3fc9d9c4e7ad5c039e0fc394cd48c5823752488f85484a39b9d6f42b8781476399aa61f7b1db35ff95764063e2d122929691c242814d08e6cc2be2f4b82d3a582dcfddaa805d259d19e6913fb63ef4c1705af7ac65e0a00de101105ead6a06ecf2ba7935ecb10e121b3583cde73e59bc057af056892045741b9b6a1e1df9625aaf6a384953f4a790ba0a74d8850e655adcd8474401db9d51b0cf3b10c3bc82493d2d41ef385ad6958970bd4cbde6208130647d825f419a1fdcfa17dfe8a9de8e9077210ba97c1dd23aa1dd9aa050c94caa09deaddaae6821bd64c3142f5b89c1c43723308d97f38b9c778797d3f4131c1fa6f0c48c084b711de4275296e44e324d42073468c2f8a9d9aee4d14e03318b554cbf29922253ba8bba79fc29b08e9434006c982523ff1fb56a1eb6214f1e68be96d1e01de8e80b48296c09c7d468ba3c10e642466aeca0cf46cad81ed5f833b8b1605dd0e8f0818ec56415e0da6651c5a635d657771d40c0f414892f47bc8dc50befafb10512dcb5d689cc0396e2ef5ad1db194f7ac03f83cc28753b9caeeb4f72482c659ebb965f2d07fd1dd1dcf58d0afe752083c40ee7b763b55f2c01010d165e11a2a0723683cd6ddf896473833b949c5304081aa97528562a7d92e289bcbf32c7abba9e0466a070f5b75ab4e7dadf825ba1a4e64a24d96e40824c89f1f0e87da6e35dcf9c3c705c5644ed8519f91d2d52f8ca8c3a562a885b73b9bf748f31fd8498c6e646f44d2c62a2c963885cfcc3c5280adbc7c59c99f0492a6540603938561cf202a63c12ef51ff98c192a38439662463d00c24158cafa110bc6cb02725c0bc44fd48a0e253cd57f96512d2c5658266e2b23db2a2172ad5d23ba1090db5ef96ae28ef15d1a5dccdeaf496fb565b96b0fc480012664ed5f3a72b7030f638dba85e7fe83284d40769126ecd68a8db4e30daec4df520c1c9e8731c3cffbc5cd7f4b4563a108176f9e80b6cc22863a500ef1ede1f5f6ca3cf980856616090ee701dc86284b87fa95a131ed88a2e9f9a7056a76c1502ab9d2439ee7784fae5a571b370b4e3bf009293c44ead9f14e3f0e1b54bf3b11b2a883f8a550714a057978578ccddcba02e5a39c75cdf145eb9b21b6683d1a52b73d5947a86d0d285ffbeb8d5d1f8abad00de4bea3e2a14cc437a8d7050a97ce4a32b1ab7bc9bea325803473c1aafb5aa2054905bbee1b84985896ef81b4eea7e6fb7c8e0b72237e40996724f328c0da492a1ce392a4cbef542590bb6a4950f76919af2b79ba83959c44b6b1a354d43bb52414bd79aa40da6d88d5ecde6354f417f87ac048741f8ae09fd8f07e1af9a092328ec3bfa13546544cf83532359bb482b9da42718ae9bd9a15b1f4f61dbf3063d4788db68c004fcf7eaf2960239edf34e8fe10688391826e1ae9f6b224b490544c3d3f22821f30871e9bdd96ef41fd283762780ea9db64ddc3496d95801799651d1c04127b17d728cc1426d5326798226c213fb61616c757e3c3f031ac05912b0ec4ca44ec04778dc0e9a40ee6c4b30f465088296c6d1f8811601793a82aa581548cf9bd33b95f516aaff3f2256a18e2d0d49e53a3ddaae0e6d11e4ae3d7e4e8f945abfce4811b54b219c78a0ac327f58760cb05431d0871c6b32266d5401870bce4bd1749ba2e36fd3b72abc5a11338605bce3f6542a1f80dce8ee69bcaafa3f7c5535699b183e3bf2a1b51cbd5239c5b76303fadbadaed47b9b5d1ae4e3bbd083689e24fecb033a00feda89ef342209d6a5b6b04c97242aaaa9fb23f6af027c91375b6e19108d6a9b56a1ddfd4efddab88dbac19740df913e0fff5ab25548d48937930bacff175731c80e2138028f711d6e12ad46d19fd589b5d9ce27a0fbe0b23781ef9ceb3e4fb992c9334a2b187f90539f1af9b000f0d57aaf511f1395004af75000c3709eaaac985cad4fb5a41034cc998ec2972c9b52f5ff55ece61403149d2282d4823ff1570311a2942a0b8c2f04f85f5f2f76f3b0e46d4810396c71b27bd110499f760da3aa28fd4ee8e7b3d74405666a642321c00a2822b05df7bcd18873306bc7baa4f10ef206fe15eaf66b0c46ad7d1eb041f1a3fbec06a66688a4ba88371f683192625f3c6a97b926c290c702f0c21ab688cc6b04f301b664e1917c3f944b9c5fdb0ed4b239e9699bd83e3ae38a21f1f3c7d3dac7228a57ea89202be98358f7d8ee3b9694c419e78820b2e2541d67a0836851bcccd4a8e438eee6edceaaea6f881ca7360f656855de1bc7a12e113ef46ad077dcdca603ca51b8dd4118216937707028e56ab29ceab21a46edf5758a5d382cb1d28a4172d8aa5a9cb52ad286a2df5848e82fe1cc9c0659726e1f8ee661ba5ce269dae87ee42fb2ab7b6ad1ee986690d35688828a4a7c291bd36c2d23c461a855040a12342270a86423617688a9005067262ee45f229d0988ac10bafeb11611ec01ab0ffb38c4b0cafe4c771894f3f30b4ae8994ce6a7fb0c597d39ea3df442afc9e6b1fde79535f2eb162587ff5c70d255bb82f3787b57d6de88233e9e931ee887d4b9f9ddb5edacb632081af214cad8c2689b930d700c9bf2e4719ed4009cd555224f925151c30138692ab056dc6a217c38f7d118e8033946facb0680fb5261570b1ce3e73797018eba090d2464a134c93aa482d7755d47e6fc21f27cf12577c81a465a84d656039815da120291c774e256b13f4612b75f4359142e3dcafd71b1852abf86024081e218bbda6b077ef20cf08ea883d3ca9e15a60bae33273e7885d84409a0707295c304451770fb41f4d43cb1a5005f7708d99942a4dd934d51d28a6f996420e7d64221202fdac9d5e871046d14d249376e636342e6b245215d01ea0219b0615eb2051887662269ab81255e5c06865cc192eab32f70621782831c99cf4d18f3b91ecd2f0f51fcf711cecf4a09dc44d79f6551813aaae4bf2be99d8b4bcf1f23f723e888e6e9dc35552a2a5bf211e8f169caa420603579ebd44ced34647a5fe6cc65bcf9468cc577fe1e229e3937599014fc4a020ba25fa6b8d7317675bfeaf90ad95f0b3d6fe84f06b4491e68d2eb5cc399e163b0a410f69068800cd475cbe2012298a7f02c5a9ba991d4ccecf995f546ab4670cdbb7b7698ece109ae13453ee96845621f916f7d1874878a95306d7d74aafb3ed8bc72b73ebdbf29383e83d4e47b9ef9e75645e3051ae10fb83bb36f2689fa2a85bb2bce1fb7ecba3f8ef94365bcb35a3d8d2376382db079c3d14ea6427429db04373cdbbb1f1866d69b17e15455ae33a134c57acff4ff00b2fadc3d3366137492896b50dc84492b686005482b1b7f23d3dded0d535e4ab06cef9ca68f412efe8c24c0ae6a7596285e78fcae2d1bf35a880483e37ab92bfa11754a4020024f7cf0eddc4460d27c935e071765bc8236842ed13193fd8c9bfc88b6a30cf4017952693fa44ab0376855eb9c0a2ec3cbed9b1432be340018e9a24f4176ca82dd5b6287a3b48e8022dac53e36f012b806ff0943c1ec8b69bbb98efbf15ef336db355310f33f7961cdb2d36d9a9222539839d1bd350fcde3de809ad947c0b048e2135c0943feba12ce39491c09e8f67fd0d6dee820212d9f386a087d919d6edfb44899b2139b30fac08913e6b9a2dd73080b74c713c1e58d7bf8f6ea62227dece921b42c64e62558c0725ed8b3eab6e2fbd23461c1cc307feb693343dc13d895bbc862a396cebd5d3dca2fcf6c237a4103ac1b23eaaa712c8fb0f026323209e5ef7ff14a015e23baae003cc077a84121964799df9a5eb55dfccce02061df3508a1353bb8945824d0ae7f6a7e92fc84526cca85536839b243936430f54090dfe2a8d8759d2ca16891eea76eb764478c4f61b57ac1dcae84ba549e001e90c0b95c48b4f280fac43602ebc7289312f1b78f3127ca0fd1acc3d5ea4655a196bfd9aa9db05fb6fe4a5ff363f26bc8de21977aa8f13d59b8883eaede597694987763ea7ae7a41d653eb6e1fe4bff8bad212148e8fef30b1ef0154b491d27349d61ac778727df33a1efec67feb42a0f99224ce4ce017dd481bc975ac9e3efc1ba9798a9ce6978b66476d1a0891c5180848a6cdc72f8463bb4ab2f5cdf0ee9357359714576ffea42ebe0758917b692a8e678b99f0e25927e58a09b47d38adbea3691069d404782118d5dabdf0c61a9f53db80a888d972e11fbd9a4394716af1546cac20808540f9fafda700df43169f16cbfe4bd4d2f409e208fee6b65ddc530ed0e317c170a8aed41acd6ed460c61aad5c6d3a2175f5b9264d89f2279f5868b6efff84d16a6d72014d29ed3364c042e4b9704eb5de43be9e7a22d815fff4d09adc3c031405dc7df8a95d64772d6873eca31cd4deafb98c54cec1663154bb6834e4e29bd7abc9e1fab7ae23daac048cb1bcef70e7b92d639d6a04b4991efbacff987d0c6c40acac4c1f051678ff72ebf150ac78284cdf922ba06133117ea4532b976856353694bd5e3b6478518ee5af461e4f3c134b9a6849375a417fbca65649ebd93c398e569f316c4ff3c2c72fccd530c3ea66597ac9cd4cac679011bcb0e245134317a1e94f62ed0252821ac9c26aba937252c4a3cf9ec967c48875f9b213812ba2a475101c49c344d85964f6d372d827284d722d3cf2bd40ecc5acc107eeec409f822d184a3142c584803055ffcf0aeeca23e76ec57b3d328f0a3ac318f8752e4abcf0f808e196c35294329e0ac64cc6af9cf571c17b0e858a381a8914b1929605e48eb80f8a898bd7af20843bcf58793d106c102dc7aab1f4eecf16f10e6ae4ebdf636a34897bfb108d1df724a94efd2fe423222705c70c0c766d3592e128767a664ee7c91a249489d5d28935fa1f3aaca8a83274ead8d177f7e752329613d4343246142aabfd469dabb80219fa14dd8515012f46e5dce5a3f7b1e05b32f426239ec2a80594a2c0</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>design-pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title>装饰者模式 | Decorator Pattern</title>
    <url>/design-pattern/decorator-pattern/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="7c15233603457aadfd41978f5ec5b1e853e835fe5507acfe62a86dfd76b9070e">43bb87d26d40f1e13c5dbb8dfa6aa503d7861cbc7dfda7658acd292c301154ce321f94350ce697fafa4b2767bfefd6f57ac1fe97b0cf6785a487592cd4c89d6b9036437950fc75d75879ad1e7245af7762aa779abdc75a35a327dad2dac6e0e6535d659d57e8acefdc4ebadba789d17011e4194f33da884c2b4724a11883c8b1e8a236872194cbf8d059d76db5a262941cf3c0d1abba6aa9c5bb1d1b3e678c184a9cf414c03406077808040c8a4496398bd954b7d39f6fb7a28a3a75863737441940a951f1536e13ecfa680aa256010f443f40e7949f4b85b6a65d266f26b2856390906af575b9df8143dbe2f8096dd7c348ed42c3983efa88a3ce89642b81ba45d461e63634a5bd5532ab0c63e211961dc96321d76dac2818df350946842410b7e85b162930afaa76d6e843ff4aadc03721f4c6b2c876e241b91567b69002875fe3c7fb30dd94daec668a0999c0ef0f1acf0a36eed86bcb809802894cef7a4698ed09f4b5c0b835ba300b7053c4b210826799c4af1468a9b1dba57d1bdb4bfdcfd0f188769784eb95e53218c73ca24f876229a0485cf214948af63d10b3da51edbc824ab3b46023fd72f29cdfc79c58f4236aa83388d1e22d333b41120418e0aefa255e212e13bfc7b393a937f2420f6ad90cc0261a3da9a565a127bdc9c2d43db8cc269142b2c33de7f1bc18044f2e6fe8fc3ef1df42cbb4ea5321ee1e477cdc856945de07b4ce2eb08acc300838cf467b7a3da6851f252f3d95ab302c6b495354daf2b155ead31887666c046f50e7e38c8cafd193826ee0ff74455352ef13b69659dba73ba7eabfe60f147eaeffb9d291570c61c8bae3241da6fcc63d3484e6033f4d22484ff55b211486eba3cc3d0edc426ff863728d8e077c5096ebb5c2c83c925ead9faa4348a3af90efc54ee62accf7d5bdd9392706df52006acb4e435cb7e5df928e3241afdecc3ada0d113d610a6bcfa6fe08d062540e88d0a33cc82c718e449b48af431ab25760d690266537e1cb11a3721cadf6e915ff3539aea32b17f1f501069b726e0eab82db23d8f1fc6ea98aca17bd78e148b019509ccce38e0a0acdfccb81784922e9541cd8064700d82ef9f727ccb5e614789db60c2d01d8425ff779dff42d0a3b7dd1f03eb877d24312856d28bc40c6035fd7927e3f22d1ec5c007fcd1f2459faf4516dbe25cacce9b03826c24a63757735316bc0cb956fe5bf06b8f6019f4bad670f888ac7c84c35b3ea86f4e2d92999c85a4f9c310efb14221000fc7521cbd0bc5b809ee0f80822ac04bdc26d9a0d35b8296568b6de38e1407a493efee12c2bc8ad2403694cde035ab159b63124c88898fe6015d3e113873f8132de1e759185f90acbd943c43989c6f380183c93c785f4be1a9fac645543d33c4d816be5310281760074fc3b811c62d8e873e3a43b01de7f92013be109275ce5c30d286b86c581b9ff3b1471e80a3e09a5ca616dbee2f3fcb082e9567e244e98c379c4df674d479392a8b55682c10ca588e720ca701e8fab5553030ba499c57b71c1742fd80c3436a00b4d0e1b546520dc02d3bea7b527675ef88c2d3d7efac417809e21c2470f4ed744239718d9e9efa23547a07c339b32c9c73904768b41a88f0d499b41a4eb6b474c4c8e2c35b112199ffe490f3e36841431a9b8688cad523de16be91fd5e16cd970e8c2f9ee7b0a57d5f1156a81a64899fc248bac4cd848ae59c2a3cb412aa3b48b015ffa32ac73fdbbad71075afae274a362ac031a1337de30b37fc5fa7cea74009322f2a672614dd0d6f3f6232d7863a01279111d2b0b46c3b8f1528df5b0e99db9ce0809d3a971162bd2f494365726c83905c2fb872cee38da7e4a01e8991fda3391357f559b79bba6959654a2d15471f37185f66070e61c4a8f757535d89ad4e3e8b8ffc97b090f2573ad86c43b7bfd02ffc34695efd0464b582b8c6f5ec738169287c2664197c3eb2d8f700db97078d1e6486530cf8764f81d182df8915b4235bf258dde84c750fd442d2a35a92ba3e87d3a80e89219ea13e42e0e246769bd80bec1fb68113e3068cbfb49e9510536800f8814111e5bfbcbfb5ebdafb44db2536496d16ee36ac1ad0c74d6d57b19f7a81faf03943bbc258014bc81386739ec0beeef1d763f2a8e33bdfdec2c31cb5f19ccfa4426de1557fa6f6109f91ed11082379dffe30c2bf4cd988f8ad7ba1f3618434472618061642d9809751efa25d59cfa0be4549b8ed5b3db7f3a91980eae7068bf990e429fc36bddf36caa48d528cf28b245379033aee3fb5d537053edcea71597f843c4603e37d692aa72a8ed49a226c76c370b069057a446ac06e71654913f5a8d7c885164ce4e1a74ac2f65a1d9d35dbc8ab4f0bf1aa38cb74ba6f9eff8fad721ebbe37244f7085552324e39906498e8f01599ec5de7361dc172d11dc40b6d4b5ea379d348a8cdee58a639dd3f7d8a92cbc4431364351eec9dd7324f1f419c0e4e7c079d3c27784688eaf36b38d922b7b96e82e3139443b0275fd992aa782</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>design-pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title>Java线程 | Java Thread</title>
    <url>/language/java/java-thread/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Java线程是并发编程的基础。Java线程对应 java.lang.Thread 这个类。</p>
<a id="more"></a>

<h3 id="Java的线程状态"><a href="#Java的线程状态" class="headerlink" title="Java的线程状态"></a>Java的线程状态</h3><p>Java的线程状态定义在 java.lang.Thread.State 这个枚举类中。包括：</p>
<ul>
<li>NEW<br>  线程尚未启动。Thread state for a thread which has not yet started.</li>
<li>RUNNABLE<br>  在JVM的角度，正在运行的线程，但是对于操作系统来说，可能正在等待资源（包括CPU、网络、IO）。Thread state for a runnable thread.A thread in the runnable state is executing in the Java virtual machine but it may be waiting for other resources from the operating system such as processor.</li>
<li>BLOCKED<br>  正在等待锁（进入或在调用<code>Object.wait()</code>后重新进入同步块）的线程。Thread state for a thread blocked waiting for a monitor lock. A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait().</li>
<li>WAITING<br>  Thread state for a waiting thread.A thread is in the waiting state due to calling one of the following methods: Object.wait() with no timeout, Thread.join() with no timeout, LockSupport.park(). A thread in the waiting state is waiting for another thread to perform a particular action.</li>
<li>TIMED_WAITING<br>  Thread state for a waiting thread with a specified waiting time. A thread is in the timed waiting state due to calling one of the following methods with a specified positive waiting time: Thread.sleep(), Object.wait() with timeout, Thread.join() with timeout, LockSupport.parkNanos(), LockSupport.parkUntil()</li>
<li>TERMINATED<br>  线程终止。Thread state for a terminated thread.</li>
</ul>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><p>BLOCKED 是在等待 monitor 锁，线程阻塞在同步队列。<br>WAITING 和 TIMED_WAITING 是在等待其他线程到达某种状态，线程阻塞在等待队列。</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="控制线程数"><a href="#控制线程数" class="headerlink" title="控制线程数"></a>控制线程数</h4><p>64位虚拟机中，每个线程需要占用 1024KB 的栈空间，除此之外，还会占用文件句柄，CPU 资源等（上线文切换也是开销）。</p>
<p>可以通过 -Xss 控制每个线程 占用的栈空间，Java允许的最小栈空间是 160KB。</p>
<p>通常，可以通过线程池来控制最大线程数量。对于有最大线程数限制的线程池来说，限制工作队列的长度也是有意义的。</p>
<p>对于最合适的线程数这个问题，可以通过负载测试的方式得到最合适的线程数。</p>
<h4 id="使用线程池"><a href="#使用线程池" class="headerlink" title="使用线程池"></a>使用线程池</h4><p>使用线程池，而不是每次新建线程。避免频繁创建和销毁线程的开销</p>
<h4 id="给线程命名"><a href="#给线程命名" class="headerlink" title="给线程命名"></a>给线程命名</h4><p>给线程命名，方便排查。<br>使用线程池的时候，指定线程工厂，在线程工厂中给线程命名。</p>
<h4 id="daemon线程请设置daemon属性"><a href="#daemon线程请设置daemon属性" class="headerlink" title="daemon线程请设置daemon属性"></a>daemon线程请设置daemon属性</h4><p>如果自己实现HTTP连接池的清理线程，该线程务必指定为daemon线程。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://blog.csdn.net/xzp_12345/article/details/81129735" target="_blank" rel="noopener">https://blog.csdn.net/xzp_12345/article/details/81129735</a><br><a href="https://blog.csdn.net/qq_34490018/article/details/81609147" target="_blank" rel="noopener">https://blog.csdn.net/qq_34490018/article/details/81609147</a><br><a href="https://stackoverflow.com/questions/344203/maximum-number-of-threads-per-process-in-linux" target="_blank" rel="noopener">https://stackoverflow.com/questions/344203/maximum-number-of-threads-per-process-in-linux</a><br><a href="http://tempusfugitlibrary.org/recipes/2012/07/12/optimise-the-number-of-threads/" target="_blank" rel="noopener">http://tempusfugitlibrary.org/recipes/2012/07/12/optimise-the-number-of-threads/</a><br>浅谈系统线程数限制：<a href="https://blog.csdn.net/redenval/article/details/91414602" target="_blank" rel="noopener">https://blog.csdn.net/redenval/article/details/91414602</a><br>统计Java进程开启的线程数的N中方法：<a href="https://blog.csdn.net/blueheart20/article/details/78905267" target="_blank" rel="noopener">https://blog.csdn.net/blueheart20/article/details/78905267</a><br><a href="https://stackoverflow.com/questions/763579/how-many-threads-can-a-java-vm-support" target="_blank" rel="noopener">https://stackoverflow.com/questions/763579/how-many-threads-can-a-java-vm-support</a><br><a href="https://blog.overops.com/java-thread-magic-tricks/" target="_blank" rel="noopener">https://blog.overops.com/java-thread-magic-tricks/</a></p>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>并发</tag>
      </tags>
  </entry>
  <entry>
    <title>建造者模式 | Builder Pattern</title>
    <url>/design-pattern/builder-pattern/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。<br>主要用于解决复杂对象的构建问题。</p>
<a id="more"></a>

<p>优点：</p>
<ul>
<li>将复杂对象的创建过程封装起来</li>
<li>允许对象通过多个步骤来替换，并且可以改变过程</li>
<li>向客户隐藏产品内部的实现</li>
<li>产品的实现可以被替换</li>
</ul>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>配合装饰者模式使用。通过建造者模式生成最终的装饰对象。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h4 id="Apache-HttpClient"><a href="#Apache-HttpClient" class="headerlink" title="Apache HttpClient"></a>Apache HttpClient</h4><p>HttpClient 的创建</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HttpClient httpClient = HttpClients.custom()</span><br><span class="line">            .setConnectionManager(connectionManager)</span><br><span class="line">            .build();</span><br></pre></td></tr></table></figure>

<p>RequestConfig 的生成</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">RequestConfig requestConfig = RequestConfig.custom()</span><br><span class="line">            .setConnectionRequestTimeout(<span class="number">1000</span>)</span><br><span class="line">            .setConnectTimeout(<span class="number">3000</span>)</span><br><span class="line">            .setSocketTimeout(<span class="number">5000</span>)</span><br><span class="line">            .build();</span><br></pre></td></tr></table></figure>

<p>SSLContext 的构建</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SSLContext sslContext = SSLContexts.custom()</span><br><span class="line">            .loadKeyMaterial(keyStore, <span class="string">"password"</span>.toCharArray())</span><br><span class="line">            .loadTrustMaterial(trustFile, <span class="string">"password"</span>.toCharArray())</span><br><span class="line">            .build();</span><br></pre></td></tr></table></figure>

<h4 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h4><p>BeanDefinition 的创建</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://www.runoob.com/design-pattern/builder-pattern.html" target="_blank" rel="noopener">https://www.runoob.com/design-pattern/builder-pattern.html</a><br>Builder Generator(Idea Plugin)：<a href="https://plugins.jetbrains.com/plugin/6585-builder-generator/" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/6585-builder-generator/</a><br>Java8中的通用Builder：<a href="https://www.jb51.net/article/113131.htm" target="_blank" rel="noopener">https://www.jb51.net/article/113131.htm</a></p>
]]></content>
      <categories>
        <category>design-pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP连接池</title>
    <url>/communication/computer-network/http/http-connection-pool/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>HTTP 是一个常用的应用层协议，它基于 TCP 这个传输层协议。TCP的问题是，连接的建立和释放过程比较复杂，牵扯到通信两端的多次交互（三次握手、四次挥手）。这个交互过程非常耗时，尤其对于小的HTTP消息而言。如果在多次 HTTP 交互过程中，重用底层的 TCP 连接，就可以获得更高的数据吞吐量。常说的 HTTP 长连接/持久连接h 指的就是在多次请求过程中复用底层的 TCP 连接。</p>
<a id="more"></a>

<p>HTTP/1.1 开始，默认支持长连接。HTTP/1.0 可以通过一个扩展机制，显示支持长连接。</p>
<p>持久连接需要注意的问题</p>
<ul>
<li>服务端是否支持长连接</li>
<li>是否需要携带特定的Header(针对HTTP/1.0)</li>
<li>连接是否会被服务端关闭（因为闲置）</li>
</ul>
<h3 id="连接复用逻辑"><a href="#连接复用逻辑" class="headerlink" title="连接复用逻辑"></a>连接复用逻辑</h3><ul>
<li>请求首部中有 “Connection:Close” 标识，表示客户端不打算复用连接。</li>
<li>响应没有正确设置 “Content-Length” 的，无法复用连接。这是因为对于长连接，两次连接之间不需要重新建立连接。需要根据 “Content-Length” 区分响应内容属于哪一次请求。</li>
<li>响应首部中有 “Connection:Close” 标识，表示服务端不允许复用连接。</li>
<li>响应首部中有 “Connection:Keep-Alive” 标识，服务端允许复用连接。此时应当复用连接。</li>
<li>响应中没有 “Connection” 标识，则高于HTTP/1.0 的版本都复用连接。</li>
</ul>
<h3 id="PoolingHttpClientConnectionManager"><a href="#PoolingHttpClientConnectionManager" class="headerlink" title="PoolingHttpClientConnectionManager"></a>PoolingHttpClientConnectionManager</h3><p>PoolingHttpClientConnectionManager 是 HttpClient 中的连接池管理器。</p>
<p>从 HttpClient 4.4 开始，如果指定了要清理过期和空闲的连接，则 HttpClient 会启动一个后台线程清理过期和空闲的连接。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (evictExpiredConnections || evictIdleConnections) &#123;</span><br><span class="line">    <span class="keyword">final</span> IdleConnectionEvictor connectionEvictor = <span class="keyword">new</span> IdleConnectionEvictor(cm,</span><br><span class="line">            maxIdleTime &gt; <span class="number">0</span> ? maxIdleTime : <span class="number">10</span>, maxIdleTimeUnit != <span class="keyword">null</span> ? maxIdleTimeUnit : TimeUnit.SECONDS,</span><br><span class="line">            maxIdleTime, maxIdleTimeUnit);</span><br><span class="line">    closeablesCopy.add(<span class="keyword">new</span> Closeable() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            connectionEvictor.shutdown();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connectionEvictor.awaitTermination(<span class="number">1L</span>, TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> InterruptedException interrupted) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    connectionEvictor.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置的方法是：在创建 HttpClient 时，指定 evictExpiredConnections 和 evictIdleConnections 参数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClients.custom()</span><br><span class="line">    .setConnectionManager(connectionManager)</span><br><span class="line">    .evictExpiredConnections()</span><br><span class="line">    .evictIdleConnections(DEFAULT_IDLE_TIME, TimeUnit.SECONDS)</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>

<h3 id="Fluent-Api"><a href="#Fluent-Api" class="headerlink" title="Fluent Api"></a>Fluent Api</h3><p>HttpClient 从 4.2 开始，提供了 Fluent Api ，使用更为简单。在4.5.9版本中，其内部使用一个最多200连接，每个路由最多100连接的连接池。</p>
<p>maven依赖：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fluent-hc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;httpclient.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用示例：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String response = Request.Get(<span class="string">"https://www.solidot.org/"</span>)</span><br><span class="line">        .connectTimeout(<span class="number">1000</span>)</span><br><span class="line">        .socketTimeout(<span class="number">1000</span>)</span><br><span class="line">        .addHeader(<span class="string">"User-Agent"</span>, <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:67.0) Gecko/20100101 Firefox/67.0"</span>)</span><br><span class="line">        .execute().returnContent().asString();</span><br><span class="line">System.out.println(response);</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://juejin.im/post/5aefc08af265da0b78686ca5" target="_blank" rel="noopener">https://juejin.im/post/5aefc08af265da0b78686ca5</a><br><a href="https://www.ibm.com/support/knowledgecenter/en/SSGMCP_4.2.0/com.ibm.cics.ts.internet.doc/topics/dfht3_connpool.html" target="_blank" rel="noopener">https://www.ibm.com/support/knowledgecenter/en/SSGMCP_4.2.0/com.ibm.cics.ts.internet.doc/topics/dfht3_connpool.html</a><br><a href="https://hc.apache.org/" target="_blank" rel="noopener">https://hc.apache.org/</a><br><a href="https://segmentfault.com/a/1190000014044351" target="_blank" rel="noopener">https://segmentfault.com/a/1190000014044351</a><br><a href="https://www.javazhiyin.com/26577.html" target="_blank" rel="noopener">https://www.javazhiyin.com/26577.html</a><br><a href="https://cloud.tencent.com/developer/article/1170331" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1170331</a></p>
]]></content>
      <categories>
        <category>communication</category>
        <category>computer network</category>
        <category>http</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux expect 脚本</title>
    <url>/os/linux/commands/expect/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">Hey, password is required here.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="483f195ac567d3e41c626aaffa050cecb451155d64a811783d7c99f44c1cb1ae">43bb87d26d40f1e13c5dbb8dfa6aa503d7861cbc7dfda7658acd292c301154ce321f94350ce697fafa4b2767bfefd6f57ac1fe97b0cf6785a487592cd4c89d6b9036437950fc75d75879ad1e7245af7780ee972267548e76cf24b4ab7d74f692aac4a72648dc8ccc8fa7de99aa6b4206fb82d17415afeaaff586f883014c12808c2e66200ef6e9cb7afdf83699e66b4af68e952ce4bb366c5a73ca3b152ad45c33ee12b2b76c711d8933e6a07c6ff91451c89842b7d6257c56819bceb1f53b58e9b8f603ec31485d1d91ab2f67265cc3fd9dacd4cdbed36efa101d4de27bb8dcf1f8791fbee6113dea63acbbb3be6a7aafe2c12f9b1f94c8bd1104a5de40659b79c41546ab5d6bb2323ea8c636718d98de4c5f4650bd2eb3fbe474fff34207b6c25d79320e567d0d36d3cff9046e539decd25275b105bc49817496dd28912302d96d227ac7a21514592e03bf4f99788cea9de7498f57ff02a2f61984cd8406d348604a6357d85e68fa3b30773e109ca3a3b9515bd25d8b96a07a229058ad1265fae2c33901f29f456c1cc9e22cbb2058baac041f21d793f748f555db53be040ab60f57913c1d398954237e2b296059ceb6bde4515221d8c0d224379bf9d60651684592581b4b3ee248b7a2491116f18870db5b46ec06e32a8b80c923d4dba87de08e1cb4c0f462fdd6f50338bbd4e30b86c72683ddac3b77d2384582387b11570857d365f77c66c05cc79031a1bea1fc65700f5e8a7b7a3c1a8061e006b65e761c260d8bd42f4662287a8647fde5b7d2fb25ac6b9e7b07384b4fc08131faa5744041814c827393dab0214cba4935e9abfafa6f0ec38626b1f0aa375c24c1e5b73642d8c75f8416d574307717c9bf4c098ea4c20ecf6f60ae197ce488938b1a0102998acd723ad55bde48dd6b3d12dbd696865e690ae47ea2ab9dc6531edee78d54dc9d3d6bbe67c0c8b51bace88601f186e21daec795c019197a4277ccf11c09ba491938aa306936b157a124b8a86ee130a9958aba4d6a9e4ed577949005047b4b120ac2c75ef1d253ed32e9757c33bef41d6ddca74c4fa6e74d6a4ad5ff0218dd5127697e2952a24aedc7dc9329feb99b3abcce80ddfdb65e80f7849ca5113ed2f04a7b856977a4bb1d4a2f9b25d345cdfd979b1f374d8bd8beb9e78eaab5aae8c52f2fa1941151cf6cfdb4ee297dc8397b62781e369f3ab6400e5b4db250aa24146d73f4de5832e0f9252eb687aad47f00716cc88c98dcbc5ecf2b3839e1297009f71a9f8f573e2bbfce11b3d27cbed12ac03b39884d38a44e88ca4a120021bc09197fce66015d94e377ba53e504320e25120479b57f6c02fc7956ebc8a88baf065adadfd82fddb612c222e49f0d340fc4e974f3202663c9bf05aef206d2ca0296c11c0cc1638a4caed2c0398ee540de18edcc010b1b3e153ecf7a8ecc974ed01795eb2b1741482488ba84aa3291d53b4f5ea3bb1eb8fe5999d960d71cd15a046a9c922320f11bab20b42ce80c6391396d87044fabe41bcbf9da3ba845faa47f964535f6cb024dd7389d1c4dc3e6ec3d0d63cb7deb27d8a8fb41c20cdc1be5e5fd7aa9311d71aca17eee6a739b26c45969e1e648f4164cca977332c9f00144adbd3c5e0f9b99fe347baa429cbf5af9c299178d24be547bd761f071484c7fd9749e2bc1e1a9bf553e70a9b114c4e9d70fe89e242e02a0d7ee9cc784914c69f07c7e968d7a0110781251c9a666ad725584b65e0d39b9c6b463e0383f26e1c8abea450b0f94ad740e413a54e033046aedcc43d23b2da01c4abbe8188e7ba4688c446d184d51879ad69f4cfe5fc67d13e986ad7d74755708ad1a26022ba4a8eb56e9fb3fbdd6a49b353c6cc843b3d12250037ab8da41787d7de72c700083261590fb7a27fe8860bce9a644ef8d06bacd8328b00802ab87c1e9c42717a98eeef7b7116b09ed2f1697beed9a638f887346e4cd62a6e67904bdf6d4bfaa05173e264573a9aeaccbdff7453e5b3bfb56d07e9c83e79437ac5b1e01943041174067050a645fbfefad0fe142d33512af7298cc254e6a0eb8ca8014ed78ae01b71c813a57db5c6d74ab6de2aca385d283fa37a8a66ff33efcb22468ef3ce9acf603d48642facd1cf037e63289e950ef0dd61ee0d60e4cb254511361efebcecda92ea75109edb46262209153eb228d579de6fb3391729db72caec47449147f953bb8113507a286bc7c446b62a38eff7c53e8ef5be97b82a44737101e3c155fc0c9f864449a51ab0f3f2c6a7b2b7410b4a77f54a1aa4c4698a887f42cb4d511045332acf8c01e840d32282e7666a36c1d8cb32bb02b074dce61ab59b358603ff2cba404bec775ec3c6a05d5675b238a1cdf4a2e6f403691dcc6faff9679a8ea0f4d4873ec41985e6abb3081feec155ac4f64c4c55f175738ed9905753021a740e28f2ac54bc0082ec00025ed8fa2995cabb5bccd09159a1625c3f52d213f6a525a55c3cda8764f737667f7fbe495a5fa84b59b0f501426af2befc5310108160cbbc5800f2d510392f148ce4791a606c178034fde9f34192e4511ce2048d2d2b9ba5ddf0d87df7029157a9d8f5c763d02693dd8a633d030330af42d4d76e16cfbe94a4487e889cf997097be5bb074f81610c116a0106b4a14063dc50d5938b55b9fac43e05b9f3397b35a92a36d01a9516aa5f205bc09624eedcf2b5a2ac044d8d75eb7ecb7d4bfbf9b1297e71993e502cb7ded9dd62aab55a132c7754828af2b1ff78727df1e599dcabcaef3a1b84ab4686db9f5a10b30102dd0f5578eca063caf542a2862770e584deaa11145a4675deb9529b87a74550b45f428cf47cd9d6cf6c9993b7d23c4449cb023bd5839ccf2b6ce29137c581d3be5d168295bb3ee787bb844b71bfb500fc4a2fdc680281a6e35c79446cc0ef6c0838a1d1cc73197b5b5bbcdc602dca41f2aa8d8f80fd5cf500a49005136acbcd455ba9355a26e585199599ec639d1c25ec27a0f6ea5f81d03ecff4d04dd55801d7e863d9bfbfcb69084fc97b7d9f84039d9ff92f4f721f315927a97f04eb11b6b98a7c38fb3ebe84c0c46ee6c20b487e261809c282f7ca9ba77f9b8b48e9a4a5a64ea2ea9094694f4917797406e8b5fac8268c434a977147a35578c480bafe7b1bfaa2a1b34dd2883d120a30442588918137ae94970157710f0e17a3649f9545ff05fb8214b25c79dded8472c8b54d64891faaa1703121174e576ac1ef11215f41e0e7618934758e38bf7850376c3d54291d4f923f26d9dc574af724a95071c81a3d12c143771325b3ca523e5d9ec691be9c9bbadeaae77238844d250c8c3558fadd00fdb3a3c4fbf85bed91befc021738daa9214718d585985af03afc467a55995ff882a1820a18193801e78846b8e5f98256c9faae8091e2392eff94f228e0f88a8257c44cdda7f7bc88d5f55d5ceba30564d88037d2432e9c3cf291abd15fd610fc5bd190ef68a9ddf595999a05bc8d13a2715e657ebd5e72c7620b6ef00cc49719b9c28e593205187e549f67906c2dad1df18954fee1b729f0e65471e3bc5a96c8af8b1fae4b064c23329b61d7575b9475654a31ef1275f11903726b261354abd118bafdc73c32b8cc7341b56889b99ae6f739bee4b3895cd2353268d864583216a514b78f51e58d84532aa7a3d280b3b858fd41dddbe11b0d578c77055a7b1d5ef6d63ee0f697c141b0079ffb7457eae542fd8658f34d7c50dec0bc5781497d8598758cf779cab92413d06fd973488ee76a5c101e7c820ca42272ade96fe4f2ffaa27dd67ff61bd0eb41b69a17d9fb264e04d840ebc6f161f9616127acaa194118680e3e946a31016725fbd23db09f10a690aa1094cd4377a2fe448ea086325129a02827ef6aa48ca9c57e1e8c5127b1ecd82450e22a8fac779f1ae54bbf548ade553786610f2089d900ced4afd7b9077a7ff245a8cff6a21e2c9b82cf9e65794a72bf29aa64a6412d01f837111cda9e0416c699bc3a2f36c0f2860fa07981839436ba4bfa9e1ad98349a7dfbf953ebd9525762985eb51e89e3bea83d998b8889de0211c033b6511d60b993c188b8ddbb6ffeaf15f0a4a4eb50e1207cead7377486e6b227a519c0fceffbe633d65a67c337f95237fecbd17bd10fb636105ef18fb88c483d14805d518ce5a32b33930a907ea8e1403819574e1528d39ab5d8b8fff2a7c074d5df34aa8f047a67b965143de305c5b884ee0a818a2c51679ee00260556ca7fd2404fb171d3cf858a5db49ad4d670fd4a249305ccbdd48dc220b03b142ce9fceec5a1372399b78763d1279974bffca57453e627631bcf21b66f37caa331c20fc6451fb491ed47fd7279721e4964a32bbd609782f33ce59e86119c48b03c3f3c4feb1848e1950ef8ab69bf7d97c1e80e8281a3fb07161c92010659a6cd304fd854fffba8cc6c3a0ecdc8ed3a0b999add902fd6e9841125ea5af2b1fa6499b39a5c2b6876e683943b192babca4d2f2b3768c386626f303e0504102c7859cfae3aefa08d590a7aa91b0fe2961982a116ee743245cc4159cd719a38785e73787fad7b822e81680ca119a64f1d4e2de8b051791f8eea2bb9ad9972b8f6cb86cecbbd2315bbc089857975bb72e40713337ebb6ef9c0a3c1e0752ad495abbdf179868c79c861ffaab08fb2239f9f693c96f73b713ca41ccdf261c009d4857671675c3bf7987754bdf14d9d130d05d87326a7b4418b1ef4c6b1c7c854dc7dfd003221c7240715440c38857cd953423327f3e4b8143e375083ef946d000d8a839507ff7339ca0610065ba909ecbb2b2ce3541bc7518cec3b5524dc139e75d1b77b950b34cb08ed69ffa929b757ee1aea8f9ac10fd51e5da1360728eb83cbbb8b02a7b0a6a199298d0188cbd481d217d9b1702c9dba83766d7e987b3dda050be371ceba740ea158cbbba171beffa0e4ae4d4a7dde71eed4385e974c87c70e847f4c11eac09acac4fe8a80b67cbe772cf54c10e3620a75d3e837fa9feb1387e8a3d1244916b34d4be0f557dd9cc90e9fc70b6cc32c47a16b5ca4a11cf9340d00b034d135925d3b243f744c3d395431a53bc7201a32257b6175c7e9346230be5356047caa0e438376f8cbfde689891b47e1dbe6b14feec273d61bf80d1730a90d6014d287052831bcc11d545dcff98a366bc6572729640800e75362728825a7d4a8112016d52fc2b4827f3cfba57f3996ac01c08885356d9e7e07d068ce2c7774477aa34af99223e1cfb35999305054ad0cacc53539984bb16579a50f13611a3a5bfe15e26be6a17132a69ba2a97645097dcf3c9c0281d0d3c468452e15a642d92750f935437960cf09365dd8280679505e52f0d55f2438e6415b63b9fae89c6c3e921266e721d029d231bd5958b3b786771f9b666d7d28fcbea61ce5a4ee4f5bd2d114f570283ae7bee7c585d3de46fb9393d93873c39fe00ead23c14a212b9840108e5e7cab985ea83c0b0a3c93333557307c9435beee2f3ec5beb4549ed6887f25e40ffe40fe8a4c0164fd84a7c7f76f80098ad1e31afdcd1fed62b3cb170062847fc043a90004d52f1f5eec921f1b9aa6309bfee4c3ed9023401f34979fd1b12dab71cdbcb32b80199726043142f118aad01499d685ad38fdd91cbbd6ac03476c62c401e5930b066aadf69e7188273d83e30a11069d9b3ffedfbc43e30b0bc42c6a8f8f0a2a8e7866297e2cc47ced4c58a361dea6cc796e8b77d02406a4749ee92b96e74726dcc638c1a8744fa12ccc7071654691ce8ffbbf49c82f4594e5e9245ae7a3b96480defcc34f2b0be14adb10a78576ba705c91914ff89abc17198a39faea1c15a0d178624c186a8dd1b2d8c6c9608776e500d216932b353c7c548e5d4239ecff451dba682e94c332904c0588cfc56a488e122ed036f3a63a4e2f30aa39f5b40d58f094b001ae06d3641bfa76810463ef8e6fff44222f986f18c881414d6e22b9671e363ca07182f4a1eed7c0190366610dee90ce02a1f639780e709a2bc2ed620feab704fa516c96d2bfafeb3b99001d4e4fa0839e240ac65b453ed6dd1666786d8669a54b961e0c817cfdd1873dbf6eb8c346235134da12bc864fb06a12b695c1e723ac6d554c7417a11ebce378047a5c7b254f59e11ece5161ec7c739b74d81db23d037ea6ad2772dbce69e6a5723b263762f171df2e7cc5dad79f3a2308df7e97f4a043f4be68d2250bed58d09c10d92b2c619438eeb5d0f6cb296cc96fface7f7ffdd26f08aed6ed1bf2a6790ee7a02e0cfd4b22e62cd45e0341b8afbac31ac3736af4eb86be43462d3590d1ef4269058ee7c19407b647c42250295c4a30c14bcbc893e602ce3bf7035caf7649557693a6377c820bf89c0c0c91d8df9878c2ffeed533c134d2110c13432811a9a0788b8127d2a15daf4a45c573985f74136cf847b346d64e92aae58dada3e0aa471b1924fba8ed37aeaba201c0a39f15f9c91402dc86ccb3bc0956cf2ab94cc05fb28951c0dbd4d64be938213fad6a464467fdacfdd5903e19f99185d4bc4722771af1b77b7f3872fd62a47ebcb6b8ff323b2ed241d2f0c808318444e266b18927eabfca3d1f23bb0133aa4eb0ad00be8009ff78aea900939b693039316ba5b9efe908e3a6dfca95aec57f01d4e0dbc9b6d527bae8b417a5f5dd500344de08ce68d8d1f289a920aac6c24ad869ec2980fd680b21bad1be5106617ec6da60d034cf4cc76489b76993a5883f5c54493b122c8861318dbf1e9d4e9ec91f9a5b1d84ee08d160a5a9599bb9be19ac83c9b8f31d0efa2404bccf4ae29c0f7c6233a6ba1790f5351c1f7fc492eda34b2879819b6a11aa6ff6808beb4a029d838b55e517fe8580c1772fb07deefebc885b3125e96ea6231fd497772107d24e11785eec0be89197d4e298cdb8132cbd9858f9fc3a93115da504c7b85ea36bc698870aeabdf8546739767abf393582b308e759461850e016970915fbc79b8407744724822dbee07ce621f98ce00a4f9bc3fa05efc7b7a8cbe566af2d0775a6387e3d35a1448e7737eeeb87e674333abb854fd7f38c38c97c8abf3cd69bad4f2ddbc957146bcb18ecebe066142c47802080261f90bda2c2aa30d6f02bb61d5977f1f372b07b5e761447eaae6b63f5091e11a68b86fb58973199cb69355ec19231e33579621a0ad0167e2b005a16c985899d067fe261a8463b2508392b568070eed90b8d34879a3074cbd5913eb3d979aa5cb94667a0c39717e9bc142359387c50f1290f81d352bddf2e60f8a2f339a7a8f53f7b16df3daeb35071cb7926a6d042486e9edc040d77906d5f11ccd7aae19ac5f494b2f962bd9c92862e251a0d25ec13c21e642627f706123b0792b7ad0d139c9d67d971a64647b7e0d741c126d4047881b5dee64ea5963e57cd48bce5b514b3773441a6a67ad8e010c0258d0c19ff74335d22ab565dae73ed9e61126371302a9da545d5303578b9514f64d38895b6e0ad898d7f6342c09e14b0e652e66ab38434fcb8727428cad7a781af1a4d73e807145029d05e9f7c7c362db09d4c3a2b6dbf3121dd19e9b2e9d4ca4780b3e15cd50b29182e17432785a3e50077978c62a6a8bf04d61a042ccc40bbed0157e16b5ee6c0eea8d76f95c4738b53470445e6ab503dc5af33a1477eb34fcfa3377de936ec84db3a62d7df914d12a2e5ce91364fa3ea308f81c87d9b04afe3954b0ec76eb6c504a984d4ac63e84534199b09ce37e94dc2c023e4264dd1648ec8d7cba912e407f21f5d44ee702870527742958b4f67a96c2eb91a7e4a53e18ac984825fd21500736143dfd969b1f87a5925f34e4c0b64cb1d69e4c98441fc84a6694d675f5e0dcff0d0030590f623ff55eb6a2a6da8664dff9e898b166f0af92d24a526da06940dd186e1aca9a01f550a581a2cfb9dc5fb5b199e48c0d959cdaffad26338f316f388652d08ce3e668a9d0b48f891b29a7aed577a5e86f17879634f77906f512680c669b21d5cae35d0087ade7f3a0853e302bbdc9ec2efd5654fca59223609dffc11a0e962d6190600b2191bce9222124bbcf0ce9add8ed04a932823758280cb66d390be09aace873541182cdc80f3f7e583e44c51b651add3c47979f34b7cfa901439251616c14ba7a6d387a54684e4dd8382dff532f55084ec2db89923188efb6dcca1efcb9551ae881926958f82f1ab8068a90d9a446d57f8e1e1b1e7c61f9f8a4d0509dc7d272a9a303446f64602ab3525438c3e0c1a61aa82aeb480455886de6e190ed653d1196fc808a67156c84153a9cfddb477022c6e8e79cf998e16e87a2621fc159ad6a0ef563661caab461f527294c88128aeb61ba09a130748f038ef7c33ba145ce5077b25842d1a36744f976f44bf6a5b954c69c4850b25a0dd0a7aecbcd3a1e2eb27ffea03d272141f69eb3b43033268422476a8fe26fd259b6913d5cb96c5c39bda4a309aa1b7aebfb97520dcf7ee344273e6265ca8f6be0f1e1da64e37604a4efc18e0a1a7f650378253ec421faee0308097b5a3918d0bcac1b46af2fcb60d74eba20445cb2fd4a5d4e9ec5abe30ba117493c76d6e73223102f30ee8c5a63034bd208204e95cd2f20711fca4d8b0f59ea081632fcd5f7ac305304d0ce3d8c7bf99aa594f5d9dcd2018aa6aada212034d6ccb6a0b973c13e3e42d36caf1d52b0fd5d5495b962fa268263cde12208131122f57249e98ae3c0d69e8843ab644f089ca134f379bfa92c932d82e3910695f8b82bf876f5baeec8879922c2fdabeede8cf4039f9be4fb5d7f6b1956026e391d1eb53c8fc877565826953402499b9f4e5d34a8a8a9c79a7ce54c5b5c5088a121dd915c217dc8bd39d36d99a69848ce086ddd8a9232f43c9d862cf2846b0dc5cccc66dfdc98f23ceca3abed071214b6c9cd60085036ce32790b8bf31e13fe45be83c601573acedc06ddd098bc1d75b60851b2336ec709ad6b1746ddc09f40e5d18ea45b700cfd83b570082a0f55ef010f2d9549ac3f388c9cc04021b7a048e89b790eb27c54cdfe1b9b82da44b999d3baa4aa1b48268f7beccf92ea6ba27ae2c2e490eb33e80c192638947cb8fa83b622c1bd11b45b0d34dc6080d93f341bd92fae264bf9bad04a6b6dc556d9a33ba98e68e323e0f5168f235813dfbdd5c5b275ba9b907a74cde437219dc742bf5174ff6cbb82a5a88e21cc20695e1f717c8cc05fb47f9f5b619f832885bb14135b9a41272ce5df54505c041b8e3e2df60429c6de786c6019487db94b0c4f4b786719e18372776cb065d405d3d4add57e9bc665da80bfc385ca9eec073e991bb384919702d52b495b6b5985c34352037a58d7891066f74c2d58a1cd42d640662ef2321b4e297350f7497d725791cf6421af5b71345671aa9509de0d753fe8cb73454bec9220c5a815daa18101a2794f546d0e18271f1c19aca6974edd27eb87722ce1ee75f169e2d7270da7ede7869a9b1b6b415fa745c233b8b4e90554ea73d741bda306d997d951f48f692f6ef59760030029d2c2b347626af51a9952bf3893a55884c6c46b8b112f7cfb0e33ade065a6f1204a32da141f65e807645f10b51ab811d870f8f13f43b3e8a5ec774cfbfbe7d0e664bf7cca2d57f61a698fdb0747a5b836e9e39d29f8a2226999aab0bd00e8544fe1be9a9e17c3d4f8869bcc71ebfb4c1298d7be4e0043bc555587fefda74e801e874908ffc174e3ac2bc9fcccd765bc22dd17bb3c655c13b400fad166f0db59256c4b1e4a75d837a40f6adcb65fa49f550a27109b4b6d0349225b01b392a81d8af61fd773e89e20e2e298c3d891dd40b27f4fba03c0ef286bd6cc3670e0a6daa703ccde452fc9229a1f8e6db3478bc4f51d9f4ec0e278b7ad4d455fa719e53bcb2a6edf9db03a17e0523c77f07fbf139fd196840f94419a78658374558e94c799b24f35cfda7f7a7aca3817aeb516ae1d850815b2f24f4500129661fe2daf60fe5278af289c8e81f4012ba98dbc645b61b6efbd012efac99c9b071272c286702894786db95df6d263730a0d240be050a2c6a9dd99b13563527dbe972c387ff8b3dba57085cba0ad2bb690a0e39c3a7f1e2a227dd5795811502964592c9377156da81842317255792edf53b981421e8f88ebe170390c918c40e9aa0ff17332134cb1c04085ea7c82180cd699d4b3249842e4209e252a845783e6de1860d1152d4d842fb653b44c66ae92f8d9bef81dadbdfc394482b1aac0c0f0aa0b903e08bf661e48b6d94d880281ff79ffbb365fe45f8b7876065eabfca7d9c2634305615d63253455a79ef7527a28abca02d6bfadb9c61068fd73e973ab695aecf1e74d1886c0fe3abae9be0ec4c212e82fdbc28f027bd06611703fe9f51953a5e98f4b7567d7e3c483990466f3b7e5d703e8151bbac124e2cbe1f9072c0c9b70e10860cbb70a7dcdea823569d1b83001909364ec1464922845b91be3d7239d16f42a1b36d5e5c2296fcd3180ec41d6557764e785a928a43ca69cd27f33aa998f799f7acea82284c6d7f1b2298793ec30f3bd533162fdedbb075f8b63ea2d9a2b66e742a3bfd7050deeda0527fb40d3f58d451bcd6f62065946c74eac427ddbde414c183bd5a249c844f557b5009ac6dd8f453be3bca1f38619accd29f8bfec113bd2f2eee1334b551aaab901be2248f682e42d70ae40628e5e5d6b466378e9982ad4b5f6da9a86611af215a78c3bb2a0b6a59b9e37a022396aeb98bcc30f5fcf6a20d044536da0c49aab71b4a6c6440d67f627d98d360c37222026e2cc13a7dde553d3b48dfd8edce2adec41837a26a4cc2f71c5406a72b4a18f656efa2d8574527cf678233bd72fb5cda046e6d1b733e1918fde63b799b580d3413a7df4c40c944bdefc27543dc102a62dfd4f7290d3ba0e7c5cceb9c759d15d6e92bf2221c4b9636e1d97afaa5ba7bb211fc627543e8e1aad32534ad13cb23ea0d4cda466e17b20fa826c0ab56f516bfb408a10a6d609151ecdd363b3512486f0a9848ebab924f92235ff6f6681304ee77b6a2b85c6881c3e0abbc99b9b316dc9090ea6376e8fa1ac4934a61d56ed825289f0e622db46d43bf4965f15b7b8a573991359f8e6474ba314d45d9579e32e63e5435b81b591071c4ee662061041aeb96428ee06c88f49d71085074d717514c230f79a819c80473333367da5594f75bef36e3d544b9a4f8e6ec33db522a6a6202b77932564f7c007cce74203025ae00cb4f757f7b6a2890081a510283c16b4a81a1460cffdeff5c120d12176a50e140a8221ebaa3e09d8d2a37dcb37380014ccdae51491a56396a0aff77313a15a94329bbe79fc59edbe5d8cb80ca6d353da3dceb60c889dc41f0c1bad89dc9d69d1da4b1c756ebc85cbda31ab7edd92ea7f494cc577ee6101c68b4a1c99161d1503643f5823afd1a94350e6e446bb6a9e64992bb68085adda9b5bc4d17d8a7fb62f913da23de6d77e39e9488aa694c326b482a107d2392f6dbcfac4b83d0704df6a4c92c9e1cd4c8b617188ed5ae083f9cdcdb170cf3b7dec2f2cb8ea73baabd0abae16fce54b84aa3c367fc6da554212dfbadc879ad55981a6bcc92c79c1c2cf6cf7aef798acb124c04dfb2fd747c4f65b7c7078fc587661a39d5cb5bd768c7800f81f3461a2706fb85ebe883ab145dc379e9a1581334069bb8e7382137ef3dc12c3ed2a8fbeffdcbafd4626542b4b4a80adb1624c2348703e5a8c7448aba595ac716607dcf284a0e939711696fdabd978ad9d49593087d86002c2ca02e4793184e7a0fc3bfe20dee15619ac6038ac3ae356fae7997f47ee4399fb90831d416eeba2b79b3ce58bacc9bff3fc44455be73f18115037fbd365aff5ad37b6f6c0ec3ed70a5a358ec02d0bdb63e3ddb8233c812c3dfe9b8feaaea9d6cd2961e0e79b9275f5b2a4b2f8162d26f65b932434a59e54e65db106343e584afdaba69ca1a412ef0f7c9a4b45cb853af8a44b3a50dfe36b16f1618b7fce1152e48d1efbcdc405a18b28a4c36d402df0a8633e39b9f3d89ae383706ad2ba83619361a982bbfdf2ebe2847139201794c991facd3a5411b37f201736b9db292928a5dac971df291d33bb4f73a62b9c55da935cc7467ac8586cc866aa7a93d6c689d949d3e9a99af857b687f13251cc7b01aadfa72b024cb015aa6b105a4267b79c765c538130d4ac8d36aaad96e5c3c4d55b9bfeebdc2e0a421ce8b0b993672c50f1c6bdf3ec8f6f40deeec492edda8eb2c5a6d460eedfffb0a56189642935d9d0c2c935329e1554bd0a87f96932c89a2bdef60b334013ac37b893c5f945bf0b90f367d6d7c7f27238ab50de6b481e133b34bad2d056005baa074eda39ae181d23ea8d8f73aabc745ea1eb42b4031c5627f78ff8e3c311aadcfc75110c1cc230d9653960c867fbbfb75a74e1cefe134eca4a695c66a20e4818e3a4bf03ff5ecc81de661a018e308faef333fb90214382afded050ae91ed6d4ac112b5c13b465e7f933df04b860472580dce1a980d7d9a82b5c26619a3c789ed410ea19a69925c43f88099d11d50c978df0060e7c1cebef3a23ad830f5e0f20c6a6faf15d4bcf5e957364941c23b1db9b27513992cec933660d1094e0c1a47b2d0491e5e0160cce08028c554a02a16954bc91fe9218142158e2bb4c4b190399c842f81b17454ed226b6183c31d69a3de8bf419e21155314e1ee975f7095d1e46f079c05a3d5a7896e636db0a3645194221bbd28ae764240bb2ab40ceacc123fb93b006e53a5b5f367613668fa433facccf48e5ee78cbf878e871e018900e4663d2885f3dc884ca81a8af9e908e57fc352e05859494914e5eb10959401ff878d0a4dc387884c5cc8a23f0dd3601a31f061d85e49ca90cb52efa76394d878e5ba4690fbb96a1cf0c015cd253e76c4fbdd9946c7efcd6373c33abda0f5b838772fddcf41b592e18293de4aac41d2e875d4820a2cbfdf5594ecaf37cbd338e708a64b6d78a2d9edbea2eb530090539d06466895ebe61cb564e619ea45f559261fedd8952c591fe07b608b5783a4f606c80858be786ffd1ce50f2aaaab899eddb360b809cf0faf0a63c49d947705f73b15c3a5eab3b6d08b84dac532bdfc38fa65b1d16696a7e66be48d677091313438d2eac8e5d8f99fb26a31a09b2b21220d966357fd72747151a3524bdc178292bcf45481ce3600f7f82bdbd1cbbd9022a4f25f4f8d0e3544dcc4bc32a09a36083404c513f203eeac9ddc32a5f2e3a73c3cb6ab5031b1c9c624418c8777be94e0e78e0730c902c6b6c55ac5ed3bb0feae79bb55d556fa9b70b56e0e41e87e2539a9dcdd703873bb5a95f5a8aa172c297d416cdb24f65109ed78b2a1e106cc48f6b150a99765f88c02b4513bb90a8f682a422adf73d58873e284e179857d9a9bf646d21ccded4dc55c3e0786fdaf2c7a325deaa2b8a1f31fd077c7fbf20e40e9cfb614fce9c3ca5bbe9b915d44735dffcc88cc65070aa2583c21b1e0c5c3094ec76b19df1a5735d8892bb1768742aa24d1312073a83afaa4299712bc2e9b95b2ddf0a7545697cc01dc8a03ceb507e8c43da1bce5b2036ae238e85b1ae70f100204e120f77fbfbf217c043fe81911616603d2c3f62d6474e0bd0fe85c6170ab73f8031dd18feed6147ea062fd02cc5cee489aef834d9317ddebffc381a3e38125e862f79e0202e858eacdf66183d740ecf018fcf0e42e370ec395f8e61eb140e08cc4a8064ea580e2dcadd51f7a53f9cc23ca80053331ac1e806e0bdc532162950a15219fe2bd9b2dd1e697d7ccc2f33334a15bf74fd1b8a5bc00379d3a40c7c93e4dc35a178a332cea1f441da9a728c46ea3475e454cd87a41393f10d9c42c64eff60685a3044605503a55760cc82b430a7059333d2f3ff270dfdff410a9fa1bc9d96f0b2fce3f9a698826c30943b6124be0318ce028a830d6621a5e6d0af9ab3174df5212e84b7e40a2a6444974ebee8960dc27c3a5460b40f152306ced0981e77877a4c288b114ddc898e7adfb7c0d3817ace28e8fcc4ceeec9335afd55eae218e4ce0afcd52f51410d3cd89ae32fe1dcfc888dc67c2261db6e211e00ce14b0efce55e796550140dfcd7a462c9b80f95e2000f5dd7b8a5630a4aecf305fca3bd2b8bfd6048ca6049af309a00a180418b8fb28eb0455223607ad1ab60be133bf2278458bffe6be1512a6af5b5c097cf0536f79ddd28745ea9b4056f842fab9d5a9f223d35e0cfdf9a557f06e14dd4306</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>The Infinite Possibility</title>
    <url>/story/infinite-possibility/</url>
    <content><![CDATA[<p>The universe is an infinite space where all its components scatter around everywhere. Let’s assume every component has absolute freedom and it will randomly go anywhere. Probabilistically speaking, the universe will end at a state where all its components uniformly distribute in all spaces. We are not there, obviously. So, the universe will continue its endless journey to the very state, as the possibility believes.</p>
<p>However, the undeniable fact that every possibility has its chance to become reality. It’s also possible that the universe might be in a state that all its components gathered around in a tiny space so small to be hold still even for the most powerful black hole. So, a big bang happens instead.</p>
<p>Let’s assume that a new universe come from the ashes of the big bang. Here is the question:<br>Are we in the universe that has already exploded or the one that has just appeared?</p>
]]></content>
      <categories>
        <category>story</category>
      </categories>
      <tags>
        <tag>story</tag>
      </tags>
  </entry>
  <entry>
    <title>夜王的游戏 | Game of the Night King</title>
    <url>/potato/us-tv-series/game-of-night-king/</url>
    <content><![CDATA[<p>夜王精通孙子兵法，深知伐战为下，谋智为上的基本原理。因此采用地道战，伏击战，心理战等等方式，围临冬城十年而不动。</p>
<a id="more"></a>

<p>每每于国家法定节假日，突然从地下派遣特种部队，装鬼吓人，却不伤人命。又常常在周五散布即将发动总攻的谣言，城内人心惶惶，日日不能安睡。围城三年，已有半数临冬城众过劳而死，又过七年，临冬城众十有八九，已无斗志。终日浑浑噩噩，借酒浇愁。围城4000昼夜，临冬城众，除三百幼童，酒量不济，其余皆得肝病而死。</p>
<p>夜王至此觉时机已到，南渡奔流城，取道多恩，分兵百万，合围君临。此时瑟后早已更年期，脾气暴躁，挥霍无度，君临百姓苦不堪言，夜王许以厚利，准城民自治，百姓纷纷揭竿而起，围城不到一日，瑟后已被斩首于市。夜王依诺，君临改为自治城邦，城民欢欣鼓舞，感恩戴德，次日竟有半数城民自尽，主动加入夜王大军。夜王既下君临，与民生息，三十年间不曾妄动干戈。君临百姓生活美满，人口竟至六千万。然则，夜王盛名既成，加入者纷至沓来，百年间，夜王部队已过四亿。</p>
<p>夜王已得其法，如法炮制，历时一千七百五十二年，尽下七国。座拥千亿大军，七国人口三亿。可谓宏图大展，史称：夜王之治。</p>
<p>是日也，天朗气清，惠风和畅，夜王相约坐下十二联合创始人，回顾七国历史。本年夜王纪元1833年，夜王博物院刚刚建成。镇馆之宝，乃一把瓦雷利亚钢，据说，曾是北境一个刺客行刺夜王所使，险些得手。夜王正视其锋，凛然不惧，拿起匕首，对座下大声说道：区区破铜烂铁，何足谓哉？</p>
<p>恰逢八级地震，七国科技落后，未能探测，众鬼纷纷跌倒。夜王站立不稳，摔了一跤，刚好摔在瓦雷利亚钢匕首上，历时殒命。死亡军团顷刻烟消云散。</p>
<p>八千年后，考古队找到了失落的维斯特洛。茫茫大陆上嘛都没有，只有一座夜王博物院伫立，内有一把匕首，经原力鉴定已过万年，却不生锈。刀锋散发寒气，一测之下竟是绝对零度！众人纷纷称奇。</p>
]]></content>
      <categories>
        <category>土豆</category>
        <category>美剧</category>
      </categories>
      <tags>
        <tag>美剧</tag>
      </tags>
  </entry>
  <entry>
    <title>猴子排序 | Bogo sort</title>
    <url>/algorithm/sorting/bogo-sort/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>“只要时间足够，一只乱敲打字机的猴子也能打出莎士比亚全集。”</p>
<a id="more"></a>

<p>bogo排序的思路非常简单，将数组随机打散后检查是否有序，如果无序，重新打散后再检查。只要重试次数足够，概率上来讲，最终总可以得到一个有序数组。</p>
<p>嗯，你也许会好奇，“重试次数足够”是什么意思？简单来说，“重试次数足够”可以理解为“地老天荒”，直到时间的尽头。很神奇吧？没错，就是这么任性！来，让我们一起 bogo-sort，让我们一起地老天荒！</p>
<h3 id="二、示例代码"><a href="#二、示例代码" class="headerlink" title="二、示例代码"></a>二、示例代码</h3><h4 id="伪代码"><a href="#伪代码" class="headerlink" title="伪代码"></a>伪代码</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">while not InOrder(list) do</span><br><span class="line">    Shuffle(list)</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BogoSort</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Enter array to be sorted here</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Unsorted: "</span>);</span><br><span class="line">        display1D(arr);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        bogoSort(arr);</span><br><span class="line">        System.out.println(<span class="string">"Time elapse: "</span> + (System.currentTimeMillis() - start) + <span class="string">"ms"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Sorted: "</span>);</span><br><span class="line">        display1D(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bogoSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Keep a track of the number of shuffles</span></span><br><span class="line">        <span class="keyword">int</span> numOfTries = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (; !isSorted(arr); numOfTries++) &#123;</span><br><span class="line">            shuffle(arr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Boast</span></span><br><span class="line">        System.out.println(<span class="string">"This took "</span> + numOfTries + <span class="string">" shuffles."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Standard Fisher-Yates shuffle algorithm</span></span><br><span class="line">        <span class="keyword">int</span> i = arr.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">            swap(arr, i--, (<span class="keyword">int</span>) (Math.random() * i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        arr[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSorted</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++)</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &lt; arr[i - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">display1D</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)</span><br><span class="line">            System.out.print(arr[i] + <span class="string">" "</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中一次运行的输出为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Unsorted: 4 5 6 0 7 8 9 1 2 3</span><br><span class="line">This took 19035442 shuffles.</span><br><span class="line">Time elapse: 4734ms</span><br><span class="line">Sorted: 0 1 2 3 4 5 6 7 8 9</span><br></pre></td></tr></table></figure>

<h3 id="三、进一步的讨论"><a href="#三、进一步的讨论" class="headerlink" title="三、进一步的讨论"></a>三、进一步的讨论</h3><p>一个有n个元素的数组，假设所有元素均不相同。</p>
<p>通过洗牌(shuffle)算法实现随机打散效果，最优时间复杂度为 O(n)。<br>该数组共有 n! 种排列方式。其中仅有一种排列是有序的。再假设每次随机打散后的结果按相等的概率取其中一种排列。则，随机打散后得到有序数组的概率是 1/n! ，根据概率原理，如果我们尝试 k * n! 次，得到有序数组的次数的数学期望为 k 次。因此，只要尝试足够多次，概率上来说，我们总能得到有序数组。</p>
<p>另一方面，每次随机打散后，得不到有序数组的概率 p(1) 是 (n! - 1)/n!，这个概率 p(1) 在 （0，1）间取值。<br>经过 k 次尝试，仍然得不到有序数组的概率 p(k) 是 p0^k = [(n! - 1)/n!]^k。<br>由于 0 &lt; p(1) &lt; 1，k越大，则 p(k) 越接近 0，但是，p(k) &gt; 0。</p>
<p>结合以下两条定理：</p>
<ul>
<li>在一次试验中，概率无限接近0的小概率事件几乎不可能发生。</li>
<li>在一次试验中，概率无限接近1的大概率事件不一定出现。</li>
</ul>
<p>我们可以得到如下推论：</p>
<ul>
<li>k 足够大时，bogo排序基本上能得到一个有序数组。</li>
<li>即便地老天荒，也不能保证bogo排序一定能得到一个有序数组。</li>
<li>bogo排序的时间复杂度为 O(n*n!)。其中，所需随机打散的次数正比于 n! ，随机打散本身的时间复杂度为 n。</li>
</ul>
<p>综上所述，让我们一起 bogo-sort，让我们一起地老天荒。</p>
<p>最后一个问题：</p>
<p>对于任意长度为n的整数数组，第一次得到一个有序排序所需进行的随机打散操作的次数的数学期望是多少？</p>
<h3 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h3><p><a href="https://rosettacode.org/wiki/Sorting_algorithms/Bogosort" target="_blank" rel="noopener">https://rosettacode.org/wiki/Sorting_algorithms/Bogosort</a></p>
]]></content>
      <categories>
        <category>algorithm</category>
        <category>sorting</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>睡眠排序 | Sleep Sort</title>
    <url>/algorithm/sorting/sleep-sort/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>简单来说，睡眠排序通过为每个待排序的元素开启一个任务，每个任务根据元素的key休眠一段时间，然后释放这个待排序的元素。最后按照时间顺序，先后收集所有元素，就能得到排序好的结果。</p>
<a id="more"></a>

<h3 id="二、示例代码"><a href="#二、示例代码" class="headerlink" title="二、示例代码"></a>二、示例代码</h3><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sleepSortAndPrint</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> CountDownLatch doneSignal = <span class="keyword">new</span> CountDownLatch(nums.length);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                doneSignal.countDown();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    doneSignal.await();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//using straight milliseconds produces unpredictable</span></span><br><span class="line">                    <span class="comment">//results with small numbers</span></span><br><span class="line">                    <span class="comment">//using 1000 here gives a nifty demonstration</span></span><br><span class="line">                    Thread.sleep(num * <span class="number">1000</span>);</span><br><span class="line">                    System.out.println(num);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        sleepSortAndPrint(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">9</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">4</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、进一步的讨论"><a href="#三、进一步的讨论" class="headerlink" title="三、进一步的讨论"></a>三、进一步的讨论</h3><p>睡眠排序的行为是不可预测的。当开启成百上千个线程，且等待的时间以毫秒为粒度时，并不能保证输出是严格排序的。然而，只要愿意将基本时间间隔增大到足够大的程度（秒级、小时级），睡眠排序是可以保证正确性的。</p>
<p>睡眠排序的另一个问题是，没有办法同时开启上万上百万个线程，因此只适用于较小的数据规模。当然，这只是实现的问题。当为每个元素开启的任务不以线程承载时，这并不会限制睡眠排序适用的数据规模。例如：先创建好任务，放到一个无界队列里。轮询每个任务，当到达设定的时间时才开启线程执行该任务。</p>
<h3 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h3><p><a href="https://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort" target="_blank" rel="noopener">https://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort</a></p>
]]></content>
      <categories>
        <category>algorithm</category>
        <category>sorting</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 常量 | Java Constants</title>
    <url>/language/java/java-constants/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Java中没有对常量的直接支持，但是final修饰的变量效果和常量相似。所以，Java中也经常用final修饰的变量来表示常量。</p>
<p>Java中常见的定义常量的方法有：</p>
<ul>
<li>接口</li>
<li>类</li>
<li>枚举</li>
</ul>
<p>这几种方式各有特点，孰优孰劣较为主观。建议诸位怎么顺手怎么来，不要过多在意这几种方式的高下之分。</p>
<a id="more"></a>

<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>个人比较喜欢用final类定义常量，且在需要使用的地方使用静态导入的方式使用。同时，也可以将常用的标准日志也放入其中，以避免在每个类中都定义一遍。</p>
<p>首先，定义常量类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> packagename;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * final class 防止被继承</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 防止实例化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Constants</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PUPPY_NAME = <span class="string">"banana"</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在需要使用常量的地方，用静态导入的方法使用常量类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> otherpackagename;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> packagename.Constants.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(PUPPY_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="Constant-Interface-Anti-pattern"><a href="#Constant-Interface-Anti-pattern" class="headerlink" title="Constant Interface Anti-pattern"></a>Constant Interface Anti-pattern</h4><p>用接口放置常量是常见的反例。感兴趣的可以阅读参考链接中的相关文章。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://stackoverflow.com/questions/66066/what-is-the-best-way-to-implement-constants-in-java" target="_blank" rel="noopener">https://stackoverflow.com/questions/66066/what-is-the-best-way-to-implement-constants-in-java</a><br><a href="https://dzone.com/articles/constants-in-java-the-anti-pattern-1" target="_blank" rel="noopener">https://dzone.com/articles/constants-in-java-the-anti-pattern-1</a><br><a href="https://www.javaworld.com/article/2076481/use-constant-types-for-safer-and-cleaner-code.html" target="_blank" rel="noopener">https://www.javaworld.com/article/2076481/use-constant-types-for-safer-and-cleaner-code.html</a><br><a href="https://www.ibm.com/developerworks/cn/java/l-java-interface/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/java/l-java-interface/index.html</a><br><a href="https://www.cnblogs.com/hyhong/p/5206809.html" target="_blank" rel="noopener">https://www.cnblogs.com/hyhong/p/5206809.html</a></p>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac 系统设置</title>
    <url>/os/Mac/mac-settings/</url>
    <content><![CDATA[<h3 id="一、显示设置"><a href="#一、显示设置" class="headerlink" title="一、显示设置"></a>一、显示设置</h3><h4 id="旋转屏幕"><a href="#旋转屏幕" class="headerlink" title="旋转屏幕"></a>旋转屏幕</h4><p><a href="http://osxdaily.com/2010/12/28/rotate-mac-screen-orientation/" target="_blank" rel="noopener">http://osxdaily.com/2010/12/28/rotate-mac-screen-orientation/</a></p>
<h3 id="二、文件管理"><a href="#二、文件管理" class="headerlink" title="二、文件管理"></a>二、文件管理</h3><h4 id="使用-home-目录"><a href="#使用-home-目录" class="headerlink" title="使用 /home 目录"></a>使用 /home 目录</h4><p>Step 1. 编辑 /etc/auto_master 配置文件，注释掉 /home 这一行，不要重启。</p>
<p>Step 2. 执行 <code>sudo automount -cv</code> 命令</p>
<p>Step 3. 进入 /home 目录，建立 软链接。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo ln -s &#x2F;Users&#x2F;xxx&#x2F;test &#x2F;home&#x2F;test</span><br></pre></td></tr></table></figure>

<p>针对 MacOS X 10.15 Catalina，根分区是只读的（受SIP机制的保护）。所以，先要保证存在 /home 目录，再把 auto_master 中的 /home 挂在去掉。然后，就可以在 /home 中增加软链接了。<br>当然，这种方式只在重启前有效。不过，考虑到 Mac 很少需要重启，这也就够用了。<br>万一，不幸需要重启，只需要把 auto_master 中 /home 的挂载加上，执行 <code>sudo automount -cv</code> ，再把 /home 的挂载去掉，执行 <code>sudo automount -cv</code> ，然后就可以正常建立 /home 中的软链接了。</p>
<h3 id="三、触控板"><a href="#三、触控板" class="headerlink" title="三、触控板"></a>三、触控板</h3><h4 id="三指拖移"><a href="#三指拖移" class="headerlink" title="三指拖移"></a>三指拖移</h4><p>在 macOS Catalina 10.15 中，设置路径为：</p>
<p>系统偏好设置 –&gt; 辅助功能 –&gt; 指针控制 –&gt; 触控板选项 –&gt; 启用拖移 –&gt; 三指拖移</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>macOS 10.15 catalina系统下，如何创建/home目录：<a href="https://www.zhihu.com/question/349821537/answer/850783527" target="_blank" rel="noopener">https://www.zhihu.com/question/349821537/answer/850783527</a></li>
<li>macOS 开启或关闭 SIP：<a href="https://sspai.com/post/55066" target="_blank" rel="noopener">https://sspai.com/post/55066</a></li>
<li><a href="https://blog.macsales.com/45473-we-explain-what-system-integrity-protection-on-mac-is-and-how-to-control-it/" target="_blank" rel="noopener">https://blog.macsales.com/45473-we-explain-what-system-integrity-protection-on-mac-is-and-how-to-control-it/</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel</title>
    <url>/software/office/excel/</url>
    <content><![CDATA[<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="1-找出两列数据中存在差异的项目"><a href="#1-找出两列数据中存在差异的项目" class="headerlink" title="1. 找出两列数据中存在差异的项目"></a>1. 找出两列数据中存在差异的项目</h4><p>思路：组合使用MATCH()和ISNUMBER()。</p>
<p>比如，如下公式可以判断B222单元格中的内容在 A列 中是否出现过。出现过为true，否则为false</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x3D;ISNUMBER(MATCH(B222,A:A,))</span><br></pre></td></tr></table></figure>
<p>注意，MATCH()函数中有两个逗号“,”，请不要遗漏最后那个逗号，否则执行效果不一样。</p>
]]></content>
      <categories>
        <category>software</category>
        <category>office</category>
      </categories>
      <tags>
        <tag>office</tag>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>八孔竖笛</title>
    <url>/music/instrument/recorder/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h3 id="指法图"><a href="#指法图" class="headerlink" title="指法图"></a>指法图</h3><img src="/music/instrument/recorder/recorder.jpg" class="">

<a id="more"></a>

<h3 id="练习曲"><a href="#练习曲" class="headerlink" title="练习曲"></a>练习曲</h3><ol>
<li><p>小星星</p>
</li>
<li><p>雪绒花</p>
</li>
</ol>
<img src="/music/instrument/recorder/xueronghua.gif" class="">

<ol start="3">
<li>难念的经</li>
</ol>
<img src="/music/instrument/recorder/nanniandejing01.png" class="">
<img src="/music/instrument/recorder/nanniandejing02.png" class="">

<ol start="4">
<li>送别</li>
</ol>
<p>有一个音符吹不出来。</p>
<img src="/music/instrument/recorder/songbie.png" class="">

<ol start="5">
<li>等你的季节</li>
</ol>


<ol start="6">
<li>仙剑问情</li>
</ol>
<img src="/music/instrument/recorder/xianjianwenqing.png" class="">

<ol start="7">
<li>我和你</li>
</ol>
<img src="/music/instrument/recorder/woheni.jpg" class="">

<ol start="8">
<li>康定情歌</li>
</ol>
<p>有一个音吹不出来</p>
<ol start="9">
<li><p>明天会更好</p>
</li>
<li><p>勇气</p>
</li>
<li><p>朱丽叶的秋天</p>
</li>
<li><p>感恩的心</p>
</li>
<li><p>淋雨一起走</p>
</li>
<li><p>森林的歌声</p>
</li>
<li><p>生日快乐歌</p>
</li>
</ol>
<img src="/music/instrument/recorder/happy-birthday.jpg" class="">

<ol start="16">
<li>找朋友</li>
</ol>
<img src="/music/instrument/recorder/zhaopengyou.jpg" class="">

<ol start="17">
<li>七子之歌</li>
</ol>
<img src="/music/instrument/recorder/qizizhige.gif" class="">

<ol start="18">
<li>酒干倘卖无</li>
</ol>
<img src="/music/instrument/recorder/jiugantangmaiwu.gif" class="">

<ol start="19">
<li>爱我的人和我爱的人</li>
</ol>
<img src="/music/instrument/recorder/aiwoderenhewoaideren.gif" class="">

<ol start="20">
<li>当你孤单你会想起谁</li>
</ol>
<img src="/music/instrument/recorder/dangnigudannimhuixiangqishei.gif" class="">

<ol start="21">
<li>我在马路边捡到一分钱</li>
</ol>
<img src="/music/instrument/recorder/wozaimalubianjiandaoyifenqian.gif" class="">

<ol start="22">
<li>学猫叫</li>
</ol>
<img src="/music/instrument/recorder/xuemaojiao.png" class="">

<ol start="23">
<li>天仙子</li>
</ol>
<img src="/music/instrument/recorder/tianxianzi.gif" class="">


<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="http://www.qupu123.com/onlinebook/587" target="_blank" rel="noopener">http://www.qupu123.com/onlinebook/587</a><br><a href="http://www.qupu123.com/jipu/p336836.html" target="_blank" rel="noopener">http://www.qupu123.com/jipu/p336836.html</a><br><a href="http://www.gepuwang.net/" target="_blank" rel="noopener">http://www.gepuwang.net/</a></p>
]]></content>
      <categories>
        <category>music</category>
        <category>instrument</category>
      </categories>
      <tags>
        <tag>乐器</tag>
      </tags>
  </entry>
  <entry>
    <title>乐器</title>
    <url>/music/instrument/instrument/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>要是什么都只能用说的，那世界就很无聊了。唱的再好，口技再牛，也还是不如一把乐器加持。</p>
<a id="more"></a>

<h3 id="二、常见乐器"><a href="#二、常见乐器" class="headerlink" title="二、常见乐器"></a>二、常见乐器</h3><h4 id="八孔竖笛"><a href="#八孔竖笛" class="headerlink" title="八孔竖笛"></a>八孔竖笛</h4><p>最常见，最便宜，最容易入门，易于携带。缺点是音域较小。</p>
<h4 id="尤克里里"><a href="#尤克里里" class="headerlink" title="尤克里里"></a>尤克里里</h4><p>夏威夷吉他，比较小，相较于吉他来说易于携带；价格比吉他便宜很多。</p>
<h4 id="吉他"><a href="#吉他" class="headerlink" title="吉他"></a>吉他</h4><p>又名六弦琴。</p>
<h4 id="萧"><a href="#萧" class="headerlink" title="萧"></a>萧</h4><p>琴箫合奏，笑傲江湖曲</p>
<h4 id="古筝"><a href="#古筝" class="headerlink" title="古筝"></a>古筝</h4><p>百度“千本樱-古筝”</p>
<h4 id="二胡"><a href="#二胡" class="headerlink" title="二胡"></a>二胡</h4><p>阿炳，二泉映月</p>
<h4 id="钢琴"><a href="#钢琴" class="headerlink" title="钢琴"></a>钢琴</h4><p>肖邦</p>
<h3 id="三、参考链接"><a href="#三、参考链接" class="headerlink" title="三、参考链接"></a>三、参考链接</h3>]]></content>
      <categories>
        <category>music</category>
        <category>instrument</category>
      </categories>
      <tags>
        <tag>乐器</tag>
      </tags>
  </entry>
  <entry>
    <title>calibre</title>
    <url>/software/calibre/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>一款开源的电子书管理软件。总体而言还不错，但存在一个致命缺点，它会修改 epub 文件。</p>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p><a href="https://www.gnome-look.org/p/1012243/" target="_blank" rel="noopener">https://www.gnome-look.org/p/1012243/</a></p>
<h3 id="阅读器主题"><a href="#阅读器主题" class="headerlink" title="阅读器主题"></a>阅读器主题</h3><p><a href="https://github.com/saucemcboss/calibre-themes" target="_blank" rel="noopener">https://github.com/saucemcboss/calibre-themes</a><br><a href="https://askubuntu.com/questions/1053497/how-do-i-get-a-dark-theme-night-mode-in-calibre" target="_blank" rel="noopener">https://askubuntu.com/questions/1053497/how-do-i-get-a-dark-theme-night-mode-in-calibre</a></p>
<h3 id="【-】已知问题"><a href="#【-】已知问题" class="headerlink" title="【!!!】已知问题"></a>【!!!】已知问题</h3><p>calibre 自带的阅读器会改变 epub 文件。原因是在 epub 里存储了书签、阅读进度等。</p>
<p><a href="https://bugs.launchpad.net/calibre/+bug/1454946" target="_blank" rel="noopener">https://bugs.launchpad.net/calibre/+bug/1454946</a></p>
<p>认为不应该随意修改文件的人，比如我。请勿使用该软件。</p>
<p>calibre 修改文件的缺点：</p>
<ul>
<li>自动同步类网盘，如 OneDrive 会不断同步这些被修改的 epub 文件，因为这个文件“不一样”了。</li>
<li>对于依赖文件 hash 做本地文件同步备份的我来说，造成不必要的麻烦。</li>
</ul>
]]></content>
      <categories>
        <category>software</category>
      </categories>
      <tags>
        <tag>ebook</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Hive Using DbUtils</title>
    <url>/bigdata/hive/spring-hive-dbutils/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>可以通过 jdbc 的方式访问 Hive。但是这有两个问题：</p>
<ul>
<li>jdbc 写起来太烦。</li>
<li>ResultSet 需要自己写代码转化为 JavaBean。</li>
</ul>
<p>但是，MyBatis 并没有针对 Hive 作适配。这种情况下，可以考虑用 DbUtils 写 Hive 访问相关的代码。好处是：</p>
<ul>
<li>DbUtils 封装了 jdbc 的模板式代码，写起来容易。</li>
<li>DbUtils 可以通过 ResultSetHandler 实现 ResultSet 和 JavaBean 之间的转化。</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="1-Maven-依赖"><a href="#1-Maven-依赖" class="headerlink" title="1. Maven 依赖"></a>1. Maven 依赖</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Hive --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hive<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hive-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Apache Commons DbUtils --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- c3p0 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，hive-jdbc 会依赖 log4j 相关的包。如果项目使用的是 log4j2，需要排除 log4j 的依赖。</p>
<h4 id="2-配置-DataSource"><a href="#2-配置-DataSource" class="headerlink" title="2. 配置 DataSource"></a>2. 配置 DataSource</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"abstractHiveDataSource"</span> <span class="attr">abstract</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"org.apache.hive.jdbc.HiveDriver"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span> <span class="attr">value</span>=<span class="string">"5"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span> <span class="attr">value</span>=<span class="string">"10"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span> <span class="attr">value</span>=<span class="string">"5"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span> <span class="attr">value</span>=<span class="string">"14400"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireIncrement"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"checkoutTimeout"</span> <span class="attr">value</span>=<span class="string">"30000"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idleConnectionTestPeriod"</span> <span class="attr">value</span>=<span class="string">"600"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testConnectionOnCheckout"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"preferredTestQuery"</span> <span class="attr">value</span>=<span class="string">"select 1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"hiveDataSource"</span> <span class="attr">parent</span>=<span class="string">"abstractHiveDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;hive.jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;hive.jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;hive.jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-访问-Hive-的代码"><a href="#3-访问-Hive-的代码" class="headerlink" title="3. 访问 Hive 的代码"></a>3. 访问 Hive 的代码</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;PerMachineRequestStatDO&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果使用 new QueryRunner(hiveDataSource); 则可能会抛出 Method not supported 的异常。原因在 QueryRunner中的 this.fillStatement(stmt, params);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner(hiveDataSource, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从ResultSet 转化到 JavaBean 的 Handler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ResultSetHandler&lt;List&lt;PerMachineRequestStatDO&gt;&gt; handler = <span class="keyword">new</span> BeanListHandler&lt;PerMachineRequestStatDO&gt;(PerMachineRequestStatDO<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">String sql = <span class="string">"SELECT * FROM test_table WHERE concat(year, month, day) = ?"</span>;</span><br><span class="line">String date = <span class="string">"20190217"</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    result = queryRunner.query(sql, handler, date);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://stackoverflow.com/questions/21956042/mapping-a-jdbc-resultset-to-an-object" target="_blank" rel="noopener">https://stackoverflow.com/questions/21956042/mapping-a-jdbc-resultset-to-an-object</a></li>
<li><a href="https://blog.csdn.net/xyhshen/article/details/84397163" target="_blank" rel="noopener">https://blog.csdn.net/xyhshen/article/details/84397163</a></li>
</ul>
]]></content>
      <categories>
        <category>bigdata</category>
        <category>hive</category>
      </categories>
      <tags>
        <tag>hive</tag>
        <tag>spring</tag>
        <tag>dbutils</tag>
      </tags>
  </entry>
  <entry>
    <title>域名系统 | DNS</title>
    <url>/dns/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Domain Name System</p>
<h3 id="DNS-域名解析过程"><a href="#DNS-域名解析过程" class="headerlink" title="DNS 域名解析过程"></a>DNS 域名解析过程</h3><p>在浏览器中输入域名时，DNS解析过程如下：</p>
<ol>
<li>在浏览器缓存中查找该域名的IP地址。如果命中缓存，域名解析过程就结束。这里的缓存有大小和时间限制。</li>
<li>查找操作系统缓存。操作系统会查找本地的hosts文件。hosts文件也存在容易被攻击，导致域名劫持的问题，因此 Windows 7 开始，hosts文件是只读的。</li>
<li>如果前两个缓存中都没有查到结果的话，会进行真正的 DNS 解析请求（DNS服务器的地址在网络配置中提供，一般是运营商提供的本地DNS）。通过UDP协议请求本地DNS服务器（LDNS），本地DNS服务器查找自身缓存，如果命中，就结束解析过程。</li>
<li>如果本地DNS服务器没有命中，就向根DNS服务器（Root Server）请求解析。</li>
<li>Root Server 向 LDNS 返回所查域名的主域名服务器（gTLD）。gTLD是国际顶级域名服务器，如 .com .cn .org 等。</li>
<li>LDNS 向 gTLD 发起解析请求</li>
<li>gTLD 返回该域名对应的 Name Server 服务器（通常是域名提供商的服务器）</li>
<li>Name Server 返回该域名对应的 IP 和 TTL 值。</li>
<li>LDNS 缓存该查询结果，缓存时间由 TTL 值决定。</li>
<li>解析结果返回给用户，用户根据 TTL 值缓存在本地系统中。</li>
</ol>
<p>实际查询时， Name Server 会有多层，多层之间递归查询。</p>
<h3 id="DNS-的缓存"><a href="#DNS-的缓存" class="headerlink" title="DNS 的缓存"></a>DNS 的缓存</h3><p>浏览器缓存、系统缓存、LDNS缓存。<br>如果使用的是 Java 的话， InetAddress 类也会缓存。该类的缓存分为解析成功的缓存、解析失败的缓存。</p>
<h3 id="DNS-解析方式"><a href="#DNS-解析方式" class="headerlink" title="DNS 解析方式"></a>DNS 解析方式</h3><h4 id="A-记录"><a href="#A-记录" class="headerlink" title="A 记录"></a>A 记录</h4><p>Address<br>用来指定域名对应的 IP 地址。A记录可以将多个域名解析到一个IP地址，但不能将一个域名解析到多个IP地址。</p>
<h4 id="MX-记录"><a href="#MX-记录" class="headerlink" title="MX 记录"></a>MX 记录</h4><p>Mail Exchange<br>用来指定邮件服务器的 IP 地址。MX 记录可以为邮件服务器指定单独的地址，而普通的 Web 请求解析到 A记录对应的地址。</p>
<h4 id="CNAME-记录"><a href="#CNAME-记录" class="headerlink" title="CNAME 记录"></a>CNAME 记录</h4><p>Canonical Name<br>用来设定一个或多个别名。比如将 xxx.com 解析到 yyy.com</p>
<h4 id="NS-记录"><a href="#NS-记录" class="headerlink" title="NS 记录"></a>NS 记录</h4><p>用于设定 DNS 服务器。对应域名的IP由指定的 DNS 服务器解析。</p>
<h4 id="TXT-记录"><a href="#TXT-记录" class="headerlink" title="TXT 记录"></a>TXT 记录</h4><p>用于设定说明。</p>
<h3 id="相关工具"><a href="#相关工具" class="headerlink" title="相关工具"></a>相关工具</h3><h4 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ThomasPrim:~ thomas$ nslookup baidu.com</span><br><span class="line">Server:		114.114.114.114</span><br><span class="line">Address:	114.114.114.114#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:	baidu.com</span><br><span class="line">Address: 123.125.115.110</span><br><span class="line">Name:	baidu.com</span><br><span class="line">Address: 220.181.57.216</span><br></pre></td></tr></table></figure>

<h4 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ThomasPrim:~ thomas$ dig www.baidu.com</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; www.baidu.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 22696</span><br><span class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line"></span><br><span class="line">;; OPT PSEUDOSECTION:</span><br><span class="line">; EDNS: version: 0, flags:; udp: 4000</span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;www.baidu.com.			IN	A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">www.baidu.com.		80	IN	CNAME	www.a.shifen.com.</span><br><span class="line">www.a.shifen.com.	112	IN	A	180.101.49.11</span><br><span class="line">www.a.shifen.com.	112	IN	A	180.101.49.12</span><br><span class="line"></span><br><span class="line">;; Query time: 58 msec</span><br><span class="line">;; SERVER: 172.23.128.1#53(172.23.128.1)</span><br><span class="line">;; WHEN: Mon Nov 11 11:08:14 CST 2019</span><br><span class="line">;; MSG SIZE  rcvd: 101</span><br></pre></td></tr></table></figure>

<h4 id="在线查询"><a href="#在线查询" class="headerlink" title="在线查询"></a>在线查询</h4><ul>
<li><a href="https://centralops.net/co/NsLookup.aspx" target="_blank" rel="noopener">https://centralops.net/co/NsLookup.aspx</a></li>
<li><a href="https://network-tools.com/nslookup/" target="_blank" rel="noopener">https://network-tools.com/nslookup/</a></li>
<li><a href="http://www.kloth.net/services/nslookup.php" target="_blank" rel="noopener">http://www.kloth.net/services/nslookup.php</a></li>
<li><a href="http://tool.chinaz.com/nslookup/" target="_blank" rel="noopener">http://tool.chinaz.com/nslookup/</a></li>
</ul>
<h3 id="Public-DNS"><a href="#Public-DNS" class="headerlink" title="Public DNS"></a>Public DNS</h3><h3 id="DNS64"><a href="#DNS64" class="headerlink" title="DNS64"></a>DNS64</h3>]]></content>
  </entry>
  <entry>
    <title>Fun With Terminal</title>
    <url>/os/terminal/fun-with-terminal/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Just have fun with terminal!</p>
<a id="more"></a>

<h3 id="实用"><a href="#实用" class="headerlink" title="实用"></a>实用</h3><h4 id="天气预报"><a href="#天气预报" class="headerlink" title="天气预报"></a>天气预报</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl wttr.in</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Weather report: Hangzhou, China</span><br><span class="line"></span><br><span class="line">     \   /     Sunny</span><br><span class="line">      .-.      7-9 °C         </span><br><span class="line">   ― (   ) ―   ↓ 11 km/h      </span><br><span class="line">      `-’      6 km           </span><br><span class="line">     /   \     0.0 mm         </span><br><span class="line">                                                       ┌─────────────┐                                                       </span><br><span class="line">┌──────────────────────────────┬───────────────────────┤  Mon 28 Jan ├───────────────────────┬──────────────────────────────┐</span><br><span class="line">│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │</span><br><span class="line">├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤</span><br><span class="line">│    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │</span><br><span class="line">│  _ /<span class="string">""</span>.-.     9 °C           │  _ /<span class="string">""</span>.-.     12 °C          │  _ /<span class="string">""</span>.-.     12 °C          │  _ /<span class="string">""</span>.-.     10-11 °C       │</span><br><span class="line">│    \_(   ).   ↓ 4 km/h       │    \_(   ).   ↓ 6-7 km/h     │    \_(   ).   ↙ 8-11 km/h    │    \_(   ).   ↙ 8-11 km/h    │</span><br><span class="line">│    /(___(__)  13 km          │    /(___(__)  20 km          │    /(___(__)  19 km          │    /(___(__)  19 km          │</span><br><span class="line">│               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │</span><br><span class="line">└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘</span><br><span class="line">                                                       ┌─────────────┐                                                       </span><br><span class="line">┌──────────────────────────────┬───────────────────────┤  Tue 29 Jan ├───────────────────────┬──────────────────────────────┐</span><br><span class="line">│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │</span><br><span class="line">├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤</span><br><span class="line">│    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │</span><br><span class="line">│  _ /<span class="string">""</span>.-.     10 °C          │  _ /<span class="string">""</span>.-.     14 °C          │  _ /<span class="string">""</span>.-.     15 °C          │  _ /<span class="string">""</span>.-.     12-13 °C       │</span><br><span class="line">│    \_(   ).   ← 5-6 km/h     │    \_(   ).   ← 6-8 km/h     │    \_(   ).   ↙ 9-12 km/h    │    \_(   ).   ↙ 7-10 km/h    │</span><br><span class="line">│    /(___(__)  20 km          │    /(___(__)  20 km          │    /(___(__)  20 km          │    /(___(__)  20 km          │</span><br><span class="line">│               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │</span><br><span class="line">└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘</span><br><span class="line">                                                       ┌─────────────┐                                                       </span><br><span class="line">┌──────────────────────────────┬───────────────────────┤  Wed 30 Jan ├───────────────────────┬──────────────────────────────┐</span><br><span class="line">│            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │</span><br><span class="line">├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤</span><br><span class="line">│    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │</span><br><span class="line">│  _ /<span class="string">""</span>.-.     13 °C          │  _ /<span class="string">""</span>.-.     18 °C          │  _ /<span class="string">""</span>.-.     19 °C          │  _ /<span class="string">""</span>.-.     16 °C          │</span><br><span class="line">│    \_(   ).   ↑ 4-5 km/h     │    \_(   ).   ↖ 7-8 km/h     │    \_(   ).   ↖ 5-7 km/h     │    \_(   ).   ↖ 6-9 km/h     │</span><br><span class="line">│    /(___(__)  20 km          │    /(___(__)  20 km          │    /(___(__)  19 km          │    /(___(__)  19 km          │</span><br><span class="line">│               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │               0.0 mm | 0%    │</span><br><span class="line">└──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘</span><br></pre></td></tr></table></figure>

<h3 id="休闲娱乐"><a href="#休闲娱乐" class="headerlink" title="休闲娱乐"></a>休闲娱乐</h3><h4 id="俄罗斯方块"><a href="#俄罗斯方块" class="headerlink" title="俄罗斯方块"></a>俄罗斯方块</h4><p>tetris：<a href="https://github.com/kt97679/tetris" target="_blank" rel="noopener">https://github.com/kt97679/tetris</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Box yourself in on the Linux command line：<a href="https://opensource.com/article/18/12/linux-toy-boxes" target="_blank" rel="noopener">https://opensource.com/article/18/12/linux-toy-boxes</a><br>在终端画画、炒股、玩游戏：<a href="https://blog.csdn.net/weixin_34128411/article/details/91469026" target="_blank" rel="noopener">https://blog.csdn.net/weixin_34128411/article/details/91469026</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>terminal</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Java String</title>
    <url>/language/java/java-string/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>String 是 java 中最基本的类之一。String 是一个典型的具有不变性的类，故而线程安全（所有基本类型的包装类也具有类似性质）。</p>
<p>不看不知道，String 的源码有 3000+ 行。</p>
<p>文中源码来自 Oracle JDK 1.8.0_191</p>
<a id="more"></a>

<h3 id="String的不变性"><a href="#String的不变性" class="headerlink" title="String的不变性"></a>String的不变性</h3><ol>
<li>String 是个 final 类，不可继承</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>字段私有，外部不能直接访问和修改</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** The value is used for character storage. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>String的内部方法均不改变自身状态，返回字符串的方法都会生成另一个字符串。</li>
</ol>
<p>例如，取子串的方法 substring() 源码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> beginIndex)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (beginIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(beginIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> subLen = value.length - beginIndex;</span><br><span class="line">    <span class="keyword">if</span> (subLen &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(subLen);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (beginIndex == <span class="number">0</span>) ? <span class="keyword">this</span> : <span class="keyword">new</span> String(value, beginIndex, subLen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>后记</li>
</ol>
<p>String 的不可变性来自 String 完善的封装。<br>但是，单纯从技术上来说，String 的实例也不见得是完全没有方法改变的，比如：通过反射。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        String s = <span class="string">"abc"</span>;</span><br><span class="line">        String b = <span class="string">"abc"</span>;</span><br><span class="line">        Field value = s.getClass().getDeclaredField(<span class="string">"value"</span>);</span><br><span class="line">        value.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">char</span>[] charArray = (<span class="keyword">char</span>[]) value.get(s);</span><br><span class="line">        charArray[<span class="number">0</span>] = <span class="string">'3'</span>;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="String-format"><a href="#String-format" class="headerlink" title="String.format()"></a>String.format()</h3><p>源码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">format</span><span class="params">(String format, Object... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Formatter().format(format, args).toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">format</span><span class="params">(Locale l, String format, Object... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Formatter(l).format(format, args).toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至于 Formatter 的源码，有4000+行，祝好</p>
<p>用法示例：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">String str = String.format("%s", null)    # str = null</span><br><span class="line">String str = String.format("%s", "")      # str = ""</span><br><span class="line">String str = String.format("%s", 7L)      # str = "7"</span><br></pre></td></tr></table></figure>

<h3 id="String-split"><a href="#String-split" class="headerlink" title="String.split()"></a>String.split()</h3><p>String.split(regex) 等价于 String.split(regex, 0)</p>
<p>String.split(String regex, int limit)</p>
<ul>
<li>limit &gt; 0 ，结果集最多有 n 个元素</li>
<li>limit = 0 ，结果集不包含结尾的空字符串</li>
<li>limit &lt; 0 ，结果集包含结尾的空字符串</li>
</ul>
<p>当 regex 代表单字符时，split() 会采用逐字符匹配的快速算法；否则，split() 会用正则表达式进行匹配（Pattern.compile(regex).split(this, limit)）。</p>
<h3 id="String-intern"><a href="#String-intern" class="headerlink" title="String.intern()"></a>String.intern()</h3><p><a href="https://tech.meituan.com/2014/03/06/in-depth-understanding-string-intern.html" target="_blank" rel="noopener">https://tech.meituan.com/2014/03/06/in-depth-understanding-string-intern.html</a></p>
<p>intern() 是个native方法。它的作用是将字符串指向常量池中的常量，如果字符串在常量池中不存在，那就放到常量池中。</p>
<p>intern() 方法的问题是：</p>
<ul>
<li>不恰当使用会造成永久代溢出（jdk8之前的常量池放在永久代）</li>
<li>常量池中的字符串过多时，intern() 方法的性能较差。（在常量池中查找的原理是 HashTable ，但是这个 HashTable 是不能自动扩容的，所以常量池中的字符串多了之后，哈希冲突严重，查找性能急剧下降）</li>
</ul>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="String-s-new-String-“abc”-一共创建了几个对象"><a href="#String-s-new-String-“abc”-一共创建了几个对象" class="headerlink" title="String s = new String(“abc”) 一共创建了几个对象"></a>String s = new String(“abc”) 一共创建了几个对象</h4><p>首先，明确一点，调用的构造函数的签名是:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(String original)</span></span>;</span><br></pre></td></tr></table></figure>

<p>因此，上述代码等价于：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String original = <span class="string">"abc"</span>;</span><br><span class="line">String s = <span class="keyword">new</span> String(original);</span><br></pre></td></tr></table></figure>

<p>因此，这里面有两个字符串 original 和 s，original 是一个常量，而 s 是新建的一个对象，其值与 original 相等。<br>故而，上述代码一共有2个对象产生。其中，”abc” 在常量池中（jdk8之前放在永久代中，jdk8中放在元空间中），s 放在堆中（确切的说是在年轻代的E区中）。</p>
<h4 id="首字母大小写"><a href="#首字母大小写" class="headerlink" title="首字母大小写"></a>首字母大小写</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(s);</span><br><span class="line">sb.setCharAt(<span class="number">0</span>, Character.toLowerCase(s.charAt(<span class="number">0</span>)));</span><br><span class="line">String result = sb.toString();</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>String.format() <a href="https://blog.csdn.net/lonely_fireworks/article/details/7962171" target="_blank" rel="noopener">https://blog.csdn.net/lonely_fireworks/article/details/7962171</a></li>
<li>String.format() <a href="https://segmentfault.com/a/1190000013654676" target="_blank" rel="noopener">https://segmentfault.com/a/1190000013654676</a></li>
<li>字符串，那些你不知道的事：<a href="https://tech.youzan.com/strings/" target="_blank" rel="noopener">https://tech.youzan.com/strings/</a></li>
<li>Why String is Immutable in Java：<a href="https://www.journaldev.com/802/string-immutable-final-java" target="_blank" rel="noopener">https://www.journaldev.com/802/string-immutable-final-java</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java Date</title>
    <url>/language/java/Java-Date/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Well, this is a question. I live, so does time. Time is running, and human need to know.<br>Anyway, there will be plenty of time you need to deal with Date in Java.</p>
<a id="more"></a>

<h4 id="1-日期格式"><a href="#1-日期格式" class="headerlink" title="1. 日期格式"></a>1. 日期格式</h4><p><a href="https://blog.csdn.net/iplayvs2008/article/details/41910835" target="_blank" rel="noopener">https://blog.csdn.net/iplayvs2008/article/details/41910835</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 年月日时分秒+毫秒，eg: &quot;2018-12-31 10:34:29:833&quot;</span><br><span class="line">&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;</span><br></pre></td></tr></table></figure>

<p>yyyy - 年份<br>MM - 月份<br>dd - 天<br>Z - 时区</p>
<h3 id="日期解析"><a href="#日期解析" class="headerlink" title="日期解析"></a>日期解析</h3><h4 id="1-DateUtils"><a href="#1-DateUtils" class="headerlink" title="1. DateUtils"></a>1. DateUtils</h4><h5 id="①-依赖"><a href="#①-依赖" class="headerlink" title="① 依赖"></a>① 依赖</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②-用法"><a href="#②-用法" class="headerlink" title="② 用法"></a>② 用法</h5><p>确定日期格式的情况下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String dateString = <span class="string">"2019-01-02 13:14:55"</span>;</span><br><span class="line">Date date = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    date = DateUtils.parseDate(dateString, <span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(date);</span><br></pre></td></tr></table></figure>

<p>不确定日期具体是哪种格式，但是知道可能出现的所有格式时：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Date date = DateUtils.parseDate(dateString, <span class="string">"yyyy-MM-dd HH:mm:ss"</span>, <span class="string">"MM/dd/yyyy HH:mm:ss"</span>, <span class="string">"yyyy-MM-dd HH:mm"</span>, <span class="string">"yyyy-MM-dd"</span>);</span><br></pre></td></tr></table></figure>

<h5 id="③-参考文档"><a href="#③-参考文档" class="headerlink" title="③ 参考文档"></a>③ 参考文档</h5><h3 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h3><h4 id="1-SimpleDateFormat"><a href="#1-SimpleDateFormat" class="headerlink" title="1. SimpleDateFormat"></a>1. SimpleDateFormat</h4><p>存在的问题：线程不安全。</p>
<p>解决的方法：</p>
<ul>
<li>每次使用均创建一个新的实例</li>
<li>使用ThreadLocal</li>
</ul>
<p>使用 ThreadLocal 封装 SimpleDateFormat ，用 Java 8 的 lambda 可以写成：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ThreadLocal&lt;SimpleDateFormat&gt; dateFormatThreadLocal =</span><br><span class="line">        ThreadLocal.withInitial(() -&gt; <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>));</span><br></pre></td></tr></table></figure>

<p>当然，在 Java 8 中，推荐使用 DateTimeFormatter 。</p>
<h4 id="2-FastDateFormat"><a href="#2-FastDateFormat" class="headerlink" title="2. FastDateFormat"></a>2. FastDateFormat</h4><h5 id="①-依赖-1"><a href="#①-依赖-1" class="headerlink" title="① 依赖"></a>① 依赖</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②-用法-1"><a href="#②-用法-1" class="headerlink" title="② 用法"></a>② 用法</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">FastDateFormat df = FastDateFormat.getInstance(pattern, timeZone, locale);</span><br><span class="line">String dateString = df.format(date);</span><br></pre></td></tr></table></figure>

<h5 id="③-参考文档-1"><a href="#③-参考文档-1" class="headerlink" title="③ 参考文档"></a>③ 参考文档</h5><ul>
<li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/FastDateFormat.html" target="_blank" rel="noopener">https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/FastDateFormat.html</a></li>
</ul>
<h4 id="3-DateFormatUtils"><a href="#3-DateFormatUtils" class="headerlink" title="3. DateFormatUtils"></a>3. DateFormatUtils</h4><h5 id="①-依赖-2"><a href="#①-依赖-2" class="headerlink" title="① 依赖"></a>① 依赖</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="②-用法-2"><a href="#②-用法-2" class="headerlink" title="② 用法"></a>② 用法</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">long</span> currentTimeMillis = System.currentTimeMillis();</span><br><span class="line">String pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>;</span><br><span class="line">String dateString = DateFormatUtils.format(currentTimeMillis, pattern);</span><br></pre></td></tr></table></figure>

<h5 id="③-性能对比"><a href="#③-性能对比" class="headerlink" title="③ 性能对比"></a>③ 性能对比</h5><ul>
<li>测试代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateFormatTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SimpleDateFormat SDF = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        testSimpleDateFormat();</span><br><span class="line">        testDateFormatUtils();</span><br><span class="line">        testSimpleDateFormatUnsafe();</span><br><span class="line">        testSimpleDateFormatUnsafe();</span><br><span class="line">        testDateFormatUtils();</span><br><span class="line">        testSimpleDateFormat();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testSimpleDateFormat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        <span class="keyword">int</span> count = (<span class="keyword">int</span>) <span class="number">1e7</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">            String format = df.format(date);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(System.currentTimeMillis() - start);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testDateFormatUtils</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        <span class="keyword">int</span> count = (<span class="keyword">int</span>) <span class="number">1e7</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            DateFormatUtils.format(date, <span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(System.currentTimeMillis() - start);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testSimpleDateFormatUnsafe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        <span class="keyword">int</span> count = (<span class="keyword">int</span>) <span class="number">1e7</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            String format = SDF.format(date);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(System.currentTimeMillis() - start);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>运行结果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">13125</span><br><span class="line">4545</span><br><span class="line">2946</span><br><span class="line">2971</span><br><span class="line">3912</span><br><span class="line">10577</span><br></pre></td></tr></table></figure>

<ul>
<li>结论</li>
</ul>
<p>DateFormatUtils 比 每次新建 SimpleDateFormat 节约 60% 的时间。<br>DateFormatUtils 比 每次使用同一个 SimpleDateFormat 多消耗 40% 的时间。<br>SimpleDateFormat 线程不安全，DateFormatUtils 线程安全。<br>严格单线程时，使用 缓存的 SimpleDateFormat 性能最好。多线程时，可以考虑使用 DateFormatUtils。</p>
<h5 id="④-参考文档"><a href="#④-参考文档" class="headerlink" title="④ 参考文档"></a>④ 参考文档</h5><h3 id="Java-8"><a href="#Java-8" class="headerlink" title="Java 8"></a>Java 8</h3><p>Instant 用于代替 Date<br>LocalDateTime 用于代替 Calendar<br>DateTimeFormatter 用于代替 SimpleDateFormat</p>
<h4 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">localDateTimeToEpochMilli</span><span class="params">(LocalDateTime localDateTime)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> localDateTime.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> LocalDateTime <span class="title">epochMilliToLocalDateTime</span><span class="params">(<span class="keyword">long</span> epochMilli)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Instant.ofEpochMilli(epochMilli).atZone(ZoneId.systemDefault()).toLocalDateTime();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><ul>
<li><a href="https://www.cnblogs.com/java-class/p/4845962.html" target="_blank" rel="noopener">https://www.cnblogs.com/java-class/p/4845962.html</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown Java</title>
    <url>/markdown/markdown-java/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><h3 id="commonmark-java"><a href="#commonmark-java" class="headerlink" title="commonmark-java"></a>commonmark-java</h3><p>介绍见：<a href="https://github.com/atlassian/commonmark-java" target="_blank" rel="noopener">https://github.com/atlassian/commonmark-java</a></p>
<p>核心依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atlassian.commonmark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commonmark<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>插件依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- url自动转换为链接的插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atlassian.commonmark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commonmark-ext-autolink<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 支持表格（GitHub Flavored Markdown）的插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atlassian.commonmark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commonmark-ext-gfm-tables<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 支持删除线（GitHub Flavored Markdown）的插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atlassian.commonmark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commonmark-ext-gfm-strikethrough<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>基本用法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.commonmark.node.*;</span><br><span class="line"><span class="keyword">import</span> org.commonmark.parser.Parser;</span><br><span class="line"><span class="keyword">import</span> org.commonmark.renderer.html.HtmlRenderer;</span><br><span class="line"></span><br><span class="line">Parser parser = Parser.builder().build();</span><br><span class="line">Node document = parser.parse(<span class="string">"This is *Sparta*"</span>);</span><br><span class="line">HtmlRenderer renderer = HtmlRenderer.builder().build();</span><br><span class="line">renderer.render(document);  <span class="comment">// "&lt;p&gt;This is &lt;em&gt;Sparta&lt;/em&gt;&lt;/p&gt;\n"</span></span><br></pre></td></tr></table></figure>

<p>支持扩展格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.commonmark.ext.gfm.tables.TablesExtension;</span><br><span class="line"></span><br><span class="line">List&lt;Extension&gt; extensions = Arrays.asList(TablesExtension.create());</span><br><span class="line">Parser parser = Parser.builder()</span><br><span class="line">        .extensions(extensions)</span><br><span class="line">        .build();</span><br><span class="line">HtmlRenderer renderer = HtmlRenderer.builder()</span><br><span class="line">        .extensions(extensions)</span><br><span class="line">        .build();</span><br></pre></td></tr></table></figure>

<p>自定义HTML元素的属性</p>
<p>下面这段示例代码为生成的 img 元素添加 class 属性，其值为 border</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Parser parser = Parser.builder().build();</span><br><span class="line">HtmlRenderer renderer = HtmlRenderer.builder()</span><br><span class="line">        .attributeProviderFactory(<span class="keyword">new</span> AttributeProviderFactory() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> AttributeProvider <span class="title">create</span><span class="params">(AttributeProviderContext context)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> ImageAttributeProvider();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .build();</span><br><span class="line"></span><br><span class="line">Node document = parser.parse(<span class="string">"![text](/url.png)"</span>);</span><br><span class="line">renderer.render(document);</span><br><span class="line"><span class="comment">// "&lt;p&gt;&lt;img src=\"/url.png\" alt=\"text\" class=\"border\" /&gt;&lt;/p&gt;\n"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageAttributeProvider</span> <span class="keyword">implements</span> <span class="title">AttributeProvider</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAttributes</span><span class="params">(Node node, String tagName, Map&lt;String, String&gt; attributes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node <span class="keyword">instanceof</span> Image) &#123;</span><br><span class="line">            attributes.put(<span class="string">"class"</span>, <span class="string">"border"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面这段代码设置HTML表格的属性。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Extension&gt; extensions = Arrays.asList(TablesExtension.create());</span><br><span class="line">Parser parser = Parser.builder().extensions(extensions).build();</span><br><span class="line">HtmlRenderer renderer = HtmlRenderer.builder().attributeProviderFactory(<span class="keyword">new</span> AttributeProviderFactory() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AttributeProvider <span class="title">create</span><span class="params">(AttributeProviderContext attributeProviderContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TableAttributeProvider();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).extensions(extensions).build();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">TableAttributeProvider</span> <span class="keyword">implements</span> <span class="title">AttributeProvider</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAttributes</span><span class="params">(Node node, String tagName, Map&lt;String, String&gt; attributes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TableBlock) &#123;</span><br><span class="line">            attributes.put(<span class="string">"border"</span>, <span class="string">"1"</span>);</span><br><span class="line">            attributes.put(<span class="string">"cellspacing"</span>, <span class="string">"0"</span>);</span><br><span class="line">            attributes.put(<span class="string">"cellpadding"</span>, <span class="string">"10"</span>);</span><br><span class="line">            attributes.put(<span class="string">"style"</span>, <span class="string">"text-align:center;vertical-align:middle;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="markdown-mail"><a href="#markdown-mail" class="headerlink" title="markdown mail"></a>markdown mail</h3><ul>
<li><a href="https://markdown-here.com/" target="_blank" rel="noopener">https://markdown-here.com/</a></li>
<li><a href="https://customer.io/blog/write-emails-in-markdown/" target="_blank" rel="noopener">https://customer.io/blog/write-emails-in-markdown/</a></li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://github.com/atlassian/commonmark-java" target="_blank" rel="noopener">https://github.com/atlassian/commonmark-java</a></li>
<li><a href="https://github.com/vsch/flexmark-java" target="_blank" rel="noopener">https://github.com/vsch/flexmark-java</a></li>
<li><a href="https://hk.saowen.com/a/f29e5bb092046783bef9a8408efdbdd9a79bcf1de939ca65ade4b874a278b6f1" target="_blank" rel="noopener">https://hk.saowen.com/a/f29e5bb092046783bef9a8408efdbdd9a79bcf1de939ca65ade4b874a278b6f1</a></li>
</ul>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>CSGO</title>
    <url>/game/cs/</url>
    <content><![CDATA[<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>可以从steam上安装。mac版的用MBP勉强能玩。Windows的随意，HD4600核显就可以勉强玩了。</p>
<h3 id="国际服"><a href="#国际服" class="headerlink" title="国际服"></a>国际服</h3><p>启动参数加<code>-worldwide</code></p>
<h3 id="局域网"><a href="#局域网" class="headerlink" title="局域网"></a>局域网</h3><p>首先，开启开发者模式。</p>
<p>按一下 `(主键盘区1坐标的按键) 打开控制台</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<p>然后开启本地服务器。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sv_lan 1  # 开启局域网服务器</span><br><span class="line">status    # 查看状态</span><br></pre></td></tr></table></figure>

<p>连接到本地服务器。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">connect ip地址</span><br></pre></td></tr></table></figure>

<ul>
<li>Creating a Listen “LAN” Server in CS:GO <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=452154031" target="_blank" rel="noopener">https://steamcommunity.com/sharedfiles/filedetails/?id=452154031</a></li>
</ul>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="1-开启开发者模式"><a href="#1-开启开发者模式" class="headerlink" title="1. 开启开发者模式"></a>1. 开启开发者模式</h4><p>设置 –&gt; 游戏设置</p>
<h4 id="2-单击操作变成需要双击"><a href="#2-单击操作变成需要双击" class="headerlink" title="2. 单击操作变成需要双击"></a>2. 单击操作变成需要双击</h4><p>首先，尝试关闭游戏，退出steam，再重新打开。如果没有解决，可以验证csgo的文件完整性。</p>
<p>另一种方法，切出游戏，再回到游戏。重复这种操作直到恢复。</p>
<h4 id="3-显示延时、fps等参数"><a href="#3-显示延时、fps等参数" class="headerlink" title="3. 显示延时、fps等参数"></a>3. 显示延时、fps等参数</h4><p>前提：开启开发者模式。<br>操作：</p>
<ul>
<li>按 <code>~</code> 打开控制台</li>
<li>输入 <code>net_graph 1</code> 开启网络参数显示</li>
<li>输入 <code>net_graph 0</code> 开启网络参数显示</li>
</ul>
<p>说明：</p>
<ul>
<li>修改参数显示位置<ul>
<li>输入 <code>net_graphpos 0</code> 显示在界面左侧</li>
<li>输入 <code>net_graphpos 1</code> 显示在界面右侧</li>
<li>输入 <code>net_graphpos 2</code> 显示在界面中间</li>
</ul>
</li>
<li>修改参数显示位置高度<ul>
<li><code>net_graphheight 数值</code> 数值越大，位置越高</li>
</ul>
</li>
<li>参数含义<ul>
<li>fps 帧率</li>
<li>ping 数据传输延时</li>
<li>loss / choke 丢包率</li>
<li>sv / var 服务器状态</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>game</category>
      </categories>
      <tags>
        <tag>game</tag>
      </tags>
  </entry>
  <entry>
    <title>@Scheduled</title>
    <url>/spring/Scheduled/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p><code>@Scheduled</code>是Spring框架的一个注解，用于驱动定时任务。</p>
<p><code>@Scheduled</code>标注在方法上，表示将该方法将定时执行。被<code>@Scheduled</code>标注的方法需要满足两个条件：</p>
<ul>
<li>该方法没有参数</li>
<li>该方法没有返回值</li>
</ul>
<h3 id="二、用法"><a href="#二、用法" class="headerlink" title="二、用法"></a>二、用法</h3><h4 id="1-启动注解支持"><a href="#1-启动注解支持" class="headerlink" title="1. 启动注解支持"></a>1. 启动注解支持</h4><p>Spring对<code>@Scheduled</code>注解的支持可以通过<code>@EnableScheduling</code>注解或XML的方式开启，示例如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">task:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-固定延迟的定时任务"><a href="#2-固定延迟的定时任务" class="headerlink" title="2. 固定延迟的定时任务"></a>2. 固定延迟的定时任务</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span>(fixedDelay = <span class="number">1000</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleFixedDelayTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(</span><br><span class="line">      <span class="string">"Fixed delay task - "</span> + System.currentTimeMillis() / <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码定义了一个固定延迟的定时任务。</p>
<h4 id="3-固定周期的定时任务"><a href="#3-固定周期的定时任务" class="headerlink" title="3. 固定周期的定时任务"></a>3. 固定周期的定时任务</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span>(fixedRate = <span class="number">1000</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleFixedRateTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(</span><br><span class="line">      <span class="string">"Fixed rate task - "</span> + System.currentTimeMillis() / <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-带有初始延迟的定时任务"><a href="#4-带有初始延迟的定时任务" class="headerlink" title="4. 带有初始延迟的定时任务"></a>4. 带有初始延迟的定时任务</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span>(fixedDelay = <span class="number">1000</span>, initialDelay = <span class="number">1000</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleFixedRateWithInitialDelayTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> now = System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">    System.out.println(</span><br><span class="line">      <span class="string">"Fixed rate task with one second initial delay - "</span> + now);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-用cron表达式定义定时任务"><a href="#5-用cron表达式定义定时任务" class="headerlink" title="5. 用cron表达式定义定时任务"></a>5. 用cron表达式定义定时任务</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Scheduled</span>(cron = <span class="string">"0 15 10 15 * ?"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleTaskUsingCronExpression</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> now = System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">    System.out.println(</span><br><span class="line">      <span class="string">"schedule tasks using cron jobs - "</span> + now);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从 Spring 4 开始，<code>@Scheduled</code> 注解提供了 <code>zone</code> 属性，可以用来设定 cron 表达式对应的时区。</p>
<h4 id="6-用XML配置定时任务"><a href="#6-用XML配置定时任务" class="headerlink" title="6. 用XML配置定时任务"></a>6. 用XML配置定时任务</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Configure the scheduler --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">task:scheduler</span> <span class="attr">id</span>=<span class="string">"myScheduler"</span> <span class="attr">pool-size</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Configure parameters --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">task:scheduled-tasks</span> <span class="attr">scheduler</span>=<span class="string">"myScheduler"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">task:scheduled</span> <span class="attr">ref</span>=<span class="string">"beanA"</span> <span class="attr">method</span>=<span class="string">"methodA"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fixed-delay</span>=<span class="string">"5000"</span> <span class="attr">initial-delay</span>=<span class="string">"1000"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">task:scheduled</span> <span class="attr">ref</span>=<span class="string">"beanB"</span> <span class="attr">method</span>=<span class="string">"methodB"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fixed-rate</span>=<span class="string">"5000"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">task:scheduled</span> <span class="attr">ref</span>=<span class="string">"beanC"</span> <span class="attr">method</span>=<span class="string">"methodC"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cron</span>=<span class="string">"*/5 * * * * MON-FRI"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">task:scheduled-tasks</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="三、cron表达式"><a href="#三、cron表达式" class="headerlink" title="三、cron表达式"></a>三、cron表达式</h3><ul>
<li><code>*</code> 表示匹配任何值</li>
<li><code>?</code> 只能用在DayofMonth和DayofWeek两个域，表示满足其他限制条件的任意值。比如，每周一触发的定时任务：<code>&quot;0 0 0 ? * MON&quot;</code>（是周一，但不管是几号）。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每天的10点15分36秒执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Scheduled</span>(cron = <span class="string">"36 15 10 * * ?"</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 每周一10点27分32秒执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Scheduled</span>(cron = <span class="string">"32 27 10 ? * MON"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h3><ul>
<li>API文档：<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html" target="_blank" rel="noopener">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html</a></li>
<li><a href="https://www.baeldung.com/spring-scheduled-tasks" target="_blank" rel="noopener">https://www.baeldung.com/spring-scheduled-tasks</a></li>
<li><a href="https://segmentfault.com/a/1190000015253688" target="_blank" rel="noopener">https://segmentfault.com/a/1190000015253688</a></li>
<li><a href="https://my.oschina.net/jack90john/blog/1506474" target="_blank" rel="noopener">https://my.oschina.net/jack90john/blog/1506474</a></li>
<li><a href="https://blog.csdn.net/qq_33556185/article/details/51852537" target="_blank" rel="noopener">https://blog.csdn.net/qq_33556185/article/details/51852537</a></li>
<li>cron表达式：<a href="https://www.cnblogs.com/junrong624/p/4239517.html" target="_blank" rel="noopener">https://www.cnblogs.com/junrong624/p/4239517.html</a></li>
<li>Provide time zone to Spring @Scheduled：<a href="https://stackoverflow.com/questions/15930171/provide-time-zone-to-spring-scheduled" target="_blank" rel="noopener">https://stackoverflow.com/questions/15930171/provide-time-zone-to-spring-scheduled</a></li>
<li>Conditionally Enable Scheduled Jobs in Spring：<a href="https://www.baeldung.com/spring-scheduled-enabled-conditionally" target="_blank" rel="noopener">https://www.baeldung.com/spring-scheduled-enabled-conditionally</a></li>
</ul>
]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>log4j2</title>
    <url>/language/java/log/log4j2/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>想必大家在调试程序的时候，都用过 System.out.println() 吧。为了便于发现、监控程序运行的状态，输出的一些信息是一种基本的诉求。当然，在服务器上运行的程序是肯定不适合用 System.out.println() 的。原因有二：</p>
<ol>
<li>服务器没有显示器，也没人一直盯着终端界面。</li>
<li>更可怕的是，真实的程序都是以服务的形式，在后台运行的。</li>
</ol>
<p>那我们如何输出基本的监控信息呢。日志就是这个问题的最基本的解决之道。日志的本质，就是将一些程序运行的关键信息，输出到特定的地方。一般可以输出到如下地方：</p>
<ol>
<li>终端（在这种情况下，效果和 System.out.println()相似）</li>
<li>文本文件（最常用的形式，毕竟，文件只要不删除，随时可以去查看，这可比打印到屏幕上方便多了）</li>
<li>其他地方，比如消息队列。</li>
</ol>
<p>常用日志框架有 log4j logback log4j2 三种。那这时候你就该犯嘀咕了，那是不是换一种日志框架，就得改一遍输出日志的代码呢？多亏了slf4j，这种情况并不会发生。slf4j是一种日志标准，它将日志抽象为slf4j的API接口，与特定日志框架的实现无关。当我们需要输出日志时，我们只需要和 slf4j 打交道，不需要理会具体使用哪种日志框架。这样，当我们更换日志框架的时候，我们就不用改代码啦。</p>
<p>今天的主角是 log4j2 ，它是 log4j 的继任者。聪明的你猛然一惊，logback 不才是 log4j 的继任者吗？嗯，他们都是 log4j 的继任者，不过 log4j2 晚一点推出。它比 logback 还要强大。</p>
<h3 id="配置方法"><a href="#配置方法" class="headerlink" title="配置方法"></a>配置方法</h3><p><a href="http://logging.apache.org/log4j/2.x/manual/configuration.html" target="_blank" rel="noopener">http://logging.apache.org/log4j/2.x/manual/configuration.html</a></p>
<h4 id="使用-xml-配置"><a href="#使用-xml-配置" class="headerlink" title="使用 xml 配置"></a>使用 xml 配置</h4><p>在资源目录根路径下建立 log4j2.xml 文件。</p>
<p>xml配置文件中仅有一个根节点 Configuration。<br>Configuration 有两个子节点 Appenders 和 Loggers</p>
<p><a href="https://blog.csdn.net/Q176782/article/details/78288734" target="_blank" rel="noopener">https://blog.csdn.net/Q176782/article/details/78288734</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">status</span>=<span class="string">"WARN"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">"com.foo.Bar"</span> <span class="attr">level</span>=<span class="string">"trace"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">"error"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Configuration 标签的属性含义分别为</p>
<ul>
<li>status：log4j2内部日志的输出级别。如果没有配置，默认不输出。例如：status=”WARN” 将允许log4j2的WARN级别以上的日志输出。</li>
<li>monitorInterval：log4j2配置文件的自动重新加载机制的间隔时间。最小是5秒。例如：<Configuration monitorInterval="30"></li>
</ul>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="依赖冲突"><a href="#依赖冲突" class="headerlink" title="依赖冲突"></a>依赖冲突</h4><p>如果你从log4j 升级到 log4j2。你需要排除掉 log4j 的依赖，否则 log4j 和 log4j2 的依赖会相互冲突。</p>
<p>比如：LogManager 在 log4j 和 log4j2 里的包名不同。如果在使用 log4j2 的工程里，没有排除掉 log4j 的依赖，你可能会碰到以下异常：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager</span><br></pre></td></tr></table></figure>

<p>解决方法很简单，排除掉 log4j 的依赖就好。举个例子，在使用 log4j2 的工程里，引入 hive-jdbc 。你就需要注意了，一定要排除掉 log4j 的依赖。原本，只需要这么写 maven 依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.hive&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hive-jdbc&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.1&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>
<p>现在，需要这么写：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.hive&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hive-jdbc&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.1&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;exclusion&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-log4j12&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;exclusion&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;log4j&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;exclusion&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;apache-log4j-extras&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;exclusion&gt;</span><br><span class="line">    &lt;&#x2F;exclusions&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="System-out-System-err-导入-日志文件中"><a href="#System-out-System-err-导入-日志文件中" class="headerlink" title="System.out / System.err 导入 日志文件中"></a>System.out / System.err 导入 日志文件中</h4><p>有两种方案：</p>
<ol>
<li>System.setOut()，System.setErr()</li>
<li>重定向配合 cronolog</li>
</ol>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>消息格式化：<a href="https://garygregory.wordpress.com/2015/10/08/the-art-of-logging-advanced-message-formatting/" target="_blank" rel="noopener">https://garygregory.wordpress.com/2015/10/08/the-art-of-logging-advanced-message-formatting/</a></li>
<li>源码：<a href="https://github.com/apache/logging-log4j2" target="_blank" rel="noopener">https://github.com/apache/logging-log4j2</a></li>
<li>apache-log4j-extras：<a href="http://logging.apache.org/log4j/extras/" target="_blank" rel="noopener">http://logging.apache.org/log4j/extras/</a></li>
<li>apache-log4j-extras maven：<a href="https://mvnrepository.com/artifact/log4j/apache-log4j-extras/1.2.17" target="_blank" rel="noopener">https://mvnrepository.com/artifact/log4j/apache-log4j-extras/1.2.17</a></li>
<li><a href="https://stackoverflow.com/questions/34741262/log4j2-configure-rolloverstrategy-to-delete-old-log-files" target="_blank" rel="noopener">https://stackoverflow.com/questions/34741262/log4j2-configure-rolloverstrategy-to-delete-old-log-files</a></li>
<li>Log4j2与Slf4j的最佳实践：<a href="https://zhuanlan.zhihu.com/p/36554554" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/36554554</a></li>
<li><a href="https://stackify.com/log4j2-java/" target="_blank" rel="noopener">https://stackify.com/log4j2-java/</a></li>
<li><a href="https://www.cnblogs.com/wuqinglong/p/9516529.html" target="_blank" rel="noopener">https://www.cnblogs.com/wuqinglong/p/9516529.html</a></li>
<li><a href="https://howtodoinjava.com/log4j2/" target="_blank" rel="noopener">https://howtodoinjava.com/log4j2/</a></li>
<li><a href="https://blog.csdn.net/u013066244/article/details/72461105" target="_blank" rel="noopener">https://blog.csdn.net/u013066244/article/details/72461105</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>java</category>
        <category>log</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP 状态码 | HTTP Status Code</title>
    <url>/communication/computer-network/http/http-status-code/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>共可分为5类：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">类别</th>
<th align="center">原因</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1XX</td>
<td align="center">Informational（信息性状态码）</td>
<td align="center">接收的请求正在处理</td>
</tr>
<tr>
<td align="center">2XX</td>
<td align="center">Success（成功状态码）</td>
<td align="center">请求正常处理完毕</td>
</tr>
<tr>
<td align="center">3XX</td>
<td align="center">Redirection（重定向状态码）</td>
<td align="center">需要进行附加操作以完成请求</td>
</tr>
<tr>
<td align="center">4XX</td>
<td align="center">Client Error（客户端错误状态码）</td>
<td align="center">服务器无法处理请求</td>
</tr>
<tr>
<td align="center">5XX</td>
<td align="center">Server Error（服务器错误状态码）</td>
<td align="center">服务器处理请求出错</td>
</tr>
</tbody></table>
<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><h4 id="2XX-成功"><a href="#2XX-成功" class="headerlink" title="2XX 成功"></a>2XX 成功</h4><p>2XX 的响应结果表明请求被正常处理了</p>
<h5 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h5><h5 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h5><h5 id="206-Partial-Content"><a href="#206-Partial-Content" class="headerlink" title="206 Partial Content"></a>206 Partial Content</h5><p>表明客户端进行了范围请求，而服务器成功执行了这部分请求。响应报文中包含由 Content-Range 指定范围的实体内容。</p>
<h4 id="3XX-重定向"><a href="#3XX-重定向" class="headerlink" title="3XX 重定向"></a>3XX 重定向</h4><p>3XX 响应结果表明浏览器需要执行某些特殊处理以正确处理请求</p>
<h5 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h5><p>永久重定向</p>
<h5 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h5><p>临时重定向</p>
<h5 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h5><p>该返回码标识由于请求对应的资源存在着另一个URI，应使用GET方法重定向获取请求的资源。<br>303状态码和302状态码有着相同的功能，但303状态码明确表示客户端应采用GET方法获取资源</p>
<h5 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h5><h5 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h5><p>临时重定向。<br>与302的区别在于：虽然301、302的标准要求不能更改请求方法，但是浏览器在收到301、302后都会将POST请求改为GET请求。而采用307进行重定向时，浏览器不会更改请求方法</p>
<h4 id="4XX"><a href="#4XX" class="headerlink" title="4XX"></a>4XX</h4><p>4XX 的响应结果表明客户端是发生错误的原因所在。</p>
<h5 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h5><p>请求报文中存在语法错误</p>
<h5 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h5><h5 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h5><h5 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h5><h4 id="5XX"><a href="#5XX" class="headerlink" title="5XX"></a>5XX</h4><p>5XX 表明服务器本身发生的错误</p>
<h5 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h5><h5 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h5><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul>
<li>499 - nginx 特有，表示客户端关闭连接，通常是由于客户端超时所致。不是服务端的问题。</li>
</ul>
<h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></li>
</ul>
]]></content>
      <categories>
        <category>communication</category>
        <category>computer network</category>
        <category>http</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title>Hive</title>
    <url>/bigdata/hive/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Hive 是一套 Hadoop 上的数据仓库工具，用于处理Hadoop上存储的结构化数据。<br>Hive 最初由 Facebook 开发，开源后转交给了 Apache。</p>
<a id="more"></a>

<p>Hive 的特点：</p>
<ul>
<li>采用类 SQL 语句开发。无需编写 MapReduce。因此开发更加简易。</li>
<li>Hive 本身不提供存储功能，数据存储在 HDFS 上。</li>
<li>Hive 将数据映射成数据库和表，库和表的元数据存储在关系型数据库上。</li>
<li>数据存储方面：能存储大量的数据，且对数据的完整性和格式的要求不严格。</li>
<li>数据处理方面：hive语句最终将生成 MapReduce 任务执行，因此不适用于实时计算，只适合作离线分析。</li>
</ul>
<h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p><img src="http://images.gitbook.cn/7721d2a0-400c-11e7-919d-27e09bb923c4" alt=""></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="1-数值类型"><a href="#1-数值类型" class="headerlink" title="1. 数值类型"></a>1. 数值类型</h4><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">大小</th>
<th align="center">值域</th>
<th align="center">后缀</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">TINYINT</td>
<td align="center">1字节有符号整数</td>
<td align="center">-128 ~ 127</td>
<td align="center">Y</td>
<td align="center">10Y</td>
</tr>
<tr>
<td align="center">SMALLINT</td>
<td align="center">2字节有符号整数</td>
<td align="center">-32768 ~ 32767</td>
<td align="center">S</td>
<td align="center">20S</td>
</tr>
<tr>
<td align="center">INT</td>
<td align="center">4字节有符号整数</td>
<td align="center"></td>
<td align="center">-</td>
<td align="center">30</td>
</tr>
<tr>
<td align="center">BIGINT</td>
<td align="center">8字节有符号整数</td>
<td align="center"></td>
<td align="center">L</td>
<td align="center">10000L</td>
</tr>
<tr>
<td align="center">FLOAT</td>
<td align="center">4字节浮点数</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">DOUBLE</td>
<td align="center">8字节浮点数</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">DECIMAL</td>
<td align="center">-</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>Hive-0.11.0和Hive-0.12.0固定了DECIMAL类型的精度并限制为38位数字，从Hive-0.13.0开始可以指定DECIMAL的规模和精度，当使用DECIMAL类型创建表时可以使用DECIMAL(precision,scale)语法。DECIMAL默认为DECIMAL(10,0)。</li>
</ul>
<h4 id="2-字符串"><a href="#2-字符串" class="headerlink" title="2. 字符串"></a>2. 字符串</h4><p>字符串使用单引号或双引号指定。hive支持C类型的转义字符。</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">长度</th>
</tr>
</thead>
<tbody><tr>
<td align="center">VARCHAR</td>
<td align="center">1 ~ 65355</td>
</tr>
<tr>
<td align="center">CHAR</td>
<td align="center">255</td>
</tr>
</tbody></table>
<h4 id="3-时间戳"><a href="#3-时间戳" class="headerlink" title="3. 时间戳"></a>3. 时间戳</h4><h4 id="4-日期"><a href="#4-日期" class="headerlink" title="4. 日期"></a>4. 日期</h4><h3 id="HiveSQL"><a href="#HiveSQL" class="headerlink" title="HiveSQL"></a>HiveSQL</h3><h4 id="1-数据库操作"><a href="#1-数据库操作" class="headerlink" title="1. 数据库操作"></a>1. 数据库操作</h4><h5 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> user_db;</span><br></pre></td></tr></table></figure>

<h5 id="查看数据库信息"><a href="#查看数据库信息" class="headerlink" title="查看数据库信息"></a>查看数据库信息</h5><p>describe 命令用来查看数据库的定义。包括：数据库名称、数据库在HDFS中的路径、HDFS用户名称</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; describe database user_db;</span><br><span class="line">OK</span><br><span class="line">user_db        hdfs:&#x2F;&#x2F;example.com:8020&#x2F;user&#x2F;hive&#x2F;warehouse&#x2F;user_db.db   hadoop  USER</span><br></pre></td></tr></table></figure>

<p>上述示例中， user_db 是数据库的名称；hdfs://example.com:8020/user/hive/warehouse/user_db.db 是 user_db 库 在 HDFS 上存储数据的根目录。</p>
<h5 id="查看数据库列表"><a href="#查看数据库列表" class="headerlink" title="查看数据库列表"></a>查看数据库列表</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive&gt; show databases;   </span><br><span class="line">OK      </span><br><span class="line">user_db</span><br><span class="line">default</span><br></pre></td></tr></table></figure>

<h5 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">exists</span> testdb <span class="keyword">cascade</span>;</span><br></pre></td></tr></table></figure>

<h5 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> user_db;</span><br></pre></td></tr></table></figure>

<h4 id="2-表操作"><a href="#2-表操作" class="headerlink" title="2. 表操作"></a>2. 表操作</h4><h5 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`sec_hz.newton_event_event_fuse_stat`</span>(</span><br><span class="line">  <span class="string">`bizType`</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'业务线'</span>,</span><br><span class="line">  <span class="string">`cmd`</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'事件标识'</span>,</span><br><span class="line">  <span class="string">`returnCode`</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'返回码'</span>,</span><br><span class="line">  <span class="string">`hostIp`</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'机器IP'</span>,</span><br><span class="line">  <span class="string">`time`</span> <span class="keyword">string</span> <span class="keyword">COMMENT</span> <span class="string">'时间'</span>,</span><br><span class="line">  <span class="string">`amount`</span> <span class="built_in">int</span> <span class="keyword">COMMENT</span> <span class="string">'数量'</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">COMMENT</span> <span class="string">'newton事件每分钟返回码分布数'</span></span><br><span class="line">PARTITIONED <span class="keyword">BY</span> (<span class="string">`year`</span> <span class="keyword">string</span>, <span class="string">`month`</span> <span class="keyword">string</span>, <span class="string">`day`</span> <span class="keyword">string</span>)</span><br><span class="line"><span class="keyword">ROW</span> <span class="keyword">FORMAT</span> <span class="keyword">DELIMITED</span></span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\t'</span></span><br><span class="line">COLLECTION ITEMS <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span></span><br><span class="line"><span class="keyword">stored</span> <span class="keyword">as</span> orc;</span><br></pre></td></tr></table></figure>

<h5 id="查看表定义"><a href="#查看表定义" class="headerlink" title="查看表定义"></a>查看表定义</h5><p>查看简单定义</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">describe userinfo;</span><br></pre></td></tr></table></figure>

<p>查看详细信息</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">describe formatted userinfo;</span><br></pre></td></tr></table></figure>

<h5 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> sec_hz.newton_event_event_fuse_stat;</span><br></pre></td></tr></table></figure>

<h5 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show tables;          -- 查看库中所有表</span><br><span class="line">Show TABLES &#39;*info&#39;;  -- 可以用正则表达式筛选要列出的表</span><br></pre></td></tr></table></figure>

<h5 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h5><p>修改表名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将表名从userinfo改为user_info</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> userinfo <span class="keyword">rename</span> <span class="keyword">to</span> user_info;</span><br></pre></td></tr></table></figure>

<p>添加字段</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 在user_info表添加一个字段provinceid，int 类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> user_info <span class="keyword">add</span> <span class="keyword">columns</span> (provinceid <span class="built_in">int</span> );</span><br></pre></td></tr></table></figure>

<h5 id="显示所有分区"><a href="#显示所有分区" class="headerlink" title="显示所有分区"></a>显示所有分区</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">partitions</span> sec_hz.newton_event_event_fuse_stat;</span><br></pre></td></tr></table></figure>

<h4 id="3-内置函数"><a href="#3-内置函数" class="headerlink" title="3. 内置函数"></a>3. 内置函数</h4><p><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-Built-inFunctions" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-Built-inFunctions</a><br><a href="https://blog.csdn.net/wisgood/article/details/17376393" target="_blank" rel="noopener">https://blog.csdn.net/wisgood/article/details/17376393</a></p>
<h5 id="i-字符串处理"><a href="#i-字符串处理" class="headerlink" title="i. 字符串处理"></a>i. 字符串处理</h5><ul>
<li><p>取子串</p>
<p>  <a href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substr" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substr</a></p>
<p>  substr(str, pos, len) | substring(str, pos, len)</p>
<p>  从 pos（从1开始）开始 长 len 的子串。</p>
</li>
<li><p>字符串拼接</p>
<p>  concat(str1, str2, …)</p>
</li>
</ul>
<h5 id="ii-json"><a href="#ii-json" class="headerlink" title="ii. json"></a>ii. json</h5><p>get_json_object()</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">get_json_object(jsonString, &quot;$.brush_result.banned_status&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="hive-cli-配置环境变量"><a href="#hive-cli-配置环境变量" class="headerlink" title="hive-cli 配置环境变量"></a>hive-cli 配置环境变量</h4><p>在 hive-cli 终端内执行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set mapreduce.job.queuename&#x3D;xxx</span><br></pre></td></tr></table></figure>

<p>对于每次进入 hive-cli 都需要设置的环境变量，建议放到配置文件里。文件路径：~/.hiverc 或者 /etc/hive/conf/.hiverc<br>文件内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set mapreduce.job.queuename&#x3D;xxx</span><br></pre></td></tr></table></figure>

<h5 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h5><p>Hive中的.hiverc文件：<a href="https://blog.csdn.net/xiaolang85/article/details/49303659" target="_blank" rel="noopener">https://blog.csdn.net/xiaolang85/article/details/49303659</a></p>
<h4 id="获取非-group-by-字段的方法"><a href="#获取非-group-by-字段的方法" class="headerlink" title="获取非 group by 字段的方法"></a>获取非 group by 字段的方法</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">collect_set(字段名)[0]</span><br></pre></td></tr></table></figure>
<p><a href="https://stackoverflow.com/questions/5746687/hive-expression-not-in-group-by-key" target="_blank" rel="noopener">https://stackoverflow.com/questions/5746687/hive-expression-not-in-group-by-key</a><br><a href="https://blog.csdn.net/sam_hzj/article/details/80099735" target="_blank" rel="noopener">https://blog.csdn.net/sam_hzj/article/details/80099735</a></p>
<h4 id="导出数据到文件"><a href="#导出数据到文件" class="headerlink" title="导出数据到文件"></a>导出数据到文件</h4><p>执行 SQL 将结果重定向到文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hive -e &quot;select * from tableName;&quot; &gt; result.txt</span><br></pre></td></tr></table></figure>

<p><a href="https://www.cnblogs.com/zfyouxi/p/5408129.html" target="_blank" rel="noopener">https://www.cnblogs.com/zfyouxi/p/5408129.html</a></p>
<h4 id="json"><a href="#json" class="headerlink" title="json"></a>json</h4><ul>
<li>get_json_object() 处理json对象，一次解析一个字段</li>
<li>json_tuple() 处理json对象，可以一次解析多个字段</li>
</ul>
<p>对于确定元素个数的json数组，从json数组的指定位置取值可以直接用 <code>get_json_object()</code> 。<br>比如，取数组第一个元素中的website字段：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> get_json_object(<span class="string">'[&#123;"website":"www.iteblog.com","name":"过往记忆"&#125;, &#123;"website":"carbondata.iteblog.com","name":"carbondata 中文文档"&#125;]'</span>, <span class="string">'$.[0].website'</span>);</span><br></pre></td></tr></table></figure>

<p><a href="https://stackoverflow.com/questions/24447428/parse-json-arrays-using-hive" target="_blank" rel="noopener">https://stackoverflow.com/questions/24447428/parse-json-arrays-using-hive</a><br>解析json数组：<a href="https://blog.csdn.net/djz19890117/article/details/79165281" target="_blank" rel="noopener">https://blog.csdn.net/djz19890117/article/details/79165281</a><br>解析json数组：<a href="https://www.iteblog.com/archives/2362.html" target="_blank" rel="noopener">https://www.iteblog.com/archives/2362.html</a></p>
<h3 id="参考链接-1"><a href="#参考链接-1" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>官网：<a href="https://hive.apache.org/" target="_blank" rel="noopener">https://hive.apache.org/</a></li>
<li><a href="https://gitbook.cn/books/5924bd0523245b0aa3776b65/index.html" target="_blank" rel="noopener">https://gitbook.cn/books/5924bd0523245b0aa3776b65/index.html</a></li>
<li><a href="https://www.cnblogs.com/qingyunzong/p/8707885.html" target="_blank" rel="noopener">https://www.cnblogs.com/qingyunzong/p/8707885.html</a></li>
<li><a href="https://www.tutorialspoint.com/hive/" target="_blank" rel="noopener">https://www.tutorialspoint.com/hive/</a></li>
<li>hive数据类型：<a href="https://segmentfault.com/a/1190000016125717" target="_blank" rel="noopener">https://segmentfault.com/a/1190000016125717</a></li>
<li>hive统计函数：<a href="https://my.oschina.net/crxy/blog/420695" target="_blank" rel="noopener">https://my.oschina.net/crxy/blog/420695</a></li>
<li>hive函数：<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF</a></li>
</ul>
]]></content>
      <categories>
        <category>bigdata</category>
        <category>hive</category>
      </categories>
      <tags>
        <tag>hive</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch DSL</title>
    <url>/bigdata/elasticsearch-dsl/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>Elasticsearch DSL 是用于查询 Elasticsearch 的专用语言。它其实就是一个 json ，其中的不同节点代表不同的含义。通过不同语句的组合形成灵活的查询条件。</p>
<p>Elasticsearch 只认识 Elasticsearch DSL 这一种查询语言。当然，可以通过插件来支持SQL查询，插件的原理自然是将SQL转换为等价的DSL语句。</p>
<h3 id="二、查询"><a href="#二、查询" class="headerlink" title="二、查询"></a>二、查询</h3><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p><code>size</code> 参数用于指定每页的大小， <code>from</code> 参数用于指定跳过最初的多少个文档</p>
<p>如果要查询从第3个开始，每页10条记录的文档，查询语句应该这么设定：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;size:10, from: 2&quot;</span><br></pre></td></tr></table></figure>

<p>深分页问题：</p>
<ul>
<li>游标查询：<a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html" target="_blank" rel="noopener">https://www.elastic.co/guide/cn/elasticsearch/guide/current/scroll.html</a></li>
</ul>
<h4 id="bool查询"><a href="#bool查询" class="headerlink" title="bool查询"></a>bool查询</h4><p>bool查询用于组合多个查询条件，它的属性包括</p>
<ul>
<li><code>must</code> 必须满足的条件</li>
<li><code>must_not</code> 必须不满足的条件</li>
<li><code>should</code> 尽量满足的条件</li>
</ul>
<h4 id="范围查询"><a href="#范围查询" class="headerlink" title="范围查询"></a>范围查询</h4><p>range语句用于对字段进行范围限制。它可以应用在数值型字段、时间型字段上。range语句支持4种限制类型：</p>
<ul>
<li><code>gte</code> : 大于等于</li>
<li><code>gt</code> : 大于</li>
<li><code>lte</code> : 小于等于</li>
<li><code>lt</code> : 小于</li>
</ul>
<p>举个例子，下面这条语句限定查询结果的 timestamp 字段的值在 [1548086400000, 1548259200000) 内</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"range"</span>: &#123;</span><br><span class="line">    <span class="attr">"timestamp"</span>: &#123;</span><br><span class="line">      <span class="attr">"gte"</span>: <span class="number">1548086400000</span>,</span><br><span class="line">      <span class="attr">"lt"</span>: <span class="number">1548259200000</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="存在性查询"><a href="#存在性查询" class="headerlink" title="存在性查询"></a>存在性查询</h4><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"exists"</span>: &#123;</span><br><span class="line">    <span class="attr">"field"</span>: <span class="string">"timestamp"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="选择字段"><a href="#选择字段" class="headerlink" title="选择字段"></a>选择字段</h4><p><code>_source</code> 可以获取指定的字段，类似于 <code>select id from table</code></p>
<p>查询 field1 和 field2 这两个字段</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;_source&quot;:[&quot;field1&quot;, &quot;field2&quot;]</span><br></pre></td></tr></table></figure>

<p>如果不指定 <code>_source</code> ，则表明查询所有字段</p>
<h3 id="三、聚合"><a href="#三、聚合" class="headerlink" title="三、聚合"></a>三、聚合</h3><p>ES的聚合由两个核心概念组成：桶(buckets)和指标(metrics)。</p>
<ul>
<li>桶(buckets)是满足特定条件的文档的集合</li>
<li>指标(metrics)是根据桶内文档的得出的统计量，比如“和”、“平均数”、“方差”……</li>
</ul>
<p>桶在概念上类似于 SQL 的分组（GROUP BY），而指标则类似于 COUNT() 、 SUM() 、 MAX() 等统计方法。<br>用SQL来做类比：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(color)</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> color</span><br></pre></td></tr></table></figure>
<p>上述语句中，<code>COUNT(color)</code>相当于指标，<code>GROUP BY color</code>相当于桶。</p>
<h4 id="时间柱状图"><a href="#时间柱状图" class="headerlink" title="时间柱状图"></a>时间柱状图</h4><p><code>date_histogram</code> 用于生成折线图。它支持如下属性：</p>
<ul>
<li><code>field</code> 指定使用的时间字段。实际上，也可以使用任何数值型字段。</li>
<li><code>interval</code> 指定时间间隔，即相邻两个数据点之间的间隔。可以直接指定数值，或者设为 “second”, “minute”, “hour”, “day”, “week”, “month” 等等，也可以设为 “10m”（十分钟）, “2h”（两小时）</li>
<li><code>time_zone</code> 时区。例如北京时间需要设置为： “+08:00”</li>
<li><code>format</code> 时间格式。例如“yyyy-MM-dd HH:mm:ss”</li>
</ul>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-datehistogram-aggregation.html</a></li>
</ul>
<h4 id="top-hits"><a href="#top-hits" class="headerlink" title="top_hits"></a>top_hits</h4><ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html" target="_blank" rel="noopener">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html</a></li>
</ul>
<h4 id="近似聚合"><a href="#近似聚合" class="headerlink" title="近似聚合"></a>近似聚合</h4><ul>
<li>百分位数计算：<a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/percentiles.html#_%E7%99%BE%E5%88%86%E4%BD%8D%E7%AD%89%E7%BA%A7" target="_blank" rel="noopener">https://www.elastic.co/guide/cn/elasticsearch/guide/current/percentiles.html#_%E7%99%BE%E5%88%86%E4%BD%8D%E7%AD%89%E7%BA%A7</a></li>
</ul>
<h3 id="四、常用查询示例"><a href="#四、常用查询示例" class="headerlink" title="四、常用查询示例"></a>四、常用查询示例</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"bool"</span>: &#123;</span><br><span class="line">      <span class="attr">"must"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"terms"</span>: &#123;</span><br><span class="line">            <span class="attr">"key"</span>: [</span><br><span class="line">              <span class="string">"######"</span></span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">"aggs"</span>: &#123;</span><br><span class="line">    <span class="attr">"requestCount"</span>: &#123;</span><br><span class="line">      <span class="attr">"date_histogram"</span>: &#123;</span><br><span class="line">        <span class="attr">"field"</span>: <span class="string">"timestamp"</span>,</span><br><span class="line">        <span class="attr">"interval"</span>: <span class="string">"#####"</span>,</span><br><span class="line">        <span class="attr">"time_zone"</span>: <span class="string">"+08:00"</span>,</span><br><span class="line">        <span class="attr">"format"</span>: <span class="string">"yyyy-MM-dd HH"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"aggs"</span>: &#123;</span><br><span class="line">        <span class="attr">"requestCount"</span>: &#123;</span><br><span class="line">          <span class="attr">"sum"</span>: &#123;</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"requestCount"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"hitCount"</span>: &#123;</span><br><span class="line">          <span class="attr">"sum"</span>: &#123;</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"hitCount"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"default"</span>: &#123;</span><br><span class="line">          <span class="attr">"sum"</span>: &#123;</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"returnCodeMap.#####"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"code"</span>: &#123;</span><br><span class="line">          <span class="attr">"sum"</span>: &#123;</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"returnCodeMap.#####"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="五、参考链接"><a href="#五、参考链接" class="headerlink" title="五、参考链接"></a>五、参考链接</h3><ul>
<li><a href="https://www.cnblogs.com/ghj1976/p/5293250.html" target="_blank" rel="noopener">https://www.cnblogs.com/ghj1976/p/5293250.html</a></li>
<li><a href="https://blog.csdn.net/qq_41455420/article/details/84206690" target="_blank" rel="noopener">https://blog.csdn.net/qq_41455420/article/details/84206690</a></li>
<li><a href="https://blog.csdn.net/mrxuchen/article/details/80040720" target="_blank" rel="noopener">https://blog.csdn.net/mrxuchen/article/details/80040720</a></li>
<li><a href="https://blog.csdn.net/sxf_123456/article/details/77227529" target="_blank" rel="noopener">https://blog.csdn.net/sxf_123456/article/details/77227529</a></li>
<li>深分页解决方案：<a href="https://blog.csdn.net/u011228889/article/details/79760167" target="_blank" rel="noopener">https://blog.csdn.net/u011228889/article/details/79760167</a></li>
<li>ElasticSearch中”distinct”,”count”和”group by”的实现：<a href="https://www.jianshu.com/p/62bed9cc8349" target="_blank" rel="noopener">https://www.jianshu.com/p/62bed9cc8349</a></li>
</ul>
]]></content>
      <categories>
        <category>bigdata</category>
        <category>elasticsearch</category>
      </categories>
      <tags>
        <tag>elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>yaml</title>
    <url>/language/data-exchange-standard/yaml/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>yaml 是 Yet Another Markup Language 的缩写。yaml易于阅读，是一种跨语言的数据序列化标准，它的文件扩展名是“.yml”。</p>
<h3 id="二、语法"><a href="#二、语法" class="headerlink" title="二、语法"></a>二、语法</h3><p>// todo</p>
<h3 id="三、参考链接"><a href="#三、参考链接" class="headerlink" title="三、参考链接"></a>三、参考链接</h3><ul>
<li>官网：<a href="http://yaml.org" target="_blank" rel="noopener">http://yaml.org</a></li>
<li>yaml 1.2 规范：<a href="https://yaml.org/spec/1.2/spec.html" target="_blank" rel="noopener">https://yaml.org/spec/1.2/spec.html</a></li>
<li><a href="https://blog.csdn.net/beginya/article/details/76768968" target="_blank" rel="noopener">https://blog.csdn.net/beginya/article/details/76768968</a></li>
<li>Parsing YAML with SnakeYAML：<a href="https://www.baeldung.com/java-snake-yaml" target="_blank" rel="noopener">https://www.baeldung.com/java-snake-yaml</a></li>
<li>Spring YAML Configuration：<a href="https://www.baeldung.com/spring-yaml" target="_blank" rel="noopener">https://www.baeldung.com/spring-yaml</a></li>
<li>properties转yaml：<a href="http://www.bejson.com/devtools/properties2yaml/" target="_blank" rel="noopener">http://www.bejson.com/devtools/properties2yaml/</a></li>
</ul>
]]></content>
      <categories>
        <category>language</category>
        <category>data-exchange-standard</category>
      </categories>
      <tags>
        <tag>data-exchange-standard</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo blog example</title>
    <url>/markdown/hexo/hexo-next-github-pages/</url>
    <content><![CDATA[<h3 id="最终目标"><a href="#最终目标" class="headerlink" title="最终目标"></a>最终目标</h3><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><h4 id="安装-nodejs-git"><a href="#安装-nodejs-git" class="headerlink" title="安装 nodejs git"></a>安装 nodejs git</h4><p>Ubuntu</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt install node     # node注意版本，一般没问题</span><br><span class="line">sudo apt install git      # git 一般是预装的</span><br></pre></td></tr></table></figure>

<p>如果你用的是CentOS，将上面两条命令的apt换成yum就可以。如果用的是Arch，那想必你也没必要听我废话了。</p>
<p>MacOSX</p>
<p>如果安装了Homebrew，可以通过如下命令安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew install node</span><br><span class="line">brew install git</span><br></pre></td></tr></table></figure>

<p>Windows</p>
<p>官网下载安装包：<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener" title="nodejs.org">nodejs</a>、<a href="https://git-scm.com/" target="_blank" rel="noopener" title="git-scm.com">git</a></p>
<p>也可以用 scoop 安装：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># LTS 版</span><br><span class="line">scoop install nodejs-lts</span><br><span class="line"># 最新稳定版</span><br><span class="line">scoop install nodejs</span><br></pre></td></tr></table></figure>

<h4 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo -g  # -g 表示全局安装</span><br></pre></td></tr></table></figure>

<h4 id="初始化一个-hexo-项目"><a href="#初始化一个-hexo-项目" class="headerlink" title="初始化一个 hexo 项目"></a>初始化一个 hexo 项目</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo init &lt;项目名&gt;     # eg. hexo init blog</span><br></pre></td></tr></table></figure>

<p>上述命令执行完，在当前目录下，会多一个“项目名”为名字的文件夹。</p>
<p>假设我们执行的是<code>hexo init blog</code>。进入blog文件夹，执行<code>hexo s</code>。<br>打开浏览器，输入“127.0.0.1:4000”，应该就可以看到一个 hello world 的界面了。<br>好了，回到刚才执行<code>hexo s</code>的命令行，按 Ctrl + C 结束执行。</p>
<h4 id="安装-next"><a href="#安装-next" class="headerlink" title="安装 next"></a>安装 next</h4><p>假设在上一步中，我们的项目名叫“blog”。现在，进入blog文件夹。依次执行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone git@github.com:theme-next/hexo-theme-next.git themes/next   # 下载 next 代码库</span><br><span class="line">cd themes/next            # 进入 next 的子目录</span><br><span class="line">git tag -l                # 列出所有tag</span><br><span class="line">git checkout v6.7.0       # 回退到 6.7.0 版本</span><br></pre></td></tr></table></figure>

<h4 id="启用-next-主题"><a href="#启用-next-主题" class="headerlink" title="启用 next 主题"></a>启用 next 主题</h4><p>打开项目根目录下的 <code>_config.yml</code><br>将 <code>theme: landscape</code> 改成 <code>theme: next</code><br>在项目根目录下，执行<code>hexo s</code>，重新打开“127.0.0.1:4000”，观察下变化。</p>
<p>next 的设定可以参考这里：<a href="https://theme-next.org/" target="_blank" rel="noopener">https://theme-next.org/</a></p>
<h3 id="构建自动部署"><a href="#构建自动部署" class="headerlink" title="构建自动部署"></a>构建自动部署</h3><h4 id="先去申请GitLab，GitHub"><a href="#先去申请GitLab，GitHub" class="headerlink" title="先去申请GitLab，GitHub"></a>先去申请GitLab，GitHub</h4><p>GitLab是用来托管博客源码的，GitHub是用来托管生成的静态网站的（如果考虑安全性，可以申请两个GitHub账号，具体操作下方详述）。</p>
<p>// todo</p>
<h4 id="检查CI文件正确性"><a href="#检查CI文件正确性" class="headerlink" title="检查CI文件正确性"></a>检查CI文件正确性</h4><p><a href="https://gitlab.com/用户名/项目名/-/ci/lint" target="_blank" rel="noopener">https://gitlab.com/用户名/项目名/-/ci/lint</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://www.jianshu.com/p/a47b7a1fb14c" target="_blank" rel="noopener">https://www.jianshu.com/p/a47b7a1fb14c</a></li>
<li><a href="https://www.jianshu.com/p/b7886271e21a" target="_blank" rel="noopener">https://www.jianshu.com/p/b7886271e21a</a></li>
<li><a href="https://blog.csdn.net/winter_evening/article/details/72353953" target="_blank" rel="noopener">https://blog.csdn.net/winter_evening/article/details/72353953</a></li>
<li><a href="https://blog.csdn.net/blue_zy/article/details/79071414" target="_blank" rel="noopener">https://blog.csdn.net/blue_zy/article/details/79071414</a></li>
<li><a href="https://blog.csdn.net/u011240016/article/details/79422462" target="_blank" rel="noopener">https://blog.csdn.net/u011240016/article/details/79422462</a></li>
<li><a href="https://docs.gitlab.com/ee/user/project/pages/introduction.html" target="_blank" rel="noopener">https://docs.gitlab.com/ee/user/project/pages/introduction.html</a></li>
<li><a href="https://yelf.me/notes/website/gitlab-pages/" target="_blank" rel="noopener">https://yelf.me/notes/website/gitlab-pages/</a></li>
<li><a href="https://blog.frenlee.com/2016/11/hexo-gitlab-ci/" target="_blank" rel="noopener">https://blog.frenlee.com/2016/11/hexo-gitlab-ci/</a></li>
<li><a href="https://blog.codenote.pro/this-blog-hexo-next-githubpages-optimization.html" target="_blank" rel="noopener">https://blog.codenote.pro/this-blog-hexo-next-githubpages-optimization.html</a></li>
</ul>
]]></content>
      <categories>
        <category>tutorial</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo</title>
    <url>/markdown/hexo/hexo/</url>
    <content><![CDATA[<h3 id="环境需求"><a href="#环境需求" class="headerlink" title="环境需求"></a>环境需求</h3><ul>
<li><a href="/devops/git/git">git</a></li>
<li>nodejs</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo -g  # -g 表示全局安装</span><br></pre></td></tr></table></figure>

<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><ul>
<li>scaffolds 模板文件夹</li>
<li>source 资源文件夹</li>
<li>themes 主题文件夹</li>
</ul>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean      # 清除缓存</span><br><span class="line">hexo g          # 构建（生成静态网站）</span><br><span class="line">hexo s --debug  # 在4000端口开启本地服务，--debug表示输出调试信息</span><br><span class="line">hexo server -p 80   # 在 80 端口开启本地服务</span><br><span class="line">hexo g -w       # 构建并持续监控文件变化（配合nginx可以本地实时预览博客效果）</span><br><span class="line">hexo version    # 可以简写为`hexo v`显示 hexo 的版本</span><br><span class="line">hexo new draft &lt;title&gt;      # 新建草稿</span><br><span class="line">hexo publish draft &lt;title&gt;  # 将草稿正式发布为post</span><br><span class="line">hexo new page "pageName"    # 新建页面</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ul>
<li>post_asset_folder 文件资源文件夹</li>
</ul>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><h4 id="next"><a href="#next" class="headerlink" title="next"></a>next</h4><ul>
<li><a href="https://github.com/theme-next/hexo-theme-next/releases" target="_blank" rel="noopener">https://github.com/theme-next/hexo-theme-next/releases</a></li>
<li><a href="https://theme-next.org/" target="_blank" rel="noopener">https://theme-next.org/</a></li>
<li><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">http://theme-next.iissnan.com/getting-started.html</a></li>
</ul>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><h4 id="GitLab"><a href="#GitLab" class="headerlink" title="GitLab"></a>GitLab</h4><ul>
<li><a href="https://gitlab.com/pages/hexo" target="_blank" rel="noopener">https://gitlab.com/pages/hexo</a></li>
</ul>
<h4 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h4><p>推荐使用 pow 做本地部署。<br><a href="https://hexo.io/zh-cn/docs/server.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/server.html</a></p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="显示阅读全文"><a href="#显示阅读全文" class="headerlink" title="显示阅读全文"></a>显示阅读全文</h4><p>在文章中使用 <code>&lt;!-- more --&gt;</code> 手动进行截断。标志之前的内容在主页的摘要中显示，剩下的内容会隐藏起来，并显示“阅读全文”按钮。</p>
<h4 id="标签语法写的东西没有被正确生成出来，而是一片空白"><a href="#标签语法写的东西没有被正确生成出来，而是一片空白" class="headerlink" title="标签语法写的东西没有被正确生成出来，而是一片空白"></a>标签语法写的东西没有被正确生成出来，而是一片空白</h4><p>修改<code>_config.yml</code>，将 <code>tab_replace:</code> 更改为 <code>tab_replace: true</code></p>
<h4 id="博文加密"><a href="#博文加密" class="headerlink" title="博文加密"></a>博文加密</h4><p><a href="https://github.com/MikeCoder/hexo-blog-encrypt" target="_blank" rel="noopener">https://github.com/MikeCoder/hexo-blog-encrypt</a><br><a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/HEAD/ReadMe.zh.md" target="_blank" rel="noopener">https://github.com/MikeCoder/hexo-blog-encrypt/blob/HEAD/ReadMe.zh.md</a><br><a href="https://www.npmjs.com/package/hexo-blog-encrypt" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-blog-encrypt</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener" title="hexo.io">官网</a></li>
<li><a href="https://hexo.io/zh-cn/docs/server.html" target="_blank" rel="noopener" title="hexo server">hexo server</a></li>
</ul>
]]></content>
      <categories>
        <category>tutorial</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Next</title>
    <url>/markdown/hexo/next/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>Next 是 hexo 的一个主题。</p>
<h3 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h3><h3 id="三、配置"><a href="#三、配置" class="headerlink" title="三、配置"></a>三、配置</h3><h4 id="1-自定义配置的最佳实践"><a href="#1-自定义配置的最佳实践" class="headerlink" title="1. 自定义配置的最佳实践"></a>1. 自定义配置的最佳实践</h4><p>在 <code>source</code> 文件下建立 <code>_data</code> 子目录，在 <code>_data</code> 子目录下建立 <code>next.yml</code> 配置。将自定义的配置放入 <code>next.yml</code> 中。（适用于 v6.+)</p>
<p>优点是自定义配置分开管理，升级 next 时不用理会配置文件的替换。</p>
<h4 id="2-主题风格"><a href="#2-主题风格" class="headerlink" title="2. 主题风格"></a>2. 主题风格</h4><p>在 <code>next.yml</code> 中放入如下内容，选择注释掉其中任一个scheme配置，如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Scheme Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure>

<p>如上的配置将使用 <code>Gemini</code> 这种风格。</p>
<h4 id="3-社交图标"><a href="#3-社交图标" class="headerlink" title="3. 社交图标"></a>3. 社交图标</h4><p><code>_config.yml</code> 文件中 取消注释 <code>social:</code> 以及想要显示的社交配置即可。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/yourname || github</span><br><span class="line">  GitLab: https://gitlab.com/yourname || gitlab</span><br><span class="line">  E-Mail: mailto:yourname@example.com || envelope</span><br></pre></td></tr></table></figure>

<h3 id="四、常见问题"><a href="#四、常见问题" class="headerlink" title="四、常见问题"></a>四、常见问题</h3><h4 id="1-启用分类"><a href="#1-启用分类" class="headerlink" title="1. 启用分类"></a>1. 启用分类</h4><p><a href="https://blog.csdn.net/u011240016/article/details/79422462" target="_blank" rel="noopener">https://blog.csdn.net/u011240016/article/details/79422462</a></p>
<h4 id="2-文章目录"><a href="#2-文章目录" class="headerlink" title="2. 文章目录"></a>2. 文章目录</h4><p>在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Table Of Contents in the Sidebar</span><br><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  # Automatically add list number to toc.</span><br><span class="line">  number: false</span><br><span class="line">  # If true, all words will placed on next lines if header width longer then sidebar width.</span><br><span class="line">  wrap: false</span><br><span class="line">  # Maximum heading depth of generated toc. You can set it in one post through &#96;toc_max_depth&#96; var.</span><br><span class="line">  max_depth: 6</span><br></pre></td></tr></table></figure>

<p>设置 <code>number: false</code> 可以屏蔽掉自动加的标题序号。</p>
<h4 id="3-去掉底部的由hexo驱动的文字"><a href="#3-去掉底部的由hexo驱动的文字" class="headerlink" title="3. 去掉底部的由hexo驱动的文字"></a>3. 去掉底部的由hexo驱动的文字</h4><p>找到 <code>themes/next/layout/_partials/footer.swig</code> 这个文件，注释掉相关代码，如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">&#123;% if theme.footer.powered.enable %&#125;</span><br><span class="line">  &lt;div class&#x3D;&quot;powered-by&quot;&gt;&#123;#</span><br><span class="line">  #&#125;&#123;&#123; __(&#39;footer.powered&#39;, next_url(&#39;https:&#x2F;&#x2F;hexo.io&#39;, &#39;Hexo&#39;, &#123;class: &#39;theme-link&#39;&#125;)) &#125;&#125;&#123;#</span><br><span class="line">  #&#125;&#123;% if theme.footer.powered.version %&#125; v&#123;&#123; hexo_env(&#39;version&#39;) &#125;&#125;&#123;% endif %&#125;&#123;#</span><br><span class="line"> #&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% if theme.footer.powered.enable and theme.footer.theme.enable %&#125;</span><br><span class="line">  &lt;span class&#x3D;&quot;post-meta-divider&quot;&gt;|&lt;&#x2F;span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% if theme.footer.theme.enable %&#125;</span><br><span class="line">  &lt;div class&#x3D;&quot;theme-info&quot;&gt;&#123;#</span><br><span class="line">  #&#125;&#123;&#123; __(&#39;footer.theme&#39;) &#125;&#125; – &#123;&#123; next_url(&#39;https:&#x2F;&#x2F;theme-next.org&#39;, &#39;NexT.&#39; + theme.scheme, &#123;class: &#39;theme-link&#39;&#125;) &#125;&#125;&#123;#</span><br><span class="line">  #&#125;&#123;% if theme.footer.theme.version %&#125; v&#123;&#123; version &#125;&#125;&#123;% endif %&#125;&#123;#</span><br><span class="line">#&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<p>其中，<code>&lt;!-- --&gt;</code>包围起来的部分不会生成。</p>
<h4 id="4-打赏配置"><a href="#4-打赏配置" class="headerlink" title="4. 打赏配置"></a>4. 打赏配置</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reward:</span><br><span class="line">  enable: false</span><br><span class="line">  comment: say something here</span><br><span class="line">  #wechatpay: &#x2F;images&#x2F;wechatpay.jpg</span><br><span class="line">  #alipay: &#x2F;images&#x2F;alipay.jpg</span><br><span class="line">  #bitcoin: &#x2F;images&#x2F;bitcoin.png</span><br></pre></td></tr></table></figure>

<h4 id="5-关闭动画"><a href="#5-关闭动画" class="headerlink" title="5. 关闭动画"></a>5. 关闭动画</h4><p>next的动画很慢，快节奏的可能觉得难以忍受。可以在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">motion:</span><br><span class="line">  enable: false</span><br><span class="line">  async: false</span><br><span class="line">  transition:</span><br><span class="line">    # Transition variants:</span><br><span class="line">    # fadeIn | fadeOut | flipXIn | flipXOut | flipYIn | flipYOut | flipBounceXIn | flipBounceXOut | flipBounceYIn | flipBounceYOut</span><br><span class="line">    # swoopIn | swoopOut | whirlIn | whirlOut | shrinkIn | shrinkOut | expandIn | expandOut</span><br><span class="line">    # bounceIn | bounceOut | bounceUpIn | bounceUpOut | bounceDownIn | bounceDownOut | bounceLeftIn | bounceLeftOut | bounceRightIn | bounceRightOut</span><br><span class="line">    # slideUpIn | slideUpOut | slideDownIn | slideDownOut | slideLeftIn | slideLeftOut | slideRightIn | slideRightOut</span><br><span class="line">    # slideUpBigIn | slideUpBigOut | slideDownBigIn | slideDownBigOut | slideLeftBigIn | slideLeftBigOut | slideRightBigIn | slideRightBigOut</span><br><span class="line">    # perspectiveUpIn | perspectiveUpOut | perspectiveDownIn | perspectiveDownOut | perspectiveLeftIn | perspectiveLeftOut | perspectiveRightIn | perspectiveRightOut</span><br><span class="line">    post_block: fadeIn</span><br><span class="line">    post_header: slideDownIn</span><br><span class="line">    post_body: slideDownIn</span><br><span class="line">    coll_header: slideLeftIn</span><br><span class="line">    # Only for Pisces | Gemini.</span><br><span class="line">    sidebar: slideUpIn</span><br></pre></td></tr></table></figure>

<p>设定 <code>motion</code> 的 <code>enable</code> 字段为 <code>false</code> 即可关闭动画。</p>
<h4 id="6-访问量统计"><a href="#6-访问量统计" class="headerlink" title="6. 访问量统计"></a>6. 访问量统计</h4><p>这里以 busuanzi 为例，在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views/Visitors of the website/page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span></span><br></pre></td></tr></table></figure>

<p>这些是我参考的文章：</p>
<ul>
<li><a href="https://www.jianshu.com/p/c311d31265e0" target="_blank" rel="noopener">https://www.jianshu.com/p/c311d31265e0</a></li>
</ul>
<p>如果用的不是next主题，或者想给任意网站加上访问量统计，可以参考这里：<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">http://busuanzi.ibruce.info/</a></p>
<h4 id="7-友情链接"><a href="#7-友情链接" class="headerlink" title="7. 友情链接"></a>7. 友情链接</h4><p>在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_icon:</span> <span class="string">link</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">Links</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="string">敲代码的密斯想:</span> <span class="string">https://www.jianshu.com/u/a220eac0a8a4</span></span><br></pre></td></tr></table></figure>

<p>在links节点下配置想要添加的友情链接，每行一个，冒号“:”左侧为标题，右侧为链接。</p>
<h4 id="8-评论系统"><a href="#8-评论系统" class="headerlink" title="8. 评论系统"></a>8. 评论系统</h4><p>Valine、gitment、gitalk 任选其一。</p>
<h5 id="gitalk"><a href="#gitalk" class="headerlink" title="gitalk"></a>gitalk</h5><p>gitalk 是一款基于 GitHub issues 的评论系统。用户需要登录 GitHub 才能评论。</p>
<p>在 hexo next 中开启 gitalk 有2个步骤。</p>
<ol>
<li>注册 GitHub application</li>
</ol>
<p><a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">https://github.com/settings/applications/new</a></p>
<p>注册完成后，页面上会生成 client_id 和 client_secret</p>
<ol start="2">
<li>添加 next 配置项</li>
</ol>
<p>在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Gitalk</span></span><br><span class="line"><span class="comment"># Demo: https://gitalk.github.io</span></span><br><span class="line"><span class="comment"># Reference: https://asdfv1929.github.io/2018/01/20/gitalk/, https://liujunzhou.cn/2018/8/10/gitalk-error/#more</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 此处设置为 true 即为打开评论系统，设为 false 则不启用评论系统</span></span><br><span class="line">  <span class="attr">github_id:</span>  <span class="comment"># Github repo owner，此处填入GitHub用户名</span></span><br><span class="line">  <span class="attr">repo:</span>  <span class="comment"># Repository name to store issues. 此处填入承载 issues 的仓库名。例如：xxx.github.io，不是填入仓库url，不要填成 https://github.com/your_name/repo_name 这个样子</span></span><br><span class="line">  <span class="attr">client_id:</span>  <span class="comment"># Github Application Client ID，填入第一步中生成的 client_id</span></span><br><span class="line">  <span class="attr">client_secret:</span>  <span class="comment"># Github Application Client Secret，填入第一步中生成的 client_secret</span></span><br><span class="line">  <span class="attr">admin_user:</span>  <span class="comment"># GitHub repo owner and collaborators, only these guys can initialize github issues，填入可以初始化评论系统的 GitHub 用户名</span></span><br><span class="line">  <span class="attr">distraction_free_mode:</span> <span class="literal">true</span> <span class="comment"># Facebook-like distraction free mode</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，gitalk 的评论系统需要在每一篇文章中都初始化一遍。方法是由 admin_user 浏览文章。</p>
<h4 id="9-本地搜索"><a href="#9-本地搜索" class="headerlink" title="9. 本地搜索"></a>9. 本地搜索</h4><p>Step 1. 安装依赖</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>Step 2. 更改配置</p>
<p>在 <code>next.yml</code> 中放入如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># unescape html strings to the readable one</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="10-搜索引擎收录"><a href="#10-搜索引擎收录" class="headerlink" title="10. 搜索引擎收录"></a>10. 搜索引擎收录</h4><h5 id="bing"><a href="#bing" class="headerlink" title="bing"></a>bing</h5><p>登录 <a href="https://www.bing.com/webmaster/" target="_blank" rel="noopener">https://www.bing.com/webmaster/</a> ，获得一个校验码，填入</p>
<h3 id="五、参考链接"><a href="#五、参考链接" class="headerlink" title="五、参考链接"></a>五、参考链接</h3><ul>
<li><a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">https://www.jianshu.com/p/9f0e90cc32c2</a></li>
<li><a href="https://segmentfault.com/a/1190000009544924" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009544924</a></li>
<li><a href="https://www.jianshu.com/p/e8e5addbbcfd" target="_blank" rel="noopener">https://www.jianshu.com/p/e8e5addbbcfd</a></li>
<li><a href="https://blog.codenote.pro/this-blog-hexo-next-githubpages-optimization.html" target="_blank" rel="noopener">https://blog.codenote.pro/this-blog-hexo-next-githubpages-optimization.html</a></li>
<li><a href="https://blog.csdn.net/weixin_38796712/article/details/79372789" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38796712/article/details/79372789</a></li>
<li><a href="https://github.com/iissnan/hexo-theme-next/issues/415" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next/issues/415</a></li>
<li><a href="https://github.com/theme-next/hexo-theme-next/issues/447" target="_blank" rel="noopener">https://github.com/theme-next/hexo-theme-next/issues/447</a></li>
</ul>
]]></content>
      <categories>
        <category>tutorial</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown Tutorial</title>
    <url>/markdown/markdown/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>markdown 是一种“易读易写”的用于网络写作的语言。它的理念是专注于书写内容，而不用分心于格式。这意味着：</p>
<ul>
<li>markdown是简单的，容易书写</li>
<li>markdown易于阅读</li>
</ul>
<p><a href="https://markdown.tw/" target="_blank" rel="noopener">https://markdown.tw/</a> 对markdown进行了系统详尽的讲解，建议阅读。</p>
<p>除了最初的 markdown 标准语法，GitHub Flavored Markdown 也经常被用到。</p>
<p>以下内容对markdown中最常用的语法进行了总结。</p>
<h3 id="二、常用语法"><a href="#二、常用语法" class="headerlink" title="二、常用语法"></a>二、常用语法</h3><p>值得一提的是，markdown 支持直接使用 HTML。因此，如果你需要的格式不在 markdown 的支持范围内，你完全可以直接用 HTML 书写。</p>
<h4 id="1-字型"><a href="#1-字型" class="headerlink" title="1. 字型"></a>1. 字型</h4><ul>
<li>粗体</li>
</ul>
<p>用“<code>**</code>”包围的字体将被格式化为粗体，“<code>**</code>”可以用“<code>__</code>”代替</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">**bold**</span><br></pre></td></tr></table></figure>

<ul>
<li>斜体</li>
</ul>
<p>用“<code>*</code>”包围的字体将被格式化为粗体，“<code>*</code>”可以用“<code>_</code>”代替</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*italic*</span><br></pre></td></tr></table></figure>

<ul>
<li>同时加斜体和粗体</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">**_ 内容太销魂 _**</span><br></pre></td></tr></table></figure>

<ul>
<li>删除线（GitHub）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~~this~~</span><br></pre></td></tr></table></figure>

<ul>
<li>emoji 表情（GitHub）</li>
</ul>
<p>GitHub可用，支持范围见：<a href="https://github.com/ikatyang/emoji-cheat-sheet/blob/master/README.md" target="_blank" rel="noopener">https://github.com/ikatyang/emoji-cheat-sheet/blob/master/README.md</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">:sparkles: :camel: :boom:</span><br></pre></td></tr></table></figure>

<ul>
<li>标题</li>
</ul>
<p>以1到6个“#”号开头的行对应HTML中的H1~H6标题</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 一级标题</span><br><span class="line">## 二级标题</span><br><span class="line">### 三级标题</span><br><span class="line">#### 四级标题</span><br><span class="line">##### 五级标题</span><br><span class="line">###### 六级标题</span><br></pre></td></tr></table></figure>

<ul>
<li>引用</li>
</ul>
<p>以 “&gt;” 开头的行被当成引用，中间需要一个空格间隔</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; 引用一句话。 - 某人</span><br></pre></td></tr></table></figure>


<h4 id="2-段落"><a href="#2-段落" class="headerlink" title="2. 段落"></a>2. 段落</h4><ul>
<li>换行</li>
</ul>
<p>在一行的结尾加上两个空格。</p>
<h4 id="3-列表"><a href="#3-列表" class="headerlink" title="3. 列表"></a>3. 列表</h4><ul>
<li>有序列表</li>
</ul>
<p>每行以阿拉伯数字（仅作为标识，不看具体数值）开始，紧接一个英文句号，并间隔一个空格，eg:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. list1</span><br><span class="line">1. list2</span><br></pre></td></tr></table></figure>

<ul>
<li>无序列表</li>
</ul>
<p>每行以 * 或 - 或 + 开始，并间隔一个空格，eg:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* list1</span><br><span class="line">* list2</span><br></pre></td></tr></table></figure>

<ul>
<li>任务列表（GitHub）</li>
</ul>
<p>每行以 “- [x] ” 或  “- [ ] ” 开头，中括号里的x标识该项已完成，eg:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- [x] This is a complete item</span><br><span class="line">- [ ] This is an incomplete item</span><br></pre></td></tr></table></figure>


<h4 id="4-代码块"><a href="#4-代码块" class="headerlink" title="4. 代码块"></a>4. 代码块</h4><p>在段落内使用： 将代码用 ` 包围，eg:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#96;sh shutdown.sh&#96;</span><br></pre></td></tr></table></figure>

<p>多行代码：用 三个 ` 包围代码，第一行的“`”之后紧接语言可以高亮。eg:</p>
<pre>
&#x60;&#x60;&#x60;java
public static void main(String[] args) {
    System.out.println("Hello, yanny.")
}
&#x60;&#x60;&#x60;
</pre>

<h4 id="5-链接"><a href="#5-链接" class="headerlink" title="5. 链接"></a>5. 链接</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Follow me on GitHub](https:&#x2F;&#x2F;github.com&#x2F;yang69 &quot;yang69&#39;s GitHub&quot;)</span><br></pre></td></tr></table></figure>


<h4 id="6-图片"><a href="#6-图片" class="headerlink" title="6. 图片"></a>6. 图片</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![Image of Yaktocat](https:&#x2F;&#x2F;octodex.github.com&#x2F;images&#x2F;yaktocat.png)</span><br></pre></td></tr></table></figure>


<h4 id="7-表格（GitHub）"><a href="#7-表格（GitHub）" class="headerlink" title="7. 表格（GitHub）"></a>7. 表格（GitHub）</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">| First Header  | Second Header |</span><br><span class="line">| ------------- | ------------- |</span><br><span class="line">| Content Cell  | Content Cell  |</span><br><span class="line">| Content Cell  | Content Cell  |</span><br></pre></td></tr></table></figure>


<h3 id="三、参考链接"><a href="#三、参考链接" class="headerlink" title="三、参考链接"></a>三、参考链接</h3><ul>
<li><a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener" title="GitHub Guides">Mastering Markdown</a></li>
<li><a href="https://www.markdowntutorial.com/" target="_blank" rel="noopener">https://www.markdowntutorial.com/</a></li>
<li><a href="https://www.markdownguide.org/extended-syntax/" target="_blank" rel="noopener">extended-syntax</a></li>
<li><a href="https://help.github.com/categories/writing-on-github/" target="_blank" rel="noopener">Writing for GitHub</a></li>
<li><a href="https://help.github.com/articles/basic-writing-and-formatting-syntax/" target="_blank" rel="noopener">https://help.github.com/articles/basic-writing-and-formatting-syntax/</a></li>
<li><a href="https://help.github.com/articles/organizing-information-with-tables/" target="_blank" rel="noopener">Table 语法</a></li>
<li><a href="https://gitbookio.gitbooks.io/markdown/" target="_blank" rel="noopener">Learn Markdown</a></li>
<li><a href="https://daringfireball.net/projects/markdown/syntax" target="_blank" rel="noopener">https://daringfireball.net/projects/markdown/syntax</a></li>
<li><a href="https://markdown.tw/" target="_blank" rel="noopener">https://markdown.tw/</a></li>
<li>LaTeX公式手册：<a href="https://www.cnblogs.com/1024th/p/11623258.html" target="_blank" rel="noopener">https://www.cnblogs.com/1024th/p/11623258.html</a></li>
</ul>
]]></content>
      <categories>
        <category>tutorial</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>美剧黑榜</title>
    <url>/potato/us-tv-series/caution-list/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>美剧嘛，烂尾的很多；一开始不错，后期很烂的更多；播到关键情节被砍的多如牛毛。在此做个记录，避免大家踩坑。</p>
<a id="more"></a>

<h3 id="二、烂尾美剧名录"><a href="#二、烂尾美剧名录" class="headerlink" title="二、烂尾美剧名录"></a>二、烂尾美剧名录</h3><h4 id="1-穹顶之下-Under-The-Dome"><a href="#1-穹顶之下-Under-The-Dome" class="headerlink" title="1. 穹顶之下 | Under The Dome"></a>1. 穹顶之下 | Under The Dome</h4><ul>
<li>那个谁，真的只是挂个名，该剧整体一般。</li>
<li>后期很烂，被砍。</li>
<li>挖了一个巨大无比的坑，然后就没有然后了，直接被砍了。</li>
</ul>
<h3 id="三、后期质量下滑严重名录"><a href="#三、后期质量下滑严重名录" class="headerlink" title="三、后期质量下滑严重名录"></a>三、后期质量下滑严重名录</h3><h3 id="四、中途被砍名录"><a href="#四、中途被砍名录" class="headerlink" title="四、中途被砍名录"></a>四、中途被砍名录</h3><h4 id="1-V星入侵-V-2009"><a href="#1-V星入侵-V-2009" class="headerlink" title="1. V星入侵 | V, 2009"></a>1. V星入侵 | V, 2009</h4><h4 id="2-星际之门：宇宙-Stargate-Universe-2009"><a href="#2-星际之门：宇宙-Stargate-Universe-2009" class="headerlink" title="2. 星际之门：宇宙 | Stargate Universe, 2009"></a>2. 星际之门：宇宙 | Stargate Universe, 2009</h4><h4 id="3-黑暗物质-Dark-Matter-2015"><a href="#3-黑暗物质-Dark-Matter-2015" class="headerlink" title="3. 黑暗物质 | Dark Matter, 2015"></a>3. 黑暗物质 | Dark Matter, 2015</h4><h4 id="4-打工姐妹花-2-Broke-Girls"><a href="#4-打工姐妹花-2-Broke-Girls" class="headerlink" title="4. 打工姐妹花 | 2 Broke Girls"></a>4. 打工姐妹花 | 2 Broke Girls</h4>]]></content>
      <categories>
        <category>土豆</category>
        <category>美剧</category>
      </categories>
      <tags>
        <tag>美剧</tag>
      </tags>
  </entry>
  <entry>
    <title>超长完结美剧推荐</title>
    <url>/potato/us-tv-series/long-finished-series/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>既然你都这么无聊了，我就大发慈悲的告诉你！为了防止被世界破坏，为了守护自己的钱包！贯彻宅与静怡的真谛，超长又完结的美剧~~</p>
<p>完结！上百集！这些都是可以消磨光阴的电视剧！明天，明年也看不完！</p>
<p>就是这样，咩~</p>
<a id="more"></a>

<h3 id="二、分类名单"><a href="#二、分类名单" class="headerlink" title="二、分类名单"></a>二、分类名单</h3><h4 id="A-科幻类"><a href="#A-科幻类" class="headerlink" title="A. 科幻类"></a>A. 科幻类</h4><h5 id="1-星际迷航系列"><a href="#1-星际迷航系列" class="headerlink" title="1. 星际迷航系列"></a>1. 星际迷航系列</h5><h6 id="星际迷航：下一代-Star-Trek-The-Next-Generation"><a href="#星际迷航：下一代-Star-Trek-The-Next-Generation" class="headerlink" title="星际迷航：下一代 | Star Trek: The Next Generation"></a>星际迷航：下一代 | Star Trek: The Next Generation</h6><p>aka, Star Trek: TNG。7季，178集。扮演X教授的 Patrick Stewart 爵士主演的，讲述的是 U.S.S. Enterprise NCC-1701C、NCC-1701D、NCC-1701E 这几艘企业号星舰（一脉相承，真的是一艘坏了就再造一艘）的故事。</p>
<h6 id="星际迷航：航海家号-Star-Trek-Voyager"><a href="#星际迷航：航海家号-Star-Trek-Voyager" class="headerlink" title="星际迷航：航海家号 | Star Trek: Voyager"></a>星际迷航：航海家号 | Star Trek: Voyager</h6><p>aka, Star Trek: VOY。7季，172集。</p>
<h6 id="星际迷航：深空9号-Star-Trek-Deep-Space-Nine"><a href="#星际迷航：深空9号-Star-Trek-Deep-Space-Nine" class="headerlink" title="星际迷航：深空9号 | Star Trek: Deep Space Nine"></a>星际迷航：深空9号 | Star Trek: Deep Space Nine</h6><p>aka, Star Trek: DS9。7季，176集。</p>
<h6 id="星际迷航：原初系列-Star-Trek-The-Original-Series"><a href="#星际迷航：原初系列-Star-Trek-The-Original-Series" class="headerlink" title="星际迷航：原初系列 | Star Trek: The Original Series"></a>星际迷航：原初系列 | Star Trek: The Original Series</h6><p>aka, Star Trek: TOS。3季，79集。观感一般，但是这一部是整个星际迷航系列的开始，很经典。讲述的是 Captain Kirk 和 Spork 的故事。</p>
<h6 id="星际迷航：企业号-Star-Trek-Enterprise"><a href="#星际迷航：企业号-Star-Trek-Enterprise" class="headerlink" title="星际迷航：企业号 | Star Trek: Enterprise"></a>星际迷航：企业号 | Star Trek: Enterprise</h6><p>aka, Star Trek: ENG。4季，98集。风格略黑暗。</p>
<h5 id="2-星际之门系列"><a href="#2-星际之门系列" class="headerlink" title="2. 星际之门系列"></a>2. 星际之门系列</h5><h6 id="星际之门"><a href="#星际之门" class="headerlink" title="星际之门"></a>星际之门</h6><p>aka, SG1。</p>
<h6 id="星际之门：亚特兰蒂斯"><a href="#星际之门：亚特兰蒂斯" class="headerlink" title="星际之门：亚特兰蒂斯"></a>星际之门：亚特兰蒂斯</h6><p>aka, SGA。</p>
<h6 id="星际之门：宇宙"><a href="#星际之门：宇宙" class="headerlink" title="星际之门：宇宙"></a>星际之门：宇宙</h6><p>aka, SGU。2季，被砍。建议不看。第二季结尾挖了个坑，没人填。</p>
<h4 id="B-情景喜剧类"><a href="#B-情景喜剧类" class="headerlink" title="B. 情景喜剧类"></a>B. 情景喜剧类</h4><h5 id="1-老友记-Friends"><a href="#1-老友记-Friends" class="headerlink" title="1. 老友记 | Friends"></a>1. 老友记 | Friends</h5><p>HD高清的都是删减版，少一部分剧情。建议看完整版的，虽然清晰度差一点。</p>
<h5 id="2-成长的烦恼-Growing-Pains"><a href="#2-成长的烦恼-Growing-Pains" class="headerlink" title="2. 成长的烦恼 | Growing Pains"></a>2. 成长的烦恼 | Growing Pains</h5><h5 id="3-生活大爆炸-The-Big-Bang-Theory"><a href="#3-生活大爆炸-The-Big-Bang-Theory" class="headerlink" title="3. 生活大爆炸 | The Big Bang Theory"></a>3. 生活大爆炸 | The Big Bang Theory</h5><p>全12季。</p>
<h4 id="C-悬疑"><a href="#C-悬疑" class="headerlink" title="C. 悬疑"></a>C. 悬疑</h4><h5 id="1-迷失-Lost"><a href="#1-迷失-Lost" class="headerlink" title="1. 迷失 | Lost"></a>1. 迷失 | Lost</h5><p>共6季</p>
]]></content>
      <categories>
        <category>土豆</category>
        <category>美剧</category>
      </categories>
      <tags>
        <tag>美剧</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB</title>
    <url>/database/MongoDB/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>MongoDB 是一个基于分布式文件存储的数据库。</p>
<p><a href="https://www.mongodb.com/" target="_blank" rel="noopener">https://www.mongodb.com/</a></p>
<h4 id="ObjectId"><a href="#ObjectId" class="headerlink" title="ObjectId"></a>ObjectId</h4><p>ObjectId 是 MongoDB 自动生成的主键，一共12个字节。按照字节顺序，意义为：</p>
<p>4字节：UNIX时间戳<br>3字节：表示运行MongoDB的机器<br>2字节：表示生成此_id的进程<br>3字节：由一个随机数开始的计数器生成的值</p>
<p><a href="https://docs.mongodb.com/manual/reference/method/ObjectId/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/method/ObjectId/</a><br><a href="http://www.cnblogs.com/xjk15082/archive/2011/09/18/2180792.html" target="_blank" rel="noopener">http://www.cnblogs.com/xjk15082/archive/2011/09/18/2180792.html</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>方法一：下载安装程序安装</p>
<p>方法二：或者使用 scoop 安装</p>
<ul>
<li>安装 MongoDB<br>  <code>scoop install mongodb</code></li>
<li>安装 Windows 服务<br>  <code>mongod --install</code></li>
<li>启动 MongoDB<br>  <code>net start MongoDB</code></li>
</ul>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><h4 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h4><ul>
<li><code>mongo mongodb://用户名:密码@主机名:端口/库名</code> - 命令行连接指定的mongo服务器</li>
<li><code>db.getMongo().setSlaveOk(true)</code> 或 <code>rs.slaveOk=true</code> 或 <code>rs.slaveOk()</code> - 连接从库时可查询</li>
</ul>
<h4 id="库操作"><a href="#库操作" class="headerlink" title="库操作"></a>库操作</h4><h5 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h5><ul>
<li><code>db.version()</code> 查看 MongoDB 版本</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; db.version()</span><br><span class="line">3.6.9</span><br></pre></td></tr></table></figure>

<ul>
<li><code>show dbs</code> 或 <code>db.getCollectionNames()</code> - 列出所有数据库</li>
<li><code>use dbName</code> - 使用指定的数据库（若数据库不存在则自动创建）</li>
<li><code>db.dropDatabase()</code> - 删除数据库</li>
</ul>
<h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><ul>
<li><code>show tables</code> - 列出当前数据库下的所有表名</li>
<li><code>db.getCollection(&quot;表名&quot;).drop()</code> - 删除集合</li>
<li><code>db.createCollection(name, options)</code> - 创建集合</li>
</ul>
<h4 id="索引操作"><a href="#索引操作" class="headerlink" title="索引操作"></a>索引操作</h4><ul>
<li><code>db.getCollection(&quot;表名&quot;).getIndexes()</code> - 查看索引</li>
<li><code>db.getCollection(&quot;表名&quot;).ensureIndex({字段名: 1, 字段名: 2}, {background: true})</code> - 线上增加索引必须增加<code>{background: true}</code>这个参数。否则，数据库的所有操作都被阻断，直到索引创建完成。</li>
</ul>
<h4 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h4><h5 id="增"><a href="#增" class="headerlink" title="增"></a>增</h5><h5 id="删"><a href="#删" class="headerlink" title="删"></a>删</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.dict_ref.remove(&#123;cmd:&quot;ZK_NEW_ORDER_SYNC&quot;,_id:ObjectId(&quot;5c9b4a6016b39654296861a6&quot;)&#125;,&#123;justOne:true&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="改"><a href="#改" class="headerlink" title="改"></a>改</h5><ul>
<li><code>db.strategy_draft.update({strategyId:1825},{$set:{&quot;audit.auditStatus&quot;:&quot;DRAFT&quot;}})</code> - 更新字段</li>
</ul>
<h5 id="查"><a href="#查" class="headerlink" title="查"></a>查</h5><ul>
<li><code>db.getCollection(&quot;表名&quot;).find({字段名:{$exists:false}})</code> - 查询字段不存在的结果</li>
</ul>
<h6 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h6><ul>
<li>$nin 排除掉指定字段等于特定的一些值的记录</li>
</ul>
<p>参考链接：<a href="https://docs.mongodb.com/manual/reference/operator/query/nin/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/operator/query/nin/</a></p>
<p>查询 key 不为 “abc” 或 “def” 的记录（包括 key 不存在的记录）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.getCollection(&quot;表名&quot;).find(&#123;key:&#123;$nin:[&quot;abc&quot;,&quot;def&quot;]&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="选择指定字段"><a href="#选择指定字段" class="headerlink" title="选择指定字段"></a>选择指定字段</h6><ul>
<li><p><code>db.getCollection(&quot;表名&quot;).find({查询条件},{fieldA:1,fieldB:1})</code> - 只需要 filedA、fieldB 这两个字段</p>
</li>
<li><p><code>db.getCollection(&quot;表名&quot;).find({查询条件},{fieldA:0,fieldB:0})</code> - 不需要 filedA、fieldB 这两个字段</p>
</li>
</ul>
<h6 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h6><ul>
<li><code>db.COLLECTION_NAME.find().sort({KEY:1})</code> - 升序排列</li>
</ul>
<h6 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h6><ul>
<li><code>db.COLLECTION_NAME.find().limit(pageSize).skip(fromOffset)</code> - 分页查询，跳过最开始的<code>fromOffset</code>个元素，查询<code>pageSize</code>条记录</li>
</ul>
<h5 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h5><p>$match 用于指定过滤条件<br>$group 相当于 group by。其中 <code>_id</code> 制定了 group by 的字段。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.COLLECTION_NAME.aggregate(&#123;$match:&#123;&#125;, $group:&#123;_id:&#39;$field&#39;,sum:&#123;$sum:&#39;$fieldToBeSumed&#39;&#125;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="性能分析与优化"><a href="#性能分析与优化" class="headerlink" title="性能分析与优化"></a>性能分析与优化</h4><h5 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.table.find(&#123;key:&quot;value&quot;&#125;).explain()</span><br></pre></td></tr></table></figure>

<h5 id="system-profile"><a href="#system-profile" class="headerlink" title="system.profile"></a>system.profile</h5><p>MongoDB 的慢查日志存在 system.profile 这张表中</p>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><h4 id="mongoose"><a href="#mongoose" class="headerlink" title="mongoose"></a>mongoose</h4><p>适用于nodejs的mongo客户端<br><a href="https://mongoosejs.com/" target="_blank" rel="noopener">https://mongoosejs.com/</a></p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="查询表大小-记录条数"><a href="#查询表大小-记录条数" class="headerlink" title="查询表大小/记录条数"></a>查询表大小/记录条数</h4><p>尽量不要使用 db.getCollection(“table”).count() 这种方法。原因是需要全表扫描，很慢。对数据库压力比较大。</p>
<p>可以考虑使用 <a href="https://docs.mongodb.com/manual/reference/method/db.collection.stats/" target="_blank" rel="noopener">stats()</a> 函数。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.getCollection(&quot;date-stat&quot;).stats(&#123;scale:1024&#125;)</span><br></pre></td></tr></table></figure>

<p><code>scale:1024</code> 标识 以 kilebytes 为单位显示大小。</p>
<h4 id="distinct-大小"><a href="#distinct-大小" class="headerlink" title="distinct 大小"></a>distinct 大小</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.表名.distinct(&quot;字段名&quot;,&#123;&quot;条件&quot; : 18&#125;).length</span><br></pre></td></tr></table></figure>

<h4 id="分组计数"><a href="#分组计数" class="headerlink" title="分组计数"></a>分组计数</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">db.表名.aggregate(&#123;<span class="attr">$group</span>:&#123;<span class="attr">_id</span>:<span class="string">"$分组字段"</span>,<span class="attr">count</span>:&#123;<span class="attr">$sum</span>:<span class="number">1</span>&#125;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<p><a href="https://stackoverflow.com/questions/23116330/mongodb-select-count-group-by" target="_blank" rel="noopener">https://stackoverflow.com/questions/23116330/mongodb-select-count-group-by</a></p>
<h4 id="删除过期数据"><a href="#删除过期数据" class="headerlink" title="删除过期数据"></a>删除过期数据</h4><h5 id="TTL索引"><a href="#TTL索引" class="headerlink" title="TTL索引"></a>TTL索引</h5><p>TTL 索引需要加在时间字段上。<code>_id</code> 字段不支持 TTL 索引。<br><a href="https://docs.mongodb.com/manual/core/index-ttl/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/core/index-ttl/</a><br><a href="https://forums.meteor.com/t/solved-remove-old-documents-periodically-good-way-of-doing-it/6853" target="_blank" rel="noopener">https://forums.meteor.com/t/solved-remove-old-documents-periodically-good-way-of-doing-it/6853</a><br><a href="https://stackoverflow.com/questions/43904591/mongodb-ttl-collection" target="_blank" rel="noopener">https://stackoverflow.com/questions/43904591/mongodb-ttl-collection</a><br><a href="https://jira.mongodb.org/browse/SERVER-9305" target="_blank" rel="noopener">https://jira.mongodb.org/browse/SERVER-9305</a></p>
<p>根据 <code>_id</code> 删选出旧数据，逐条删除</p>
<p><a href="https://stackoverflow.com/questions/30873713/mongotemplate-query-objectid-according-to-greater-than-gt-or-less-than-lt" target="_blank" rel="noopener">https://stackoverflow.com/questions/30873713/mongotemplate-query-objectid-according-to-greater-than-gt-or-less-than-lt</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">db.test.find().limit(<span class="number">10</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = item._id;</span><br><span class="line">  db.test.remove(&#123;<span class="attr">_id</span>:id&#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><a href="https://stackoverflow.com/questions/5125521/uses-for-mongodb-objectid-creation-time" target="_blank" rel="noopener">https://stackoverflow.com/questions/5125521/uses-for-mongodb-objectid-creation-time</a><br>从MongoDB的ObjectId中获取时间信息：<a href="https://www.cnblogs.com/jaxu/p/6605283.html" target="_blank" rel="noopener">https://www.cnblogs.com/jaxu/p/6605283.html</a></p>
<h4 id="命令行连接从库时不可读"><a href="#命令行连接从库时不可读" class="headerlink" title="命令行连接从库时不可读"></a>命令行连接从库时不可读</h4><p>MongoDB默认从库不可读。连接后通过 <code>rs.slaveOk()</code> 开启从库可读。</p>
<p>最佳实践：主目录下建立 <code>.mongorc.js</code> 文件，将 rs.slaveOk() 命令写入该文件。每次命令行连接后将会自动执行 <code>.mongorc.js</code> 中的命令。</p>
<h4 id="查看字段在-MongoDB-中的存储类型"><a href="#查看字段在-MongoDB-中的存储类型" class="headerlink" title="查看字段在 MongoDB 中的存储类型"></a>查看字段在 MongoDB 中的存储类型</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">db.getCollection(<span class="string">"collectionName"</span>).aggregate([&#123;<span class="attr">$project</span>:&#123;<span class="attr">fieldType</span>:&#123;<span class="attr">$type</span>:<span class="string">"$fieldName"</span>&#125;&#125;&#125;])</span><br></pre></td></tr></table></figure>

<p><a href="https://stackoverflow.com/questions/3208538/return-actual-type-of-a-field-in-mongodb" target="_blank" rel="noopener">https://stackoverflow.com/questions/3208538/return-actual-type-of-a-field-in-mongodb</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://docs.mongodb.com/manual/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/method/Mongo.setSlaveOk/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/reference/method/Mongo.setSlaveOk/</a></li>
<li>MongoDB执行计划：<a href="http://www.mongoing.com/eshu_explain1" target="_blank" rel="noopener">http://www.mongoing.com/eshu_explain1</a></li>
<li>jongo：<a href="http://jongo.org/" target="_blank" rel="noopener">http://jongo.org/</a></li>
<li>JavaScript shell：<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell</a></li>
<li>JavaScript shell（中文）：<a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell</a></li>
<li><a href="https://spring.io/guides/gs/accessing-data-mongodb/" target="_blank" rel="noopener">https://spring.io/guides/gs/accessing-data-mongodb/</a></li>
<li>MongoDB 备份(mongodump)与恢复(mongorestore)<br>：<a href="https://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" target="_blank" rel="noopener">https://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html</a></li>
<li>MongoDB备份与恢复：<a href="https://segmentfault.com/a/1190000011077465" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011077465</a></li>
</ul>
]]></content>
      <categories>
        <category>database</category>
        <category>MongoDB</category>
      </categories>
      <tags>
        <tag>database</tag>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ag 命令</title>
    <url>/os/linux/commands/ag/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Silver Searcher<br>一个开源的代码搜索工具。<br>可以在目录下递归搜索指定的模式。</p>
<a id="more"></a>

<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Mac</span></span><br><span class="line">brew install the_silver_searcher</span><br><span class="line"><span class="meta">#</span><span class="bash"> Ubuntu</span></span><br><span class="line">apt install silversearcher-ag</span><br><span class="line"><span class="meta">#</span><span class="bash"> CentOS</span></span><br><span class="line">yum install the_silver_searcher</span><br><span class="line"><span class="meta">#</span><span class="bash"> Windows using scoop</span></span><br><span class="line">scoop install ag</span><br></pre></td></tr></table></figure>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在当前目录下搜索包含 hello 的代码</span></span><br><span class="line">ag hello</span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 src/java 目录下搜索包含 hello 的代码</span></span><br><span class="line">ag hello src/java</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>源码：<a href="https://github.com/ggreer/the_silver_searcher" target="_blank" rel="noopener">https://github.com/ggreer/the_silver_searcher</a></li>
<li><a href="https://www.tecmint.com/the-silver-searcher-a-code-searching-tool-for-linux/" target="_blank" rel="noopener">https://www.tecmint.com/the-silver-searcher-a-code-searching-tool-for-linux/</a></li>
<li><a href="https://www.mankier.com/1/ag" target="_blank" rel="noopener">https://www.mankier.com/1/ag</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux top 命令</title>
    <url>/os/linux/commands/top/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>display and update sorted information about processes<br>动态显示关于进程的信息</p>
<p>top中相关字段的意义</p>
<ul>
<li>VIRT 虚拟内存。进程需要的虚拟内存的大小，包括进程所使用的库、代码、数据。是申请量，而非实际使用量。</li>
<li>RES(resident memory usage) 常驻内存。内存的实际使用量，不包括 swap out 到硬盘中的量。</li>
<li>SHR 共享内存</li>
<li>DATA 数据占用的内存</li>
</ul>
<p>可以在 top 界面下 按 <code>F</code> ，显示可以展示的字段及其意义。同时可以选择显示哪些字段。</p>
<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><p><code>-H</code> 以线程模式显示，无此参数的话，会以进程模式显示</p>
<p><code>-p [pid]</code> 只看指定的进程</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 查看特定进程的运行状况</span><br><span class="line">top -p [pid]</span><br><span class="line"># 查看指定进程的所有线程的运行状况</span><br><span class="line">top -Hp [pid]</span><br></pre></td></tr></table></figure>

<h3 id="显示切换"><a href="#显示切换" class="headerlink" title="显示切换"></a>显示切换</h3><p>E 顶栏中内存单位的切换，依次切换为 KiB -&gt; MiB -&gt; GiB -&gt; TiB -&gt; PiB -&gt; EiB<br>e 列表中内存单位的切换，依次切换为 KiB -&gt; MiB -&gt; GiB -&gt; TiB -&gt; PiB -&gt; EiB<br>P 按CPU占用率排序<br>M 按内存占用率排序</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>Linux top命令的用法详细详解：<a href="https://www.cnblogs.com/zhoug2020/p/6336453.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhoug2020/p/6336453.html</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux du 命令</title>
    <url>/os/linux/commands/du/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>查看磁盘使用情况的工具</p>
<a id="more"></a>

<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><h4 id="c"><a href="#c" class="headerlink" title="-c"></a><code>-c</code></h4><p>显示总大小</p>
<h4 id="h"><a href="#h" class="headerlink" title="-h"></a><code>-h</code></h4><p>以更易读的方式显示（显示为KB、MB、GB、TB、PB）</p>
<h4 id="s"><a href="#s" class="headerlink" title="-s"></a><code>-s</code></h4><p>为每一个指定的文件都显示一个条目。等价于 <code>-d 0</code></p>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>查询特定文件/目录占用的空间</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">du -sh directory_path</span><br></pre></td></tr></table></figure>

<p>查询当前目录下所有文件/目录占用的空间</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">du -sh *</span><br></pre></td></tr></table></figure>

<p>查询各个用户主目录的空间占用，忽略无权限的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">du -sh /home/* 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<h3 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h3><h4 id="df"><a href="#df" class="headerlink" title="df"></a>df</h4><p>df 用于显示挂载的文件系统的空间使用情况。而 du 用于展示特定文件/目录的空间使用情况</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://linux.die.net/man/1/du" target="_blank" rel="noopener">https://linux.die.net/man/1/du</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux df 命令</title>
    <url>/os/linux/commands/df/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>df 命令用于显示指定的文件系统或文件所在的文件系统的空闲空间。如果未指定文件系统，则显示全部已挂载的文件系统。</p>
<a id="more"></a>

<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><h4 id="a"><a href="#a" class="headerlink" title="-a"></a><code>-a</code></h4><p>显示全部文件系统</p>
<h4 id="H"><a href="#H" class="headerlink" title="-H"></a><code>-H</code></h4><p>以可读性较高的方式（不超过3位数）展示，以10为底进行换算。eg. 1 KB = 1000 B</p>
<h4 id="h"><a href="#h" class="headerlink" title="-h"></a><code>-h</code></h4><p>以可读性较高的方式（不超过3位数）展示，以2为底进行换算。eg. 1 KB = 1024 B</p>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>查看主目录的空闲空间大小</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">df -h &#x2F;home&#x2F;user&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://man.linuxde.net/df" target="_blank" rel="noopener">https://man.linuxde.net/df</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux cut 命令</title>
    <url>/os/linux/commands/cut/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>切分字符串的终端命令</p>
<a id="more"></a>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>cut -d ‘|’ -f 1</p>
<p>用 “|” 分隔字符串，并取第一列</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://www.runoob.com/linux/linux-comm-cut.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-cut.html</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux sort 命令</title>
    <url>/os/linux/commands/sort/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>terminal 中的排序命令</p>
<a id="more"></a>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>-n –numeric-sort –sort=numeric</p>
<p>按照数值排序，最左侧是一些空白字符，加一个符号，接着是数值</p>
<p>-r –reverse</p>
<p>逆序输出</p>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><h4 id="按数值从大到小排列"><a href="#按数值从大到小排列" class="headerlink" title="按数值从大到小排列"></a>按数值从大到小排列</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sort -n -r</span><br></pre></td></tr></table></figure>

<p>输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1	A</span><br><span class="line">5	B</span><br><span class="line">14	E</span><br><span class="line">8	C</span><br><span class="line">11	D</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">14	E</span><br><span class="line">11	D</span><br><span class="line">8	C</span><br><span class="line">5	B</span><br><span class="line">1	A</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3>]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux awk 命令</title>
    <url>/os/linux/commands/awk/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><code>awk</code>是一个强大的文本分析工具。</p>
<a id="more"></a>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="F"><a href="#F" class="headerlink" title="-F"></a>-F</h4><p>指定分隔符。例如，用“||”作为分隔符：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bogon:~ yang$ echo &quot;abc||def&quot; | awk -F &#39;\\|\\|&#39; &#39;&#123;print $1&#125;&#39;</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>

<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul>
<li>数值加法 <code>+</code></li>
<li>字符串连接 <code>$1$2</code> 直接拼接</li>
</ul>
<h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h3><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>取字符串的长度</p>
<h4 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h4><p>substr(STRING, start_pos, length)</p>
<p>取字符串 STRING 的子字符串，从 start_pos 开始，总共 length 个字符。</p>
<h4 id="split"><a href="#split" class="headerlink" title="split"></a>split</h4><p>split(STRING, result_array, separator)</p>
<p>将字符串 STRING 用分隔符 separator 分割，结果放在 result_array 中。result_array 的索引从1开始</p>
<h4 id="int"><a href="#int" class="headerlink" title="int"></a>int</h4><p>取整，int(2.5) = 2</p>
<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><h4 id="分析平均GC时间"><a href="#分析平均GC时间" class="headerlink" title="分析平均GC时间"></a>分析平均GC时间</h4><p>GC日志内容如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-08-23T10:53:59.602+0800: Total time for which application threads were stopped: 0.0090248 seconds, Stopping threads took: 0.0003499 seconds</span><br><span class="line">2019-08-23T10:53:59.602+0800: Application time: 0.0006550 seconds</span><br><span class="line">2019-08-23T10:53:59.611+0800: Total time for which application threads were stopped: 0.0088395 seconds, Stopping threads took: 0.0002937 seconds</span><br><span class="line">2019-08-23T10:53:59.612+0800: Application time: 0.0003551 seconds</span><br><span class="line">2019-08-23T10:53:59.623+0800: Total time for which application threads were stopped: 0.0115286 seconds, Stopping threads took: 0.0005318 seconds</span><br><span class="line">2019-08-23T10:53:59.935+0800: Application time: 0.3118766 seconds</span><br><span class="line">2019-08-23T10:53:59.939+0800: [GC (Allocation Failure) 2019-08-23T10:53:59.939+0800: [ParNew: 495522K-&gt;4175K(552960K), 0.0232530 secs] 1281860K-&gt;790647K(4132864K), 0.0239540 secs] [Times: user&#x3D;0.14 sys&#x3D;0.05, real&#x3D;0.02 secs]</span><br><span class="line">2019-08-23T10:53:59.963+0800: Total time for which application threads were stopped: 0.0282242 seconds, Stopping threads took: 0.0005839 seconds</span><br><span class="line">2019-08-23T10:53:59.965+0800: Application time: 0.0017172 seconds</span><br><span class="line">2019-08-23T10:53:59.968+0800: Total time for which application threads were stopped: 0.0030582 seconds, Stopping threads took: 0.0004220 seconds</span><br></pre></td></tr></table></figure>

<p>分析思路：</p>
<ol>
<li>选定时间范围：注意到左侧有打印时间，所以可以用 <code>grep</code> 筛选出特定的时间范围</li>
<li>选出GC时间的行：注意到不是所有行都是GC暂停时间的信息，可以用 <code>grep</code> 筛选出包含 <code>Total time for which application threads were stopped</code> 的那些行</li>
<li>用 awk 统计GC暂停时间</li>
</ol>
<p>实际命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grep &quot;2019-08-15T10:&quot;  deploy-out.log | grep &quot;threads were stopped&quot; | awk &#39;BEGIN&#123;&#125;&#123;if($10-0.03&gt;0)&#123;count++;sum&#x3D;sum-(-$10);&#125;&#125;END&#123;print count,sum,sum&#x2F;count;&#125;&#39;</span><br></pre></td></tr></table></figure>

<p>awk的默认分隔符是空格，GC暂停时间在切分后的第10列。因此，<code>$10</code> 代表的是GC暂停时间，比如，在上述GC日志示例的最后，<code>$10</code> = 0.0030582。awk的执行体包含三部分，<code>BEGIN{}</code>内的在最开始执行一次，<code>END{}</code>内的在最后执行一次，<code>{}</code>内的在每一行执行一次。</p>
<p>将<code>{}</code>中的内容格式化看下逻辑：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if ($10-0.03 &gt; 0) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    sum&#x3D;sum-(-$10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>if 中的内容标识执行的条件，在这里，if筛选出 gc 暂停时间大于 30ms的行。<br>count++ 用于统计处理了多少行，count的值会从0开始累加。<br>sum 用来保存总的GC暂停时间。<br><code>sum = sum - ( - $10)</code> = <code>sum = sum + $10</code>，表示将第10列的值累加 sum 上，之所以写成减去负的<code>$10</code>这种形式，是为了避免 + 被作为字符串拼接（完全没必要，<code>+</code> 在 awk 里只表示数值加法）。</p>
<h4 id="统计日志中各个调用方的请求量"><a href="#统计日志中各个调用方的请求量" class="headerlink" title="统计日志中各个调用方的请求量"></a>统计日志中各个调用方的请求量</h4><p>日志名public.log，格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_pyramid_xxx||traceid&#x3D;0a9c1dc15d60dvhadbufqhbdfu||spanid&#x3D;nvbiwbvuwh||cspanid&#x3D;dvqrfgqrgv||_msg&#x3D;something||timestamp&#x3D;1566628108543||bizType&#x3D;somebiz||cmd&#x3D;somecmd||traceid&#x3D;bvniqfdbvqi||sync&#x3D;true||............</span><br></pre></td></tr></table></figure>

<p>假设cmd字段是调用方的名字，用下面这组命令可以统计出各个调用方的请求量，按调用量从大到小排列</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk -F &#39;cmd&#x3D;&#39; &#39;&#123;print $2&#125;&#39; public.log | cut -d &#39;|&#39; -f 1 | awk &#39;&#123;a[$1]++&#125;END&#123;for(i in a)&#123;printf(&quot;%s\t%s\n&quot;,a[i],i);&#125;&#125;&#39; | sort -n -r</span><br></pre></td></tr></table></figure>

<p>第一个命令，<code>awk -F &#39;cmd=&#39; &#39;{print $2}&#39; public.log</code>，-F 指定了以 “cmd=” 来切分字符串，并输出第2列（即“cmd=”后面的内容）。<br>第二个命令，<code>cut -d &#39;|&#39; -f 1</code>，-d 指定用“|”分隔，-f指定取第一列。经过这两步，取出了cmd字段的值（在示例中为“somecmd”）<br>第三个命令，<code>awk &#39;{a[$1]++}END{for(i in a){printf(&quot;%s\t%s\n&quot;,a[i],i);}}&#39;</code>，统计每一个值的出现次数。该命令中，a作为一个字典使用，负责统计每个值出现的次数。统计完成后，在awk的END{}语句中，将a中的统计信息汇总输出。<br>第四个命令，<code>sort -n -r</code>，将输出按照次数由大到小排列</p>
<p>当然，也可以用下面这种方式，不要担心 sort 的性能，sort会充分利用CPU，并且当数据集比内存大时，会使用基于文件的归并排序。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk -F &quot;分隔符&quot; &#39;&#123;print $1&#125;&#39; public.log | sort | uniq -c</span><br></pre></td></tr></table></figure>

<h4 id="分析各类日志的占用空间情况"><a href="#分析各类日志的占用空间情况" class="headerlink" title="分析各类日志的占用空间情况"></a>分析各类日志的占用空间情况</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ll *.log* | awk &#39;&#123;a[substr($9,1,8)] &#x3D; a[substr($9,1,8)] + $5&#125;END&#123;for(i in a)&#123;printf(&quot;%s\t%s\n&quot;,a[i],i)&#125;&#125;&#39; | sort -n -r</span><br></pre></td></tr></table></figure>

<p>第一句，将当前目录和子目录下的<code>.log</code>文件列出</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ll *.log* *&#x2F;*.log*</span><br></pre></td></tr></table></figure>

<p>其输出为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 160913805 Sep  6 17:55 stdout.log</span><br><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 175952842 Sep  4 17:59 stdout.log.2019090417</span><br><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 175792453 Sep  4 18:59 stdout.log.2019090418</span><br><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 176177327 Sep  4 19:59 stdout.log.2019090419</span><br><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 176488047 Sep  4 20:59 stdout.log.2019090420</span><br><span class="line">-rw-rw-r-- 1 xiaoju xiaoju 178406017 Sep  4 21:59 stdout.log.2019090421</span><br></pre></td></tr></table></figure>

<p>接着，awk 取文件名（空格分隔后的第9列，$9）的前8个字符（<code>substr($9,1,8)</code>）为key，分别累加其文件大小。最后汇总输出。</p>
<p>最后一句 <code>sort -n -r</code> ，将文件按照占用空间的大小从大到小依次列出，最后的输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">267081430	stdout.l</span><br><span class="line">198478384	deploy-o</span><br></pre></td></tr></table></figure>

<p>还有一个方法，很牛逼的：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ll *.log* *&#x2F;*.log* | awk &#39;&#123;split($9,ta,&quot;.log&quot;);a[ta[1]] &#x3D; a[ta[1]] + $5&#125;END&#123;for(i in a)&#123;printf(&quot;%s\t%s.log\n&quot;,a[i],i)&#125;&#125;&#39; | sort -n -r</span><br></pre></td></tr></table></figure>

<p>这里的主要更改是，split()函数， <code>split($9,ta,&quot;.log&quot;)</code> 将 第9列的内容用 <code>.log</code> 分隔成子串，存在 ta 数组中，ta数组的索引从1开始。<br>输出效果：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4622292698	system&#x2F;monitor.log</span><br><span class="line">4554341450	system&#x2F;codis.log</span><br><span class="line">1985137072	biz&#x2F;data.log</span><br><span class="line">1403131161	system&#x2F;jongo.log</span><br><span class="line">267408275	stdout.log</span><br><span class="line">198496842	deploy-out.log</span><br><span class="line">62765045	biz&#x2F;localcache.log</span><br><span class="line">4552999	biz&#x2F;error.log</span><br><span class="line">600	system&#x2F;mongo-clean.log</span><br></pre></td></tr></table></figure>

<p>如果要将左侧的数字对齐，可以将printf中的参数改为<code>%12d</code>，表示输出12位的整数：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ll *.log* *&#x2F;*.log* | awk &#39;&#123;split($9,ta,&quot;.log&quot;);a[ta[1]] &#x3D; a[ta[1]] + $5&#125;END&#123;for(i in a)&#123;printf(&quot;%12d\t%s.log\n&quot;,a[i],i)&#125;&#125;&#39; | sort -n -r</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4622292698	system&#x2F;monitor.log</span><br><span class="line">4554341450	system&#x2F;codis.log</span><br><span class="line">1985137072	biz&#x2F;data.log</span><br><span class="line">1403131161	system&#x2F;jongo.log</span><br><span class="line"> 267408275	stdout.log</span><br><span class="line"> 198496842	deploy-out.log</span><br><span class="line">  62765045	biz&#x2F;localcache.log</span><br><span class="line">   4552999	biz&#x2F;error.log</span><br><span class="line">       600	system&#x2F;mongo-clean.log</span><br></pre></td></tr></table></figure>

<h4 id="分析各个用户占用的磁盘空间"><a href="#分析各个用户占用的磁盘空间" class="headerlink" title="分析各个用户占用的磁盘空间"></a>分析各个用户占用的磁盘空间</h4><p>linux 可使用如下命令分析当前目录下，各个用户占用的磁盘空间：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find . -printf &quot;%u %s\n&quot; | awk &#39;&#123;user[$1] +&#x3D; $2&#125;; END&#123;for(i in user)&#123;printf(&quot;%12d\t%8s\n&quot;,user[i],i)&#125;&#125;&#39; | sort -n -r</span><br></pre></td></tr></table></figure>

<p>Mac中不能使用，因为Mac中的 find 没有 -printf 功能</p>
<h4 id="找出单行长度大于10W的日志"><a href="#找出单行长度大于10W的日志" class="headerlink" title="找出单行长度大于10W的日志"></a>找出单行长度大于10W的日志</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk &#39;&#123;if(length($0)&gt;100000)&#123;print $0&#125;&#125;&#39; xxx.log</span><br></pre></td></tr></table></figure>

<h4 id="按日志每行长度排序"><a href="#按日志每行长度排序" class="headerlink" title="按日志每行长度排序"></a>按日志每行长度排序</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awk -F: &#39;&#123;print length($0) &quot; &quot;  $0&#125;&#39; &#x2F;etc&#x2F;shadow | sort -r -n | awk &#39;&#123;print $2&#125;&#39;</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>awk 入门教程：<a href="http://www.ruanyifeng.com/blog/2018/11/awk.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/11/awk.html</a></li>
<li><a href="http://www.grymoire.com/Unix/Awk.html" target="_blank" rel="noopener">http://www.grymoire.com/Unix/Awk.html</a></li>
<li><a href="https://awk.readthedocs.io/en/latest/chapter-one.html" target="_blank" rel="noopener">https://awk.readthedocs.io/en/latest/chapter-one.html</a></li>
<li><a href="https://man.linuxde.net/awk" target="_blank" rel="noopener">https://man.linuxde.net/awk</a></li>
<li>linux下awk内置函数的使用(split/substr/length)：<a href="https://www.cnblogs.com/sunada2005/p/3493941.html" target="_blank" rel="noopener">https://www.cnblogs.com/sunada2005/p/3493941.html</a></li>
<li>linux awk 内置函数详细介绍（实例）：<a href="https://www.cnblogs.com/chengmo/archive/2010/10/08/1845913.html" target="_blank" rel="noopener">https://www.cnblogs.com/chengmo/archive/2010/10/08/1845913.html</a></li>
<li><a href="https://serverfault.com/questions/94663/disk-usage-per-user-in-linux-unix" target="_blank" rel="noopener">https://serverfault.com/questions/94663/disk-usage-per-user-in-linux-unix</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux rev 命令</title>
    <url>/os/linux/commands/rev/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p><code>rev</code> 命令用于将每一行中的内容反转。如果没有指定文件，该命令将来自标准输入的内容逐行反转输出。</p>
<a id="more"></a>

<p>The rev utility copies the specified files to the standard output, reversing the order of characters in every line.<br>If no files are specified, the standard input is read.</p>
<h3 id="二、相似命令"><a href="#二、相似命令" class="headerlink" title="二、相似命令"></a>二、相似命令</h3><h4 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h4><p><code>tac</code> 作用和 <code>rev</code> 相同，都是将文件或标准输入中的内容逐行反转输出。然而，mac上没有 <code>tac</code> 命令。</p>
<h3 id="三、常见用法"><a href="#三、常见用法" class="headerlink" title="三、常见用法"></a>三、常见用法</h3><h4 id="将网址归类排序"><a href="#将网址归类排序" class="headerlink" title="将网址归类排序"></a>将网址归类排序</h4><p>现有一个文本文件<code>url.txt</code>，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">img.baidu.com</span><br><span class="line">blog.sina.com.cn</span><br><span class="line">www.baidu.com</span><br><span class="line">weibo.com</span><br><span class="line">tieba.baidu.com</span><br></pre></td></tr></table></figure>

<p>每行是一个域名。想将其中相同站点的网址归类到一起。<br>思路：网址的特点是越后面的部分越顶级，因此，相同的站点拥有相同的顶级域名和一级域名。将域名反转排序，则相似度越高的域名会被归类到越靠近的位置。<br>输入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rev url.txt | sort | rev</span><br></pre></td></tr></table></figure>

<p>输出为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">weibo.com</span><br><span class="line">tieba.baidu.com</span><br><span class="line">img.baidu.com</span><br><span class="line">www.baidu.com</span><br><span class="line">blog.sina.com.cn</span><br></pre></td></tr></table></figure>

<p>可见，百度的相关站点都被归类到了相邻的三行，达到了排序的目的。<br>其中，<code>sort</code> 命令用于排序，最后一个 <code>rev</code> 命令用于将反转的网址还原。</p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux netstat 命令</title>
    <url>/os/linux/commands/netstat/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>netstat 是一款常用的链接分析工具。</p>
<a id="more"></a>

<p>在 netstat 的 manpage 里，有一段话：</p>
<pre><code>NOTE
This program is obsolete.  Replacement for netstat is ss.  Replacement for netstat -r is ip route.   Replacement  for
netstat -i is ip -s link.  Replacement for netstat -g is ip maddr.</code></pre><p>意思是 netstat 已经过时了，替代的命令是 ss。</p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ss 命令</title>
    <url>/os/linux/commands/ss/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>ss是一个常用的链接分析工具，代表 socket statistics。ss 比 netstat 更高效。</p>
<a id="more"></a>

<p>在 netstat 的 manpage 里，有一段话：</p>
<pre><code>NOTE
This program is obsolete.  Replacement for netstat is ss.  Replacement for netstat -r is ip route.   Replacement  for
netstat -i is ip -s link.  Replacement for netstat -g is ip maddr.</code></pre><p>意思是 netstat 已经过时了，替代的命令是 ss。<br>然而，netstat 仍然是很重要的，因为 Mac 上并不自带 ss 命令。</p>
<p>基本用法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ss [options] [FILTER]</span><br></pre></td></tr></table></figure>

<h3 id="二、常用选项"><a href="#二、常用选项" class="headerlink" title="二、常用选项"></a>二、常用选项</h3><p>请参考 manpage</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">man ss</span><br></pre></td></tr></table></figure>

<h3 id="三、常见用法"><a href="#三、常见用法" class="headerlink" title="三、常见用法"></a>三、常见用法</h3><h4 id="1-列出所有建立的链接-List-Established-Connections"><a href="#1-列出所有建立的链接-List-Established-Connections" class="headerlink" title="1. 列出所有建立的链接 | List Established Connections"></a>1. 列出所有建立的链接 | List Established Connections</h4><p>不带任何选项的ss命令将列出本机上所有建立的（非监听）链接。</p>
<pre><code>[root@centos7 ~]# ss | head -n 5
Netid  State      Recv-Q Send-Q Local Address:Port      Peer Address:Port
u_str  ESTAB      0      0       * 23740                * 23739
u_str  ESTAB      0      0       * 23707                * 23706
u_str  ESTAB      0      0       * 87021                * 88383
u_str  ESTAB      0      0       * 17056                * 17112</code></pre><h4 id="2-显示监听端口-Show-Listening-Sockets"><a href="#2-显示监听端口-Show-Listening-Sockets" class="headerlink" title="2. 显示监听端口 | Show Listening Sockets"></a>2. 显示监听端口 | Show Listening Sockets</h4><p>加上 <code>-l</code> 参数，能显示出处于监听状态的 socket</p>
<pre><code>[root@centos7 ~]# ss -lt
State       Recv-Q Send-Q  Local Address:Port                Peer Address:Port
LISTEN      0      2                   *:kerberos-adm        *:*
LISTEN      0      128                 *:sunrpc              *:*
LISTEN      0      5                   *:kpasswd             *:*
LISTEN      0      10       192.168.1.14:domain              *:*
LISTEN      0      10          127.0.0.1:domain              *:*
LISTEN      0      5       192.168.122.1:domain              *:*
LISTEN      0      128                 *:ssh                 *:*</code></pre><p>在上面这个例子中，同时加了 <code>-t</code> 选项，这样只会列出 TCP 链接。</p>
<h4 id="3-Show-Processes-显示进程"><a href="#3-Show-Processes-显示进程" class="headerlink" title="3. Show Processes | 显示进程"></a>3. Show Processes | 显示进程</h4><p>加上 <code>-p</code> 参数，能显示出相应的进程或 pid</p>
<pre><code>[root@centos7 ~]# ss -pl
Netid  State      Recv-Q Send-Q Local Address:Port     Peer Address:Port
tcp    LISTEN     0      128    :::http                :::*                 users:((&quot;httpd&quot;,pid=10522,fd=4),(&quot;httpd&quot;,pid=10521,fd=4),(&quot;httpd&quot;,pid=10520,fd=4),(&quot;httpd&quot;,pid=10519,fd=4),(&quot;httpd&quot;,pid=10518,fd=4),(&quot;httpd&quot;,pid=10516,fd=4))</code></pre><h4 id="4-不解析服务名-Don’t-Resolve-Service-Names"><a href="#4-不解析服务名-Don’t-Resolve-Service-Names" class="headerlink" title="4. 不解析服务名 | Don’t Resolve Service Names"></a>4. 不解析服务名 | Don’t Resolve Service Names</h4><p>默认情况下，ss 会将端口解析为服务名。如下所示：</p>
<pre><code>[root@centos7 ~]# ss
Netid  State      Recv-Q Send-Q Local Address:Port    Peer Address:Port
tcp    ESTAB      0      64     192.168.1.14:ssh      192.168.1.191:57091</code></pre><p>但是，如果我们使用 <code>-n</code> 选项，ss 就不会解析服务名，而是将端口显示出来。如下所示：</p>
<pre><code>[root@centos7 ~]# ss -n
Netid  State      Recv-Q Send-Q Local Address:Port    Peer Address:Port
tcp    ESTAB      0      0      192.168.1.14:22       192.168.1.191:57091</code></pre><p>易见，现在显示的是 :22 而不是 :ssh 。感兴趣的话，可以查看 /etc/services 文件，从而了解每个端口对应的服务。</p>
<h4 id="5-解析域名和端口-Resolve-Numeric-Address-Ports"><a href="#5-解析域名和端口-Resolve-Numeric-Address-Ports" class="headerlink" title="5. 解析域名和端口 | Resolve Numeric Address/Ports"></a>5. 解析域名和端口 | Resolve Numeric Address/Ports</h4><p>通过使用 <code>-r</code> 选项，我们可以将 ip 地址和端口 解析为 相应的域名和服务名</p>
<pre><code>[root@centos7 ~]# ss -r
Netid  State      Recv-Q Send-Q Local Address:Port         Peer Address:Port
tcp    ESTAB      0      64     centos7.example.com:ssh    192.168.1.191:57091</code></pre><h4 id="6-只显示-IPv4-端口-IPv4-Sockets"><a href="#6-只显示-IPv4-端口-IPv4-Sockets" class="headerlink" title="6. 只显示 IPv4 端口 | IPv4 Sockets"></a>6. 只显示 IPv4 端口 | IPv4 Sockets</h4><p><code>-4</code> 选项</p>
<pre><code>[root@centos7 ~]# ss -l4
Netid  State      Recv-Q Send-Q     Local Address:Port        Peer Address:Port
udp    UNCONN     0      0              127.0.0.1:323         *:*
udp    UNCONN     0      0          192.168.122.1:domain      *:*
udp    UNCONN     0      0               *%virbr0:bootps      *:*
udp    UNCONN     0      0                      *:bootpc      *:*
tcp    LISTEN     0      128                    *:sunrpc      *:*
tcp    LISTEN     0      5          192.168.122.1:domain      *:*
tcp    LISTEN     0      128                    *:ssh         *:*
tcp    LISTEN     0      128            127.0.0.1:ipp         *:*
tcp    LISTEN     0      100            127.0.0.1:smtp        *:*</code></pre><h4 id="7-只显示-IPv6-端口-IPv4-Sockets"><a href="#7-只显示-IPv6-端口-IPv4-Sockets" class="headerlink" title="7. 只显示 IPv6 端口 | IPv4 Sockets"></a>7. 只显示 IPv6 端口 | IPv4 Sockets</h4><p><code>-6</code> 选项</p>
<pre><code>[root@centos7 ~]# ss -l6
Netid  State      Recv-Q Send-Q     Local Address:Port          Peer Address:Port
udp    UNCONN     0      0                     :::ipv6-icmp     :::*
udp    UNCONN     0      0                     :::22834         :::*
udp    UNCONN     0      0                    ::1:323           :::*
tcp    LISTEN     0      128                   :::sunrpc        :::*
tcp    LISTEN     0      128                   :::http          :::*
tcp    LISTEN     0      128                   :::ssh           :::*
tcp    LISTEN     0      128                  ::1:ipp           :::*
tcp    LISTEN     0      100                  ::1:smtp          :::*</code></pre><h4 id="8-只显示-TCP-链接-TCP-Only"><a href="#8-只显示-TCP-链接-TCP-Only" class="headerlink" title="8. 只显示 TCP 链接 | TCP Only"></a>8. 只显示 TCP 链接 | TCP Only</h4><p><code>-t</code> 选项</p>
<pre><code>[root@centos7 ~]# ss -lt
State      Recv-Q Send-Q      Local Address:Port       Peer Address:Port
LISTEN     0      128                     *:sunrpc     *:*
LISTEN     0      5           192.168.122.1:domain     *:*
LISTEN     0      128                     *:ssh        *:*
LISTEN     0      128             127.0.0.1:ipp        *:*
LISTEN     0      100             127.0.0.1:smtp       *:*
LISTEN     0      128                    :::sunrpc    :::*
LISTEN     0      128                    :::http      :::*
LISTEN     0      128                    :::ssh       :::*
LISTEN     0      128                   ::1:ipp       :::*
LISTEN     0      100                   ::1:smtp      :::*</code></pre><h4 id="9-仅显示-UDP-链接-UDP-Only"><a href="#9-仅显示-UDP-链接-UDP-Only" class="headerlink" title="9. 仅显示 UDP 链接 | UDP Only"></a>9. 仅显示 UDP 链接 | UDP Only</h4><p><code>-u</code> 选项<br>需要注意的是，UDP 是个无连接传输协议，仅使用 <code>-u</code> 选项是没有结果的。可以和 <code>-a</code> 或 <code>-l</code> 选项结合使用。</p>
<pre><code>[root@centos7 ~]# ss -ul
State       Recv-Q Send-Q  Local Address:Port       Peer Address:Port
UNCONN      0      0                   *:mdns       *:*
UNCONN      0      0                   *:kpasswd    *:*
UNCONN      0      0                   *:839        *:*
UNCONN      0      0                   *:36812      *:*
UNCONN      0      0       192.168.122.1:domain     *:*
UNCONN      0      0        192.168.1.14:domain     *:*</code></pre><h4 id="10-仅显示-Unix-Sockets-Unix-Sockets"><a href="#10-仅显示-Unix-Sockets-Unix-Sockets" class="headerlink" title="10. 仅显示 Unix Sockets | Unix Sockets"></a>10. 仅显示 Unix Sockets | Unix Sockets</h4><p><code>-x</code> 选项</p>
<pre><code>[root@centos7 ~]# ss -x
Netid  State      Recv-Q Send-Q Local Address:Port           Peer Address:Port
u_str  ESTAB      0      0      @/tmp/.X11-unix/X0 27818     * 27817
u_str  ESTAB      0      0      @/tmp/.X11-unix/X0 26656     * 26655
u_str  ESTAB      0      0       * 28344                     * 26607
u_str  ESTAB      0      0       * 24704                     * 24705
u_str  ESTAB      0      0      @/tmp/.X11-unix/X0 25195     * 24086
u_str  ESTAB      0      0      @/tmp/dbus-CRqRiw6V 28388    * 28693</code></pre><h4 id="11-显示所有信息-Display-All-Information"><a href="#11-显示所有信息-Display-All-Information" class="headerlink" title="11. 显示所有信息 | Display All Information"></a>11. 显示所有信息 | Display All Information</h4><p><code>-a</code> 选项</p>
<pre><code>[root@centos7 ~]# ss -u
Recv-Q Send-Q       Local Address:Port           Peer Address:Port
0      0             192.168.1.14:56658          129.250.35.251:ntp

[root@centos7 ~]# ss -ua
State       Recv-Q Send-Q  Local Address:Port           Peer Address:Port
UNCONN      0      0                   *:mdns           *:*
UNCONN      0      0           127.0.0.1:323            *:*
ESTAB       0      0        192.168.1.14:56658          129.250.35.251:ntp
UNCONN      0      0                   *:21014          *:*
UNCONN      0      0                   *:60009          *:*
UNCONN      0      0       192.168.122.1:domain         *:*
UNCONN      0      0            *%virbr0:bootps         *:*
UNCONN      0      0                   *:bootpc         *:*
UNCONN      0      0                 ::1:323           :::*
UNCONN      0      0                  :::43209         :::*</code></pre><h4 id="Example-显示监听TCP端口22的进程信息"><a href="#Example-显示监听TCP端口22的进程信息" class="headerlink" title="Example. 显示监听TCP端口22的进程信息"></a>Example. 显示监听TCP端口22的进程信息</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ss -lntpd | grep :22</span><br></pre></td></tr></table></figure>

<h3 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h3><p><a href="https://www.rootusers.com/21-ss-command-examples-in-linux/" target="_blank" rel="noopener">https://www.rootusers.com/21-ss-command-examples-in-linux/</a><br><a href="https://www.linux.com/learn/intro-to-linux/2017/7/introduction-ss-command" target="_blank" rel="noopener">https://www.linux.com/learn/intro-to-linux/2017/7/introduction-ss-command</a><br><a href="https://www.howtoforge.com/linux-ss-command/" target="_blank" rel="noopener">https://www.howtoforge.com/linux-ss-command/</a><br><a href="https://www.cnblogs.com/peida/archive/2013/03/11/2953420.html" target="_blank" rel="noopener">https://www.cnblogs.com/peida/archive/2013/03/11/2953420.html</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux sleep 命令</title>
    <url>/os/linux/commands/sleep/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>暂停一定的时间。</p>
<a id="more"></a>

<h3 id="二、参数"><a href="#二、参数" class="headerlink" title="二、参数"></a>二、参数</h3><p>POSIX 与 GNU 的实现略有不同。两者都支持的用法是：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sleep [number_of_seconds]</span><br></pre></td></tr></table></figure>

<h3 id="三、常见用法"><a href="#三、常见用法" class="headerlink" title="三、常见用法"></a>三、常见用法</h3><p>通常，部署时关闭应用不会立刻退出；如果原进程还没彻底退出，就启动了新进程，可能出现无法获取端口的情况。为了解决这种问题，可以在旧进程关闭和新进程启动之间等待一段时间。比如，暂停10秒，可以写：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sleep 10</span><br></pre></td></tr></table></figure>

<h3 id="四、常见问题"><a href="#四、常见问题" class="headerlink" title="四、常见问题"></a>四、常见问题</h3><h3 id="五、参考链接"><a href="#五、参考链接" class="headerlink" title="五、参考链接"></a>五、参考链接</h3><ul>
<li><a href="http://man7.org/linux/man-pages/man1/sleep.1.html" target="_blank" rel="noopener">http://man7.org/linux/man-pages/man1/sleep.1.html</a></li>
<li><a href="https://linux.die.net/man/1/sleep" target="_blank" rel="noopener">https://linux.die.net/man/1/sleep</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux grep 命令</title>
    <url>/os/linux/commands/grep/</url>
    <content><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>grep 是一个常用的文本搜索工具。</p>
<a id="more"></a>

<h3 id="二、常用选项"><a href="#二、常用选项" class="headerlink" title="二、常用选项"></a>二、常用选项</h3><h4 id="反选"><a href="#反选" class="headerlink" title="反选"></a>反选</h4><p><code>-v</code> 选项用于反向选择不匹配的所有行</p>
<p>从 file 中选择不包含 “abc” 的行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grep -v &quot;abc&quot; file</span><br></pre></td></tr></table></figure>

<h4 id="显示前后的几行"><a href="#显示前后的几行" class="headerlink" title="显示前后的几行"></a>显示前后的几行</h4><p><code>-A</code> <code>-B</code> <code>-C</code></p>
<h4 id="文件或目录选项"><a href="#文件或目录选项" class="headerlink" title="文件或目录选项"></a>文件或目录选项</h4><p><code>-a</code> 是 <code>--text</code> 选项的简写，等价于 <code>--binary-files=text</code>，用于把二进制文件当做文本处理。</p>
<p>该选项在处理<code>.gz</code>压缩的日志时非常有用。不搭配<code>-a</code>参数的<code>zgrep</code>并不会输出匹配行的文本。而是显示为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Binary file (standard input) matches</span><br></pre></td></tr></table></figure>

<p>因此，在使用 zgrep 查询压缩的日志时，通常搭配 <code>-a</code> 参数，以获得和 <code>grep</code> 查询未压缩日志相同的体验。</p>
<h3 id="三、zgrep"><a href="#三、zgrep" class="headerlink" title="三、zgrep"></a>三、zgrep</h3><p>zgrep 是用于在压缩文件中搜索文本的工具。用法与 grep 相同。zgrep 通常与 <code>-a</code> 参数一起使用。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">zgrep -a &quot;key_to_match&quot; file.log.gz</span><br></pre></td></tr></table></figure>

<h3 id="四、参考链接"><a href="#四、参考链接" class="headerlink" title="四、参考链接"></a>四、参考链接</h3><ul>
<li>grep man page: <a href="https://linux.die.net/man/1/grep" target="_blank" rel="noopener">https://linux.die.net/man/1/grep</a></li>
<li>zgrep man page: <a href="https://linux.die.net/man/1/zgrep" target="_blank" rel="noopener">https://linux.die.net/man/1/zgrep</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux sed 命令</title>
    <url>/os/linux/commands/sed/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><a id="more"></a>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><h4 id="字符串替换"><a href="#字符串替换" class="headerlink" title="字符串替换"></a>字符串替换</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed <span class="string">'s/原字符串/新字符串/'</span> file &gt; new_file      <span class="comment"># 替换第一处“原字符串”</span></span><br><span class="line">sed <span class="string">'s/原字符串/新字符串/g'</span> file &gt; new_file     <span class="comment"># 替换所有的“原字符串”</span></span><br></pre></td></tr></table></figure>

<h4 id="删除日志的部分行"><a href="#删除日志的部分行" class="headerlink" title="删除日志的部分行"></a>删除日志的部分行</h4><p>例如，删除 <code>stdout.log</code> 的1到42行。命令如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sed -i 1,42d stdout.log</span><br></pre></td></tr></table></figure>

<p><code>-i</code> 参数标识原地修改。该操作非常费时，线上慎用。大文件请勿使用该方式，处理很慢，且CPU占用较高。</p>
<p>另一种替代方法为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ex -s -c &#39;1d2|x&#39; stdout.log</span><br></pre></td></tr></table></figure>

<p>该指令调用 vim 对文件进行更改，线上慎用，因为 vim 会把整个文件都加载到内存里。</p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="i-参数在-MacOSX-和-Linux-上的不同"><a href="#i-参数在-MacOSX-和-Linux-上的不同" class="headerlink" title="-i 参数在 MacOSX 和 Linux 上的不同"></a>-i 参数在 MacOSX 和 Linux 上的不同</h4><p>如下命令在 MacOSX上报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed -i 's/原字符串/新字符串/g' file   # 会报如下错误</span><br><span class="line"><span class="meta">#</span><span class="bash">&gt; sed: 1: <span class="string">"test"</span>: undefined label ...</span></span><br></pre></td></tr></table></figure>

<p>原因在于 BSD 和 GNU 的实现不同，-i 参数不是POSIX标准的一部分，建议避免使用。可以这么改：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed 's/foo/bar/' file &gt; tmp &amp;&amp; mv tmp file</span><br></pre></td></tr></table></figure>

<h5 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h5><ul>
<li><a href="https://stackoverflow.com/questions/29078299/sed-on-linux-and-macos-in-makefile" target="_blank" rel="noopener">https://stackoverflow.com/questions/29078299/sed-on-linux-and-macos-in-makefile</a></li>
</ul>
<h4 id="替换斜杠"><a href="#替换斜杠" class="headerlink" title="替换斜杠"></a>替换斜杠</h4><p>紧跟在s后面的字符被当做分隔符使用，如果待替换或替换后的字符串包含斜杠的话，可以使用斜杠之外的字符当做分隔符。当然，也可以考虑使用转义。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sed 's#http://localhost/#http://127.0.0.1/#g'         # 将“#”当做分隔符</span><br><span class="line">sed 's/http:\/\/localhost\//http:\/\/127.0.0.1\//g'   # 将 "/" 转义，写成“\/”</span><br></pre></td></tr></table></figure>

<h5 id="参考链接-1"><a href="#参考链接-1" class="headerlink" title="参考链接"></a>参考链接</h5><ul>
<li><a href="https://stackoverflow.com/questions/16790793/how-to-replace-strings-containing-slashes-with-sed" target="_blank" rel="noopener">https://stackoverflow.com/questions/16790793/how-to-replace-strings-containing-slashes-with-sed</a></li>
<li><a href="https://askubuntu.com/questions/410196/remove-first-n-lines-of-a-large-text-file" target="_blank" rel="noopener">https://askubuntu.com/questions/410196/remove-first-n-lines-of-a-large-text-file</a></li>
<li>sed修炼系列(四)：sed中的疑难杂症：<a href="https://www.cnblogs.com/f-ck-need-u/p/7499309.html" target="_blank" rel="noopener">https://www.cnblogs.com/f-ck-need-u/p/7499309.html</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux ssh 命令</title>
    <url>/os/linux/commands/ssh/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>SSH 是 <code>S</code>ecure <code>Sh</code>ell 的缩写。是访问远程Linux/Unix机器最常使用的方法。</p>
<a id="more"></a>

<h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><h4 id="使用密码登录"><a href="#使用密码登录" class="headerlink" title="使用密码登录"></a>使用密码登录</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh username@hostname_or_ip</span><br></pre></td></tr></table></figure>

<h4 id="使用公钥登录机器"><a href="#使用公钥登录机器" class="headerlink" title="使用公钥登录机器"></a>使用公钥登录机器</h4><ol>
<li>生成公钥</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>将公钥添加到服务器</li>
</ol>
<p>有一个简单的命令<code>ssh-copy-id</code>可以完成这个工作，用法如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-copy-id username@hostname_or_ip</span><br></pre></td></tr></table></figure>

<p>当然，你可以手动将公钥（id_rsa.pub文件里的内容），复制粘贴到服务器的 ~/.ssh/authorized_keys 文件中。起到的效果和<code>ssh-copy-id</code>命令相同。</p>
<h4 id="长连接与连接复用"><a href="#长连接与连接复用" class="headerlink" title="长连接与连接复用"></a>长连接与连接复用</h4><p>在 ~/.ssh/config 文件中加入如下内容</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line">    ControlPersist yes</span><br><span class="line">    ControlPersist 8h</span><br><span class="line">    ControlMaster auto</span><br><span class="line">    ControlPath ~&#x2F;.ssh&#x2F;%r@%h-%p</span><br><span class="line">    Compression yes</span><br><span class="line">    ServerAliveInterval 60</span><br><span class="line">    ServerAliveCountMax 600</span><br><span class="line"></span><br><span class="line"># gitlab</span><br><span class="line">Host gitlab.com</span><br><span class="line">    HostName gitlab.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~&#x2F;.ssh&#x2F;gitlab_id-rsa</span><br><span class="line"># github</span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~&#x2F;.ssh&#x2F;github_id-rsa</span><br></pre></td></tr></table></figure>

<h4 id="测试-ssh-链接"><a href="#测试-ssh-链接" class="headerlink" title="测试 ssh 链接"></a>测试 ssh 链接</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com     <span class="comment"># 测试到GitHub的ssh连接是否成功</span></span><br><span class="line">ssh -v git@github.com     <span class="comment"># 输出调试信息</span></span><br></pre></td></tr></table></figure>

<img src="/os/linux/commands/ssh/ssh-T.png" class="">

<img src="/os/linux/commands/ssh/ssh-v.png" class="">

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="ssh-使用密码的自动登录"><a href="#ssh-使用密码的自动登录" class="headerlink" title="ssh 使用密码的自动登录"></a>ssh 使用密码的自动登录</h4><p><a href="https://serverfault.com/questions/241588/how-to-automate-ssh-login-with-password" target="_blank" rel="noopener">https://serverfault.com/questions/241588/how-to-automate-ssh-login-with-password</a></p>
<h4 id="机器批量操作"><a href="#机器批量操作" class="headerlink" title="机器批量操作"></a>机器批量操作</h4><ul>
<li>脚本中通过 for 循环调用 ssh</li>
<li>ClusterSSH</li>
<li>dsh</li>
</ul>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>Linux服务安全之SSH密码防暴力破解篇：<a href="http://www.21yunwei.com/archives/662" target="_blank" rel="noopener">http://www.21yunwei.com/archives/662</a><br><a href="https://www.netfort.gr.jp/~dancer/software/dsh.html.en" target="_blank" rel="noopener">https://www.netfort.gr.jp/~dancer/software/dsh.html.en</a><br><a href="https://github.com/fishjam/dsh" target="_blank" rel="noopener">https://github.com/fishjam/dsh</a></p>
]]></content>
      <categories>
        <category>os</category>
        <category>linux</category>
        <category>commands</category>
      </categories>
      <tags>
        <tag>terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Homebrew</title>
    <url>/os/Mac/Homebrew/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Mac平台上的包管理器，安装方法见官网，作用和Ubuntu的apt、CentOS的yum类似，使用方法也类似。</p>
<a id="more"></a>

<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul>
<li><p>查看帮助信息</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew help           # 帮助信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装软件</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew search 关键字    # 搜索软件</span><br><span class="line">brew install 软件名   # 安装软件</span><br><span class="line">brew info 软件名      # 查看软件信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>管理软件</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew services list            # 列出安装的所有服务</span><br><span class="line">brew services restart nginx   # 重启 nginx</span><br><span class="line">brew services start nginx     # 启动 nginx</span><br><span class="line">brew services stop nginx      # 停止 nginx</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="常用套件"><a href="#常用套件" class="headerlink" title="常用套件"></a>常用套件</h3><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># To install redis:</span></span><br><span class="line">brew install redis</span><br><span class="line"><span class="comment"># After installation,</span></span><br><span class="line"><span class="comment"># To have launchd start redis now and restart at login:</span></span><br><span class="line">brew services start redis</span><br><span class="line"><span class="comment"># Or, if you don't want/need a background service you can just run:</span></span><br><span class="line">redis-server /usr/<span class="built_in">local</span>/etc/redis.conf</span><br></pre></td></tr></table></figure>

<h4 id="Eclipse"><a href="#Eclipse" class="headerlink" title="Eclipse"></a>Eclipse</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew cask search eclipse-ide</span><br><span class="line">brew cask info eclipse-ide</span><br><span class="line">brew cask install eclipse-ide</span><br></pre></td></tr></table></figure>

<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h4><p>推荐使用 中科大 或 清华 的镜像服务，在大陆可以获得更好的下载速度。<br><a href="https://mirrors.ustc.edu.cn/help/brew.git.html" target="_blank" rel="noopener">https://mirrors.ustc.edu.cn/help/brew.git.html</a><br><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/</a><br><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew-bottles/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew-bottles/</a></p>
<h4 id="下载目录"><a href="#下载目录" class="headerlink" title="下载目录"></a>下载目录</h4><p>Homebrew Cask 的下载目录：<br><code>~/Library/Caches/Homebrew/Cask</code></p>
<h4 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h4><p><a href="https://stackoverflow.com/questions/53828891/dyld-library-not-loaded-usr-local-opt-icu4c-lib-libicui18n-62-dylib-error-run" target="_blank" rel="noopener">https://stackoverflow.com/questions/53828891/dyld-library-not-loaded-usr-local-opt-icu4c-lib-libicui18n-62-dylib-error-run</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://brew.sh/index_zh-cn" target="_blank" rel="noopener" title="offical website">https://brew.sh/index_zh-cn</a></li>
<li>Homebrew 镜像：<a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/</a></li>
</ul>
]]></content>
      <categories>
        <category>os</category>
        <category>mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac OS X 快捷键</title>
    <url>/os/Mac/shortcuts/</url>
    <content><![CDATA[<h4 id="参考链接："><a href="#参考链接：" class="headerlink" title="参考链接："></a>参考链接：</h4><p><a href="https://www.zhihu.com/question/20021861" target="_blank" rel="noopener">https://www.zhihu.com/question/20021861</a></p>
<p>据说Emacs的快捷键可以用，暂未考证。</p>
<p>以下内容在10.12.6中可用。</p>
<h4 id="一些按键的说明"><a href="#一些按键的说明" class="headerlink" title="一些按键的说明"></a>一些按键的说明</h4><p>Caps Lock 键，短按是切换输入法，长按是大写锁定，大写锁定下短按默认回到中文输入法。</p>
<p>按住 Control 键的同时点击，等价于右击。</p>
<h2 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h2><ul>
<li>Ctrl + A : Home</li>
<li>Command + ← ：Home</li>
<li>Command + → ：End</li>
<li>Fn + ↑ : 向上翻页</li>
<li>Fn + ↓ : 向下翻页</li>
<li>Fn + ← : 页面最开始</li>
<li>Fn + → : 页面最后</li>
<li>Command + A ：全选</li>
<li>Command + C ：复制</li>
<li>Command + V ：粘贴</li>
<li>Command + F ：查找</li>
<li>Command + S ：保存</li>
<li>Command + , ：设置</li>
</ul>
<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><ul>
<li>焦点移动到地址栏：Command + L</li>
<li>新建标签页：Command + T</li>
<li>关闭当前标签页：Command + W</li>
<li>向右切换标签页：Ctrl + Tab</li>
<li>向左切换标签页：Ctrl + Shift + Tab</li>
</ul>
<h2 id="finder"><a href="#finder" class="headerlink" title="finder"></a>finder</h2><ul>
<li>Command + Shift + .  : 显示隐藏文件</li>
<li>Command + 方向键向上 : 返回父目录</li>
<li>Command + 方向键向下 : 进入子目录</li>
<li>Command + [ : 后退</li>
<li>Command + ] : 前进</li>
</ul>
<h1 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h1><ul>
<li>Command + Control + Q : 锁定系统</li>
<li>Command + Option + Esc : 强制退出应用程序</li>
</ul>
<h1 id="多桌面"><a href="#多桌面" class="headerlink" title="多桌面"></a>多桌面</h1><img src="/os/Mac/shortcuts/multiple-desktop-shortcuts.png" class="">
]]></content>
      <categories>
        <category>os</category>
        <category>mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Git常见问题及解决方案</title>
    <url>/devops/git/common-solutions-for-git/</url>
    <content><![CDATA[<h2 id="01-如何将本地项目上传到git"><a href="#01-如何将本地项目上传到git" class="headerlink" title="01. 如何将本地项目上传到git"></a>01. <a href="https://www.cnblogs.com/eedc/p/6168430.html" target="_blank" rel="noopener">如何将本地项目上传到git</a></h2><ol>
<li>（先进入项目文件夹）通过命令<code>git init</code>把这个目录变成git可以管理的仓库</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>把文件添加到版本库中，使用命令<code>git add .</code>添加到暂存区里面去，不要忘记后面的小数点“.”，意为添加文件夹下的所有文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>用命令<code>git commit</code>告诉Git，把文件提交到仓库。引号内为提交说明</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &#39;first commit&#39;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>关联到远程仓库</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add origin 你的远程仓库地址    # eg. git remote add origin https:&#x2F;&#x2F;github.com&#x2F;sample&#x2F;sample.git</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>获取远程仓库与本地同步合并（如果远程仓库不为空必须做这一步，否则后面的提交会失败）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>把本地仓库的内容推送到远程，使用<code>git push</code>命令，实际上是把当前分支master推送到远程。执行此命令后会要求输入用户名、密码，验证通过后即开始上传。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>状态查询命令</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>


<h2 id="02-配置SSH公钥"><a href="#02-配置SSH公钥" class="headerlink" title="02. 配置SSH公钥"></a>02. <a href="https://coding.net/help/doc/git/ssh-key.html" target="_blank" rel="noopener">配置SSH公钥</a></h2><p><a href="https://confluence.atlassian.com/bitbucket/set-up-ssh-for-git-728138079.html" target="_blank" rel="noopener">参考链接</a></p>
<ol>
<li>生成公钥</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在服务器上添加公钥</li>
</ol>
<h2 id="03-提交到多个远程仓库"><a href="#03-提交到多个远程仓库" class="headerlink" title="03. 提交到多个远程仓库"></a>03. <a href="http://blog.csdn.net/isea533/article/details/41382699" target="_blank" rel="noopener">提交到多个远程仓库</a></h2><ul>
<li><a href="https://stackoverflow.com/questions/5785549/able-to-push-to-all-Git-remotes-with-the-one-command" target="_blank" rel="noopener">https://stackoverflow.com/questions/5785549/able-to-push-to-all-Git-remotes-with-the-one-command</a></li>
<li><a href="https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations" target="_blank" rel="noopener">https://stackoverflow.com/questions/849308/pull-push-from-multiple-remote-locations</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote set-url --push --add origin https:&#x2F;&#x2F;exampleuser@example.com&#x2F;path&#x2F;to&#x2F;repo1</span><br></pre></td></tr></table></figure>

<p>有冲突时，“！！谨慎！！”使用如下命令：（强制覆盖远程仓库）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -f origin master</span><br></pre></td></tr></table></figure>


<h2 id="04-使用多个SSH-key"><a href="#04-使用多个SSH-key" class="headerlink" title="04. 使用多个SSH-key"></a>04. <a href="https://blog.csdn.net/birdben/article/details/51824788" target="_blank" rel="noopener">使用多个SSH-key</a></h2><p>生成多对密钥，并配置git在特定情况下使用不同的密钥即可</p>
<ol>
<li>生成两对密钥</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot; -f ~&#x2F;.ssh&#x2F;github_id-rsa</span><br><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot; -f ~&#x2F;.ssh&#x2F;gitLab_id-rsa</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在~/.ssh目录下添加config配置文件用于区分多个SSH-Key，文件内容如下</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># gitlab</span><br><span class="line">Host gitlab.com</span><br><span class="line">    HostName gitlab.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~&#x2F;.ssh&#x2F;gitlab_id-rsa</span><br><span class="line"># github</span><br><span class="line">Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~&#x2F;.ssh&#x2F;github_id-rsa</span><br></pre></td></tr></table></figure>

<p>想要了解更多，可以搜索 ssh config</p>
<ul>
<li><a href="https://stackoverflow.com/questions/2419566/best-way-to-use-multiple-ssh-private-keys-on-one-client" target="_blank" rel="noopener">https://stackoverflow.com/questions/2419566/best-way-to-use-multiple-ssh-private-keys-on-one-client</a></li>
</ul>
<h2 id="05-下载特定分支的代码库"><a href="#05-下载特定分支的代码库" class="headerlink" title="05. 下载特定分支的代码库"></a>05. 下载特定分支的代码库</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone -b 分支名称 仓库地址</span><br></pre></td></tr></table></figure>


<h2 id="06-放弃所有更改，强制覆盖本地代码"><a href="#06-放弃所有更改，强制覆盖本地代码" class="headerlink" title="06. 放弃所有更改，强制覆盖本地代码"></a>06. 放弃所有更改，强制覆盖本地代码</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin&#x2F;master</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>


<h2 id="07-将指定文件恢复到特定版本"><a href="#07-将指定文件恢复到特定版本" class="headerlink" title="07. 将指定文件恢复到特定版本"></a>07. <a href="https://blog.csdn.net/developer_biao/article/details/43971037" target="_blank" rel="noopener">将指定文件恢复到特定版本</a></h2><ol>
<li><p>在命令行中输入 <code>git log src/main/main.c</code> 得到该文件的commit 历史。</p>
</li>
<li><p>复制需要回退版本的hash，在此假设我们回退到 d98a0f565804ba639ba46d6e4295d4f787ff2949 ,则复制该序列即可</p>
</li>
<li><p>checkout 对应版本。命令为：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout hash值 文件名    # 例如: git checkout d98a0f565804ba639ba46d6e4295d4f787ff2949 src&#x2F;main&#x2F;main.c</span><br></pre></td></tr></table></figure>

<h2 id="08-遇到因为冲突导致无法push无法pull的情况"><a href="#08-遇到因为冲突导致无法push无法pull的情况" class="headerlink" title="08. 遇到因为冲突导致无法push无法pull的情况"></a>08. 遇到因为冲突导致无法push无法pull的情况</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash         # 暂存修改</span><br><span class="line">git pull          # 拉取远程仓库最新代码</span><br><span class="line">git stash pop     # 恢复修改，可能需要处理合并冲突</span><br></pre></td></tr></table></figure>

<h2 id="09-冲突解决"><a href="#09-冲突解决" class="headerlink" title="09. 冲突解决"></a>09. 冲突解决</h2><p><a href="https://help.github.com/en/articles/resolving-a-merge-conflict-using-the-command-line" target="_blank" rel="noopener">https://help.github.com/en/articles/resolving-a-merge-conflict-using-the-command-line</a></p>
<h2 id="10-代码回退"><a href="#10-代码回退" class="headerlink" title="10. 代码回退"></a>10. 代码回退</h2><p>Step 1. 本地回退</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git reset --hard HEAD^          回退到上个版本</span><br><span class="line">git reset --hard HEAD~3         回退到前3次提交之前，以此类推，回退到n次提交之前</span><br><span class="line">git reset --hard commit_id      退到&#x2F;进到 指定commit的sha码</span><br></pre></td></tr></table></figure>

<p>Step 2. 强制覆盖远端（！！）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin HEAD --force    覆盖远端仓库</span><br></pre></td></tr></table></figure>

<h2 id="11-统计代码行数"><a href="#11-统计代码行数" class="headerlink" title="11. 统计代码行数"></a>11. 统计代码行数</h2><p>统计项目的历史新增、删除、累积行数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log --pretty&#x3D;tformat: --numstat | awk &#39;&#123; add +&#x3D; $1; subs +&#x3D; $2; loc +&#x3D; $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#39;</span><br></pre></td></tr></table></figure>

<p>统计项目在指定时间段内的新增、删除、累积行数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log --since&#x3D;2019-01-01 --until&#x3D;2019-10-31 --pretty&#x3D;tformat: --numstat | awk &#39;&#123; add +&#x3D; $1; subs +&#x3D; $2; loc +&#x3D; $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#39;</span><br></pre></td></tr></table></figure>

<p>统计指定作者的历史新增、删除、累积行数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log --author&#x3D;xxx --pretty&#x3D;tformat: --numstat | awk &#39;&#123; add +&#x3D; $1; subs +&#x3D; $2; loc +&#x3D; $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#39;</span><br></pre></td></tr></table></figure>

<p>Git代码行数统计命令：<a href="https://www.cnblogs.com/supiaopiao/p/10943882.html" target="_blank" rel="noopener">https://www.cnblogs.com/supiaopiao/p/10943882.html</a></p>
<h2 id="12-终端用户在不下载仓库的情况下检查是否拥有读取权限"><a href="#12-终端用户在不下载仓库的情况下检查是否拥有读取权限" class="headerlink" title="12. 终端用户在不下载仓库的情况下检查是否拥有读取权限"></a>12. 终端用户在不下载仓库的情况下检查是否拥有读取权限</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 有权限的情况下列出远端文件，返回值(#?)为0；没有读取权限的情况下没有任何输出，返回值非0</span></span><br><span class="line">git ls-remote repo_url</span><br></pre></td></tr></table></figure>

<h2 id="13"><a href="#13" class="headerlink" title="13."></a>13.</h2>]]></content>
      <categories>
        <category>devops</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git</title>
    <url>/devops/git/git/</url>
    <content><![CDATA[<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Git是一种版本控制软件。</p>
<a id="more"></a>

<h3 id="在线Git仓库"><a href="#在线Git仓库" class="headerlink" title="在线Git仓库"></a>在线Git仓库</h3><ol>
<li><p><a href="https://github.com/" target="_blank" rel="noopener" title="GitHub">GitHub</a>：开源项目用这个，托管静态网站不错。<br> 免费账户现在也可以托管私有项目了，但是私有项目需要付费才能发布GitHub Pages。</p>
</li>
<li><p><a href="https://gitlab.com/" target="_blank" rel="noopener" title="GitLab">GitLab</a>：开源私有都可以用，托管静态网站比GitHub繁琐。<br> GitLab 的 CI 不错。</p>
</li>
<li><p><a href="https://bitbucket.org/" target="_blank" rel="noopener" title="Bitbucket">Bitbucket</a>：私有项目用这个，他家的 SourceTree 体验不错。<br> 在大陆访问很慢。</p>
</li>
<li><p><a href="https://gitee.com/" target="_blank" rel="noopener" title="gitee">gitee</a>：国内的，用来镜像GitHub，加快下载速度。</p>
</li>
</ol>
<h3 id="Git客户端"><a href="#Git客户端" class="headerlink" title="Git客户端"></a>Git客户端</h3><p><a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">SourceTree</a></p>
<ul>
<li>非常好用，很直观。</li>
<li>支持 Windows、Mac</li>
<li><a href="http://blog.csdn.net/collonn/article/details/39259227" target="_blank" rel="noopener">http://blog.csdn.net/collonn/article/details/39259227</a></li>
</ul>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul>
<li><code>git checkout tagName</code> - 回退到指定tag</li>
<li><code>git checkout .</code> - 放弃所有本地修改</li>
<li><code>git checkout hash</code> - 回退到指定提交</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 设置</span><br><span class="line">git config --global user.name &quot;your_name&quot;              # 设置全局用户名，可以被项目中的设置覆盖。</span><br><span class="line">git config --global user.email &quot;your_name@example.com&quot; # 设置全局邮箱地址，可以被项目中的设置覆盖。</span><br></pre></td></tr></table></figure>

<h3 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h3><p><code>.gitignore</code> 文件用于维护一个不需要被git管理的文件及路径列表。当你运行 <code>git status</code> 时，被 <code>.gitignore</code> 过滤的文件不会被显示出来，git也不会扫描这些文件的更改。</p>
<h3 id="Git-子模块"><a href="#Git-子模块" class="headerlink" title="Git 子模块"></a>Git 子模块</h3><p><code>Git 子模块</code>是一种在自己的仓库中包含第三方Git项目的管理技巧。通过使用<code>Git子模块</code>，可以独立管理引入的第三方项目，而不用在当前项目中追踪第三方项目的修改。</p>
<p><a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97#r_git_submodules" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97#r_git_submodules</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li>Git子模块：<a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener">https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97</a></li>
<li>码云镜像站：<a href="https://gitee.com/mirrors" target="_blank" rel="noopener">https://gitee.com/mirrors</a></li>
</ul>
]]></content>
      <categories>
        <category>devops</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
</search>
